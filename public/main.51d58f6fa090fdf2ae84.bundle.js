!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,i){!function(t,e){if(!x[t]||!E[t])return;for(var i in E[t]=!1,e)Object.prototype.hasOwnProperty.call(e,i)&&(_[i]=e[i]);0==--v&&0===y&&C()}(t,i),e&&e(t,i)};var i,n=!0,r="51d58f6fa090fdf2ae84",o=1e4,s={},a=[],h=[];function l(t){var e=I[t];if(!e)return O;var n=function(n){return e.hot.active?(I[n]?-1===I[n].parents.indexOf(t)&&I[n].parents.push(t):(a=[t],i=n),-1===e.children.indexOf(n)&&e.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+t),a=[]),O(n)},r=function(t){return{configurable:!0,enumerable:!0,get:function(){return O[t]},set:function(e){O[t]=e}}};for(var o in O)Object.prototype.hasOwnProperty.call(O,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(t){return"ready"===p&&d("prepare"),y++,O.e(t).then(e,function(t){throw e(),t});function e(){y--,"prepare"===p&&(m[t]||R(t),0===y&&0===v&&C())}},n.t=function(t,e){return 1&e&&(t=n(t)),O.t(t,-2&e)},n}function u(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._acceptedDependencies[t[n]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:S,apply:w,status:function(t){if(!t)return p;c.push(t)},addStatusHandler:function(t){c.push(t)},removeStatusHandler:function(t){var e=c.indexOf(t);e>=0&&c.splice(e,1)},data:s[t]};return i=void 0,e}var c=[],p="idle";function d(t){p=t;for(var e=0;e<c.length;e++)c[e].call(null,t)}var f,_,g,v=0,y=0,m={},E={},x={};function T(t){return+t+""===t?+t:t}function S(t){if("idle"!==p)throw new Error("check() is only allowed in idle status");return n=t,d("check"),(e=o,e=e||1e4,new Promise(function(t,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var n=new XMLHttpRequest,o=O.p+""+r+".hot-update.json";n.open("GET",o,!0),n.timeout=e,n.send(null)}catch(t){return i(t)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)i(new Error("Manifest request to "+o+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)i(new Error("Manifest request to "+o+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(t){return void i(t)}t(e)}}})).then(function(t){if(!t)return d("idle"),null;E={},m={},x=t.c,g=t.h,d("prepare");var e=new Promise(function(t,e){f={resolve:t,reject:e}});_={};return R(0),"prepare"===p&&0===y&&0===v&&C(),e});var e}function R(t){x[t]?(E[t]=!0,v++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=O.p+""+t+"."+r+".hot-update.js",document.head.appendChild(e)}(t)):m[t]=!0}function C(){d("ready");var t=f;if(f=null,t)if(n)Promise.resolve().then(function(){return w(n)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in _)Object.prototype.hasOwnProperty.call(_,i)&&e.push(T(i));t.resolve(e)}}function w(e){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var i,n,o,h,l;function u(t){for(var e=[t],i={},n=e.map(function(t){return{chain:[t],id:t}});n.length>0;){var r=n.pop(),o=r.id,s=r.chain;if((h=I[o])&&!h.hot._selfAccepted){if(h.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(h.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var a=0;a<h.parents.length;a++){var l=h.parents[a],u=I[l];if(u){if(u.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([l]),moduleId:o,parentId:l};-1===e.indexOf(l)&&(u.hot._acceptedDependencies[o]?(i[l]||(i[l]=[]),c(i[l],[o])):(delete i[l],e.push(l),n.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];-1===t.indexOf(n)&&t.push(n)}}e=e||{};var f={},v=[],y={},m=function(){console.warn("[HMR] unexpected require("+S.moduleId+") to disposed module")};for(var E in _)if(Object.prototype.hasOwnProperty.call(_,E)){var S;l=T(E);var R=!1,C=!1,w=!1,L="";switch((S=_[E]?u(l):{type:"disposed",moduleId:E}).chain&&(L="\nUpdate propagation: "+S.chain.join(" -> ")),S.type){case"self-declined":e.onDeclined&&e.onDeclined(S),e.ignoreDeclined||(R=new Error("Aborted because of self decline: "+S.moduleId+L));break;case"declined":e.onDeclined&&e.onDeclined(S),e.ignoreDeclined||(R=new Error("Aborted because of declined dependency: "+S.moduleId+" in "+S.parentId+L));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(S),e.ignoreUnaccepted||(R=new Error("Aborted because "+l+" is not accepted"+L));break;case"accepted":e.onAccepted&&e.onAccepted(S),C=!0;break;case"disposed":e.onDisposed&&e.onDisposed(S),w=!0;break;default:throw new Error("Unexception type "+S.type)}if(R)return d("abort"),Promise.reject(R);if(C)for(l in y[l]=_[l],c(v,S.outdatedModules),S.outdatedDependencies)Object.prototype.hasOwnProperty.call(S.outdatedDependencies,l)&&(f[l]||(f[l]=[]),c(f[l],S.outdatedDependencies[l]));w&&(c(v,[S.moduleId]),y[l]=m)}var M,b=[];for(n=0;n<v.length;n++)l=v[n],I[l]&&I[l].hot._selfAccepted&&y[l]!==m&&b.push({module:l,errorHandler:I[l].hot._selfAccepted});d("dispose"),Object.keys(x).forEach(function(t){!1===x[t]&&function(t){delete installedChunks[t]}(t)});for(var P,D,A=v.slice();A.length>0;)if(l=A.pop(),h=I[l]){var F={},k=h.hot._disposeHandlers;for(o=0;o<k.length;o++)(i=k[o])(F);for(s[l]=F,h.hot.active=!1,delete I[l],delete f[l],o=0;o<h.children.length;o++){var G=I[h.children[o]];G&&((M=G.parents.indexOf(l))>=0&&G.parents.splice(M,1))}}for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(h=I[l]))for(D=f[l],o=0;o<D.length;o++)P=D[o],(M=h.children.indexOf(P))>=0&&h.children.splice(M,1);for(l in d("apply"),r=g,y)Object.prototype.hasOwnProperty.call(y,l)&&(t[l]=y[l]);var N=null;for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)&&(h=I[l])){D=f[l];var Y=[];for(n=0;n<D.length;n++)if(P=D[n],i=h.hot._acceptedDependencies[P]){if(-1!==Y.indexOf(i))continue;Y.push(i)}for(n=0;n<Y.length;n++){i=Y[n];try{i(D)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:l,dependencyId:D[n],error:t}),e.ignoreErrored||N||(N=t)}}}for(n=0;n<b.length;n++){var j=b[n];l=j.module,a=[l];try{O(l)}catch(t){if("function"==typeof j.errorHandler)try{j.errorHandler(t)}catch(i){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:i,originalError:t}),e.ignoreErrored||N||(N=i),N||(N=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:l,error:t}),e.ignoreErrored||N||(N=t)}}return N?(d("fail"),Promise.reject(N)):(d("idle"),new Promise(function(t){t(v)}))}var I={};function O(e){if(I[e])return I[e].exports;var i=I[e]={i:e,l:!1,exports:{},hot:u(e),parents:(h=a,a=[],h),children:[]};return t[e].call(i.exports,i,i.exports,l(e)),i.l=!0,i.exports}O.m=t,O.c=I,O.d=function(t,e,i){O.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},O.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},O.t=function(t,e){if(1&e&&(t=O(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(O.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)O.d(i,n,function(e){return t[e]}.bind(null,n));return i},O.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return O.d(e,"a",e),e},O.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},O.p="",O.h=function(){return r},l(0)(O.s=0)}({"./node_modules/quickselect/quickselect.js":function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,r,o,s){!function e(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,h=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),p=Math.max(r,Math.floor(n-h*u/a+c)),d=Math.min(o,Math.floor(n+(a-h)*u/a+c));e(i,n,p,d,s)}var f=i[n],_=r,g=o;for(t(i,r,n),s(i[o],f)>0&&t(i,r,o);_<g;){for(t(i,_,g),_++,g--;s(i[_],f)<0;)_++;for(;s(i[g],f)>0;)g--}0===s(i[r],f)?t(i,r,g):t(i,++g,o),g<=n&&(r=g+1),n<=g&&(o=g-1)}}(i,n,r||0,o||i.length-1,s||e)}}()},"./node_modules/rbush/index.js":function(t,e,i){"use strict";t.exports=r,t.exports.default=r;var n=i("./node_modules/quickselect/quickselect.js");function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],h(r,t.leaf?n(o):o);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,r,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,n(t,s,e,i,o),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var r,o,s,a,h=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],f(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],f(t,s=e.leaf?i(o):o)){if(e.leaf||d(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,a=this.data,h=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=u.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;s||a.leaf||!d(a,h)?n?(i++,a=n.children[i],s=!1):a=null:(l.push(a),u.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=_(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=_([])).leaf=!1,r.height=n;var h,l,u,c,p=Math.ceil(o/a),d=p*Math.ceil(Math.sqrt(a));for(g(t,e,i,d,this.compareMinX),h=e;h<=i;h+=d)for(g(t,h,u=Math.min(h+d-1,i),p,this.compareMinY),l=h;l<=u;l+=p)c=Math.min(l+p-1,u),r.children.push(this._build(t,l,c,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,h,l,u,p,d,f;n.push(e),!e.leaf&&n.length-1!==i;){for(u=p=1/0,r=0,o=e.children.length;r<o;r++)h=c(s=e.children[r]),d=t,f=s,(l=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-h)<p?(p=l,u=h<u?h:u,a=s):l===p&&h<u&&(u=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),h(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=_(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,h,l,u,p,d,f,_,g,v,y;for(l=u=1/0,n=e;n<=i-e;n++)r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox),d=r,f=o,_=void 0,g=void 0,v=void 0,y=void 0,_=Math.max(d.minX,f.minX),g=Math.max(d.minY,f.minY),v=Math.min(d.maxX,f.maxX),y=Math.min(d.maxY,f.maxY),s=Math.max(0,v-_)*Math.max(0,y-g),h=c(r)+c(o),s<l?(l=s,p=n,u=h<u?h:u):s===l&&h<u&&(u=h,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,s=this.toBBox,l=a(t,0,e,s),u=a(t,i-e,i,s),c=p(l)+p(u);for(r=e;r<i-e;r++)o=t.children[r],h(l,t.leaf?s(o):o),c+=p(l);for(r=i-e-1;r>=e;r--)o=t.children[r],h(u,t.leaf?s(o):o),c+=p(u);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},"./src/index.ts":function(t,e,i){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}i.r(e);var r=0;function o(t){return t.ol_uid||(t.ol_uid=String(++r))}var s="5.3.3",a=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("latest"===s?s:"v"+s.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),h={ADD:"add",REMOVE:"remove"},l="propertychange",u="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,o=arguments.length;r<o;++r){var s=i[r];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])}return n};function c(t){for(var e in t)delete t[e]}function p(t){var e;for(e in t)return!1;return!e}function d(t,e,i,n){for(var r,o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===i)return n&&(r.deleteIndex=o),r}function f(t,e){var i=_(t);return i?i[e]:void 0}function _(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function g(t,e){var i=f(t,e);if(i){for(var n=0,r=i.length;n<r;++n)t.removeEventListener(e,i[n].boundListener),c(i[n]);i.length=0;var o=_(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function v(t,e,i,n,r){var o=_(t,!0),s=o[e];s||(s=o[e]=[]);var a=d(s,i,n,!1);return a?r||(a.callOnce=!1):(a={bindTo:n,callOnce:!!r,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,n=t.bindTo||t.target;return t.callOnce&&E(t),i.call(n,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function y(t,e,i,n){return v(t,e,i,n,!0)}function m(t,e,i,n){var r=f(t,e);if(r){var o=d(r,i,n,!0);o&&E(o)}}function E(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=f(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&g(t.target,t.type)}c(t)}}var x=function(){this.disposed_=!1};x.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},x.prototype.disposeInternal=function(){};var T=x;function S(){return!0}function R(){return!1}function C(){}var w=function(t){this.propagationStopped,this.type=t,this.target=null};function I(t){t.stopPropagation()}w.prototype.preventDefault=function(){this.propagationStopped=!0},w.prototype.stopPropagation=function(){this.propagationStopped=!0};var O=w,L=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new O(t):t,i=e.type;e.target=this;var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,s=r.length;o<s;++o)if(!1===r[o].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,C);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){!function(t){var e=_(t);if(e)for(var i in e)g(t,i)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=C,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e}(T),M={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};var b=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(M.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=v(this,t[r],e);return n}return v(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=y(this,t[r],e);return n}return y(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)m(this,t[i],e);else m(this,t,e)},e}(L),P=function(t){function e(e,i,n){t.call(this,e),this.key=i,this.oldValue=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),D={};function A(t){return D.hasOwnProperty(t)?D[t]:D[t]="change:"+t}var F=function(t){function e(e){t.call(this),o(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return u({},this.values_)},e.prototype.notify=function(t,e){var i;i=A(t),this.dispatchEvent(new P(i,t,e)),i=l,this.dispatchEvent(new P(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(b),k="length",G=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),N=function(t){function e(e,i){t.call(this);var n=i||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(k)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new G(h.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new G(h.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new G(h.REMOVE,n)),this.dispatchEvent(new G(h.ADD,e))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(k,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new a(58)},e}(F),Y=function(t){function e(e,i,n){t.call(this,e),this.map=i,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),j=function(t){function e(e,i,n,r,o){t.call(this,e,i,o),this.originalEvent=n,this.pixel=i.getEventPixel(n),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Y),X="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",K=-1!==X.indexOf("firefox"),W=-1!==X.indexOf("safari")&&-1==X.indexOf("chrom"),U=-1!==X.indexOf("webkit")&&-1==X.indexOf("edge"),H=-1!==X.indexOf("macintosh"),z=window.devicePixelRatio||1,B=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),Z=(navigator,"ontouchstart"in window),V="PointerEvent"in window,q=!!navigator.msPointerEnabled,J={SINGLECLICK:"singleclick",CLICK:M.CLICK,DBLCLICK:M.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Q=function(t){function e(e,i,n,r,o){t.call(this,e,i,n.originalEvent,r,o),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(j),$={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},tt=function(t,e){this.dispatcher=t,this.mapping_=e};tt.prototype.getEvents=function(){return Object.keys(this.mapping_)},tt.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var et=tt,it=1,nt="mouse";function rt(t){if(!this.isEventSimulatedFromTouch_(t)){it.toString()in this.pointerMap&&this.cancel(t);var e=lt(t,this.dispatcher);this.pointerMap[it.toString()]=t,this.dispatcher.down(e,t)}}function ot(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.move(e,t)}}function st(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[it.toString()];if(e&&e.button===t.button){var i=lt(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function at(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function ht(t){if(!this.isEventSimulatedFromTouch_(t)){var e=lt(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function lt(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=it,i.isPrimary=!0,i.pointerType=nt,i}var ut=function(t){function e(e){var i={mousedown:rt,mousemove:ot,mouseup:st,mouseover:at,mouseout:ht};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,n=t.clientY,r=0,o=e.length,s=void 0;r<o&&(s=e[r]);r++){var a=Math.abs(i-s[0]),h=Math.abs(n-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=lt(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[it.toString()]},e}(et),ct=["","unavailable","touch","pen","mouse"];function pt(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function dt(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function ft(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function _t(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function gt(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function vt(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function yt(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function mt(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var Et=function(t){function e(e){var i={MSPointerDown:pt,MSPointerMove:dt,MSPointerUp:ft,MSPointerOut:_t,MSPointerOver:gt,MSPointerCancel:vt,MSGotPointerCapture:mt,MSLostPointerCapture:yt};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=ct[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(et);function xt(t){this.dispatcher.fireNativeEvent(t)}function Tt(t){this.dispatcher.fireNativeEvent(t)}function St(t){this.dispatcher.fireNativeEvent(t)}function Rt(t){this.dispatcher.fireNativeEvent(t)}function Ct(t){this.dispatcher.fireNativeEvent(t)}function wt(t){this.dispatcher.fireNativeEvent(t)}function It(t){this.dispatcher.fireNativeEvent(t)}function Ot(t){this.dispatcher.fireNativeEvent(t)}var Lt=function(t){function e(e){var i={pointerdown:xt,pointermove:Tt,pointerup:St,pointerout:Rt,pointerover:Ct,pointercancel:wt,gotpointercapture:Ot,lostpointercapture:It};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(et),Mt=!1,bt=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var r=n||{};this.buttons=function(t){var e;if(t.buttons||Mt)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){var i=0;i=t.pressure?t.pressure:e?.5:0;return i}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O);!function(){try{var t=new MouseEvent("click",{buttons:1});Mt=1===t.buttons}catch(t){}}();var Pt=bt;function Dt(t,e){return t>e?1:t<e?-1:0}function At(t,e,i){var n,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(i>0){for(n=1;n<r;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<r;++n)if(t[n]<=e)return n}else for(n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1}function Ft(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function kt(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function Gt(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Nt(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function Yt(t){this.processTouches_(t,this.moveOverOut_)}function jt(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Xt(t){this.processTouches_(t,this.cancelOut_)}var Kt=function(t){function e(e,i){var n={touchstart:Nt,touchmove:Yt,touchend:jt,touchcancel:Xt};t.call(this,e,n),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&it.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),n=i.length;function r(){t.preventDefault()}for(var o=0;o<n;++o){var s=this.touchToPointer_(t,i[o]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,n=0;n<i;n++){if(t[n].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){for(var r=[],o=0;o<n;++o){var s=Number(i[o]),a=this.pointerMap[s];s==it||this.findTouch_(e,s-2)||r.push(a.out)}for(var h=0;h<r.length;++h)this.cancelOut_(t,r[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,n=this.pointerMap[i.pointerId];if(n){var r=n.out,o=n.outTarget;this.dispatcher.move(i,t),r&&o!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=o,r.target=o,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var n=[i.clientX,i.clientY];e.push(n),setTimeout(function(){var t,i,r;i=n,r=(t=e).indexOf(i),r>-1&&t.splice(r,1)},this.dedupTimeout_)}},e}(et),Wt=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Ut=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(V)this.registerSource("native",new Lt(this));else if(q)this.registerSource("ms",new Et(this));else{var t=new ut(this);this.registerSource("mouse",t),Z&&this.registerSource("touch",new Kt(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,n=i.getEvents();n&&(n.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){v(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){m(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},n=0,r=Wt.length;n<r;n++){var o=Wt[n][0];i[o]=t[o]||e[o]||Wt[n][1]}return i},e.prototype.down=function(t,e){this.fireEvent($.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent($.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent($.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent($.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent($.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent($.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent($.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent($.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new Pt(t,i,e)},e.prototype.fireEvent=function(t,e,i){var n=this.makeEvent(t,e,i);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,lt(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(L),Ht=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*z:z,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Ut(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=v(this.pointerEventHandler_,$.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=v(this.pointerEventHandler_,$.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new Q(J.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Q(J.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Q(J.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==J.POINTERUP||e.type==J.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==J.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Q(J.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Q(J.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Ut(document),this.dragListenerKeys_.push(v(this.documentPointerEventHandler_,J.POINTERMOVE,this.handlePointerMove_,this),v(this.documentPointerEventHandler_,J.POINTERUP,this.handlePointerUp_,this),v(this.pointerEventHandler_,J.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Q(J.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Q(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(E(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(E(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(L),zt="postrender",Bt="movestart",Zt="moveend",Vt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},qt="postcompose",Jt="precompose",Qt="render",$t="rendercomplete",te={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};function ee(t,e){if(!t)throw new a(e)}var ie=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};ie.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,c(this.queuedElements_)},ie.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},ie.prototype.enqueue=function(t){ee(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ie.prototype.getCount=function(){return this.elements_.length},ie.prototype.getLeftChildIndex_=function(t){return 2*t+1},ie.prototype.getRightChildIndex_=function(t){return 2*t+2},ie.prototype.getParentIndex_=function(t){return t-1>>1},ie.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},ie.prototype.isEmpty=function(){return 0===this.elements_.length},ie.prototype.isKeyQueued=function(t){return t in this.queuedElements_},ie.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},ie.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],s=t;t<n>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<n&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=r,i[t]=o,this.siftDown_(s,t)},ie.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var s=this.getParentIndex_(e);if(!(n[s]>o))break;i[e]=i[s],n[e]=n[s],e=s}i[e]=r,n[e]=o},ie.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(i=n(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=i,r[s++]=t);r.length=s,o.length=s,this.heapify_()};var ne=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&v(e[0],M.CHANGE,this.handleTileChange,this);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===te.LOADED||i===te.ERROR||i===te.EMPTY||i===te.ABORT){m(e,M.CHANGE,this.handleTileChange,this);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r,o=0,s=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),(i=n.getState())===te.ABORT?s=!0:i!==te.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,n.load());0===o&&s&&this.tileChangeCallback_()},e}(ie),re=42,oe=256;function se(t,e,i){return Math.min(Math.max(t,e),i)}var ae="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function he(t,e,i,n,r,o){var s=r-i,a=o-n;if(0!==s||0!==a){var h=((t-i)*s+(e-n)*a)/(s*s+a*a);h>1?(i=r,n=o):h>0&&(i+=s*h,n+=a*h)}return le(t,e,i,n)}function le(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function ue(t){return t*Math.PI/180}function ce(t,e){var i=t%e;return i*e<0?i+e:i}function pe(t,e,i){return t+i*(e-t)}function de(t){return t}function fe(t,e){return void 0!==t?0:void 0}function _e(t,e){return void 0!==t?t+e:void 0}var ge=0,ve=1,ye="center",me="resolution",Ee="rotation";function xe(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Te(t){return function(e){return function(t,e){return function(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}(t,"{x}, {y}",e)}(e,t)}}function Se(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function Re(t,e){return t[0]*=e,t[1]*=e,t}function Ce(t){return Math.pow(t,3)}function we(t){return 1-Ce(1-t)}function Ie(t){return 3*t*t-2*t*t*t}function Oe(t){return t}var Le={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Me={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function be(t){for(var e=Ye(),i=0,n=t.length;i<n;++i)Ue(e,t[i]);return e}function Pe(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function De(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ae(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function Fe(t,e){return Ge(t,e[0],e[1])}function ke(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Ge(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Ne(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=e[0],a=e[1],h=Me.UNKNOWN;return s<i?h|=Me.LEFT:s>r&&(h|=Me.RIGHT),a<n?h|=Me.BELOW:a>o&&(h|=Me.ABOVE),h===Me.UNKNOWN&&(h=Me.INTERSECTING),h}function Ye(){return[1/0,1/0,-1/0,-1/0]}function je(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function Xe(t){return je(1/0,1/0,-1/0,-1/0,t)}function Ke(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function We(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ue(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function He(t,e){for(var i=0,n=e.length;i<n;++i)Ue(t,e[i]);return t}function ze(t,e,i,n,r){for(;i<n;i+=r)Be(t,e[i],e[i+1]);return t}function Be(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Ze(t){var e=0;return si(t)||(e=ri(t)*ti(t)),e}function Ve(t){return[t[0],t[1]]}function qe(t){return[t[2],t[1]]}function Je(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Qe(t,e){var i;return e===Le.BOTTOM_LEFT?i=Ve(t):e===Le.BOTTOM_RIGHT?i=qe(t):e===Le.TOP_LEFT?i=ii(t):e===Le.TOP_RIGHT?i=ni(t):ee(!1,13),i}function $e(t,e,i,n,r){var o=e*n[0]/2,s=e*n[1]/2,a=Math.cos(i),h=Math.sin(i),l=o*a,u=o*h,c=s*a,p=s*h,d=t[0],f=t[1],_=d-l+p,g=d-l-p,v=d+l-p,y=d+l+p,m=f-u-c,E=f-u+c,x=f+u+c,T=f+u-c;return je(Math.min(_,g,v,y),Math.min(m,E,x,T),Math.max(_,g,v,y),Math.max(m,E,x,T),r)}function ti(t){return t[3]-t[1]}function ei(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return oi(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Xe(n),n}function ii(t){return[t[0],t[3]]}function ni(t){return[t[2],t[3]]}function ri(t){return t[2]-t[0]}function oi(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function si(t){return t[2]<t[0]||t[3]<t[1]}var ai={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},hi={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function li(t,e,i,n,r,o){for(var s=o||[],a=0,h=e;h<i;h+=n){var l=t[h],u=t[h+1];s[a++]=r[0]*l+r[2]*u+r[4],s[a++]=r[1]*l+r[3]*u+r[5]}return o&&s.length!=a&&(s.length=a),s}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */
var ui=6371008.8;function ci(t,e,i){var n=i||ui,r=ue(t[1]),o=ue(e[1]),s=(o-r)/2,a=ue(e[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var pi={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},di={};di[pi.DEGREES]=2*Math.PI*6370997/360,di[pi.FEET]=.3048,di[pi.METERS]=1,di[pi.USFEET]=1200/3937;var fi=pi,_i=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};_i.prototype.canWrapX=function(){return this.canWrapX_},_i.prototype.getCode=function(){return this.code_},_i.prototype.getExtent=function(){return this.extent_},_i.prototype.getUnits=function(){return this.units_},_i.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||di[this.units_]},_i.prototype.getWorldExtent=function(){return this.worldExtent_},_i.prototype.getAxisOrientation=function(){return this.axisOrientation_},_i.prototype.isGlobal=function(){return this.global_},_i.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},_i.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},_i.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},_i.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},_i.prototype.setWorldExtent=function(t){this.worldExtent_=t},_i.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},_i.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var gi=_i,vi=6378137,yi=Math.PI*vi,mi=[-yi,-yi,yi,yi],Ei=[-180,-85,180,85],xi=function(t){function e(e){t.call(this,{code:e,units:fi.METERS,extent:mi,global:!0,worldExtent:Ei,getPointResolution:function(t,e){return t/ae(e[1]/vi)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gi),Ti=[new xi("EPSG:3857"),new xi("EPSG:102100"),new xi("EPSG:102113"),new xi("EPSG:900913"),new xi("urn:ogc:def:crs:EPSG:6.18:3:3857"),new xi("urn:ogc:def:crs:EPSG::3857"),new xi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Si(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=yi,a=0;a<n;a+=r){o[a]=s*t[a]/180;var h=vi*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));h>s?h=s:h<-s&&(h=-s),o[a+1]=h}return o}function Ri(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r)o[s]=180*t[s]/yi,o[s+1]=360*Math.atan(Math.exp(t[s+1]/vi))/Math.PI-90;return o}var Ci=[-180,-90,180,90],wi=6378137*Math.PI/180,Ii=function(t){function e(e,i){t.call(this,{code:e,units:fi.DEGREES,extent:Ci,axisOrientation:i,global:!0,metersPerUnit:wi,worldExtent:Ci})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gi),Oi=[new Ii("CRS:84"),new Ii("EPSG:4326","neu"),new Ii("urn:ogc:def:crs:EPSG::4326","neu"),new Ii("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Ii("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ii("urn:ogc:def:crs:OGC:2:84"),new Ii("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ii("urn:x-ogc:def:crs:EPSG:4326","neu")],Li={};var Mi,bi,Pi,Di={};function Ai(t,e,i){var n=t.getCode(),r=e.getCode();n in Di||(Di[n]={}),Di[n][r]=i}function Fi(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function ki(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Gi(t){!function(t,e){Li[t]=e}(t.getCode(),t),Ai(t,t,Fi)}function Ni(t){return"string"==typeof t?Li[t]||null:t||null}function Yi(t,e,i,n){var r,o=(t=Ni(t)).getPointResolutionFunc();if(o)r=o(e,i);else if(t.getUnits()==fi.DEGREES&&!n||n==fi.DEGREES)r=e;else{var s=Wi(t,Ni("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(ci((a=s(a,a,2)).slice(0,2),a.slice(2,4))+ci(a.slice(4,6),a.slice(6,8)))/2;var h=n?di[n]:t.getMetersPerUnit();void 0!==h&&(r/=h)}return r}function ji(t){!function(t){t.forEach(Gi)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Ai(e,t,Fi)})})}function Xi(t,e){return t?"string"==typeof t?Ni(t):t:Ni(e)}function Ki(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:Wi(t,e)===Fi&&i}function Wi(t,e){var i=function(t,e){var i;return t in Di&&e in Di[t]&&(i=Di[t][e]),i}(t.getCode(),e.getCode());return i||(i=ki),i}function Ui(t,e){return Wi(Ni(t),Ni(e))}function Hi(t,e,i){return Ui(e,i)(t,void 0,t.length)}ji(Ti),ji(Oi),Mi=Ti,bi=Si,Pi=Ri,Oi.forEach(function(t){Mi.forEach(function(e){Ai(t,e,bi),Ai(e,t,Pi)})});var zi=new Array(6);function Bi(t){return Vi(t,1,0,0,1,0,0)}function Zi(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],h=e[0],l=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*h+r*l,t[1]=n*h+o*l,t[2]=i*u+r*c,t[3]=n*u+o*c,t[4]=i*p+r*d+s,t[5]=n*p+o*d+a,t}function Vi(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ji(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Qi(t,e,i){return Zi(t,Vi(zi,e,0,0,i,0,0))}function $i(t,e,i){return Zi(t,Vi(zi,1,0,0,1,e,i))}function tn(t,e,i,n,r,o,s,a){var h=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=r*h,t[2]=-n*h,t[3]=r*l,t[4]=s*n*l-a*n*h+e,t[5]=s*r*h+a*r*l+i,t}var en=[1,0,0,1,0,0];function nn(t){var e;return t==hi.XY?e=2:t==hi.XYZ||t==hi.XYM?e=3:t==hi.XYZM&&(e=4),e}var rn=function(t){function e(){t.call(this),this.layout=hi.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return e=this.flatCoordinates,i=0,n=this.flatCoordinates.length,r=this.stride,ze(Xe(t),e,i,n,r);var e,i,n,r},e.prototype.getCoordinates=function(){return n()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(c(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=nn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){n()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=nn(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=hi.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=hi.XY:3==t?e=hi.XYZ:4==t&&(e=hi.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],h=Math.cos(r),l=Math.sin(r),u=o[0],c=o[1],p=0,d=e;d<i;d+=n){var f=t[d]-u,_=t[d+1]-c;a[p++]=u+f*h-_*l,a[p++]=c+f*l+_*h;for(var g=d+2;g<d+n;++g)a[p++]=t[g]}s&&a.length!=p&&(a.length=p)}(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=Je(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,n,r,o,s,a){for(var h=a||[],l=s[0],u=s[1],c=0,p=e;p<i;p+=n){var d=t[p]-l,f=t[p+1]-u;h[c++]=l+r*d,h[c++]=u+o*f;for(var _=p+2;_<p+n;++_)h[c++]=t[_]}a&&h.length!=c&&(h.length=c)}(o,0,o.length,s,t,n,r,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],h=0,l=e;l<i;l+=n){a[h++]=t[l]+r,a[h++]=t[l+1]+o;for(var u=l+2;u<l+n;++u)a[h++]=t[u]}s&&a.length!=h&&(a.length=h)}(i,0,i.length,n,t,e,i),this.changed()}},e}(function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return n()},e.prototype.closestPointXY=function(t,e,i,r){return n()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return n()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){n()},e.prototype.scale=function(t,e,i){n()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return n()},e.prototype.getType=function(){return n()},e.prototype.applyTransform=function(t){n()},e.prototype.intersectsExtent=function(t){return n()},e.prototype.translate=function(t,e){n()},e.prototype.transform=function(t,e){var i=Ni(t),n=i.getUnits()==fi.TILE_PIXELS?function(t,n,r){var o=i.getExtent(),s=i.getWorldExtent(),a=ti(s)/ti(o);return tn(en,s[0],s[3],a,-a,0,0,0),li(t,0,t.length,r,en,n),Ui(i,e)(t,n,r)}:Ui(i,e);return this.applyTransform(n),this},e}(F));function on(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=s*a-o*h,o=a,s=h}return r/2}function sn(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=on(t,e,a,n),e=a}return r}function an(t,e,i,n,r,o,s){var a,h=t[e],l=t[e+1],u=t[i]-h,c=t[i+1]-l;if(0===u&&0===c)a=e;else{var p=((r-h)*u+(o-l)*c)/(u*u+c*c);if(p>1)a=i;else{if(p>0){for(var d=0;d<n;++d)s[d]=pe(t[e+d],t[i+d],p);return void(s.length=n)}a=e}}for(var f=0;f<n;++f)s[f]=t[a+f];s.length=n}function hn(t,e,i,n,r){var o=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],h=t[e+1],l=le(o,s,a,h);l>r&&(r=l),o=a,s=h}return r}function ln(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=hn(t,e,a,n,r),e=a}return r}function un(t,e,i,n,r,o,s,a,h,l,u){if(e==i)return l;var c,p;if(0===r){if((p=le(s,a,t[e],t[e+1]))<l){for(c=0;c<n;++c)h[c]=t[e+c];return h.length=n,p}return l}for(var d=u||[NaN,NaN],f=e+n;f<i;)if(an(t,f-n,f,n,s,a,d),(p=le(s,a,d[0],d[1]))<l){for(l=p,c=0;c<n;++c)h[c]=d[c];h.length=n,f+=n}else f+=n*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(o&&(an(t,i-n,e,n,s,a,d),(p=le(s,a,d[0],d[1]))<l)){for(l=p,c=0;c<n;++c)h[c]=d[c];h.length=n}return l}function cn(t,e,i,n,r,o,s,a,h,l,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];l=un(t,e,f,n,r,o,s,a,h,l,c),e=f}return l}function pn(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var s=i[r],a=0;a<n;++a)t[e++]=s[a];return e}function dn(t,e,i,n,r){for(var o=r||[],s=0,a=0,h=i.length;a<h;++a){var l=pn(t,e,i[a],n);o[s++]=l,e=l}return o.length=s,o}function fn(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=e;a<i;a+=n)o[s++]=t.slice(a,a+n);return o.length=s,o}function _n(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=fn(t,e,l,n,o[s]),e=l}return o.length=s,o}function gn(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=_n(t,e,l,n,o[s]),e=l[l.length-1]}return o.length=s,o}function vn(t,e,i,n,r,o,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[s++]=t[e],o[s++]=t[e+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var l=[e,i-n],u=0;l.length>0;){for(var c=l.pop(),p=l.pop(),d=0,f=t[p],_=t[p+1],g=t[c],v=t[c+1],y=p+n;y<c;y+=n){var m=he(t[y],t[y+1],f,_,g,v);m>d&&(u=y,d=m)}d>r&&(h[(u-e)/n]=1,p+n<u&&l.push(p,u),u+n<c&&l.push(u,c))}for(var E=0;E<a;++E)h[E]&&(o[s++]=t[e+E*n],o[s++]=t[e+E*n+1]);return s}function yn(t,e){return e*Math.round(t/e)}function mn(t,e,i,n,r,o,s){if(e==i)return s;var a,h,l=yn(t[e],r),u=yn(t[e+1],r);e+=n,o[s++]=l,o[s++]=u;do{if(a=yn(t[e],r),h=yn(t[e+1],r),(e+=n)==i)return o[s++]=a,o[s++]=h,s}while(a==l&&h==u);for(;e<i;){var c=yn(t[e],r),p=yn(t[e+1],r);if(e+=n,c!=a||p!=h){var d=a-l,f=h-u,_=c-l,g=p-u;d*g==f*_&&(d<0&&_<d||d==_||d>0&&_>d)&&(f<0&&g<f||f==g||f>0&&g>f)?(a=c,h=p):(o[s++]=a,o[s++]=h,l=a,u=h,a=c,h=p)}}return o[s++]=a,o[s++]=h,s}function En(t,e,i,n,r,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=mn(t,e,u,n,r,o,s),a.push(s),e=u}return s}var xn=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Ae(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=vn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,hi.XY)},e.prototype.getType=function(){return ai.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(rn),Tn=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=le(t,e,r[0],r[1]);if(o<n){for(var s=this.stride,a=0;a<s;++a)i[a]=r[a];return i.length=s,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,i=t,n=e[0],r=e[1],je(n,r,n,r,i);var e,i,n,r},e.prototype.getType=function(){return ai.POINT},e.prototype.intersectsExtent=function(t){return Ge(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(rn);function Sn(t,e,i,n,r){return!function(t,e,i){var n;return(n=e.call(i,Ve(t)))?n:(n=e.call(i,qe(t)))?n:(n=e.call(i,ni(t)))?n:(n=e.call(i,ii(t)))||!1}(r,function(r){return!Rn(t,e,i,n,r[0],r[1])})}function Rn(t,e,i,n,r,o){for(var s=0,a=t[i-n],h=t[i-n+1];e<i;e+=n){var l=t[e],u=t[e+1];h<=o?u>o&&(l-a)*(o-h)-(r-a)*(u-h)>0&&s++:u<=o&&(l-a)*(o-h)-(r-a)*(u-h)<0&&s--,a=l,h=u}return 0!==s}function Cn(t,e,i,n,r,o){if(0===i.length)return!1;if(!Rn(t,e,i[0],n,r,o))return!1;for(var s=1,a=i.length;s<a;++s)if(Rn(t,i[s-1],i[s],n,r,o))return!1;return!0}function wn(t,e,i,n,r,o,s){for(var a,h,l,u,c,p,d,f=r[o+1],_=[],g=0,v=i.length;g<v;++g){var y=i[g];for(u=t[y-n],p=t[y-n+1],a=e;a<y;a+=n)c=t[a],d=t[a+1],(f<=p&&d<=f||p<=f&&f<=d)&&(l=(f-p)/(d-p)*(c-u)+u,_.push(l)),u=c,p=d}var m=NaN,E=-1/0;for(_.sort(Dt),u=_[0],a=1,h=_.length;a<h;++a){c=_[a];var x=Math.abs(c-u);x>E&&Cn(t,e,i,n,l=(u+c)/2,f)&&(m=l,E=x),u=c}return isNaN(m)&&(m=r[o]),s?(s.push(m,f,E),s):[m,f,E]}function In(t,e,i,n,r){var o=ze([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!oi(r,o)&&(!!ke(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||function(t,e,i,n,r,o){for(var s,a=[t[e],t[e+1]],h=[];e+n<i;e+=n){if(h[0]=t[e+n],h[1]=t[e+n+1],s=r.call(o,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}(t,e,i,n,function(t,e){return function(t,e,i){var n=!1,r=Ne(t,e),o=Ne(t,i);if(r===Me.INTERSECTING||o===Me.INTERSECTING)n=!0;else{var s,a,h=t[0],l=t[1],u=t[2],c=t[3],p=e[0],d=e[1],f=i[0],_=i[1],g=(_-d)/(f-p);o&Me.ABOVE&&!(r&Me.ABOVE)&&(n=(s=f-(_-c)/g)>=h&&s<=u),n||!(o&Me.RIGHT)||r&Me.RIGHT||(n=(a=_-(f-u)*g)>=l&&a<=c),n||!(o&Me.BELOW)||r&Me.BELOW||(n=(s=f-(_-l)/g)>=h&&s<=u),n||!(o&Me.LEFT)||r&Me.LEFT||(n=(a=_-(f-h)*g)>=l&&a<=c)}return n}(r,t,e)}))))}function On(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(In(t,e,i,n,r)||Rn(t,e,i,n,r[0],r[1])||Rn(t,e,i,n,r[0],r[3])||Rn(t,e,i,n,r[2],r[1])||Rn(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(Sn(t,i[o-1],i[o],n,r)&&!In(t,i[o-1],i[o],n,r))return!1;return!0}function Ln(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function Mn(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=(a-o)*(h+s),o=a,s=h}return r>0}function bn(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var h=i[s],l=Mn(t,e,h,n);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=h}return!0}function Pn(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var h=i[s],l=Mn(t,e,h,n);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&Ln(t,e,h,n),e=h}return e}var Dn=function(t){function e(e,i,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?kt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Ae(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ln(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Cn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return sn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Pn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,_n(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Je(this.getExtent());this.flatInteriorPoint_=wn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Tn(this.getFlatInteriorPoint(),hi.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new xn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o],h=new xn(e.slice(r,a),t);n.push(h),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;bn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=En(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,hi.XY,n)},e.prototype.getType=function(){return ai.POLYGON},e.prototype.intersectsExtent=function(t){return On(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=dn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(rn),An=Dn;function Fn(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Dn(o,hi.XY,[o.length])}var kn=0;function Gn(t,e){setTimeout(function(){t(e)},0)}function Nn(t){return!(t.sourceCenter&&t.targetCenter&&!function(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Yn=function(t){function e(e){t.call(this);var i=u({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Xi(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[ye]=void 0!==t.center?t.center:null;var i=function(t){var e,i,n,r=void 0!==t.minZoom?t.minZoom:kn,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;i=a[r],n=void 0!==a[o]?a[o]:a[a.length-1],e=function(t){return function(e,i,n){if(void 0!==e){var r=At(t,e,n);r=se(r+i,0,t.length-1);var o=Math.floor(r);if(r!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,r-o)}return t[o]}}}(a)}else{var h=Xi(t.projection,"EPSG:3857"),l=h.getExtent(),u=l?Math.max(ri(l),ti(l)):360*di[fi.DEGREES]/h.getMetersPerUnit(),c=u/oe/Math.pow(2,kn),p=c/Math.pow(2,28-kn);void 0!==(i=t.maxResolution)?r=0:i=c/Math.pow(s,r),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):c/Math.pow(s,o):p),o=r+Math.floor(Math.log(i/n)/Math.log(s)),n=i/Math.pow(s,o-r),e=function(t,e,i){return function(n,r,o){if(void 0!==n){var s=-o/2+.5,a=Math.floor(Math.log(e/n)/Math.log(t)+s),h=Math.max(a+r,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}(s,i,o-r)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:s}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var n=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[se(t[0],e[0],e[2]),se(t[1],e[1],e[3])]:void 0}):de;var e}(t),r=i.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=r||ue(5),function(t,e){return void 0!==t?Math.abs(t+e)<=o?0:t+e:void 0}):!1===e?_e:"number"==typeof e?(i=e,n=2*Math.PI/i,function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}):_e}return fe;var i,n;var r,o}(t);this.constraints_={center:n,resolution:r,rotation:o},void 0!==t.resolution?e[me]=t.resolution:void 0!==t.zoom&&(e[me]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[me]=se(Number(this.getResolution()||e[me]),this.minResolution_,this.maxResolution_))),e[Ee]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=u({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),u({},e,t)},e.prototype.animate=function(t){var e,i=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&Gn(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),l=[],u=0;u<n;++u){var c=i[u],p={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Ie};if(c.center&&(p.sourceCenter=s,p.targetCenter=c.center,s=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),a=p.targetResolution):c.resolution&&(p.sourceResolution=a,p.targetResolution=c.resolution,a=p.targetResolution),void 0!==c.rotation){p.sourceRotation=h;var d=ce(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=h+d,h=p.targetRotation}p.callback=e,Nn(p)?p.complete=!0:o+=p.duration,l.push(p)}this.animations_.push(l),this.setHint(ge,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[ge]>0},e.prototype.getInteracting=function(){return this.hints_[ve]>0},e.prototype.cancelAnimations=function(){this.setHint(ge,-this.hints_[ge]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&Gn(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,s=n.length;o<s;++o){var a=n[o];if(!a.complete){var h=t-a.start,l=a.duration>0?h/a.duration:1;l>=1?(a.complete=!0,l=1):r=!1;var u=a.easing(l);if(a.sourceCenter){var c=a.sourceCenter[0],p=a.sourceCenter[1],d=c+u*(a.targetCenter[0]-c),f=p+u*(a.targetCenter[1]-p);this.set(ye,[d,f])}if(a.sourceResolution&&a.targetResolution){var _=1===u?a.targetResolution:a.sourceResolution+u*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(ye,this.calculateCenterZoom(_,a.anchor)),this.set(me,_)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var g=1===u?ce(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+u*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(ye,this.calculateCenterRotate(g,a.anchor)),this.set(Ee,g)}if(e=!0,!a.complete)break}}if(r){this.animations_[i]=null,this.setHint(ge,-1);var v=n[0].callback;v&&Gn(v,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenter();return void 0!==n&&(Se(i=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),xe(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenter(),r=this.getResolution();void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]);return i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+o(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var n=e||0,r=i||0;return this.constraints_.resolution(t,n,r)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(ye)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();ee(i,1);var n=this.getResolution();ee(void 0!==n,2);var r=this.getRotation();return ee(void 0!==r,3),$e(i,n,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(me)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),n=ri(t)/i[0],r=ti(t)/i[1];return Math.max(n,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(Ee)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),n=this.getResolution(),r=n/t,o=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==i?i:null,resolution:n,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=At(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,n=e||{},r=n.size;r||(r=this.getSizeFromViewport_()),ee(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(ee(!si(t),25),i=Fn(t)):t.getType()===ai.CIRCLE?(i=Fn(t=t.getExtent())).rotate(this.getRotation(),Je(t)):i=t;var o,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;o=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),u=this.getRotation(),c=Math.cos(-u),p=Math.sin(-u),d=1/0,f=1/0,_=-1/0,g=-1/0,v=i.getStride(),y=0,m=l.length;y<m;y+=v){var E=l[y]*c-l[y+1]*p,x=l[y]*p+l[y+1]*c;d=Math.min(d,E),f=Math.min(f,x),_=Math.max(_,E),g=Math.max(g,x)}var T=this.getResolutionForExtent([d,f,_,g],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(T=isNaN(T)?o:Math.max(T,o),a){var S=this.constrainResolution(T,0,0);!h&&S<T&&(S=this.constrainResolution(S,-1,0)),T=S}p=-p;var R=(d+_)/2,w=(f+g)/2,I=[(R+=(s[1]-s[3])/2*T)*c-(w+=(s[0]-s[2])/2*T)*p,w*c+R*p],O=n.callback?n.callback:C;void 0!==n.duration?this.animate({resolution:T,center:I,duration:n.duration,easing:n.easing},O):(this.setResolution(T),this.setCenter(I),Gn(O,!0))},e.prototype.centerOn=function(t,e,i){var n=this.getRotation(),r=Math.cos(-n),o=Math.sin(-n),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*r-(a+=(i[1]-e[1]/2)*h)*(o=-o),u=a*r+s*o;this.setCenter([l,u])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(ye,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(me,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(Ee,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(F);function jn(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function Xn(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function Kn(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Wn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},Un=function(t){function e(e){t.call(this);var i=u({},e);i[Wn.OPACITY]=void 0!==e.opacity?e.opacity:1,i[Wn.VISIBLE]=void 0===e.visible||e.visible,i[Wn.Z_INDEX]=e.zIndex,i[Wn.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[Wn.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=se(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return n()},e.prototype.getLayerStatesArray=function(t){return n()},e.prototype.getExtent=function(){return this.get(Wn.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(Wn.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(Wn.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(Wn.OPACITY)},e.prototype.getSourceState=function(){return n()},e.prototype.getVisible=function(){return this.get(Wn.VISIBLE)},e.prototype.getZIndex=function(){return this.get(Wn.Z_INDEX)},e.prototype.setExtent=function(t){this.set(Wn.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(Wn.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(Wn.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(Wn.OPACITY,t)},e.prototype.setVisible=function(t){this.set(Wn.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(Wn.Z_INDEX,t)},e}(F),Hn={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},zn={LAYERS:"layers"},Bn=function(t){function e(e){var i=e||{},n=u({},i);delete n.layers;var r=i.layers;t.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},v(this,A(zn.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new N(r.slice(),{unique:!0}):ee("function"==typeof r.getArray,43):r=new N(void 0,{unique:!0}),this.setLayers(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(E),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(v(t,h.ADD,this.handleLayersAdd_,this),v(t,h.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(E);c(this.listenerKeys_);for(var i=t.getArray(),n=0,r=i.length;n<r;n++){var s=i[n];this.listenerKeys_[o(s)]=[v(s,l,this.handleLayerChange_,this),v(s,M.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[o(e)]=[v(e,l,this.handleLayerChange_,this),v(e,M.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=o(t.element);this.listenerKeys_[e].forEach(E),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(zn.LAYERS)},e.prototype.setLayers=function(t){this.set(zn.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var s=e[r];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==s.extent?s.extent=ei(s.extent,n.extent):s.extent=n.extent)}return e},e.prototype.getSourceState=function(){return Hn.READY},e}(Un);function Zn(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var Vn=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Bn({layers:t.layers});o[Vt.LAYERGROUP]=s,o[Vt.TARGET]=t.target,o[Vt.VIEW]=void 0!==t.view?t.view:new Yn,void 0!==t.controls&&(Array.isArray(t.controls)?i=new N(t.controls.slice()):(ee("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new N(t.interactions.slice()):(ee("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new N(t.overlays.slice()):(ee("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new N;return{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:o}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:z,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(Z?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[M.CLICK,M.DBLCLICK,M.MOUSEDOWN,M.TOUCHSTART,M.MSPOINTERDOWN,J.POINTERDOWN,M.MOUSEWHEEL,M.WHEEL],r=0,o=n.length;r<o;++r)v(this.overlayContainerStopEvent_,n[r],I);for(var s in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ht(this,e.moveTolerance),J)v(this.mapBrowserEventHandler_,J[s],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,v(this.viewport_,M.CONTEXTMENU,this.handleBrowserEvent,this),v(this.viewport_,M.WHEEL,this.handleBrowserEvent,this),v(this.viewport_,M.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new N,this.interactions=i.interactions||new N,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ne(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},v(this,A(Vt.LAYERGROUP),this.handleLayerGroupChanged_,this),v(this,A(Vt.VIEW),this.handleViewChanged_,this),v(this,A(Vt.SIZE),this.handleSizeChanged_,this),v(this,A(Vt.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),v(this.controls,h.ADD,function(t){t.element.setMap(this)},this),v(this.controls,h.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),v(this.interactions,h.ADD,function(t){t.element.setMap(this)},this),v(this.interactions,h.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),v(this.overlays_,h.ADD,function(t){this.addOverlayInternal_(t.element)},this),v(this.overlays_,h.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),m(this.viewport_,M.CONTEXTMENU,this.handleBrowserEvent,this),m(this.viewport_,M.WHEEL,this.handleBrowserEvent,this),m(this.viewport_,M.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(M.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:S;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},r=void 0!==n.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||S;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:S,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Vt.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Ji(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Vt.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Ji(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Vt.SIZE)},e.prototype.getView=function(){return this.get(Vt.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+s*s)/n},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new j(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.getActive())if(!n.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var r=t.viewHints;r[ge]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),r[ve]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener($t)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,n=e.length;i<n;++i){var r=e[i];if("function"==typeof r.getLayers)return t(r.getLayers().getArray());var o=r.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent($t,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)E(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[v(n,M.KEYDOWN,this.handleBrowserEvent,this),v(n,M.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(M.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Kn(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(M.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(E(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(E(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",o(t)),this.viewPropertyListenerKey_=v(t,l,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=v(t,M.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[v(t,l,this.render,this),v(t,M.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),n=this.getView(),r=[1/0,1/0,-1/0,-1/0],s=this.frameState_,a=null;if(void 0!==i&&function(t){return t[0]>0&&t[1]>0}(i)&&n&&n.isDef()){for(var h=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},c=0,p=l.length;c<p;++c)u[o(l[c].layer)]=l[c];e=n.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:r,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}if(a&&(a.extent=$e(e.center,e.resolution,e.rotation,a.size,r)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s)(!this.previousExtent_||!si(this.previousExtent_)&&!Ke(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Y(Bt,this,s)),this.previousExtent_=Xe(this.previousExtent_));this.previousExtent_&&!a.viewHints[ge]&&!a.viewHints[ve]&&!Ke(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Y(Zt,this,a)),De(a.extent,this.previousExtent_))}this.dispatchEvent(new Y(zt,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Vt.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(Vt.SIZE,t)},e.prototype.setTarget=function(t){this.set(Vt.TARGET,t)},e.prototype.setView=function(t){this.set(Vt.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[o(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[o(t)],this.render()},e}(F);var qn,Jn,Qn=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:C,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Kn(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Kn(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)E(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==C&&this.listenerKeys.push(v(t,zt,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(F),$n="ol-hidden",tr="ol-unselectable",er="ol-control",ir="ol-collapsed",nr=(Jn={},function(t){if(qn||(qn=document.createElement("div").style),!(t in Jn)){qn.font=t;var e=qn.fontFamily;if(qn.font="",!e)return null;Jn[t]=e.split(/,\s?/)}return Jn[t]});function rr(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var or=function(t){function e(e){var i=u({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),v(this,A(Wn.SOURCE),this.handleSourcePropertyChange_,this);var n=e.source?e.source:null;this.setSource(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Wn.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Hn.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(E(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=v(t,M.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(E(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(E(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=v(t,Jt,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[o(this)]=i},this),this.mapRenderKey_=v(this,M.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Wn.SOURCE,t)},e}(Un);function sr(t){this.updateElement_(t.frameState)}var ar=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||sr,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==i.className?i.className:"ol-attribution",r=void 0!==i.tipLabel?i.tipLabel:"Attributions",o=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=r,h.appendChild(a),v(h,M.CLICK,this.handleClick_,this);var l=n+" "+tr+" "+er+(this.collapsed_&&this.collapsible_?" "+ir:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.ulElement_),u.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,r=t.viewState.resolution,o=0,s=n.length;o<s;++o){var a=n[o];if(rr(a,r)){var h=a.layer.getSource();if(h){var l=h.getAttributions();if(l){var u=l(t);if(u)if(this.overrideCollapsible_||!1!==h.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(u))for(var c=0,p=u.length;c<p;++c)u[c]in e||(i.push(u[c]),e[u[c]]=!0);else u in e||(i.push(u),e[u]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Gt(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var n=0,r=e.length;n<r;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(ir),this.collapsed_?Xn(this.collapseLabel_,this.label_):Xn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(Qn);function hr(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains($n);r||0!==i?r&&0!==i&&this.element.classList.remove($n):this.element.classList.add($n)}this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n}this.rotation_=i}}var lr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||hr,target:i.target});var n=void 0!==i.className?i.className:"ol-rotate",r=void 0!==i.label?i.label:"";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var o=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),v(s,M.CLICK,this.handleClick_,this);var a=n+" "+tr+" "+er,h=this.element;h.className=a,h.appendChild(s),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add($n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:we}):t.setRotation(0))},e}(Qn),ur=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var n=void 0!==i.className?i.className:"ol-zoom",r=void 0!==i.delta?i.delta:1,o=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"",a=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=n+"-in",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),v(l,M.CLICK,this.handleClick_.bind(this,r));var u=document.createElement("button");u.className=n+"-out",u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof s?document.createTextNode(s):s),v(u,M.CLICK,this.handleClick_.bind(this,-r));var c=n+" "+tr+" "+er,p=this.element;p.className=c,p.appendChild(l),p.appendChild(u),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var n=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:n,duration:this.duration_,easing:we})):e.setResolution(n)}}},e}(Qn);function cr(t){var e=t||{},i=new N;return(void 0===e.zoom||e.zoom)&&i.push(new ur(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new lr(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new ar(e.attributionOptions)),i}var pr=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};pr.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},pr.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},pr.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},pr.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},pr.prototype.getAngle=function(){return this.angle_};var dr=pr,fr="active";function _r(t,e,i,n){e=t.constrainRotation(e,0),gr(t,e,i,n)}function gr(t,e,i,n){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&n>0?t.animate({rotation:e,anchor:i,duration:n,easing:we}):t.rotate(e,i)}}function vr(t,e,i,n){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var s=t.getResolutions();o=se(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==r){var a=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*a[0]-r*h[0])/(o-r),(o*a[1]-r*h[1])/(o-r)]}yr(t,o,i,n)}function yr(t,e,i,n){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:we});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var mr=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(fr)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(fr,t)},e.prototype.setMap=function(t){this.map_=t},e}(F);function Er(t){var e=!1;if(t.type==J.DBLCLICK){var i=t.originalEvent,n=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;vr(n.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var xr=function(t){function e(e){t.call(this,{handleEvent:Er});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),Tr=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Sr=function(t){return t.target.getTargetElement()===document.activeElement},Rr=S,Cr=function(t){var e=t.originalEvent;return 0==e.button&&!(U&&H&&e.ctrlKey)},wr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Ir=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Or=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Lr=function(t){var e=t.pointerEvent;return ee(void 0!==e,56),"mouse"==e.pointerType};function Mr(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}var br=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==J.POINTERDRAG)this.handleDragEvent(t);else if(t.type==J.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==J.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==J.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===J.POINTERDOWN||e===J.POINTERDRAG||e===J.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==J.POINTERUP?delete this.trackedPointers_[i]:t.type==J.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=function(t){var e=[];for(var i in t)e.push(t[i]);return e}(this.trackedPointers_)}},e}(mr),Pr=function(t){function e(e){t.call(this,{stopDown:R});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:wr,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(ve,1));var e=this.targetPointers,i=Mr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],o=t.map.getView(),s=[n,r];Re(s,o.getResolution()),Se(s,o.getRotation()),xe(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-n*Math.cos(r),s[1]-n*Math.sin(r)]);i.animate({center:i.constrainCenter(a),duration:500,easing:we})}return this.panning_&&(this.panning_=!1,i.setHint(ve,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(br),Dr=function(t){function e(e){var i=e||{};t.call(this,{stopDown:R}),this.condition_=i.condition?i.condition:Tr,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Lr(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==fe){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_,a=i.getRotation();gr(i,a-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){if(!Lr(t))return!0;var e=t.map.getView();e.setHint(ve,-1);var i=e.getRotation();return _r(e,i,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!Lr(t)&&(!(!Cr(t)||!this.condition_(t))&&(t.map.getView().setHint(ve,1),this.lastAngle_=void 0,!0))},e}(br),Ar=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new An([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(T),Fr="boxstart",kr="boxdrag",Gr="boxend",Nr=function(t){function e(e,i,n){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O);function Yr(){var t,e,i=this.getMap(),n=i.getView(),r=i.getSize(),o=this.getGeometry().getExtent();if(this.out_){var s=n.calculateExtent(r),a=(t=[i.getPixelFromCoordinate(Ve(o)),i.getPixelFromCoordinate(ni(o))],He(Xe(e),t));!function(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}(s,1/n.getResolutionForExtent(a,r)),o=s}var h=n.constrainResolution(n.getResolutionForExtent(o,r)),l=Je(o);l=n.constrainCenter(l),n.animate({resolution:h,center:l,duration:this.duration_,easing:we})}var jr=function(t){function e(e){var i=e||{},n=i.condition?i.condition:Ir;t.call(this,{condition:n,className:i.className||"ol-dragzoom",onBoxEnd:Yr}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this);var i=e||{};this.box_=new Ar(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:C,this.startPixel_=null,this.condition_=i.condition?i.condition:Rr,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Lr(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Nr(kr,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Lr(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Nr(Gr,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!Lr(t)&&(!(!Cr(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Nr(Fr,t.coordinate,t)),!0))},e}(br)),Xr={LEFT:37,UP:38,RIGHT:39,DOWN:40};function Kr(t){var e=!1;if(t.type==M.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==Xr.DOWN||i==Xr.LEFT||i==Xr.RIGHT||i==Xr.UP)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,s=0;i==Xr.DOWN?s=-r:i==Xr.LEFT?o=-r:i==Xr.RIGHT?o=r:s=r;var a=[o,s];Se(a,n.getRotation()),function(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:Oe,center:r}):t.setCenter(r)}}(n,a,this.duration_),t.preventDefault(),e=!0}}return!e}var Wr=function(t){function e(e){t.call(this,{handleEvent:Kr});var i=e||{};this.defaultCondition_=function(t){return wr(t)&&Or(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr);function Ur(t){var e=!1;if(t.type==M.KEYDOWN||t.type==M.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;vr(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Hr=function(t){function e(e){t.call(this,{handleEvent:Ur});var i=e||{};this.condition_=i.condition?i.condition:Or,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),zr="trackpad",Br="wheel",Zr=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:Rr,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(ve,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==M.WHEEL&&e!==M.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==M.WHEEL?(i=r.deltaY,K&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=z),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==M.MOUSEWHEEL&&(i=-r.wheelDeltaY,W&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?zr:Br),this.mode_===zr){var s=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(ve,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),u=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),u=1):a>l&&(a=Math.min(a,l*this.trackpadZoomBuffer_),u=-1),this.lastAnchor_){var c=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(c))}return s.setResolution(a),0===u&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:we,anchor:this.lastAnchor_,duration:this.duration_}),u>0?s.animate({resolution:h,easing:we,anchor:this.lastAnchor_,duration:500}):u<0&&s.animate({resolution:l,easing:we,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();vr(e,-se(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(mr),Vr=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=R),t.call(this,n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==fe){var h=s.getViewport().getBoundingClientRect(),l=Mr(this.targetPointers);if(l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var u=a.getRotation();s.render(),gr(a,u+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(ve,-1),this.rotating_){var i=e.getRotation();_r(e,i,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(ve,1),!0}return!1},e}(br),qr=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=R),t.call(this,n),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),l=h.getResolution(),u=h.getMaxResolution(),c=h.getMinResolution(),p=l*e;p>u?(e=u/l,p=u):p<c&&(e=c/l,p=c),1!=e&&(this.lastScaleDelta_=e);var d=a.getViewport().getBoundingClientRect(),f=Mr(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),yr(h,p,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(ve,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;!function(t,e,i,n,r){e=t.constrainResolution(e,0,r),yr(t,e,i,n)}(e,i,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(ve,1),!0}return!1},e}(br);var Jr=.5,Qr={IDLE:0,LOADING:1,LOADED:2,ERROR:3},$r=function(t){function e(e,i,n,r,o){var s=void 0!==o?Qr.IDLE:Qr.LOADED;t.call(this,e,i,n,s),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Qr.ERROR):this.state=Qr.LOADED,this.changed()},e.prototype.load=function(){this.state==Qr.IDLE&&(this.state=Qr.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(function(t){function e(e,i,n,r){t.call(this),this.extent=e,this.pixelRatio_=n,this.resolution=i,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(M.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return n()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){n()},e}(L)),to={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},eo="image",io=function(t){function e(e,i,n,r,o){t.call(this,e),this.vectorContext=i,this.frameState=n,this.context=r,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),no=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(M.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return ee(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return ee(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){ee(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(L),ro=[0,0,0,1],oo=[],so=[0,0,0,1],ao=[0,0,0,0],ho=new no,lo={},uo=null,co={},po=function(){var t,e,i=60,n=lo,r="32px ",o=["monospace","serif"],s=o.length,a="wmytzilWMYTZIL@#/&?$%10";function h(t){for(var i=fo(),n=100;n<=700;n+=300){for(var h=n+" ",l=!0,u=0;u<s;++u){var c=o[u];if(i.font=h+r+c,e=i.measureText(a).width,t!=c){i.font=h+r+t+","+c;var p=i.measureText(a).width;l=l&&p!=e}}if(l)return!0}return!1}function l(){var e=!0;for(var r in n)n[r]<i&&(h(r)?(n[r]=i,c(co),uo=null,ho.clear()):(++n[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var r=nr(e);if(r)for(var o=0,s=r.length;o<s;++o){var a=r[o];a in n||(n[a]=i,h(a)||(n[a]=0,void 0===t&&(t=setInterval(l,32))))}}}();function fo(){return uo||(uo=jn(1,1)),uo}var _o,go,vo=(go=co,function(t){var e=go[t];return null==e&&(_o||((_o=document.createElement("span")).textContent="M",_o.style.margin=_o.style.padding="0 !important",_o.style.position="absolute !important",_o.style.left="-99999px !important"),_o.style.font=t,document.body.appendChild(_o),e=go[t]=_o.offsetHeight,document.body.removeChild(_o)),e});function yo(t,e){var i=fo();return t!=i.font&&(i.font=t),i.measureText(e).width}function mo(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}var Eo=[1,0,0,1,0,0];function xo(t,e,i,n,r,o,s,a,h,l,u){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(n,r,o,s,a,h,l,s*u,a*u),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Eo)}var To=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,So=/^([a-z]*)$/i;function Ro(t){return"string"==typeof t?t:wo(t)}!function(){var t={},e=0}();function Co(t){return t[0]=se(t[0]+.5|0,0,255),t[1]=se(t[1]+.5|0,0,255),t[2]=se(t[2]+.5|0,0,255),t[3]=se(t[3],0,1),t}function wo(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function Io(t){return Array.isArray(t)?wo(t):t}var Oo=function(){};Oo.prototype.drawCustom=function(t,e,i){},Oo.prototype.drawGeometry=function(t){},Oo.prototype.setStyle=function(t){},Oo.prototype.drawCircle=function(t,e){},Oo.prototype.drawFeature=function(t,e){},Oo.prototype.drawGeometryCollection=function(t,e){},Oo.prototype.drawLineString=function(t,e){},Oo.prototype.drawMultiLineString=function(t,e){},Oo.prototype.drawMultiPoint=function(t,e){},Oo.prototype.drawMultiPolygon=function(t,e){},Oo.prototype.drawPoint=function(t,e){},Oo.prototype.drawPolygon=function(t,e){},Oo.prototype.drawText=function(t,e){},Oo.prototype.setFillStrokeStyle=function(t,e){},Oo.prototype.setImageStyle=function(t,e){},Oo.prototype.setTextStyle=function(t,e){};var Lo=Oo,Mo=function(t){function e(e,i,n,r,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=li(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,u=r.length;l<u;l+=2){var c=r[l]-this.imageAnchorX_,p=r[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var d=c+this.imageAnchorX_,f=p+this.imageAnchorY_;tn(s,d,f,this.imageScale_,this.imageScale_,h,-d,-f),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=li(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){var a=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=tn(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,a,h),this.textFillState_&&o.fillText(this.text_,a,h)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,s=li(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var h=2;h<a;h+=2)o.lineTo(s[h],s[h+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(oi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return li(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case ai.POINT:this.drawPoint(t);break;case ai.LINE_STRING:this.drawLineString(t);break;case ai.POLYGON:this.drawPolygon(t);break;case ai.MULTI_POINT:this.drawMultiPoint(t);break;case ai.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case ai.MULTI_POLYGON:this.drawMultiPolygon(t);break;case ai.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case ai.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&oi(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(oi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(oi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=o.length;a<h;++a)r=this.moveToLineTo_(n,r,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(oi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(oi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var h=r[s];n=this.drawRings_(i,n,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),B&&(Gt(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,B&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Io(i||ro)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||oo,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==h?h:1),miterLimit:void 0!==l?l:10,strokeStyle:Io(n||so)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Io(i||ro)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),h=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:s||oo,lineDashOffset:a||0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==u?u:10,strokeStyle:Io(r||so)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),_=t.getRotation(),g=t.getScale(),v=t.getText(),y=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==y?y:"center",textBaseline:void 0!==m?m:"middle"},this.text_=void 0!==v?v:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==_?_:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""},e}(Lo),bo=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Po(t,e,i){return e+":"+t+":"+(i?Ro(i):"null")}bo.prototype.clear=function(){this.cache_={},this.cacheSize_=0},bo.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},bo.prototype.get=function(t,e,i){var n=Po(t,e,i);return n in this.cache_?this.cache_[n]:null},bo.prototype.set=function(t,e,i,n){var r=Po(t,e,i);this.cache_[r]=n,++this.cacheSize_},bo.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Do=new bo;function Ao(t,e){Do.expire()}function Fo(t,e){return t.zIndex-e.zIndex}var ko=[],Go=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=jn(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=tr,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),n=this.context_;if(i.hasListener(t)){var r=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new Mo(n,o,r,a,s),l=new io(t,h,e,n,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,s=-e.rotation,a=-e.center[0],h=-e.center[1];return tn(this.transform_,i,n,r,o,s,a,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,n=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=r?(this.canvas_.width=n,this.canvas_.height=r):e.clearRect(0,0,n,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(Jt,t);var s=t.layerStatesArray;!function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value}(s,Fo),o&&(e.save(),mo(e,o,n/2,r/2));var a,h,l=t.viewState.resolution;for(a=0,h=s.length;a<h;++a){var u=s[a],c=u.layer,p=this.getLayerRenderer(c);rr(u,l)&&u.sourceState==Hn.READY&&(p.prepareFrame(t,u)&&p.composeFrame(t,u,e))}o&&e.restore(),this.dispatchRenderEvent(qt,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,s){var a,h,l=e.viewState.resolution,u=e.layerStatesArray,c=u.length,p=Ji(e.pixelToCoordinateTransform,t.slice());for(h=c-1;h>=0;--h){var d=u[h],f=d.layer;if(rr(d,l)&&o.call(s,f))if(a=this.getLayerRenderer(f).forEachLayerAtCoordinate(p,e,i,n,r))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,n=e.length;i<n;++i){var r=e[i];o=r,ko.indexOf(o)>=0||ko.push(r)}var o},e}(function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){n()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;tn(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t){var e,i=(e=t)[0]*e[3]-e[1]*e[2];ee(0!==i,32);var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],h=t[5];t[0]=s/i,t[1]=-r/i,t[2]=-o/i,t[3]=n/i,t[4]=(o*h-s*a)/i,t[5]=-(n*h-r*a)/i}(qi(n,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,s,a){var h,l=e.viewState,u=l.resolution;function c(t,i){var s=e.layerStates[o(i)].managed;if(!(o(t)in e.skippedFeatureUids)||s)return n.call(r,t,s?i:null)}var p=l.projection,d=t;if(p.canWrapX()){var f=p.getExtent(),_=ri(f),g=t[0];if(g<f[0]||g>f[2])d=[g+_*Math.ceil((f[0]-g)/_),t[1]]}var v,y=e.layerStatesArray;for(v=y.length-1;v>=0;--v){var m=y[v],E=m.layer;if(rr(m,u)&&s.call(a,E)){var x=this.getLayerRenderer(E),T=E.getSource();if(T&&(h=x.forEachFeatureAtCoordinate(T.getWrapX()?d:t,e,i,c)),h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,r,o,s,a){return n()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,S,this,n,r)},e.prototype.getLayerRenderer=function(t){var e=o(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n=0,r=this.layerRendererConstructors_.length;n<r;++n){var s=this.layerRendererConstructors_[n];if(s.handles(t)){i=s.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=v(i,M.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],E(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){n()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Ao)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(T)),No=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,o=e.size[1]*n,s=e.viewState.rotation,a=ii(i),h=ni(i),l=qe(i),u=Ve(i);Ji(e.coordinateToPixelTransform,a),Ji(e.coordinateToPixelTransform,h),Ji(e.coordinateToPixelTransform,l),Ji(e.coordinateToPixelTransform,u),t.save(),mo(t,-s,r/2,o/2),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(u[0]*n,u[1]*n),t.clip(),mo(t,s,r/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,n){var r=this.getLayer();if(r.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;mo(e,-a,o/2,s/2);var h=void 0!==n?n:this.getTransform(i,0),l=new Mo(e,i.pixelRatio,i.extent,h,i.viewState.rotation),u=new io(t,l,i,e,null);r.dispatchEvent(u),mo(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){return this.forEachFeatureAtCoordinate(t,e,i,S)?n.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(qt,t,e,n)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(Jt,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(Qt,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,n=t.pixelRatio,r=n*t.size[0]/2,o=n*t.size[1]/2,s=n/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,u=-i.center[1];return tn(this.transform_,r,o,s,a,h,l,u)},e.prototype.composeFrame=function(t,e,i){n()},e.prototype.prepareFrame=function(t,e){return n()},e}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){return t.forEachLoadedTile(e,n,r,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===Qr.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=Qr.LOADED&&e!=Qr.ERROR&&v(t,M.CHANGE,this.handleImageChange_,this),e==Qr.IDLE&&(t.load(),e=t.getState()),e==Qr.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Hn.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=o(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,n){var r=o(e),s=i.toString();r in t?s in t[r]?t[r][s].extend(n):t[r][s]=n:(t[r]={},t[r][s]=n)},e.prototype.manageTilePyramid=function(t,e,i,n,r,s,a,h,l,u){var c=o(e);c in t.wantedTiles||(t.wantedTiles[c]={});var p,d,f,_,g,v,y=t.wantedTiles[c],m=t.tileQueue;for(v=i.getMinZoom();v<=a;++v)for(d=i.getTileRangeForExtentAndZ(s,v,d),f=i.getResolution(v),_=d.minX;_<=d.maxX;++_)for(g=d.minY;g<=d.maxY;++g)a-v<=h?((p=e.getTile(v,_,g,n,r)).getState()==te.IDLE&&(y[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,c,i.getTileCoordCenter(p.tileCoord),f])),void 0!==l&&l.call(u,p)):e.useTile(v,_,g,r)},e}(b)),Yo=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var n=this.getImage();if(n){var r=e.extent,o=void 0!==r&&!ke(r,t.extent)&&oi(r,t.extent);o&&this.clip(i,t,r);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],u=n.width*s[0],c=n.height*s[3];u>=.5&&c>=.5&&i.drawImage(n,0,0,+n.width,+n.height,Math.round(h),Math.round(l),Math.round(u),Math.round(c)),i.globalAlpha=a,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return n()},e.prototype.getImageTransform=function(){return n()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){if(this.getImage()){var o=Ji(this.coordinateToCanvasPixelTransform,t.slice());Re(o,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=jn(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?n.call(r,this.getLayer(),s):void 0}},e}(No),jo=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===to.VECTOR)for(var n=0,r=ko.length;n<r;++n){var o=ko[n];if(o!==e&&o.handles(i)){this.vectorRenderer_=new o(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,n=t.pixelRatio,r=t.size,o=t.viewState,s=o.center,a=o.resolution,h=this.getLayer().getSource(),l=t.viewHints,c=this.vectorRenderer_,p=t.extent;if(c||void 0===e.extent||(p=ei(p,e.extent)),!l[ge]&&!l[ve]&&!si(p)){var d=o.projection,f=this.skippedFeatures_;if(c){var _=c.context,g=u({},t,{size:[ri(p)/a,ti(p)/a],viewState:u({},t.viewState,{rotation:0})}),v=Object.keys(g.skippedFeatureUids).sort();i=new $r(p,a,n,_.canvas,function(t){!c.prepareFrame(g,e)||!c.replayGroupChanged&&Gt(f,v)||(_.canvas.width=g.size[0]*n,_.canvas.height=g.size[1]*n,c.compose(_,g,e),f=v,t())})}else i=h.getImage(p,a,n,d);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=f)}if(this.image_){var y=(i=this.image_).getExtent(),m=i.getResolution(),E=i.getPixelRatio(),x=n*m/(a*E),T=tn(this.imageTransform_,n*r[0]/2,n*r[1]/2,x,x,0,E*(y[0]-s[0])/m,E*(s[1]-y[3])/m);tn(this.coordinateToCanvasPixelTransform,n*r[0]/2-T[4],n*r[1]/2-T[5],n/a,-n/a,0,-s[0],-s[1]),this.renderedResolution=m*n/E}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,n,r):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,n,r)},e}(Yo);jo.handles=function(t){return t.getType()===to.IMAGE||t.getType()===to.VECTOR&&t.getRenderMode()===eo},jo.create=function(t,e){return new jo(e)};var Xo=jo,Ko=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};function Wo(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Ko(t,e,i,n)}Ko.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Ko.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Ko.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Ko.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Ko.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Ko.prototype.getHeight=function(){return this.maxY-this.minY+1},Ko.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Ko.prototype.getWidth=function(){return this.maxX-this.minX+1},Ko.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Uo=Ko,Ho=function(t){function e(e,i){t.call(this,e),this.context=i?null:jn(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Uo(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==te.LOADED||i==te.EMPTY||i==te.ERROR&&!n},e.prototype.getTile=function(t,e,i,n,r){var o=this.getLayer(),s=o.getSource().getTile(t,e,i,n,r);return s.getState()==te.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(te.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,n=t.size,r=t.viewState,s=r.projection,a=r.resolution,h=r.center,l=this.getLayer(),u=l.getSource(),c=u.getRevision(),p=u.getTileGridForProjection(s),d=p.getZForResolution(a,this.zDirection),f=p.getResolution(d),_=Math.round(a/f)||1,g=t.extent;if(void 0!==e.extent&&(g=ei(g,e.extent)),si(g))return!1;var v=p.getTileRangeForExtentAndZ(g,d),y=p.getTileRangeExtent(d,v),m=u.getTilePixelRatio(i),E={};E[d]={};var x,T,S,R=this.createLoadedTileFinder(u,s,E),C=t.viewHints,w=C[ge]||C[ve],I=this.tmpExtent,O=this.tmpTileRange_;for(this.newTiles_=!1,T=v.minX;T<=v.maxX;++T)for(S=v.minY;S<=v.maxY;++S)if(!(Date.now()-t.time>16&&w)){if(x=this.getTile(d,T,S,i,s),this.isDrawableTile_(x)){var L=o(this);if(x.getState()==te.LOADED){E[d][x.tileCoord.toString()]=x;var M=x.inTransition(L);this.newTiles_||!M&&-1!==this.renderedTiles.indexOf(x)||(this.newTiles_=!0)}if(1===x.getAlpha(L,t.time))continue}var b=p.getTileCoordChildTileRange(x.tileCoord,O,I),P=!1;b&&(P=R(d+1,b)),P||p.forEachTileCoordParentTileRange(x.tileCoord,R,null,O,I)}var D=f*i/m*_;if(!(this.renderedResolution&&Date.now()-t.time>16&&w)&&(this.newTiles_||!this.renderedExtent_||!ke(this.renderedExtent_,g)||this.renderedRevision!=c||_!=this.oversampling_||!w&&D!=this.renderedResolution)){var A=this.context;if(A){var F=u.getTilePixelSize(d,i,s),k=Math.round(v.getWidth()*F[0]/_),G=Math.round(v.getHeight()*F[1]/_),N=A.canvas;N.width!=k||N.height!=G?(this.oversampling_=_,N.width=k,N.height=G):((this.renderedExtent_&&!Ke(y,this.renderedExtent_)||this.renderedRevision!=c)&&A.clearRect(0,0,k,G),_=this.oversampling_)}this.renderedTiles.length=0;var Y,j,X,K,W,U,H,z,B,Z,V=Object.keys(E).map(Number);for(V.sort(function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0}),K=0,W=V.length;K<W;++K)for(var q in X=V[K],j=u.getTilePixelSize(X,i,s),Y=p.getResolution(X)/f,H=m*u.getGutterForProjection(s),z=E[X])x=z[q],T=((U=p.getTileCoordExtent(x.getTileCoord(),I))[0]-y[0])/f*m/_,S=(y[3]-U[3])/f*m/_,B=j[0]*Y/_,Z=j[1]*Y/_,this.drawTileImage(x,t,e,T,S,B,Z,H,d===X),this.renderedTiles.push(x);this.renderedRevision=c,this.renderedResolution=f*i/m*_,this.renderedExtent_=y}var J=this.renderedResolution/a,Q=tn(this.imageTransform_,i*n[0]/2,i*n[1]/2,J,J,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return tn(this.coordinateToCanvasPixelTransform,i*n[0]/2-Q[4],i*n[1]/2-Q[5],i/a,-i/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,u,d,v),this.manageTilePyramid(t,u,p,i,s,g,d,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,n,r,s,a,h,l){var u=this.getTileImage(t);if(u){var c=o(this),p=l?t.getAlpha(c,e.time):1,d=this.getLayer().getSource();1!==p||d.getOpaque(e.viewState.projection)||this.context.clearRect(n,r,s,a);var f=p!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,h,h,u.width-2*h,u.height-2*h,n,r,s,a),f&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(Yo);Ho.handles=function(t){return t.getType()===to.TILE},Ho.create=function(t,e){return new Ho(e)},Ho.prototype.getLayer;var zo=Ho,Bo=i("./node_modules/rbush/index.js"),Zo=i.n(Bo),Vo=function(){};Vo.prototype.getReplay=function(t,e){return n()},Vo.prototype.isEmpty=function(){return n()},Vo.prototype.addDeclutter=function(t){return n()};var qo=Vo,Jo={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function Qo(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var h=t[a],l=t[a+1];s+=Math.sqrt((h-r)*(h-r)+(l-o)*(l-o)),r=h,o=l}return s}function $o(t,e,i,n,r,o,s,a){for(var h,l,u,c=[],p=t[e]>t[i-n],d=r.length,f=t[e],_=t[e+1],g=t[e+=n],v=t[e+1],y=0,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(v-_,2)),E="",x=0,T=0;T<d;++T){l=p?d-T-1:T;var S=r.charAt(l),R=o(E=p?S+E:E+S)-x;x+=R;for(var C=s+R/2;e<i-n&&y+m<C;)f=g,_=v,g=t[e+=n],v=t[e+1],y+=m,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(v-_,2));var w=C-y,I=Math.atan2(v-_,g-f);if(p&&(I+=I>0?-Math.PI:Math.PI),void 0!==u){var O=I-u;if(O+=O>Math.PI?-2*Math.PI:O<-Math.PI?2*Math.PI:0,Math.abs(O)>a)return null}var L=w/m,M=pe(f,g,L),b=pe(_,v,L);u==I?(p&&(h[0]=M,h[1]=b,h[2]=R/2),h[4]=E):(x=R,h=[M,b,R/2,I,E=S],p?c.unshift(h):c.push(h),u=I),s+=R}return c}var ts={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},es=[ts.FILL],is=[ts.STROKE],ns=[ts.BEGIN_PATH],rs=[ts.CLOSE_PATH],os=ts,ss=[Jo.POLYGON,Jo.CIRCLE,Jo.LINE_STRING,Jo.IMAGE,Jo.TEXT,Jo.DEFAULT],as={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},hs=[1/0,1/0,-1/0,-1/0],ls=[1,0,0,1,0,0],us=function(t){function e(e,i,n,r,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,i,n,r,o,s,a,h,l,u,c,p,d,f,_,g,v){var y=g||v;e-=r*=p,i-=o*=p;var m,E,x,T,S=f+l>n.width?n.width-l:f,R=a+u>n.height?n.height-u:a,C=_[3]+S*p+_[1],w=_[0]+R*p+_[2],I=e-_[3],O=i-_[0];(y||0!==c)&&(m=[I,O],E=[I+C,O],x=[I+C,O+w],T=[I,O+w]);var L=null;if(0!==c){var M=e+r,b=i+o;L=tn(ls,M,b,1,1,c,-M,-b),Xe(hs),Ue(hs,Ji(ls,m)),Ue(hs,Ji(ls,E)),Ue(hs,Ji(ls,x)),Ue(hs,Ji(ls,T))}else je(I,O,I+C,O+w,hs);var P=t.canvas,D=v?v[2]*p/2:0,A=hs[0]-D<=P.width&&hs[2]+D>=0&&hs[1]-D<=P.height&&hs[3]+D>=0;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!A&&1==s[4])return;We(s,hs);var F=A?[t,L?L.slice(0):null,h,n,l,u,S,R,e,i,p]:null;F&&y&&F.push(g,v,m,E,x,T),s.push(F)}else A&&(y&&this.replayTextBackground_(t,m,E,x,T,g,v),xo(t,L,h,n,l,u,S,R,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=n);var h,l,u,c=[t[e],t[e+1]],p=[NaN,NaN],d=!0;for(h=e+n;h<i;h+=n)p[0]=t[h],p[1]=t[h+1],(u=Ne(a,p))!==l?(d&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):u===Me.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):d=!0,c[0]=p[0],c[1]=p[1],l=u;return(r&&d||h===e+n)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,s,a,h=t.getType(),l=t.getStride(),u=this.coordinates.length;if(h==ai.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var p=0,d=c.length;p<d;++p){var f=[];a=this.drawCustomCoordinates_(n,a,c[p],l,f),s.push(f)}this.instructions.push([os.CUSTOM,u,s,t,i,gn])}else h==ai.POLYGON||h==ai.MULTI_LINE_STRING?(o=[],n=h==ai.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([os.CUSTOM,u,o,t,i,_n])):h==ai.LINE_STRING||h==ai.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([os.CUSTOM,u,r,t,i,fn])):h==ai.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([os.CUSTOM,u,r,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[os.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[os.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=Ji(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Eo)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],B&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var r=5,o=t.length;r<o;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),xo.apply(void 0,s))}}t.length=5,Xe(t)}}},e.prototype.replay_=function(t,e,i,n,r,s,a){var h;this.pixelCoordinates_&&Gt(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=li(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),qi(this.renderedTransform_,e));for(var l,u,c,d,f,_,g,v,y,m,E,x,T=!p(i),S=0,R=n.length,C=0,w=0,I=0,O=null,L=null,M=this.coordinateCache_,b=this.viewRotation_,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:b},D=this.instructions!=n||this.overlaps?0:200;S<R;){var A=n[S];switch(A[0]){case os.BEGIN_GEOMETRY:m=A[1],T&&i[o(m)]||!m.getGeometry()?S=A[2]:void 0===a||oi(a,m.getGeometry().getExtent())?++S:S=A[2]+1;break;case os.BEGIN_PATH:w>D&&(this.fill_(t),w=0),I>D&&(t.stroke(),I=0),w||I||(t.beginPath(),d=f=NaN),++S;break;case os.CIRCLE:var F=h[C=A[1]],k=h[C+1],G=h[C+2]-F,N=h[C+3]-k,Y=Math.sqrt(G*G+N*N);t.moveTo(F+Y,k),t.arc(F,k,Y,0,2*Math.PI,!0),++S;break;case os.CLOSE_PATH:t.closePath(),++S;break;case os.CUSTOM:C=A[1],l=A[2];var j=A[3],X=A[4],K=6==A.length?A[5]:void 0;P.geometry=j,P.feature=m,S in M||(M[S]=[]);var W=M[S];K?K(h,C,l,2,W):(W[0]=h[C],W[1]=h[C+1],W.length=2),X(W,P),++S;break;case os.DRAW_IMAGE:C=A[1],l=A[2],y=A[3],u=A[4],c=A[5],v=s?null:A[6];var U=A[7],H=A[8],z=A[9],B=A[10],Z=A[11],V=A[12],q=A[13],J=A[14],Q=void 0,$=void 0,tt=void 0;for(A.length>16?(Q=A[15],$=A[16],tt=A[17]):(Q=ao,$=tt=!1),Z&&(V+=b);C<l;C+=2)this.replayImage_(t,h[C],h[C+1],y,u,c,v,U,H,z,B,V,q,r,J,Q,$?O:null,tt?L:null);this.renderDeclutter_(v,m),++S;break;case os.DRAW_CHARS:var et=A[1],it=A[2],nt=A[3];v=s?null:A[4];var rt=A[5],ot=A[6],st=A[7],at=A[8],ht=A[9],lt=A[10],ut=A[11],ct=A[12],pt=A[13],dt=A[14],ft=Qo(h,et,it,2),_t=at(ct);if(rt||_t<=ft){var gt=this.textStates[pt].textAlign,vt=$o(h,et,it,2,ct,at,(ft-_t)*as[gt],st);if(vt){var yt=void 0,mt=void 0,Et=void 0,xt=void 0,Tt=void 0;if(lt)for(yt=0,mt=vt.length;yt<mt;++yt)Et=(Tt=vt[yt])[4],xt=this.getImage(Et,pt,"",lt),u=Tt[2]+ut,c=nt*xt.height+2*(.5-nt)*ut-ht,this.replayImage_(t,Tt[0],Tt[1],xt,u,c,v,xt.height,1,0,0,Tt[3],dt,!1,xt.width,ao,null,null);if(ot)for(yt=0,mt=vt.length;yt<mt;++yt)Et=(Tt=vt[yt])[4],xt=this.getImage(Et,pt,ot,""),u=Tt[2],c=nt*xt.height-ht,this.replayImage_(t,Tt[0],Tt[1],xt,u,c,v,xt.height,1,0,0,Tt[3],dt,!1,xt.width,ao,null,null)}}this.renderDeclutter_(v,m),++S;break;case os.END_GEOMETRY:if(void 0!==s){var St=s(m=A[1]);if(St)return St}++S;break;case os.FILL:D?w++:this.fill_(t),++S;break;case os.MOVE_TO_LINE_TO:for(C=A[1],l=A[2],E=h[C],g=(x=h[C+1])+.5|0,(_=E+.5|0)===d&&g===f||(t.moveTo(E,x),d=_,f=g),C+=2;C<l;C+=2)_=(E=h[C])+.5|0,g=(x=h[C+1])+.5|0,C!=l-2&&_===d&&g===f||(t.lineTo(E,x),d=_,f=g);++S;break;case os.SET_FILL_STYLE:O=A,this.alignFill_=A[2],w&&(this.fill_(t),w=0,I&&(t.stroke(),I=0)),t.fillStyle=A[1],++S;break;case os.SET_STROKE_STYLE:L=A,I&&(t.stroke(),I=0),this.setStrokeStyle_(t,A),++S;break;case os.STROKE:D?I++:t.stroke(),++S;break;default:++S}}w&&this.fill_(t),I&&t.stroke()},e.prototype.replay=function(t,e,i,n,r){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,n,r,o){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,!0,r,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==os.END_GEOMETRY?o=t:n==os.BEGIN_GEOMETRY&&(i[2]=t,Ft(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Io(n||ro)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=Io(r||so);var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var s=e.getLineDash();i.lineDash=s?s.slice():oo;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:"round";var l=e.getWidth();i.lineWidth=void 0!==l?l:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,n=[os.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[os.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Gt(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[os.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=De(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Pe(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Lo),cs=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([os.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([os.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([os.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([os.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(us),ps=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[os.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([os.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ns);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(is),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([os.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ns);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push(is),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(is),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(is),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(ns)},e}(us),ds=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,s=null!=r.strokeStyle,a=i.length;this.instructions.push(ns),this.hitDetectionInstructions.push(ns);for(var h=0;h<a;++h){var l=i[h],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,l,n,!0,!s),p=[os.MOVE_TO_LINE_TO,u,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(rs),this.hitDetectionInstructions.push(rs)),e=l}return o&&(this.instructions.push(es),this.hitDetectionInstructions.push(es)),s&&(this.instructions.push(is),this.hitDetectionInstructions.push(is)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([os.SET_FILL_STYLE,Ro(ro)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([os.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var h=[os.CIRCLE,a];this.instructions.push(ns,h),this.hitDetectionInstructions.push(ns,h),this.hitDetectionInstructions.push(es),void 0!==i.fillStyle&&this.instructions.push(es),void 0!==i.strokeStyle&&(this.instructions.push(is),this.hitDetectionInstructions.push(is)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([os.SET_FILL_STYLE,Ro(ro)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([os.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([os.SET_FILL_STYLE,Ro(ro)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([os.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,n=e.length;i<n;++i)e[i]=yn(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(us);function fs(t,e,i,n,r){var o,s,a,h,l,u,c,p,d,f=i,_=i,g=0,v=0,y=i;for(o=i;o<n;o+=r){var m=e[o],E=e[o+1];void 0!==h&&(p=m-h,d=E-l,a=Math.sqrt(p*p+d*d),void 0!==u&&(v+=s,Math.acos((u*p+c*d)/(s*a))>t&&(v>g&&(g=v,f=y,_=o),v=0,y=o-r)),s=a,u=p,c=d),h=m,l=E}return(v+=a)>g?[y,o]:[f,_]}var _s="line";var gs={Circle:ds,Default:us,Image:cs,LineString:ps,Polygon:ds,Text:function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},ho.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,s,a=this.coordinates.length,h=t.getType(),l=null,u=2,c=2;if(r.placement===_s){if(!oi(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(l=t.getFlatCoordinates(),c=t.getStride(),h==ai.LINE_STRING)p=[l.length];else if(h==ai.MULTI_LINE_STRING)p=t.getEnds();else if(h==ai.POLYGON)p=t.getEnds().slice(0,1);else if(h==ai.MULTI_POLYGON){var d=t.getEndss();for(p=[],o=0,s=d.length;o<s;++o)p.push(d[o][0])}this.beginGeometry(t,e);for(var f,_=r.textAlign,g=0,v=0,y=p.length;v<y;++v){if(null==_){var m=fs(r.maxAngle,l,g,p[v],c);g=m[0],f=m[1]}else f=p[v];for(o=g;o<f;o+=c)this.coordinates.push(l[o],l[o+1]);u=this.coordinates.length,g=p[v],this.drawChars_(a,u,this.declutterGroup_),a=u}this.endGeometry(t,e)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=E.width/this.pixelRatio;switch(h){case ai.POINT:case ai.MULTI_POINT:u=(l=t.getFlatCoordinates()).length;break;case ai.LINE_STRING:l=t.getFlatMidpoint();break;case ai.CIRCLE:l=t.getCenter();break;case ai.MULTI_LINE_STRING:u=(l=t.getFlatMidpoints()).length;break;case ai.POLYGON:if(l=t.getFlatInteriorPoint(),!r.overflow&&l[2]/this.resolution<x)return;c=3;break;case ai.MULTI_POLYGON:var T=t.getFlatInteriorPoints();for(l=[],o=0,s=T.length;o<s;o+=3)(r.overflow||T[o+2]/this.resolution>=x)&&l.push(T[o],T[o+1]);if(0==(u=l.length))return}u=this.appendFlatCoordinates(l,0,u,c,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(E,a,u),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,n){var r,o=n+e+t+i+this.pixelRatio;if(!ho.containsKey(o)){var s=n?this.strokeStates[n]||this.textStrokeState_:null,a=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,l=this.pixelRatio,u=h.scale*l,c=as[h.textAlign||"center"],p=n&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),f=d.length,_=[],g=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var s=yo(t,e[o]);r=Math.max(r,s),i.push(s)}return r}(h.font,d,_),v=vo(h.font),y=v*f,m=g+p,E=jn(Math.ceil(m*u),Math.ceil((y+p)*u));r=E.canvas,ho.set(o,r),1!=u&&E.scale(u,u),E.font=h.font,n&&(E.strokeStyle=s.strokeStyle,E.lineWidth=p,E.lineCap=s.lineCap,E.lineJoin=s.lineJoin,E.miterLimit=s.miterLimit,B&&s.lineDash.length&&(E.setLineDash(s.lineDash),E.lineDashOffset=s.lineDashOffset)),i&&(E.fillStyle=a.fillStyle),E.textBaseline="middle",E.textAlign="center";var x,T=.5-c,S=c*r.width/u+T*p;if(n)for(x=0;x<f;++x)E.strokeText(d[x],S+T*_[x],.5*(p+v)+x*v);if(i)for(x=0;x<f;++x)E.fillText(d[x],S+T*_[x],.5*(p+v)+x*v)}return ho.get(o)},e.prototype.drawTextImage_=function(t,e,i){var n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=as[n.textAlign||"center"],a=as[n.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,l=s*t.width/o+2*(.5-s)*h,u=a*t.height/o+2*(.5-a)*h;this.instructions.push([os.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,n.padding==ao?ao:n.padding.map(function(t){return t*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([os.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;n&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||"center",scale:r.scale});var h=this.fillKey_;o&&(h in this.fillStates||(this.fillStates[h]={fillStyle:o.fillStyle}));var l=this.pixelRatio,u=as[r.textBaseline],c=this.textOffsetY_*l,p=this.text_,d=r.font,f=r.scale,_=n?n.lineWidth*f/2:0,g=this.widths_[d];g||(this.widths_[d]=g={}),this.instructions.push([os.DRAW_CHARS,t,e,u,i,r.overflow,h,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=yo(d,t)),e*f*l},c,s,_*l,p,a,1]),this.hitDetectionInstructions.push([os.DRAW_CHARS,t,e,u,i,r.overflow,h,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=yo(d,t)),e*f},c,s,_,p,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){this.declutterGroup_=e;var s=t.getFill();s?((n=this.textFillState_)||(n=this.textFillState_={}),n.fillStyle=Io(s.getColor()||ro)):n=this.textFillState_=null;var a=t.getStroke();if(a){(r=this.textStrokeState_)||(r=this.textStrokeState_={});var h=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();r.lineCap=a.getLineCap()||"round",r.lineDash=h?h.slice():oo,r.lineDashOffset=void 0===l?0:l,r.lineJoin=a.getLineJoin()||"round",r.lineWidth=void 0===u?1:u,r.miterLimit=void 0===c?10:c,r.strokeStyle=Io(a.getColor()||so)}else r=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||"10px sans-serif";po(p);var d=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||ao,i.scale=void 0===d?1:d;var f=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===v?0:v,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:o(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+o(n.fillStyle):""}else this.text_=""},e}(us)},vs=function(t){function e(e,i,n,r,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=jn(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,s){var a,h=2*(n=Math.round(n))+1,l=tn(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),u=this.hitDetectionContext_;u.canvas.width!==h||u.canvas.height!==h?(u.canvas.width=h,u.canvas.height=h):u.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(Ue(a=[1/0,1/0,-1/0,-1/0],t),Pe(a,e*(this.renderBuffer_+n),a));var c,p,d=function(t){if(void 0!==ys[t])return ys[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var r=t,o=0,s=0;for(;r>=o;)ms(i,t+r,t+o),ms(i,t+o,t+r),ms(i,t-o,t+r),ms(i,t-r,t+o),ms(i,t-r,t-o),ms(i,t-o,t-r),ms(i,t+o,t-r),ms(i,t+r,t-o),2*((s+=1+2*++o)-r)+1>0&&(s+=1-2*(r-=1));return ys[t]=i,i}(n);function f(t){for(var e=u.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var n=0;n<h;n++)if(d[i][n]&&e[4*(n*h+i)+3]>0){var r=void 0;return(!c||p!=Jo.IMAGE&&p!=Jo.TEXT||-1!==c.indexOf(t))&&(r=o(t)),r||void u.clearRect(0,0,h,h)}}this.declutterTree_&&(c=this.declutterTree_.all().map(function(t){return t.value}));var _,g,v,y,m,E=Object.keys(this.replaysByZIndex_).map(Number);for(E.sort(Dt),_=E.length-1;_>=0;--_){var x=E[_].toString();for(v=this.replaysByZIndex_[x],g=ss.length-1;g>=0;--g)if(void 0!==(y=v[p=ss[g]]))if(!s||p!=Jo.IMAGE&&p!=Jo.TEXT){if(m=y.replayHitDetection(u,l,i,r,f,a))return m}else{var T=s[x];T?T.push(y,l.slice(0)):s[x]=[y,l.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return li(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,gs[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return p(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,n,r,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(Dt),t.save(),this.clip(t,e);var h,l,u,c,p,d,f=o||ss;for(h=0,l=a.length;h<l;++h){var _=a[h].toString();for(p=this.replaysByZIndex_[_],u=0,c=f.length;u<c;++u){var g=f[u];if(d=p[g],void 0!==d)if(!s||g!=Jo.IMAGE&&g!=Jo.TEXT)d.replay(t,e,i,n,r);else{var v=s[_];v?v.push(d,e.slice(0)):s[_]=[d,e.slice(0)]}}}t.restore()},e}(qo),ys={0:[[!0]]};function ms(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}var Es=vs,xs=.5,Ts={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Qr.LOADED)return;var o=t.getReplay(i.getZIndex(),Jo.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Jo.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),Jo.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Jo.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getReplay(i.getZIndex(),Jo.POLYGON);s.setFillStrokeStyle(r,o),s.drawPolygon(e,n)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Jo.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Qr.LOADED)return;var o=t.getReplay(i.getZIndex(),Jo.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Jo.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),Jo.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Jo.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var s=t.getReplay(i.getZIndex(),Jo.POLYGON);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,n)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Jo.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,s=e.getGeometriesArray();for(r=0,o=s.length;r<o;++r){var a=Ts[s[r].getType()];a(t,s[r],i,n)}},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getReplay(i.getZIndex(),Jo.CIRCLE);s.setFillStrokeStyle(r,o),s.drawCircle(e,n)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Jo.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,n)}}};function Ss(t,e){return parseInt(o(t),10)-parseInt(o(e),10)}function Rs(t,e){var i=Cs(t,e);return i*i}function Cs(t,e){return xs*t/e}function ws(t,e,i,n,r,o){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==Qr.LOADED||h==Qr.ERROR?a.unlistenImageChange(r,o):(h==Qr.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(r,o),s=!0)}return function(t,e,i,n){var r=i.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(n);if(i.getRenderer())!function t(e,i,n,r){if(i.getType()==ai.GEOMETRY_COLLECTION){for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],n,r);return}var h=e.getReplay(n.getZIndex(),Jo.DEFAULT);h.drawCustom(i,r,n.getRenderer())}(t,o,i,e);else{var s=Ts[o.getType()];s(t,o,i,e)}}(t,e,i,n),s}var Is=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?Zo()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=jn(),v(ho,M.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){m(ho,M.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var n=e.extent,r=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),u=this.getLayer().getSource(),c=this.getTransform(e,0),p=i.extent,d=void 0!==p;d&&this.clip(t,e,p);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,g=this.getLayer(),v=0,y=0,m=1!==i.opacity,E=g.hasListener(Qt);if(m||E){var x=t.canvas.width,T=t.canvas.height;if(h){var S=Math.round(Math.sqrt(x*x+T*T));v=(S-x)/2,y=(S-T)/2,x=T=S}this.context.canvas.width=x,this.context.canvas.height=T,_=this.context}else _=t;var R=_.globalAlpha;m||(_.globalAlpha=i.opacity),_!=t&&_.translate(v,y);var C=e.viewHints,w=!(C[ge]||C[ve]),I=e.size[0]*r,O=e.size[1]*r;if(mo(_,-h,I/2,O/2),f.replay(_,c,h,o,w),u.getWrapX()&&a.canWrapX()&&!ke(l,n)){for(var L,M=n[0],b=ri(l),P=0;M<l[0];)L=b*--P,c=this.getTransform(e,L),f.replay(_,c,h,o,w),M+=b;for(P=0,M=n[2];M>l[2];)L=b*++P,c=this.getTransform(e,L),f.replay(_,c,h,o,w),M-=b}if(mo(_,h,I/2,O/2),E&&this.dispatchRenderEvent(_,e,c),_!=t){if(m){var D=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(_.canvas,-v,-y),t.globalAlpha=D}else t.drawImage(_.canvas,-v,-y);_.translate(-v,-y)}m||(_.globalAlpha=R)}d&&t.restore()},e.prototype.composeFrame=function(t,e,i){var n=this.getTransform(t,0);this.preCompose(i,t,n),this.compose(i,t,e),this.postCompose(i,t,e,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,i,{},function(t){var e=o(t);if(!(e in l))return l[e]=!0,n.call(r,t,h)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),n=i.getSource(),r=t.viewHints[ge],o=t.viewHints[ve],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&o)return!0;var h=t.extent,l=t.viewState,u=l.projection,c=l.resolution,p=t.pixelRatio,d=i.getRevision(),f=i.getRenderBuffer(),_=i.getRenderOrder();void 0===_&&(_=Ss);var g=Pe(h,f*c),v=l.projection.getExtent();if(n.getWrapX()&&l.projection.canWrapX()&&!ke(v,t.extent)){var y=ri(v),m=Math.max(ri(g)/2,y);g[0]=v[0]-m,g[2]=v[2]+m}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==_&&ke(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new Es(Cs(c,p),g,c,p,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(g,c,u);var x=function(t){var e,n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,c)),e){var r=this.renderFeature(t,c,p,e,E);this.dirty_=this.dirty_||r}}.bind(this);if(_){var T=[];n.forEachFeatureInExtent(g,function(t){T.push(t)}),T.sort(_);for(var S=0,R=T.length;S<R;++S)x(T[S])}else n.forEachFeatureInExtent(g,x);return E.finish(),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=_,this.renderedExtent_=g,this.replayGroup_=E,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var s=0,a=n.length;s<a;++s)o=ws(r,t,n[s],Rs(e,i),this.handleStyleImageChange_,this)||o;else o=ws(r,t,n,Rs(e,i),this.handleStyleImageChange_,this);return o},e}(No);Is.handles=function(t){return t.getType()===to.VECTOR},Is.create=function(t,e){return new Is(e)};var Os=Is,Ls={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Ms={image:[Jo.POLYGON,Jo.CIRCLE,Jo.LINE_STRING,Jo.IMAGE,Jo.TEXT],hybrid:[Jo.POLYGON,Jo.LINE_STRING]},bs={image:[Jo.DEFAULT],hybrid:[Jo.IMAGE,Jo.TEXT,Jo.DEFAULT],vector:ss},Ps=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?Zo()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var i=e.getRenderMode();this.zDirection=i===Ls.VECTOR?1:0,i!==Ls.VECTOR&&(this.context=jn()),v(ho,M.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){m(ho,M.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,n,r,o){var s=t.prototype.getTile.call(this,e,i,n,r,o);return s.getState()===te.LOADED&&(this.createReplayGroup_(s,r,o),this.context&&this.renderTileImage_(s,r,o)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var n=this,r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var h=r.getSource(),l=h.getTileGrid(),u=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),c=t.extent,p=function(o,p){var d=t.getTile(t.tileKeys[o]);if(d.getState()==te.LOADED){var f=d.tileCoord,_=l.getTileCoordExtent(f),g=ei(c,_),v=Ke(_,g)?null:Pe(g,r.getRenderBuffer()*u,n.tmpExtent),y=d.getProjection(),m=!1;Ki(i,y)||(m=!0,d.setProjection(i)),a.dirty=!1;var E=new Es(0,g,u,e,h.getOverlaps(),n.declutterTree_,r.getRenderBuffer()),x=Rs(u,e),T=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,u)),e){var n=this.renderFeature(t,x,e,E);this.dirty_=this.dirty_||n,a.dirty=a.dirty||n}},S=d.getFeatures();s&&s!==a.renderedRenderOrder&&S.sort(s);for(var R=0,C=S.length;R<C;++R){var w=S[R];m&&(y.getUnits()==fi.TILE_PIXELS&&(y.setWorldExtent(_),y.setExtent(d.getExtent())),w.getGeometry().transform(y,i)),v&&!oi(v,w.getGeometry().getExtent())||T.call(n,w)}E.finish(),d.setReplayGroup(r,t.tileCoord.toString(),E)}},d=0,f=t.tileKeys.length;d<f;++d)p(d);a.renderedRevision=o,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var s=e.viewState.resolution,a=e.viewState.rotation;i=null==i?0:i;var h,l,u,c,p=this.getLayer(),d={},f=this.renderedTiles;for(u=0,c=f.length;u<c;++u){var _=f[u];if(Fe(h=Pe(_.extent,i*s,h),t))for(var g=0,v=_.tileKeys.length;g<v;++g){var y=_.getTile(_.tileKeys[g]);if(y.getState()==te.LOADED){var m=y.getReplayGroup(p,_.tileCoord.toString());l=l||m.forEachFeatureAtCoordinate(t,s,a,i,{},function(t){var e=o(t);if(!(e in d))return d[e]=!0,n.call(r,t,p)},null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,r=i.getResolution(n[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,h=i.getTileCoordExtent(n,this.tmpExtent),l=o.center,u=ii(h),c=e.size,p=Math.round(s*c[0]/2),d=Math.round(s*c[1]/2);return tn(this.tmpTransform_,p,d,r/a,r/a,o.rotation,(u[0]-l[0])/r,(l[1]-u[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,n){var r=this.getLayer(),o=r.getRenderMode();if(o!=Ls.IMAGE){var s,a,h=r.getDeclutter()?{}:null,l=r.getSource(),u=bs[o],c=i.pixelRatio,p=i.viewState.rotation,d=i.size;p&&mo(e,-p,s=Math.round(c*d[0]/2),a=Math.round(c*d[1]/2)),h&&this.declutterTree_.clear();for(var f=i.viewHints,_=!(f[ge]||f[ve]),g=this.renderedTiles,v=l.getTileGridForProjection(i.viewState.projection),y=[],m=[],E=g.length-1;E>=0;--E){var x=g[E];if(x.getState()!=te.ABORT)for(var T=x.tileCoord,S=v.getTileCoordExtent(T,this.tmpExtent)[0]-x.extent[0],R=void 0,C=0,w=x.tileKeys.length;C<w;++C){var I=x.getTile(x.tileKeys[C]);if(I.getState()==te.LOADED){var O=I.getReplayGroup(r,T.toString());if(O&&O.hasReplays(u)){R||(R=this.getTransform(i,S));var L=I.tileCoord[0],M=O.getClipCoords(R);e.save(),e.globalAlpha=n.opacity;for(var b=0,P=y.length;b<P;++b){var D=y[b];L<m[b]&&(e.beginPath(),e.moveTo(M[0],M[1]),e.lineTo(M[2],M[3]),e.lineTo(M[4],M[5]),e.lineTo(M[6],M[7]),e.moveTo(D[6],D[7]),e.lineTo(D[4],D[5]),e.lineTo(D[2],D[3]),e.lineTo(D[0],D[1]),e.clip())}O.replay(e,R,p,{},_,u,h),e.restore(),y.push(M),m.push(L)}}}}h&&function(t,e,i,n){for(var r=Object.keys(t).map(Number).sort(Dt),o={},s=0,a=r.length;s<a;++s)for(var h=t[r[s].toString()],l=0,u=h.length;l<u;){var c=h[l++],p=h[l++];c.replay(e,p,i,o,n)}}(h,e,p,_),p&&mo(e,p,s,a)}t.prototype.postCompose.call(this,e,i,n)},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,s=i.length;o<s;++o)r=ws(n,t,i[o],e,this.handleStyleImageChange_,this)||r;else r=ws(n,t,i,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision(),s=Ms[n.getRenderMode()];if(s&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var a=t.wrappedTileCoord,h=a[0],l=n.getSource(),u=l.getTileGridForProjection(i),c=u.getResolution(h),p=t.getContext(n),d=l.getTilePixelSize(h,e,i);p.canvas.width=d[0],p.canvas.height=d[1];for(var f=u.getTileCoordExtent(a,this.tmpExtent),_=0,g=t.tileKeys.length;_<g;++_){var v=t.getTile(t.tileKeys[_]);if(v.getState()==te.LOADED){var y=e/c,m=Bi(this.tmpTransform_);Qi(m,y,-y),$i(m,-f[0],-f[3]),v.getReplayGroup(n,t.tileCoord.toString()).replay(p,m,0,{},!0,s)}}}},e}(zo);Ps.handles=function(t){return t.getType()===to.VECTOR_TILE},Ps.create=function(t,e){return new Ps(e)};var Ds=Ps,As=function(t){function e(e){(e=u({},e)).controls||(e.controls=cr()),e.interactions||(e.interactions=function(t){var e=t||{},i=new N,n=new dr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new Dr),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new xr({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Pr({condition:e.onFocusOnly?Sr:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Vr),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new qr({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new Wr),i.push(new Hr({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new Zr({condition:e.onFocusOnly?Sr:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new jr({duration:e.zoomDuration})),i}()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Go(this);return t.registerLayerRenderers([Xo,zo,Os,Ds]),t},e}(Vn),Fs="preload",ks="useInterimTilesOnError",Gs=function(t){function e(e){var i=e||{},n=u({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=to.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Fs)},e.prototype.setPreload=function(t){this.set(Fs,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(ks)},e.prototype.setUseInterimTilesOnError=function(t){this.set(ks,t)},e}(or);Gs.prototype.getSource;var Ns=Gs,Ys=function(t){function e(e,i,n){t.call(this);var r=n||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(M.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==te.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==te.LOADED){t.interimTile=null;break}t.getState()==te.LOADING?e=t:t.getState()==te.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:Ce(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(L);function js(){var t=jn(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Xs=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,s),this.crossOrigin_=r,this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==te.LOADING&&(this.unlistenImage_(),this.image_=js()),this.interimTile&&this.interimTile.dispose(),this.state=te.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=te.ERROR,this.unlistenImage_(),this.image_=js(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=te.LOADED:this.state=te.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==te.ERROR&&(this.state=te.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==te.IDLE&&(this.state=te.LOADING,this.changed(),this.imageListenerKeys_=[y(this.image_,M.ERROR,this.handleImageError_,this),y(this.image_,M.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(E),this.imageListenerKeys_=null},e}(Ys);function Ks(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Ws(t,e,i){return t+"/"+e+"/"+i}function Us(t){return Ws(t[0],t[1],t[2])}var Hs=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Us(e.tileCoord)),e.dispose())},this)}},e}(no);function zs(t,e,i,n){var r=i-t,o=n-e,s=Math.sqrt(r*r+o*o);return[Math.round(i+r/s),Math.round(n+o/s)]}function Bs(t,e,i,n,r,o,s,a,h,l,u){var c=jn(Math.round(i*t),Math.round(i*e));if(0===h.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];h.forEach(function(t,e,i){We(p,t.extent)});var d=ri(p),f=ti(p),_=jn(Math.round(i*d/n),Math.round(i*f/n)),g=i/n;h.forEach(function(t,e,i){var n=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=ri(t.extent),s=ti(t.extent);_.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*g,r*g,o*g,s*g)});var v=ii(s);return a.getTriangles().forEach(function(t,e,r){var s=t.source,a=t.target,h=s[0][0],l=s[0][1],u=s[1][0],d=s[1][1],f=s[2][0],g=s[2][1],y=(a[0][0]-v[0])/o,m=-(a[0][1]-v[1])/o,E=(a[1][0]-v[0])/o,x=-(a[1][1]-v[1])/o,T=(a[2][0]-v[0])/o,S=-(a[2][1]-v[1])/o,R=h,C=l;h=0,l=0;var w=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);s>r&&(r=s,n=o)}if(0===r)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var l=-t[h][i]/t[i][i],u=i;u<e+1;u++)i==u?t[h][u]=0:t[h][u]+=l*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*c[p]}return c}([[u-=R,d-=C,0,0,E-y],[f-=R,g-=C,0,0,T-y],[0,0,u,d,x-m],[0,0,f,g,S-m]]);if(w){c.save(),c.beginPath();var I=(y+E+T)/3,O=(m+x+S)/3,L=zs(I,O,y,m),M=zs(I,O,E,x),b=zs(I,O,T,S);c.moveTo(M[0],M[1]),c.lineTo(L[0],L[1]),c.lineTo(b[0],b[1]),c.clip(),c.transform(w[0],w[2],w[1],w[3],y,m),c.translate(p[0]-R,p[3]-C),c.scale(n/i,-n/i),c.drawImage(_.canvas,0,0),c.restore()}}),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach(function(t,e,i){var n=t.target,r=(n[0][0]-v[0])/o,s=-(n[0][1]-v[1])/o,a=(n[1][0]-v[0])/o,h=-(n[1][1]-v[1])/o,l=(n[2][0]-v[0])/o,u=-(n[2][1]-v[1])/o;c.beginPath(),c.moveTo(a,h),c.lineTo(r,s),c.lineTo(l,u),c.closePath(),c.stroke()}),c.restore()),c.canvas}var Zs=function(t,e,i,n,r){this.sourceProj_=t,this.targetProj_=e;var o={},s=Ui(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&ri(n)==ri(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ri(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ri(this.targetProj_.getExtent()):null;var a=ii(i),h=ni(i),l=qe(i),u=Ve(i),c=this.transformInv_(a),p=this.transformInv_(h),d=this.transformInv_(l),f=this.transformInv_(u);if(this.addQuad_(a,h,l,u,c,p,d,f,10),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(t,e,i){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};Zs.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},Zs.prototype.addQuad_=function(t,e,i,n,r,o,s,a,h){var l=be([r,o,s,a]),u=this.sourceWorldWidth_?ri(l)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,d=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)d=ri(be([t,e,i,n]))/this.targetWorldWidth_>.25||d;!p&&this.sourceProj_.isGlobal()&&u&&(d=u>.25||d)}if(d||!this.maxSourceExtent_||oi(l,this.maxSourceExtent_)){if(!(d||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(h>0))return;d=!0}if(h>0){if(!d){var f,_=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(_);if(p)f=(ce(r[0],c)+ce(s[0],c))/2-ce(g[0],c);else f=(r[0]+s[0])/2-g[0];var v=(r[1]+s[1])/2-g[1];d=f*f+v*v>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var y=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(y),E=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(E);this.addQuad_(t,e,y,E,r,o,m,x,h-1),this.addQuad_(E,y,i,n,x,m,s,a,h-1)}else{var T=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(T),R=[(i[0]+n[0])/2,(i[1]+n[1])/2],C=this.transformInv_(R);this.addQuad_(t,T,R,n,r,S,C,a,h-1),this.addQuad_(T,e,i,R,S,o,s,C,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,s,a),this.addTriangle_(t,e,i,r,o,s)}},Zs.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,n){var r=e.source;Ue(t,r[0]),Ue(t,r[1]),Ue(t,r[2])}),t},Zs.prototype.getTriangles=function(){return this.triangles_};var Vs=Zs,qs=function(t){function e(e,i,n,r,o,s,a,h,l,u,c){t.call(this,o,te.IDLE),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var p=r.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),_=d?ei(p,d):p;if(0!==Ze(_)){var g=e.getExtent();g&&(f=f?ei(f,g):g);var v=r.getResolution(this.wrappedTileCoord_[0]),y=function(t,e,i,n){var r=Hi(i,e,t),o=Yi(e,n,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var h=t.getExtent();if(!h||Fe(h,r)){var l=Yi(t,o,r)/o;isFinite(l)&&l>0&&(o/=l)}return o}(e,n,Je(_),v);if(!isFinite(y)||y<=0)this.state=te.EMPTY;else{var m=void 0!==u?u:Jr;if(this.triangulation_=new Vs(e,n,_,f,y*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(y);var E=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(E[1]=se(E[1],f[1],f[3]),E[3]=se(E[3],f[1],f[3])):E=ei(E,f)),Ze(E)){for(var x=i.getTileRangeForExtentAndZ(E,this.sourceZ_),T=x.minX;T<=x.maxX;T++)for(var S=x.minY;S<=x.maxY;S++){var R=l(this.sourceZ_,T,S,a);R&&this.sourceTiles_.push(R)}0===this.sourceTiles_.length&&(this.state=te.EMPTY)}else this.state=te.EMPTY}else this.state=te.EMPTY}}else this.state=te.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==te.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==te.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=te.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Bs(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=te.LOADED}this.changed()},e.prototype.load=function(){if(this.state==te.IDLE){this.state=te.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var r=e.getState();if(r==te.IDLE||r==te.LOADING){t++;var o=v(e,M.CHANGE,function(i){var n=e.getState();n!=te.LOADED&&n!=te.ERROR&&n!=te.EMPTY||(E(o),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==te.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(E),this.sourcesListenerKeys_=null},e}(Ys);function Js(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,h){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(r,function(){return(-s[2]-1).toString()}).replace(o,function(){var t=s[0],i=e.getFullTileRange(t);return ee(i,55),(i.getHeight()+s[2]).toString()}):void 0}}function Qs(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=Js(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=ce(r,t.length);return t[o](e,i,n)}}}(n)}function $s(t,e,i){}function ta(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var ea=function(t){function e(e){t.call(this),this.projection_=Ni(e.projection),this.attributions_=ta(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:Hn.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return n()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=ta(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(F),ia=[0,0,0],na=function(t){var e,i,n,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,ee((e=this.resolutions_,i=!0,n=function(t,e){return e-t}||Dt,e.every(function(t,r){if(0===r)return!0;var o=n(e[r-1],t);return!(o>0||i&&0===o)})),17),!t.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,ee(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ii(a)),ee(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,ee(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:oe,ee(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Uo(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};na.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,r,s])},na.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,r){var o,s,a,h=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,r);l>=this.minZoom;){if(o=2===this.zoomFactor_?Wo(s=Math.floor(s/2),s,a=Math.floor(a/2),a,n):this.getTileRangeForExtentAndZ(h,l,n),e.call(i,l,o))return!0;--l}return!1},na.prototype.getExtent=function(){return this.extent_},na.prototype.getMaxZoom=function(){return this.maxZoom},na.prototype.getMinZoom=function(){return this.minZoom},na.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},na.prototype.getResolution=function(t){return this.resolutions_[t]},na.prototype.getResolutions=function(){return this.resolutions_},na.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return Wo(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},na.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=Zn(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*o[0]*r,a=n[0]+(e.maxX+1)*o[0]*r;return je(s,n[1]+e.minY*o[1]*r,a,n[1]+(e.maxY+1)*o[1]*r,i)},na.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=ia;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),Wo(r,n[1],o,n[2],i)},na.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Zn(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},na.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Zn(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,s=i[1]+t[2]*r[1]*n;return je(o,s,o+r[0]*n,s+r[1]*n,e)},na.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},na.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),h=Zn(this.getTileSize(o),this.tmpSize_),l=n?.5:0,u=n?0:.5,c=Math.floor((t-a[0])/i+l),p=Math.floor((e-a[1])/i+u),d=s*c/h[0],f=s*p/h[1];return n?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Ks(o,d,f,r)},na.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),s=this.getResolution(i),a=Zn(this.getTileSize(i),this.tmpSize_),h=n?.5:0,l=n?0:.5,u=Math.floor((t-o[0])/s+h),c=Math.floor((e-o[1])/s+l),p=u/a[0],d=c/a[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Ks(i,p,d,r)},na.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},na.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},na.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},na.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},na.prototype.getZForResolution=function(t,e){return se(At(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},na.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i};var ra=na;function oa(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){var r=void 0!==n?n:Le.TOP_LEFT,o=sa(t,e,i);return new ra({extent:t,origin:Qe(t,r),resolutions:o,tileSize:i})}(aa(t),e,i,n)}(t),t.setDefaultTileGrid(e)),e}function sa(t,e,i){for(var n=void 0!==e?e:re,r=ti(t),o=ri(t),s=Zn(void 0!==i?i:oe),a=Math.max(o/s[0],r/s[1]),h=n+1,l=new Array(h),u=0;u<h;++u)l[u]=a/Math.pow(2,u);return l}function aa(t){var e=(t=Ni(t)).getExtent();if(!e){var i=180*di[fi.DEGREES]/t.getMetersPerUnit();e=je(-i,-i,i,i)}return e}var ha=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new Hs(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,a,h=!0,l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u)s=Ws(e,l,u),a=!1,r.containsKey(s)&&(a=(o=r.get(s)).getState()===te.LOADED)&&(a=!1!==n(o)),a||(h=!1);return h},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,o){return n()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:oa(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Ki(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n,r,o,s=this.getTileGridForProjection(i),a=this.getTilePixelRatio(e),h=Zn(s.getTileSize(t),this.tmpSize);return 1==a?h:(n=h,r=a,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=n[0]*r+.5|0,o[1]=n[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=aa(i);if(Fe(o,r))return e;var s=ri(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||o.containsXY(n,r)}(t,n)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,i,n){},e}(ea),la=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(O),ua="tileloadstart",ca="tileloadend",pa="tileloaderror";function da(t,e){t.getImage().src=e}var fa=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:function(t){var e=t||{},i=e.extent||Ni("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:sa(i,e.maxZoom,e.tileSize)};return new ra(n)}({extent:aa(n),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:da,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Xs,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Ki(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Ki(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Ki(e,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=oa(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Ki(e,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Hs(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,r,o){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),h=a?this.tileUrlFunction(a,n,r):void 0,l=new this.tileClass(s,void 0!==h?te.IDLE:te.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,v(l,M.CHANGE,this.handleTileChange,this),l},e.prototype.getTile=function(t,e,i,n,r){var o=this.getProjection();if(o&&r&&!Ki(o,r)){var s,a=this.getTileCacheForProjection(r),h=[t,e,i],l=Us(h);a.containsKey(l)&&(s=a.get(l));var u=this.getKey();if(s&&s.key==u)return s;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(h,r),f=new qs(o,c,r,p,h,d,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,s?(f.interimTile=s,f.refreshInterimChain(),a.replace(l,f)):a.set(l,f),f}return this.getTileInternal(t,e,i,n,o||r)},e.prototype.getTileInternal=function(t,e,i,n,r){var o=null,s=Ws(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var h=o;o=this.createTile_(t,e,i,n,r,a),h.getState()==te.IDLE?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,n,r,a),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=Ni(t);if(i){var n=o(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):$s,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=o(i),r=i.getState();r==te.LOADING?(this.tileLoadingKeys_[n]=!0,e=ua):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=r==te.ERROR?pa:r==te.LOADED||r==te.ABORT?ca:void 0),null!=e&&this.dispatchEvent(new la(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n,r=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(n=r;n<=o;++n)e.push(t.replace(i[0],String.fromCharCode(n)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Qs(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=Ws(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(ha))),_a="projection";function ga(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var va=new(function(t){function e(e){var i=e||{},n=document.createElement("div");n.className=void 0!==i.className?i.className:"ol-mouse-position",t.call(this,{element:n,render:i.render||ga,target:i.target}),v(this,A(_a),this.handleProjectionChanged_,this),i.coordinateFormat&&this.setCoordinateFormat(i.coordinateFormat),i.projection&&this.setProjection(i.projection),this.undefinedHTML_=void 0!==i.undefinedHTML?i.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(_a)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(v(i,M.MOUSEMOVE,this.handleMouseMove,this),v(i,M.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(v(i,M.MOUSEOUT,this.handleMouseOut,this),v(i,M.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(_a,Ni(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?Wi(this.mapProjection_,i):ki}var n=this.getMap().getCoordinateFromPixel(t);if(n){this.transform_(n,n);var r=this.getCoordinateFormat();e=r?r(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(Qn))({coordinateFormat:Te(4),projection:"EPSG:4326",className:"custom-mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"});document.getElementById("projection").addEventListener("change",function(t){va.setProjection(t.target)}),document.getElementById("precision").addEventListener("change",function(t){var e=Te(t.target);va.setCoordinateFormat(e)});var ya,ma;document.getElementById("mapdiv"),new As({controls:cr().extend([va]),target:"mapdiv",layers:[new Ns({source:new fa({url:"/mapdata/{z}/{x}/{y}.png"})})],view:new Yn({center:(ya=[120,30],Hi(ya,"EPSG:4326",void 0!==ma?ma:"EPSG:3857")),zoom:10,minZom:7})})},0:function(t,e,i){t.exports=i("./src/index.ts")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3F1aWNrc2VsZWN0L3F1aWNrc2VsZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yYnVzaC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvQXNzZXJ0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvb2JqLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvVGFyZ2V0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL01hcEV2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2hhcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvRXZlbnRTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTW91c2VTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTXNTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTmF0aXZlU291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL1BvaW50ZXJFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvVG91Y2hTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvUG9pbnRlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9hc3NlcnRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVRdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9tYXRoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9jZW50ZXJjb25zdHJhaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yb3RhdGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdIaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Vhc2luZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L0Nvcm5lci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeUxheW91dC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3BoZXJlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1VuaXRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzM4NTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzQzMjYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovdHJhbnNmb3Jtcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcHJvai5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdHJhbnNmb3JtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2Nsb3Nlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9kZWZsYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW5mbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0xpbmVhclJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vUG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jb250YWlucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2VnbWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9yZXZlcnNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvb3JpZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvbHlnb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3Jlc29sdXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9kb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9QbHVnZ2FibGVNYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC91dGlsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9LaW5ldGljLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUG9pbnRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0JveC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9LZXlDb2RlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VDYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTGF5ZXJUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9WZWN0b3JSZW5kZXJUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvTFJVQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9jb2xvcmxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9WZWN0b3JDb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL01hcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL01hcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9MYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL0ludGVybWVkaWF0ZUNhbnZhcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL0ltYWdlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL1JlcGxheUdyb3VwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvUmVwbGF5VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RleHRwYXRoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL0luc3RydWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvcmVwbGF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL1JlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9JbWFnZVJlcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy9MaW5lU3RyaW5nUmVwbGF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL1BvbHlnb25SZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zdHJhaWdodGNodW5rLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9UZXh0UGxhY2VtZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzL1RleHRSZXBsYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9jYW52YXMvUmVwbGF5R3JvdXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL3ZlY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9WZWN0b3JUaWxlUmVuZGVyVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvclRpbGVMYXllci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9UaWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZVRpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVjb29yZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvVGlsZUNhY2hlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ouanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdGlsZXVybGZ1bmN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9UaWxlR3JpZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1hZWi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1VybFRpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicGFyZW50SG90VXBkYXRlQ2FsbGJhY2siLCJ3aW5kb3ciLCJjaHVua0lkIiwibW9yZU1vZHVsZXMiLCJob3RBdmFpbGFibGVGaWxlc01hcCIsImhvdFJlcXVlc3RlZEZpbGVzTWFwIiwibW9kdWxlSWQiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJob3RVcGRhdGUiLCJob3RXYWl0aW5nRmlsZXMiLCJob3RDaHVua3NMb2FkaW5nIiwiaG90VXBkYXRlRG93bmxvYWRlZCIsImhvdEFkZFVwZGF0ZUNodW5rIiwiaG90Q3VycmVudENoaWxkTW9kdWxlIiwiaG90QXBwbHlPblVwZGF0ZSIsImhvdEN1cnJlbnRIYXNoIiwiaG90UmVxdWVzdFRpbWVvdXQiLCJob3RDdXJyZW50TW9kdWxlRGF0YSIsImhvdEN1cnJlbnRQYXJlbnRzIiwiaG90Q3VycmVudFBhcmVudHNUZW1wIiwiaG90Q3JlYXRlUmVxdWlyZSIsIm1lIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJmbiIsInJlcXVlc3QiLCJob3QiLCJhY3RpdmUiLCJwYXJlbnRzIiwiaW5kZXhPZiIsInB1c2giLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJ3YXJuIiwiT2JqZWN0RmFjdG9yeSIsIm5hbWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwic2V0IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImUiLCJob3RTdGF0dXMiLCJob3RTZXRTdGF0dXMiLCJ0aGVuIiwiZmluaXNoQ2h1bmtMb2FkaW5nIiwiZXJyIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwiaG90RW5zdXJlVXBkYXRlQ2h1bmsiLCJ0IiwibW9kZSIsImhvdENyZWF0ZU1vZHVsZSIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkRlY2xpbmVkIiwiX2Rpc3Bvc2VIYW5kbGVycyIsIl9tYWluIiwiYWNjZXB0IiwiZGVwIiwiY2FsbGJhY2siLCJ1bmRlZmluZWQiLCJpIiwibGVuZ3RoIiwiZGVjbGluZSIsImRpc3Bvc2UiLCJhZGREaXNwb3NlSGFuZGxlciIsInJlbW92ZURpc3Bvc2VIYW5kbGVyIiwiaWR4Iiwic3BsaWNlIiwiY2hlY2siLCJob3RDaGVjayIsImFwcGx5IiwiaG90QXBwbHkiLCJzdGF0dXMiLCJsIiwiaG90U3RhdHVzSGFuZGxlcnMiLCJhZGRTdGF0dXNIYW5kbGVyIiwicmVtb3ZlU3RhdHVzSGFuZGxlciIsImRhdGEiLCJuZXdTdGF0dXMiLCJob3REZWZlcnJlZCIsImhvdFVwZGF0ZU5ld0hhc2giLCJ0b01vZHVsZUlkIiwiaWQiLCJFcnJvciIsInJlcXVlc3RUaW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJYTUxIdHRwUmVxdWVzdCIsInJlcXVlc3RQYXRoIiwicCIsIm9wZW4iLCJ0aW1lb3V0Iiwic2VuZCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJ1cGRhdGUiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJjIiwiaCIsInByb21pc2UiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjaGFyc2V0Iiwic3JjIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaG90RG93bmxvYWRVcGRhdGVDaHVuayIsImRlZmVycmVkIiwicmVzdWx0Iiwib3V0ZGF0ZWRNb2R1bGVzIiwib3B0aW9ucyIsImNiIiwiaiIsIm1vZHVsZSIsImdldEFmZmVjdGVkU3R1ZmYiLCJ1cGRhdGVNb2R1bGVJZCIsIm91dGRhdGVkRGVwZW5kZW5jaWVzIiwicXVldWUiLCJtYXAiLCJjaGFpbiIsInF1ZXVlSXRlbSIsInBvcCIsInR5cGUiLCJwYXJlbnRJZCIsInBhcmVudCIsImNvbmNhdCIsImFkZEFsbFRvU2V0IiwiYSIsImIiLCJpdGVtIiwiYXBwbGllZFVwZGF0ZSIsIndhcm5VbmV4cGVjdGVkUmVxdWlyZSIsImFib3J0RXJyb3IiLCJkb0FwcGx5IiwiZG9EaXNwb3NlIiwiY2hhaW5JbmZvIiwiam9pbiIsIm9uRGVjbGluZWQiLCJpZ25vcmVEZWNsaW5lZCIsIm9uVW5hY2NlcHRlZCIsImlnbm9yZVVuYWNjZXB0ZWQiLCJvbkFjY2VwdGVkIiwib25EaXNwb3NlZCIsIm91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyIsImVycm9ySGFuZGxlciIsImtleXMiLCJmb3JFYWNoIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaG90RGlzcG9zZUNodW5rIiwiZGVwZW5kZW5jeSIsIm1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzIiwic2xpY2UiLCJkaXNwb3NlSGFuZGxlcnMiLCJjaGlsZCIsIm1vZHVsZXMiLCJlcnJvciIsImNhbGxiYWNrcyIsIm9uRXJyb3JlZCIsImRlcGVuZGVuY3lJZCIsImlnbm9yZUVycm9yZWQiLCJlcnIyIiwib3JpZ2luYWxFcnJvciIsImV4cG9ydHMiLCJtIiwiZCIsImdldHRlciIsIm8iLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicyIsInN3YXAiLCJhcnIiLCJ0bXAiLCJkZWZhdWx0Q29tcGFyZSIsImsiLCJsZWZ0IiwicmlnaHQiLCJjb21wYXJlIiwicXVpY2tzZWxlY3RTdGVwIiwieiIsIk1hdGgiLCJsb2ciLCJleHAiLCJzZCIsInNxcnQiLCJuZXdMZWZ0IiwibWF4IiwiZmxvb3IiLCJuZXdSaWdodCIsIm1pbiIsImZhY3RvcnkiLCJyYnVzaCIsImRlZmF1bHQiLCJxdWlja3NlbGVjdCIsIm1heEVudHJpZXMiLCJmb3JtYXQiLCJ0aGlzIiwiX21heEVudHJpZXMiLCJfbWluRW50cmllcyIsImNlaWwiLCJfaW5pdEZvcm1hdCIsImNsZWFyIiwiZmluZEl0ZW0iLCJpdGVtcyIsImVxdWFsc0ZuIiwiY2FsY0JCb3giLCJub2RlIiwidG9CQm94IiwiZGlzdEJCb3giLCJkZXN0Tm9kZSIsImNyZWF0ZU5vZGUiLCJtaW5YIiwiSW5maW5pdHkiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJleHRlbmQiLCJsZWFmIiwiY29tcGFyZU5vZGVNaW5YIiwiY29tcGFyZU5vZGVNaW5ZIiwiYmJveEFyZWEiLCJiYm94TWFyZ2luIiwiY29udGFpbnMiLCJpbnRlcnNlY3RzIiwiaGVpZ2h0IiwibXVsdGlTZWxlY3QiLCJtaWQiLCJzdGFjayIsImFsbCIsIl9hbGwiLCJzZWFyY2giLCJiYm94IiwibGVuIiwiY2hpbGRCQm94Iiwibm9kZXNUb1NlYXJjaCIsImNvbGxpZGVzIiwibG9hZCIsImluc2VydCIsIl9idWlsZCIsIl9zcGxpdFJvb3QiLCJ0bXBOb2RlIiwiX2luc2VydCIsInJlbW92ZSIsImluZGV4IiwiZ29pbmdVcCIsInBhdGgiLCJpbmRleGVzIiwiX2NvbmRlbnNlIiwiY29tcGFyZU1pblgiLCJjb21wYXJlTWluWSIsInRvSlNPTiIsImZyb21KU09OIiwiTiIsIk0iLCJwb3ciLCJyaWdodDIiLCJyaWdodDMiLCJOMiIsIk4xIiwiX2Nob29zZVN1YnRyZWUiLCJsZXZlbCIsInRhcmdldE5vZGUiLCJhcmVhIiwiZW5sYXJnZW1lbnQiLCJtaW5BcmVhIiwibWluRW5sYXJnZW1lbnQiLCJpc05vZGUiLCJpbnNlcnRQYXRoIiwiX3NwbGl0IiwiX2FkanVzdFBhcmVudEJCb3hlcyIsIl9jaG9vc2VTcGxpdEF4aXMiLCJzcGxpdEluZGV4IiwiX2Nob29zZVNwbGl0SW5kZXgiLCJuZXdOb2RlIiwiYmJveDEiLCJiYm94MiIsIm92ZXJsYXAiLCJtaW5PdmVybGFwIiwiX2FsbERpc3RNYXJnaW4iLCJzb3J0IiwibGVmdEJCb3giLCJyaWdodEJCb3giLCJtYXJnaW4iLCJzaWJsaW5ncyIsImNvbXBhcmVBcnIiLCJGdW5jdGlvbiIsInV0aWxfYWJzdHJhY3QiLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9iaiIsIm9sX3VpZCIsIlN0cmluZyIsIlZFUlNJT04iLCJvbF9Bc3NlcnRpb25FcnJvciIsIkFzc2VydGlvbkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzcGxpdCIsIl9fcHJvdG9fXyIsImNvbnN0cnVjdG9yIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsIkFERCIsIlJFTU9WRSIsIk9iamVjdEV2ZW50VHlwZSIsIm9ial9hc3NpZ24iLCJhc3NpZ24iLCJ0YXJnZXQiLCJ2YXJfc291cmNlcyIsImFyZ3VtZW50cyQxIiwiYXJndW1lbnRzIiwiVHlwZUVycm9yIiwib3V0cHV0IiwiaWkiLCJzb3VyY2UiLCJvYmpfY2xlYXIiLCJvYmpfaXNFbXB0eSIsImZpbmRMaXN0ZW5lciIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwib3B0X3RoaXMiLCJvcHRfc2V0RGVsZXRlSW5kZXgiLCJsaXN0ZW5lck9iaiIsImJpbmRUbyIsImRlbGV0ZUluZGV4IiwiZ2V0TGlzdGVuZXJzIiwibGlzdGVuZXJNYXAiLCJnZXRMaXN0ZW5lck1hcCIsIm9wdF9jcmVhdGUiLCJvbF9sbSIsInJlbW92ZUxpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJib3VuZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXJNYXAiLCJsaXN0ZW4iLCJvcHRfb25jZSIsImNhbGxPbmNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInVubGlzdGVuQnlLZXkiLCJiaW5kTGlzdGVuZXIiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW4iLCJEaXNwb3NhYmxlX0Rpc3Bvc2FibGUiLCJkaXNwb3NlZF8iLCJkaXNwb3NlSW50ZXJuYWwiLCJvbF9EaXNwb3NhYmxlIiwiVFJVRSIsIkZBTFNFIiwiVk9JRCIsIkV2ZW50IiwicHJvcGFnYXRpb25TdG9wcGVkIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJldmVudHNfRXZlbnQiLCJldmVudHNfVGFyZ2V0IiwiRGlzcG9zYWJsZSIsIlRhcmdldCIsInBlbmRpbmdSZW1vdmFsc18iLCJkaXNwYXRjaGluZ18iLCJsaXN0ZW5lcnNfIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwicHJvcGFnYXRlIiwicGVuZGluZ1JlbW92YWxzIiwidW5saXN0ZW5BbGwiLCJoYXNMaXN0ZW5lciIsIm9wdF90eXBlIiwiRXZlbnRUeXBlIiwiQ0hBTkdFIiwiQ0xFQVIiLCJDT05URVhUTUVOVSIsIkNMSUNLIiwiREJMQ0xJQ0siLCJEUkFHRU5URVIiLCJEUkFHT1ZFUiIsIkRST1AiLCJFUlJPUiIsIktFWURPV04iLCJLRVlQUkVTUyIsIkxPQUQiLCJNT1VTRURPV04iLCJNT1VTRU1PVkUiLCJNT1VTRU9VVCIsIk1PVVNFVVAiLCJNT1VTRVdIRUVMIiwiTVNQT0lOVEVSRE9XTiIsIlJFU0laRSIsIlRPVUNIU1RBUlQiLCJUT1VDSE1PVkUiLCJUT1VDSEVORCIsIldIRUVMIiwib2xfT2JzZXJ2YWJsZSIsIkV2ZW50VGFyZ2V0IiwiT2JzZXJ2YWJsZSIsInJldmlzaW9uXyIsImNoYW5nZWQiLCJnZXRSZXZpc2lvbiIsIm9uIiwiQXJyYXkiLCJpc0FycmF5Iiwib25jZSIsInVuIiwiT2JqZWN0RXZlbnQiLCJvbGRWYWx1ZSIsImNoYW5nZUV2ZW50VHlwZUNhY2hlIiwiZ2V0Q2hhbmdlRXZlbnRUeXBlIiwib2xfT2JqZWN0IiwiQmFzZU9iamVjdCIsIm9wdF92YWx1ZXMiLCJ2YWx1ZXNfIiwic2V0UHJvcGVydGllcyIsImdldEtleXMiLCJnZXRQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwib3B0X3NpbGVudCIsInZhbHVlcyIsInVuc2V0IiwiUHJvcGVydHkiLCJDb2xsZWN0aW9uRXZlbnQiLCJvcHRfZWxlbWVudCIsImVsZW1lbnQiLCJvbF9Db2xsZWN0aW9uIiwiQ29sbGVjdGlvbiIsIm9wdF9hcnJheSIsIm9wdF9vcHRpb25zIiwidW5pcXVlXyIsInVuaXF1ZSIsImFycmF5XyIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiZ2V0TGVuZ3RoIiwiZiIsImFycmF5IiwiZ2V0QXJyYXkiLCJpbnNlcnRBdCIsImVsZW0iLCJyZW1vdmVBdCIsInByZXYiLCJzZXRBdCIsIm9wdF9leGNlcHQiLCJvbF9NYXBFdmVudCIsIk1hcEV2ZW50Iiwib3B0X2ZyYW1lU3RhdGUiLCJmcmFtZVN0YXRlIiwib2xfTWFwQnJvd3NlckV2ZW50IiwiTWFwQnJvd3NlckV2ZW50IiwiYnJvd3NlckV2ZW50Iiwib3B0X2RyYWdnaW5nIiwib3JpZ2luYWxFdmVudCIsInBpeGVsIiwiZ2V0RXZlbnRQaXhlbCIsImNvb3JkaW5hdGUiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiZHJhZ2dpbmciLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIlNBRkFSSSIsIldFQktJVCIsIk1BQyIsIkRFVklDRV9QSVhFTF9SQVRJTyIsImRldmljZVBpeGVsUmF0aW8iLCJDQU5WQVNfTElORV9EQVNIIiwiaGFzIiwiZ2V0Q29udGV4dCIsInNldExpbmVEYXNoIiwiVE9VQ0giLCJQT0lOVEVSIiwiTVNQT0lOVEVSIiwiTWFwQnJvd3NlckV2ZW50VHlwZSIsIlNJTkdMRUNMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsIm9sX01hcEJyb3dzZXJQb2ludGVyRXZlbnQiLCJNYXBCcm93c2VyUG9pbnRlckV2ZW50IiwicG9pbnRlckV2ZW50IiwicG9pbnRlcl9FdmVudFR5cGUiLCJFdmVudFNvdXJjZV9FdmVudFNvdXJjZSIsImRpc3BhdGNoZXIiLCJtYXBwaW5nIiwibWFwcGluZ18iLCJnZXRFdmVudHMiLCJnZXRIYW5kbGVyRm9yRXZlbnQiLCJwb2ludGVyX0V2ZW50U291cmNlIiwiUE9JTlRFUl9JRCIsIlBPSU5URVJfVFlQRSIsIm1vdXNlZG93biIsImluRXZlbnQiLCJpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyIsInRvU3RyaW5nIiwicG9pbnRlck1hcCIsImNhbmNlbCIsInByZXBhcmVFdmVudCIsImRvd24iLCJtb3VzZW1vdmUiLCJtb3ZlIiwibW91c2V1cCIsImJ1dHRvbiIsInVwIiwiY2xlYW51cE1vdXNlIiwibW91c2VvdmVyIiwiZW50ZXJPdmVyIiwibW91c2VvdXQiLCJsZWF2ZU91dCIsImNsb25lRXZlbnQiLCJwZCIsInBvaW50ZXJJZCIsImlzUHJpbWFyeSIsInBvaW50ZXJUeXBlIiwicG9pbnRlcl9Nb3VzZVNvdXJjZSIsIkV2ZW50U291cmNlIiwiTW91c2VTb3VyY2UiLCJsYXN0VG91Y2hlcyIsImx0cyIsIngiLCJjbGllbnRYIiwieSIsImNsaWVudFkiLCJkeCIsImFicyIsImR5IiwiUE9JTlRFUl9UWVBFUyIsIm1zUG9pbnRlckRvd24iLCJwcmVwYXJlRXZlbnRfIiwibXNQb2ludGVyTW92ZSIsIm1zUG9pbnRlclVwIiwiY2xlYW51cCIsIm1zUG9pbnRlck91dCIsIm1zUG9pbnRlck92ZXIiLCJtc1BvaW50ZXJDYW5jZWwiLCJtc0xvc3RQb2ludGVyQ2FwdHVyZSIsIm1ha2VFdmVudCIsIm1zR290UG9pbnRlckNhcHR1cmUiLCJwb2ludGVyX01zU291cmNlIiwiTXNTb3VyY2UiLCJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJEb3duIiwiZmlyZU5hdGl2ZUV2ZW50IiwicG9pbnRlck1vdmUiLCJwb2ludGVyVXAiLCJwb2ludGVyT3V0IiwicG9pbnRlck92ZXIiLCJwb2ludGVyQ2FuY2VsIiwibG9zdFBvaW50ZXJDYXB0dXJlIiwiZ290UG9pbnRlckNhcHR1cmUiLCJwb2ludGVyX05hdGl2ZVNvdXJjZSIsIk5hdGl2ZVNvdXJjZSIsInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyb3V0IiwicG9pbnRlcm92ZXIiLCJwb2ludGVyY2FuY2VsIiwiZ290cG9pbnRlcmNhcHR1cmUiLCJsb3N0cG9pbnRlcmNhcHR1cmUiLCJIQVNfQlVUVE9OUyIsIlBvaW50ZXJFdmVudCIsIl9FdmVudCIsIm9wdF9ldmVudERpY3QiLCJldmVudERpY3QiLCJidXR0b25zIiwid2hpY2giLCJnZXRCdXR0b25zIiwicHJlc3N1cmUiLCJnZXRQcmVzc3VyZSIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsInJlbGF0ZWRUYXJnZXQiLCJ3aWR0aCIsInRpbHRYIiwidGlsdFkiLCJod1RpbWVzdGFtcCIsImV2IiwiTW91c2VFdmVudCIsInBvaW50ZXJfUG9pbnRlckV2ZW50IiwibnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiIsImxpbmVhckZpbmROZWFyZXN0IiwiZGlyZWN0aW9uIiwicmV2ZXJzZVN1YkFycmF5IiwiYmVnaW4iLCJlbmQiLCJleHRlbnNpb24iLCJlcXVhbHMiLCJhcnIxIiwiYXJyMiIsImxlbjEiLCJ0b3VjaHN0YXJ0IiwidmFjdXVtVG91Y2hlc18iLCJzZXRQcmltYXJ5VG91Y2hfIiwiY2hhbmdlZFRvdWNoZXMiLCJkZWR1cFN5bnRoTW91c2VfIiwiY2xpY2tDb3VudF8iLCJwcm9jZXNzVG91Y2hlc18iLCJvdmVyRG93bl8iLCJ0b3VjaG1vdmUiLCJtb3ZlT3Zlck91dF8iLCJ0b3VjaGVuZCIsInVwT3V0XyIsInRvdWNoY2FuY2VsIiwiY2FuY2VsT3V0XyIsInBvaW50ZXJfVG91Y2hTb3VyY2UiLCJUb3VjaFNvdXJjZSIsIm1vdXNlU291cmNlIiwiZmlyc3RUb3VjaElkXyIsInJlc2V0SWRfIiwiZGVkdXBUaW1lb3V0XyIsImlzUHJpbWFyeVRvdWNoXyIsImluVG91Y2giLCJpZGVudGlmaWVyIiwiY291bnQiLCJjYW5jZWxSZXNldENsaWNrQ291bnRfIiwicmVtb3ZlUHJpbWFyeVBvaW50ZXJfIiwiaW5Qb2ludGVyIiwicmVzZXRDbGlja0NvdW50XyIsInNldFRpbWVvdXQiLCJyZXNldENsaWNrQ291bnRIYW5kbGVyXyIsImNsZWFyVGltZW91dCIsInRvdWNoVG9Qb2ludGVyXyIsInJhZGl1c1giLCJyYWRpdXNZIiwiZm9yY2UiLCJpbkZ1bmN0aW9uIiwidG91Y2hlcyIsInBvaW50ZXIiLCJmaW5kVG91Y2hfIiwidG91Y2hMaXN0Iiwic2VhcmNoSWQiLCJOdW1iZXIiLCJvdXQiLCJpJDEiLCJvdXRUYXJnZXQiLCJvdmVyIiwiZW50ZXIiLCJvdXRFdmVudCIsImxlYXZlIiwiY2xlYW5VcFBvaW50ZXJfIiwibHQiLCJDTE9ORV9QUk9QUyIsInBvaW50ZXJfUG9pbnRlckV2ZW50SGFuZGxlciIsIlBvaW50ZXJFdmVudEhhbmRsZXIiLCJlbGVtZW50XyIsImV2ZW50TWFwXyIsImV2ZW50U291cmNlTGlzdF8iLCJyZWdpc3RlclNvdXJjZXMiLCJyZWdpc3RlclNvdXJjZSIsInJlZ2lzdGVyXyIsIm5ld0V2ZW50cyIsImhhbmRsZXIiLCJldmVudFNvdXJjZSIsImFkZEV2ZW50c18iLCJ1bnJlZ2lzdGVyXyIsInJlbW92ZUV2ZW50c18iLCJldmVudEhhbmRsZXJfIiwiZXZlbnRzIiwiZXZlbnROYW1lIiwiZXZlbnRDb3B5IiwiZmlyZUV2ZW50IiwiY29udGFpbnNfIiwiY29udGFpbmVyIiwiY29udGFpbmVkIiwiaW5UeXBlIiwid3JhcE1vdXNlRXZlbnQiLCJvbF9NYXBCcm93c2VyRXZlbnRIYW5kbGVyIiwiTWFwQnJvd3NlckV2ZW50SGFuZGxlciIsIm1vdmVUb2xlcmFuY2UiLCJtYXBfIiwiY2xpY2tUaW1lb3V0SWRfIiwiZHJhZ2dpbmdfIiwiZHJhZ0xpc3RlbmVyS2V5c18iLCJtb3ZlVG9sZXJhbmNlXyIsImRvd25fIiwiZ2V0Vmlld3BvcnQiLCJhY3RpdmVQb2ludGVyc18iLCJ0cmFja2VkVG91Y2hlc18iLCJwb2ludGVyRXZlbnRIYW5kbGVyXyIsImRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8iLCJwb2ludGVyZG93bkxpc3RlbmVyS2V5XyIsImhhbmRsZVBvaW50ZXJEb3duXyIsInJlbGF5ZWRMaXN0ZW5lcktleV8iLCJyZWxheUV2ZW50XyIsImVtdWxhdGVDbGlja18iLCJuZXdFdmVudCIsInVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyIsImhhbmRsZVBvaW50ZXJVcF8iLCJpc01vdXNlQWN0aW9uQnV0dG9uXyIsImhhbmRsZVBvaW50ZXJNb3ZlXyIsImlzTW92aW5nXyIsIk1hcEV2ZW50VHlwZSIsIk1hcFByb3BlcnR5IiwiTEFZRVJHUk9VUCIsIlNJWkUiLCJUQVJHRVQiLCJWSUVXIiwicmVuZGVyX0V2ZW50VHlwZSIsIlRpbGVTdGF0ZSIsIklETEUiLCJMT0FESU5HIiwiTE9BREVEIiwiRU1QVFkiLCJBQk9SVCIsImFzc2VydCIsImFzc2VydGlvbiIsImVycm9yQ29kZSIsIlByaW9yaXR5UXVldWVfUHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5RnVuY3Rpb24iLCJrZXlGdW5jdGlvbiIsInByaW9yaXR5RnVuY3Rpb25fIiwia2V5RnVuY3Rpb25fIiwiZWxlbWVudHNfIiwicHJpb3JpdGllc18iLCJxdWV1ZWRFbGVtZW50c18iLCJkZXF1ZXVlIiwiZWxlbWVudHMiLCJwcmlvcml0aWVzIiwic2lmdFVwXyIsImVsZW1lbnRLZXkiLCJlbnF1ZXVlIiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRDb3VudCIsImdldExlZnRDaGlsZEluZGV4XyIsImdldFJpZ2h0Q2hpbGRJbmRleF8iLCJnZXRQYXJlbnRJbmRleF8iLCJoZWFwaWZ5XyIsImlzRW1wdHkiLCJpc0tleVF1ZXVlZCIsImlzUXVldWVkIiwic3RhcnRJbmRleCIsImxJbmRleCIsInJJbmRleCIsInNtYWxsZXJDaGlsZEluZGV4IiwicGFyZW50SW5kZXgiLCJyZXByaW9yaXRpemUiLCJvbF9UaWxlUXVldWUiLCJQcmlvcml0eVF1ZXVlIiwiVGlsZVF1ZXVlIiwidGlsZVByaW9yaXR5RnVuY3Rpb24iLCJ0aWxlQ2hhbmdlQ2FsbGJhY2siLCJnZXRLZXkiLCJ0aWxlQ2hhbmdlQ2FsbGJhY2tfIiwidGlsZXNMb2FkaW5nXyIsInRpbGVzTG9hZGluZ0tleXNfIiwiYWRkZWQiLCJoYW5kbGVUaWxlQ2hhbmdlIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZSIsInN0YXRlIiwiZ2V0U3RhdGUiLCJ0aWxlS2V5IiwibG9hZE1vcmVUaWxlcyIsIm1heFRvdGFsTG9hZGluZyIsIm1heE5ld0xvYWRzIiwibmV3TG9hZHMiLCJhYm9ydGVkVGlsZXMiLCJERUZBVUxUX01BWF9aT09NIiwiREVGQVVMVF9USUxFX1NJWkUiLCJjbGFtcCIsImNvc2giLCJzcXVhcmVkU2VnbWVudERpc3RhbmNlIiwieDEiLCJ5MSIsIngyIiwieTIiLCJtYXRoX3NxdWFyZWREaXN0YW5jZSIsInRvUmFkaWFucyIsImFuZ2xlSW5EZWdyZWVzIiwiUEkiLCJtb2R1bG8iLCJsZXJwIiwibm9uZSIsImNlbnRlciIsImRpc2FibGUiLCJyb3RhdGlvbiIsImRlbHRhIiwicm90YXRpb25jb25zdHJhaW50X25vbmUiLCJWaWV3SGludCIsIlZpZXdQcm9wZXJ0eSIsImFkZCIsImNyZWF0ZVN0cmluZ1hZIiwib3B0X2ZyYWN0aW9uRGlnaXRzIiwidGVtcGxhdGUiLCJyZXBsYWNlIiwidG9GaXhlZCIsImNvb3JkaW5hdGVfZm9ybWF0IiwidG9TdHJpbmdYWSIsImNvb3JkaW5hdGVfcm90YXRlIiwiYW5nbGUiLCJjb3NBbmdsZSIsImNvcyIsInNpbkFuZ2xlIiwic2luIiwiY29vcmRpbmF0ZV9zY2FsZSIsInNjYWxlIiwiZWFzZUluIiwiZWFzZU91dCIsImluQW5kT3V0IiwibGluZWFyIiwiQ29ybmVyIiwiQk9UVE9NX0xFRlQiLCJCT1RUT01fUklHSFQiLCJUT1BfTEVGVCIsIlRPUF9SSUdIVCIsIlJlbGF0aW9uc2hpcCIsIlVOS05PV04iLCJJTlRFUlNFQ1RJTkciLCJBQk9WRSIsIlJJR0hUIiwiQkVMT1ciLCJMRUZUIiwiYm91bmRpbmdFeHRlbnQiLCJjb29yZGluYXRlcyIsImV4dGVudCIsImNyZWF0ZUVtcHR5IiwiZXh0ZW5kQ29vcmRpbmF0ZSIsImJ1ZmZlciIsIm9wdF9leHRlbnQiLCJleHRlbnRfY2xvbmUiLCJjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkiLCJjb250YWluc0Nvb3JkaW5hdGUiLCJleHRlbnRfY29udGFpbnNYWSIsImNvbnRhaW5zRXh0ZW50IiwiZXh0ZW50MSIsImV4dGVudDIiLCJjb29yZGluYXRlUmVsYXRpb25zaGlwIiwicmVsYXRpb25zaGlwIiwiY3JlYXRlT3JVcGRhdGUiLCJjcmVhdGVPclVwZGF0ZUVtcHR5IiwiZXh0ZW50X2VxdWFscyIsImV4dGVudF9leHRlbmQiLCJleHRlbmRDb29yZGluYXRlcyIsImV4dGVuZEZsYXRDb29yZGluYXRlcyIsImZsYXRDb29yZGluYXRlcyIsIm9mZnNldCIsInN0cmlkZSIsImV4dGVuZFhZIiwiZXh0ZW50X2dldEFyZWEiLCJleHRlbnRfaXNFbXB0eSIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiZ2V0Qm90dG9tTGVmdCIsImdldEJvdHRvbVJpZ2h0IiwiZXh0ZW50X2dldENlbnRlciIsImdldENvcm5lciIsImNvcm5lciIsImdldFRvcExlZnQiLCJnZXRUb3BSaWdodCIsImdldEZvclZpZXdBbmRTaXplIiwicmVzb2x1dGlvbiIsInNpemUiLCJjb3NSb3RhdGlvbiIsInNpblJvdGF0aW9uIiwieENvcyIsInhTaW4iLCJ5Q29zIiwieVNpbiIsIngwIiwieDMiLCJ5MCIsInkzIiwiZ2V0SW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uIiwiZXh0ZW50X2ludGVyc2VjdHMiLCJHZW9tZXRyeVR5cGUiLCJQT0lOVCIsIkxJTkVfU1RSSU5HIiwiTElORUFSX1JJTkciLCJQT0xZR09OIiwiTVVMVElfUE9JTlQiLCJNVUxUSV9MSU5FX1NUUklORyIsIk1VTFRJX1BPTFlHT04iLCJHRU9NRVRSWV9DT0xMRUNUSU9OIiwiQ0lSQ0xFIiwiR2VvbWV0cnlMYXlvdXQiLCJYWSIsIlhZWiIsIlhZTSIsIlhZWk0iLCJ0cmFuc2Zvcm0yRCIsInRyYW5zZm9ybSIsIm9wdF9kZXN0IiwiZGVzdCIsIkRFRkFVTFRfUkFESVVTIiwiZ2V0RGlzdGFuY2UiLCJjMSIsImMyIiwib3B0X3JhZGl1cyIsInJhZGl1cyIsImxhdDEiLCJsYXQyIiwiZGVsdGFMYXRCeTIiLCJkZWx0YUxvbkJ5MiIsImF0YW4yIiwiVW5pdHMiLCJERUdSRUVTIiwiRkVFVCIsIk1FVEVSUyIsIlBJWEVMUyIsIlRJTEVfUElYRUxTIiwiVVNGRUVUIiwiTUVURVJTX1BFUl9VTklUIiwicHJval9Vbml0cyIsIlByb2plY3Rpb25fUHJvamVjdGlvbiIsImNvZGVfIiwidW5pdHNfIiwiZXh0ZW50XyIsIndvcmxkRXh0ZW50XyIsIndvcmxkRXh0ZW50IiwiYXhpc09yaWVudGF0aW9uXyIsImF4aXNPcmllbnRhdGlvbiIsImdsb2JhbF8iLCJnbG9iYWwiLCJjYW5XcmFwWF8iLCJnZXRQb2ludFJlc29sdXRpb25GdW5jXyIsImdldFBvaW50UmVzb2x1dGlvbiIsImRlZmF1bHRUaWxlR3JpZF8iLCJtZXRlcnNQZXJVbml0XyIsIm1ldGVyc1BlclVuaXQiLCJjYW5XcmFwWCIsImdldENvZGUiLCJnZXRFeHRlbnQiLCJnZXRVbml0cyIsImdldE1ldGVyc1BlclVuaXQiLCJnZXRXb3JsZEV4dGVudCIsImdldEF4aXNPcmllbnRhdGlvbiIsImlzR2xvYmFsIiwic2V0R2xvYmFsIiwiZ2V0RGVmYXVsdFRpbGVHcmlkIiwic2V0RGVmYXVsdFRpbGVHcmlkIiwidGlsZUdyaWQiLCJzZXRFeHRlbnQiLCJzZXRXb3JsZEV4dGVudCIsInNldEdldFBvaW50UmVzb2x1dGlvbiIsImZ1bmMiLCJnZXRQb2ludFJlc29sdXRpb25GdW5jIiwicHJval9Qcm9qZWN0aW9uIiwiUkFESVVTIiwiSEFMRl9TSVpFIiwiRVhURU5UIiwiV09STERfRVhURU5UIiwiZXBzZzM4NTdfRVBTRzM4NTdQcm9qZWN0aW9uIiwiUHJvamVjdGlvbiIsIkVQU0czODU3UHJvamVjdGlvbiIsInVuaXRzIiwicG9pbnQiLCJQUk9KRUNUSU9OUyIsImZyb21FUFNHNDMyNiIsImlucHV0Iiwib3B0X291dHB1dCIsIm9wdF9kaW1lbnNpb24iLCJkaW1lbnNpb24iLCJoYWxmU2l6ZSIsInRhbiIsImVwc2czODU3X3RvRVBTRzQzMjYiLCJhdGFuIiwiZXBzZzQzMjZfRVhURU5UIiwiZXBzZzQzMjZfTUVURVJTX1BFUl9VTklUIiwiZXBzZzQzMjZfRVBTRzQzMjZQcm9qZWN0aW9uIiwiRVBTRzQzMjZQcm9qZWN0aW9uIiwib3B0X2F4aXNPcmllbnRhdGlvbiIsImVwc2c0MzI2X1BST0pFQ1RJT05TIiwicHJvamVjdGlvbnNfY2FjaGUiLCJwcm9qZWN0aW9uczIiLCJmb3J3YXJkVHJhbnNmb3JtIiwiaW52ZXJzZVRyYW5zZm9ybSIsInRyYW5zZm9ybXMiLCJ0cmFuc2Zvcm1zX2FkZCIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtRm4iLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiY2xvbmVUcmFuc2Zvcm0iLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJwcm9qZWN0aW9uIiwicHJvamVjdGlvbnNfYWRkIiwicHJval9nZXQiLCJwcm9qZWN0aW9uTGlrZSIsIm9wdF91bml0cyIsInBvaW50UmVzb2x1dGlvbiIsInRvRVBTRzQzMjYiLCJnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMiLCJ2ZXJ0aWNlcyIsImFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyIsInByb2plY3Rpb25zIiwiYWRkUHJvamVjdGlvbnMiLCJjcmVhdGVQcm9qZWN0aW9uIiwiZGVmYXVsdENvZGUiLCJlcXVpdmFsZW50IiwicHJvamVjdGlvbjEiLCJwcm9qZWN0aW9uMiIsImVxdWFsVW5pdHMiLCJzb3VyY2VQcm9qZWN0aW9uIiwiZGVzdGluYXRpb25Qcm9qZWN0aW9uIiwidHJhbnNmb3JtRnVuYyIsInRyYW5zZm9ybXNfZ2V0IiwicHJval9nZXRUcmFuc2Zvcm0iLCJwcm9qX3RyYW5zZm9ybSIsInRtcF8iLCJ0cmFuc2Zvcm1fcmVzZXQiLCJ0cmFuc2Zvcm1fc2V0IiwibXVsdGlwbHkiLCJ0cmFuc2Zvcm0xIiwidHJhbnNmb3JtMiIsImExIiwiYjEiLCJkMSIsImUxIiwiZjEiLCJhMiIsImIyIiwiZDIiLCJlMiIsImYyIiwic2V0RnJvbUFycmF5Iiwib2xfdHJhbnNmb3JtX3NjYWxlIiwib2xfdHJhbnNmb3JtX3RyYW5zbGF0ZSIsInRyYW5zZm9ybV9jb21wb3NlIiwiZHgxIiwiZHkxIiwic3giLCJzeSIsImR4MiIsImR5MiIsInRtcFRyYW5zZm9ybSIsImdldFN0cmlkZUZvckxheW91dCIsImxheW91dCIsImdlb21fU2ltcGxlR2VvbWV0cnkiLCJHZW9tZXRyeSIsIlNpbXBsZUdlb21ldHJ5IiwiY29tcHV0ZUV4dGVudCIsImdldENvb3JkaW5hdGVzIiwiZ2V0Rmlyc3RDb29yZGluYXRlIiwiZ2V0RmxhdENvb3JkaW5hdGVzIiwiZ2V0TGFzdENvb3JkaW5hdGUiLCJnZXRMYXlvdXQiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnkiLCJzcXVhcmVkVG9sZXJhbmNlIiwic2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24iLCJzaW1wbGlmaWVkR2VvbWV0cnlDYWNoZSIsInNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UiLCJzaW1wbGlmaWVkR2VvbWV0cnkiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsImdldFN0cmlkZSIsInNldEZsYXRDb29yZGluYXRlcyIsInNldENvb3JkaW5hdGVzIiwib3B0X2xheW91dCIsInNldExheW91dCIsIm5lc3RpbmciLCJnZXRMYXlvdXRGb3JTdHJpZGUiLCJhcHBseVRyYW5zZm9ybSIsInJvdGF0ZSIsImFuY2hvciIsImFuY2hvclgiLCJhbmNob3JZIiwiZGVsdGFYIiwiZGVsdGFZIiwidHJhbnNmb3JtX3JvdGF0ZSIsIm9wdF9zeSIsIm9wdF9hbmNob3IiLCJ0cmFuc2Zvcm1fc2NhbGUiLCJ0cmFuc2xhdGUiLCJ0cmFuc2Zvcm1fdHJhbnNsYXRlIiwiZXh0ZW50UmV2aXNpb25fIiwiY2xvbmUiLCJjbG9zZXN0UG9pbnRYWSIsImNsb3Nlc3RQb2ludCIsIm1pblNxdWFyZWREaXN0YW5jZSIsImNvbnRhaW5zWFkiLCJnZXRDbG9zZXN0UG9pbnQiLCJvcHRfY2xvc2VzdFBvaW50IiwiTmFOIiwiaW50ZXJzZWN0c0Nvb3JkaW5hdGUiLCJyZXR1cm5PclVwZGF0ZSIsInNpbXBsaWZ5IiwidG9sZXJhbmNlIiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJzb3VyY2VQcm9qIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJhcmVhX2xpbmVhclJpbmciLCJ0d2ljZUFyZWEiLCJhcmVhX2xpbmVhclJpbmdzIiwiZW5kcyIsImFzc2lnbkNsb3Nlc3QiLCJvZmZzZXQxIiwib2Zmc2V0MiIsIm1heFNxdWFyZWREZWx0YSIsInNxdWFyZWREZWx0YSIsImFycmF5TWF4U3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwibWF4RGVsdGEiLCJpc1JpbmciLCJvcHRfdG1wUG9pbnQiLCJzcXVhcmVkRGlzdGFuY2UiLCJ0bXBQb2ludCIsImFzc2lnbkNsb3Nlc3RBcnJheVBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGVzIiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJjb29yZGluYXRlc3MiLCJvcHRfZW5kcyIsImpqIiwiaW5mbGF0ZUNvb3JkaW5hdGVzIiwib3B0X2Nvb3JkaW5hdGVzIiwiaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJvcHRfY29vcmRpbmF0ZXNzIiwiaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheSIsImVuZHNzIiwib3B0X2Nvb3JkaW5hdGVzc3MiLCJjb29yZGluYXRlc3NzIiwiZG91Z2xhc1BldWNrZXIiLCJzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIiwic2ltcGxpZmllZE9mZnNldCIsIm1hcmtlcnMiLCJsYXN0IiwiZmlyc3QiLCJtYXhTcXVhcmVkRGlzdGFuY2UiLCJzbmFwIiwicm91bmQiLCJxdWFudGl6ZSIsInF1YW50aXplQXJyYXkiLCJzaW1wbGlmaWVkRW5kcyIsImdlb21fTGluZWFyUmluZyIsIkxpbmVhclJpbmciLCJtYXhEZWx0YV8iLCJtYXhEZWx0YVJldmlzaW9uXyIsImdldEFyZWEiLCJnZW9tX1BvaW50IiwiUG9pbnQiLCJkZWZsYXRlQ29vcmRpbmF0ZSIsImxpbmVhclJpbmdDb250YWluc0V4dGVudCIsInZhbCIsImZvckVhY2hDb3JuZXIiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJpc05hTiIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwiaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSIsImludGVyc2VjdHNMaW5lYXJSaW5nIiwicmV2ZXJzZV9jb29yZGluYXRlcyIsImxpbmVhclJpbmdJc0Nsb2Nrd2lzZSIsImVkZ2UiLCJsaW5lYXJSaW5nSXNPcmllbnRlZCIsIm9wdF9yaWdodCIsImlzQ2xvY2t3aXNlIiwib3JpZW50TGluZWFyUmluZ3MiLCJQb2x5Z29uX1BvbHlnb24iLCJQb2x5Z29uIiwiZW5kc18iLCJmbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyIsImZsYXRJbnRlcmlvclBvaW50XyIsIm9yaWVudGVkUmV2aXNpb25fIiwib3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfIiwiYXBwZW5kTGluZWFyUmluZyIsImxpbmVhclJpbmciLCJnZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJnZXRJbnRlcmlvclBvaW50IiwiZ2V0TGluZWFyUmluZ0NvdW50IiwiZ2V0TGluZWFyUmluZyIsImdldExpbmVhclJpbmdzIiwibGluZWFyUmluZ3MiLCJnZW9tX1BvbHlnb24iLCJmcm9tRXh0ZW50IiwiREVGQVVMVF9NSU5fWk9PTSIsImFuaW1hdGlvbkNhbGxiYWNrIiwicmV0dXJuVmFsdWUiLCJpc05vb3BBbmltYXRpb24iLCJhbmltYXRpb24iLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJjb29yZGluYXRlMSIsImNvb3JkaW5hdGUyIiwiY29vcmRpbmF0ZV9lcXVhbHMiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJvbF9WaWV3IiwiVmlldyIsImhpbnRzXyIsImFuaW1hdGlvbnNfIiwidXBkYXRlQW5pbWF0aW9uS2V5XyIsInVwZGF0ZUFuaW1hdGlvbnNfIiwicHJvamVjdGlvbl8iLCJhcHBseU9wdGlvbnNfIiwicHJvcGVydGllcyIsInJlc29sdXRpb25Db25zdHJhaW50SW5mbyIsInJlc29sdXRpb25Db25zdHJhaW50IiwibWF4UmVzb2x1dGlvbiIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsInpvb21GYWN0b3IiLCJyZXNvbHV0aW9ucyIsInBvd2VyIiwiY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMiLCJkZWZhdWx0TWF4UmVzb2x1dGlvbiIsImRlZmF1bHRNaW5SZXNvbHV0aW9uIiwib3B0X21heExldmVsIiwib2xkTGV2ZWwiLCJuZXdMZXZlbCIsImNyZWF0ZVNuYXBUb1Bvd2VyIiwiY29uc3RyYWludCIsImNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50IiwibWF4UmVzb2x1dGlvbl8iLCJtaW5SZXNvbHV0aW9uXyIsInpvb21GYWN0b3JfIiwicmVzb2x1dGlvbnNfIiwibWluWm9vbV8iLCJjZW50ZXJDb25zdHJhaW50IiwiY3JlYXRlQ2VudGVyQ29uc3RyYWludCIsInJvdGF0aW9uQ29uc3RyYWludCIsImVuYWJsZVJvdGF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJvcHRfdG9sZXJhbmNlIiwidGhldGEiLCJjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQiLCJjb25zdHJhaW50c18iLCJ6b29tIiwiY29uc3RyYWluUmVzb2x1dGlvbiIsImdldFJlc29sdXRpb24iLCJvcHRpb25zXyIsImdldFVwZGF0ZWRPcHRpb25zXyIsIm5ld09wdGlvbnMiLCJnZXRab29tIiwiZ2V0Q2VudGVyIiwiZ2V0Um90YXRpb24iLCJhbmltYXRlIiwidmFyX2FyZ3MiLCJhbmltYXRpb25Db3VudCIsImlzRGVmIiwic2V0Q2VudGVyIiwic2V0Wm9vbSIsInNldFJvdGF0aW9uIiwiRGF0ZSIsIm5vdyIsInNlcmllcyIsImNvbXBsZXRlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJzZXRIaW50IiwiZ2V0QW5pbWF0aW5nIiwiZ2V0SW50ZXJhY3RpbmciLCJjYW5jZWxBbmltYXRpb25zIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb3JlIiwic2VyaWVzQ29tcGxldGUiLCJlbGFwc2VkIiwiZnJhY3Rpb24iLCJwcm9ncmVzcyIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudENlbnRlciIsImN1cnJlbnRSZXNvbHV0aW9uIiwiZ2V0U2l6ZUZyb21WaWV3cG9ydF8iLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJtZXRyaWNzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcnNlSW50IiwiY29uc3RyYWluQ2VudGVyIiwib3B0X2RlbHRhIiwib3B0X2RpcmVjdGlvbiIsImdldENvbnN0cmFpbnRzIiwiZ2V0SGludHMiLCJvcHRfaGludHMiLCJjYWxjdWxhdGVFeHRlbnQiLCJvcHRfc2l6ZSIsImdldE1heFJlc29sdXRpb24iLCJnZXRNaW5SZXNvbHV0aW9uIiwiZ2V0TWF4Wm9vbSIsImdldFpvb21Gb3JSZXNvbHV0aW9uIiwic2V0TWF4Wm9vbSIsImdldE1pblpvb20iLCJzZXRNaW5ab29tIiwiZ2V0UHJvamVjdGlvbiIsImdldFJlc29sdXRpb25zIiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudCIsInhSZXNvbHV0aW9uIiwieVJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiIsIm9wdF9wb3dlciIsImdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uIiwicGl4ZWxSYXRpbyIsInBpeGVsUmVzb2x1dGlvbiIsIm5lYXJlc3QiLCJnZXRSZXNvbHV0aW9uRm9yWm9vbSIsImZpdCIsImdlb21ldHJ5T3JFeHRlbnQiLCJnZW9tZXRyeSIsInBhZGRpbmciLCJjb29yZHMiLCJtaW5Sb3RYIiwibWluUm90WSIsIm1heFJvdFgiLCJtYXhSb3RZIiwicm90WCIsInJvdFkiLCJjb25zdHJhaW5lZFJlc29sdXRpb24iLCJjZW50ZXJSb3RYIiwiY2VudGVyUm90WSIsInNldFJlc29sdXRpb24iLCJjZW50ZXJPbiIsInBvc2l0aW9uIiwiY2VudGVyWCIsImNlbnRlclkiLCJoaW50IiwiY3JlYXRlQ2FudmFzQ29udGV4dDJEIiwib3B0X3dpZHRoIiwib3B0X2hlaWdodCIsImNhbnZhcyIsInJlcGxhY2VOb2RlIiwib2xkTm9kZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZW1vdmVOb2RlIiwicmVtb3ZlQ2hpbGQiLCJsYXllcl9Qcm9wZXJ0eSIsIk9QQUNJVFkiLCJWSVNJQkxFIiwiWl9JTkRFWCIsIk1BWF9SRVNPTFVUSU9OIiwiTUlOX1JFU09MVVRJT04iLCJTT1VSQ0UiLCJCYXNlIiwiQmFzZUxheWVyIiwib3BhY2l0eSIsInZpc2libGUiLCJ6SW5kZXgiLCJzdGF0ZV8iLCJnZXRMYXllclN0YXRlIiwibGF5ZXIiLCJtYW5hZ2VkIiwiZ2V0T3BhY2l0eSIsInNvdXJjZVN0YXRlIiwiZ2V0U291cmNlU3RhdGUiLCJnZXRWaXNpYmxlIiwiZ2V0WkluZGV4IiwiZ2V0TGF5ZXJzQXJyYXkiLCJnZXRMYXllclN0YXRlc0FycmF5Iiwib3B0X3N0YXRlcyIsInNldE1heFJlc29sdXRpb24iLCJzZXRNaW5SZXNvbHV0aW9uIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJTdGF0ZSIsIlVOREVGSU5FRCIsIlJFQURZIiwiR3JvdXBfUHJvcGVydHkiLCJMQVlFUlMiLCJHcm91cCIsIkxheWVyR3JvdXAiLCJiYXNlT3B0aW9ucyIsImxheWVycyIsImxheWVyc0xpc3RlbmVyS2V5c18iLCJsaXN0ZW5lcktleXNfIiwiaGFuZGxlTGF5ZXJzQ2hhbmdlZF8iLCJzZXRMYXllcnMiLCJoYW5kbGVMYXllckNoYW5nZV8iLCJnZXRMYXllcnMiLCJoYW5kbGVMYXllcnNBZGRfIiwiaGFuZGxlTGF5ZXJzUmVtb3ZlXyIsImxheWVyc0FycmF5IiwiY29sbGVjdGlvbkV2ZW50Iiwic3RhdGVzIiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImxheWVyU3RhdGUiLCJ0b1NpemUiLCJvbF9QbHVnZ2FibGVNYXAiLCJQbHVnZ2FibGVNYXAiLCJvcHRpb25zSW50ZXJuYWwiLCJrZXlib2FyZEV2ZW50VGFyZ2V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250cm9scyIsImludGVyYWN0aW9ucyIsIm92ZXJsYXlzIiwibGF5ZXJHcm91cCIsImNyZWF0ZU9wdGlvbnNJbnRlcm5hbCIsIm1heFRpbGVzTG9hZGluZ18iLCJtYXhUaWxlc0xvYWRpbmciLCJsb2FkVGlsZXNXaGlsZUFuaW1hdGluZ18iLCJsb2FkVGlsZXNXaGlsZUFuaW1hdGluZyIsImxvYWRUaWxlc1doaWxlSW50ZXJhY3RpbmdfIiwibG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyIsInBpeGVsUmF0aW9fIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwicmVuZGVyRnJhbWVfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwiY2xhc3NOYW1lIiwic3R5bGUiLCJvdmVyZmxvdyIsIm1zVG91Y2hBY3Rpb24iLCJ0b3VjaEFjdGlvbiIsIm92ZXJsYXlDb250YWluZXJfIiwib3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8iLCJvdmVybGF5RXZlbnRzIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJoYW5kbGVNYXBCcm93c2VyRXZlbnQiLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsImtleUhhbmRsZXJLZXlzXyIsImhhbmRsZUJyb3dzZXJFdmVudCIsIm92ZXJsYXlzXyIsIm92ZXJsYXlJZEluZGV4XyIsInJlbmRlcmVyXyIsImNyZWF0ZVJlbmRlcmVyIiwiaGFuZGxlUmVzaXplXyIsImZvY3VzXyIsInBvc3RSZW5kZXJGdW5jdGlvbnNfIiwidGlsZVF1ZXVlXyIsImdldFRpbGVQcmlvcml0eSIsImhhbmRsZVRpbGVDaGFuZ2VfIiwic2tpcHBlZEZlYXR1cmVVaWRzXyIsImhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyIsImhhbmRsZVZpZXdDaGFuZ2VkXyIsImhhbmRsZVNpemVDaGFuZ2VkXyIsImhhbmRsZVRhcmdldENoYW5nZWRfIiwiY29udHJvbCIsInNldE1hcCIsImludGVyYWN0aW9uIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImdldElkIiwiYWRkQ29udHJvbCIsImdldENvbnRyb2xzIiwiYWRkSW50ZXJhY3Rpb24iLCJnZXRJbnRlcmFjdGlvbnMiLCJhZGRMYXllciIsImdldExheWVyR3JvdXAiLCJhZGRPdmVybGF5Iiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiaGl0VG9sZXJhbmNlIiwibGF5ZXJGaWx0ZXIiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImdldEZlYXR1cmVzQXRQaXhlbCIsImZlYXR1cmVzIiwiZmVhdHVyZSIsImZvckVhY2hMYXllckF0UGl4ZWwiLCJoYXNGZWF0dXJlQXRQaXhlbCIsImhhc0ZlYXR1cmVBdENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJ2aWV3cG9ydFBvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZXZlbnRQb3NpdGlvbiIsInRvcCIsImdldFRhcmdldCIsImdldFRhcmdldEVsZW1lbnQiLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsImdldE92ZXJsYXlCeUlkIiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtIiwiZ2V0UmVuZGVyZXIiLCJnZXRTaXplIiwiZ2V0VmlldyIsImdldE92ZXJsYXlDb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwidGlsZVNvdXJjZUtleSIsInRpbGVDZW50ZXIiLCJ0aWxlUmVzb2x1dGlvbiIsIndhbnRlZFRpbGVzIiwiZm9jdXMiLCJtYXBCcm93c2VyRXZlbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZUV2ZW50IiwiaGFuZGxlUG9zdFJlbmRlciIsInRpbGVRdWV1ZSIsImhpbnRzIiwidmlld0hpbnRzIiwiZ2V0TG9hZGluZyIsImdldFNvdXJjZSIsImxvYWRpbmciLCJkaXNwYXRjaFJlbmRlckV2ZW50IiwicG9zdFJlbmRlckZ1bmN0aW9ucyIsInJlbmRlciIsInRhcmdldEVsZW1lbnQiLCJ1cGRhdGVTaXplIiwicmVtb3ZlTGF5ZXJSZW5kZXJlcnMiLCJoYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyIsInNldEF0dHJpYnV0ZSIsImlzUmVuZGVyZWQiLCJyZW5kZXJTeW5jIiwicmVtb3ZlQ29udHJvbCIsInJlbW92ZUludGVyYWN0aW9uIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVPdmVybGF5IiwidGltZSIsInZpZXdTdGF0ZSIsInByZXZpb3VzRnJhbWVTdGF0ZSIsImhhc0FyZWEiLCJsYXllclN0YXRlc0FycmF5IiwibGF5ZXJTdGF0ZXMiLCJza2lwcGVkRmVhdHVyZVVpZHMiLCJ1c2VkVGlsZXMiLCJyZW5kZXJGcmFtZSIsInNldExheWVyR3JvdXAiLCJzZXRTaXplIiwic2V0VmlldyIsInNraXBGZWF0dXJlIiwiY29tcHV0ZWRTdHlsZSIsIm9mZnNldFdpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldEhlaWdodCIsInVuc2tpcEZlYXR1cmUiLCJjYWNoZSIsImNvbnRyb2xfQ29udHJvbCIsIkNvbnRyb2wiLCJ0YXJnZXRfIiwibGlzdGVuZXJLZXlzIiwiZ2V0TWFwIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiQ0xBU1NfQ09OVFJPTCIsIkNMQVNTX0NPTExBUFNFRCIsImdldEZvbnRGYW1pbGllcyIsImZvbnQiLCJmYW1pbHkiLCJmb250RmFtaWx5IiwidmlzaWJsZUF0UmVzb2x1dGlvbiIsImxheWVyX0xheWVyIiwiTGF5ZXIiLCJtYXBQcmVjb21wb3NlS2V5XyIsIm1hcFJlbmRlcktleV8iLCJzb3VyY2VDaGFuZ2VLZXlfIiwiaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfIiwic2V0U291cmNlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsInJlbmRlckV2ZW50IiwiQXR0cmlidXRpb25fcmVuZGVyIiwibWFwRXZlbnQiLCJ1cGRhdGVFbGVtZW50XyIsImNvbnRyb2xfQXR0cmlidXRpb24iLCJBdHRyaWJ1dGlvbiIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwib3ZlcnJpZGVDb2xsYXBzaWJsZV8iLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNpYmxlXyIsInRpcExhYmVsIiwiY29sbGFwc2VMYWJlbCIsImNvbGxhcHNlTGFiZWxfIiwidGV4dENvbnRlbnQiLCJsYWJlbCIsImxhYmVsXyIsImFjdGl2ZUxhYmVsIiwidGl0bGUiLCJoYW5kbGVDbGlja18iLCJjc3NDbGFzc2VzIiwicmVuZGVyZWRBdHRyaWJ1dGlvbnNfIiwicmVuZGVyZWRWaXNpYmxlXyIsImNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfIiwibG9va3VwIiwidmlzaWJsZUF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uR2V0dGVyIiwiZ2V0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zIiwiZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJzZXRDb2xsYXBzaWJsZSIsImRpc3BsYXkiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZHJlbiIsImlubmVySFRNTCIsImhhbmRsZVRvZ2dsZV8iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRDb2xsYXBzaWJsZSIsInNldENvbGxhcHNlZCIsImdldENvbGxhcHNlZCIsIlJvdGF0ZV9yZW5kZXIiLCJyb3RhdGlvbl8iLCJhdXRvSGlkZV8iLCJtc1RyYW5zZm9ybSIsIndlYmtpdFRyYW5zZm9ybSIsImNvbnRyb2xfUm90YXRlIiwiUm90YXRlIiwiY2FsbFJlc2V0Tm9ydGhfIiwicmVzZXROb3J0aCIsImR1cmF0aW9uXyIsImF1dG9IaWRlIiwicmVzZXROb3J0aF8iLCJjb250cm9sX1pvb20iLCJab29tIiwiem9vbUluTGFiZWwiLCJ6b29tT3V0TGFiZWwiLCJ6b29tSW5UaXBMYWJlbCIsInpvb21PdXRUaXBMYWJlbCIsImluRWxlbWVudCIsImNyZWF0ZVRleHROb2RlIiwib3V0RWxlbWVudCIsInpvb21CeURlbHRhXyIsIm5ld1Jlc29sdXRpb24iLCJkZWZhdWx0cyIsInpvb21PcHRpb25zIiwicm90YXRlT3B0aW9ucyIsImF0dHJpYnV0aW9uIiwiYXR0cmlidXRpb25PcHRpb25zIiwiS2luZXRpYyIsImRlY2F5IiwibWluVmVsb2NpdHkiLCJkZWxheSIsImRlY2F5XyIsIm1pblZlbG9jaXR5XyIsImRlbGF5XyIsInBvaW50c18iLCJhbmdsZV8iLCJpbml0aWFsVmVsb2NpdHlfIiwibGFzdEluZGV4IiwiZmlyc3RJbmRleCIsImdldEFuZ2xlIiwib2xfS2luZXRpYyIsImludGVyYWN0aW9uX1Byb3BlcnR5IiwiSW50ZXJhY3Rpb25fcm90YXRlIiwib3B0X2R1cmF0aW9uIiwicm90YXRlV2l0aG91dENvbnN0cmFpbnRzIiwiY3VycmVudFJvdGF0aW9uIiwiem9vbUJ5RGVsdGEiLCJ6b29tV2l0aG91dENvbnN0cmFpbnRzIiwiaW50ZXJhY3Rpb25fSW50ZXJhY3Rpb24iLCJJbnRlcmFjdGlvbiIsInNldEFjdGl2ZSIsIkRvdWJsZUNsaWNrWm9vbV9oYW5kbGVFdmVudCIsInN0b3BFdmVudCIsImRlbHRhXyIsImludGVyYWN0aW9uX0RvdWJsZUNsaWNrWm9vbSIsIkRvdWJsZUNsaWNrWm9vbSIsImFsdFNoaWZ0S2V5c09ubHkiLCJjb25kaXRpb25fZm9jdXMiLCJhY3RpdmVFbGVtZW50IiwiYWx3YXlzIiwibW91c2VBY3Rpb25CdXR0b24iLCJub01vZGlmaWVyS2V5cyIsInNoaWZ0S2V5T25seSIsInRhcmdldE5vdEVkaXRhYmxlIiwidGFnTmFtZSIsIm1vdXNlT25seSIsIlBvaW50ZXJfY2VudHJvaWQiLCJwb2ludGVyRXZlbnRzIiwiUG9pbnRlciIsIlBvaW50ZXJJbnRlcmFjdGlvbiIsImhhbmRsZURvd25FdmVudCIsImhhbmRsZURyYWdFdmVudCIsImhhbmRsZU1vdmVFdmVudCIsImhhbmRsZVVwRXZlbnQiLCJzdG9wRG93biIsImhhbmRsaW5nRG93blVwU2VxdWVuY2UiLCJ0cmFja2VkUG9pbnRlcnNfIiwidGFyZ2V0UG9pbnRlcnMiLCJ1cGRhdGVUcmFja2VkUG9pbnRlcnNfIiwiaGFuZGxlZFVwIiwiaGFuZGxlZCIsImlzUG9pbnRlckRyYWdnaW5nRXZlbnQiLCJnZXRWYWx1ZXMiLCJpbnRlcmFjdGlvbl9EcmFnUGFuIiwiRHJhZ1BhbiIsImtpbmV0aWNfIiwia2luZXRpYyIsImxhc3RDZW50cm9pZCIsImxhc3RQb2ludGVyc0NvdW50XyIsInBhbm5pbmdfIiwiY29uZGl0aW9uXyIsImNvbmRpdGlvbiIsIm5vS2luZXRpY18iLCJjZW50cm9pZCIsImRpc3RhbmNlIiwiY2VudGVycHgiLCJpbnRlcmFjdGlvbl9EcmFnUm90YXRlIiwiRHJhZ1JvdGF0ZSIsImxhc3RBbmdsZV8iLCJCb3giLCJSZW5kZXJCb3giLCJnZW9tZXRyeV8iLCJzdGFydFBpeGVsXyIsImVuZFBpeGVsXyIsInJlbmRlcl8iLCJzdGFydFBpeGVsIiwiZW5kUGl4ZWwiLCJzZXRQaXhlbHMiLCJjcmVhdGVPclVwZGF0ZUdlb21ldHJ5IiwiZ2V0R2VvbWV0cnkiLCJEcmFnQm94RXZlbnRUeXBlIiwiRHJhZ0JveEV2ZW50Iiwib25Cb3hFbmQiLCJvdXRfIiwibWFwRXh0ZW50IiwiYm94UGl4ZWxFeHRlbnQiLCJzY2FsZUZyb21DZW50ZXIiLCJpbnRlcmFjdGlvbl9EcmFnWm9vbSIsIkRyYWdCb3giLCJEcmFnWm9vbSIsImJveF8iLCJtaW5BcmVhXyIsIm9uQm94RW5kXyIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiS2V5Q29kZSIsIlVQIiwiRE9XTiIsIktleWJvYXJkUGFuX2hhbmRsZUV2ZW50Iiwia2V5Q29kZSIsIm1hcFVuaXRzRGVsdGEiLCJwaXhlbERlbHRhXyIsInBhbiIsImludGVyYWN0aW9uX0tleWJvYXJkUGFuIiwiS2V5Ym9hcmRQYW4iLCJkZWZhdWx0Q29uZGl0aW9uXyIsInBpeGVsRGVsdGEiLCJLZXlib2FyZFpvb21faGFuZGxlRXZlbnQiLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJpbnRlcmFjdGlvbl9LZXlib2FyZFpvb20iLCJLZXlib2FyZFpvb20iLCJNb2RlIiwiaW50ZXJhY3Rpb25fTW91c2VXaGVlbFpvb20iLCJNb3VzZVdoZWVsWm9vbSIsInRpbWVvdXRfIiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJ0cmFja3BhZERlbHRhUGVyWm9vbV8iLCJ0cmFja3BhZFpvb21CdWZmZXJfIiwiZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyIsIndoZWVsRXZlbnQiLCJkZWx0YU1vZGUiLCJXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJ3aGVlbERlbHRhWSIsInJlYm91bmQiLCJ0aW1lTGVmdCIsImhhbmRsZVdoZWVsWm9vbV8iLCJzZXRNb3VzZUFuY2hvciIsImludGVyYWN0aW9uX1BpbmNoUm90YXRlIiwiUGluY2hSb3RhdGUiLCJwb2ludGVyT3B0aW9ucyIsImFuY2hvcl8iLCJyb3RhdGluZ18iLCJyb3RhdGlvbkRlbHRhXyIsInRocmVzaG9sZF8iLCJ0aHJlc2hvbGQiLCJyb3RhdGlvbkRlbHRhIiwidG91Y2gwIiwidG91Y2gxIiwiaW50ZXJhY3Rpb25fUGluY2hab29tIiwiUGluY2hab29tIiwibGFzdERpc3RhbmNlXyIsImxhc3RTY2FsZURlbHRhXyIsInNjYWxlRGVsdGEiLCJFUlJPUl9USFJFU0hPTEQiLCJJbWFnZVN0YXRlIiwib2xfSW1hZ2VDYW52YXMiLCJJbWFnZUJhc2UiLCJJbWFnZUNhbnZhcyIsIm9wdF9sb2FkZXIiLCJsb2FkZXJfIiwiY2FudmFzXyIsImVycm9yXyIsImdldEVycm9yIiwiaGFuZGxlTG9hZF8iLCJnZXRJbWFnZSIsImdldFBpeGVsUmF0aW8iLCJMYXllclR5cGUiLCJJTUFHRSIsIlRJTEUiLCJWRUNUT1JfVElMRSIsIlZFQ1RPUiIsIlZlY3RvclJlbmRlclR5cGUiLCJyZW5kZXJfRXZlbnQiLCJSZW5kZXJFdmVudCIsIm9wdF92ZWN0b3JDb250ZXh0Iiwib3B0X2NvbnRleHQiLCJvcHRfZ2xDb250ZXh0IiwidmVjdG9yQ29udGV4dCIsImNvbnRleHQiLCJnbENvbnRleHQiLCJzdHJ1Y3RzX0xSVUNhY2hlIiwiTFJVQ2FjaGUiLCJvcHRfaGlnaFdhdGVyTWFyayIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwiY2FuRXhwaXJlQ2FjaGUiLCJjb250YWluc0tleSIsImVudHJ5IiwidmFsdWVfIiwia2V5XyIsIm5ld2VyIiwib2xkZXIiLCJwZWVrTGFzdCIsInBlZWtMYXN0S2V5IiwicGVla0ZpcnN0S2V5IiwicHJ1bmUiLCJkZWZhdWx0RmlsbFN0eWxlIiwiZGVmYXVsdExpbmVEYXNoIiwiZGVmYXVsdFN0cm9rZVN0eWxlIiwiZGVmYXVsdFBhZGRpbmciLCJsYWJlbENhY2hlIiwiY2hlY2tlZEZvbnRzIiwibWVhc3VyZUNvbnRleHQiLCJ0ZXh0SGVpZ2h0cyIsImNoZWNrRm9udCIsImludGVydmFsIiwicmVmZXJlbmNlV2lkdGgiLCJyZXRyaWVzIiwiY2hlY2tlZCIsInJlZmVyZW5jZUZvbnRzIiwidGV4dCIsImlzQXZhaWxhYmxlIiwiZ2V0TWVhc3VyZUNvbnRleHQiLCJ3ZWlnaHQiLCJmb250V2VpZ2h0IiwiYXZhaWxhYmxlIiwicmVmZXJlbmNlRm9udCIsIm1lYXN1cmVUZXh0IiwiZG9uZSIsImNsZWFySW50ZXJ2YWwiLCJmb250U3BlYyIsImZvbnRGYW1pbGllcyIsInNldEludGVydmFsIiwic3BhbiIsImhlaWdodHMiLCJtZWFzdXJlVGV4dEhlaWdodCIsImJvZHkiLCJtZWFzdXJlVGV4dFdpZHRoIiwicm90YXRlQXRPZmZzZXQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInJlc2V0VHJhbnNmb3JtIiwiZHJhd0ltYWdlIiwiaW1hZ2UiLCJvcmlnaW5YIiwib3JpZ2luWSIsInciLCJhbHBoYSIsImdsb2JhbEFscGhhIiwic2V0VHJhbnNmb3JtIiwiSEVYX0NPTE9SX1JFXyIsIk5BTUVEX0NPTE9SX1JFXyIsImFzU3RyaW5nIiwiY29sb3IiLCJjb2xvcl90b1N0cmluZyIsImNhY2hlU2l6ZSIsIm5vcm1hbGl6ZSIsImciLCJhc0NvbG9yTGlrZSIsIlZlY3RvckNvbnRleHRfVmVjdG9yQ29udGV4dCIsImRyYXdDdXN0b20iLCJyZW5kZXJlciIsImRyYXdHZW9tZXRyeSIsInNldFN0eWxlIiwiZHJhd0NpcmNsZSIsImNpcmNsZUdlb21ldHJ5IiwiZHJhd0ZlYXR1cmUiLCJkcmF3R2VvbWV0cnlDb2xsZWN0aW9uIiwiZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkiLCJkcmF3TGluZVN0cmluZyIsImxpbmVTdHJpbmdHZW9tZXRyeSIsImRyYXdNdWx0aUxpbmVTdHJpbmciLCJtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSIsImRyYXdNdWx0aVBvaW50IiwibXVsdGlQb2ludEdlb21ldHJ5IiwiZHJhd011bHRpUG9seWdvbiIsIm11bHRpUG9seWdvbkdlb21ldHJ5IiwiZHJhd1BvaW50IiwicG9pbnRHZW9tZXRyeSIsImRyYXdQb2x5Z29uIiwicG9seWdvbkdlb21ldHJ5IiwiZHJhd1RleHQiLCJzZXRGaWxsU3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJzdHJva2VTdHlsZSIsInNldEltYWdlU3R5bGUiLCJpbWFnZVN0eWxlIiwib3B0X2RlY2x1dHRlckdyb3VwIiwic2V0VGV4dFN0eWxlIiwidGV4dFN0eWxlIiwicmVuZGVyX1ZlY3RvckNvbnRleHQiLCJJbW1lZGlhdGUiLCJWZWN0b3JDb250ZXh0IiwiQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIiLCJ2aWV3Um90YXRpb24iLCJjb250ZXh0XyIsInRyYW5zZm9ybV8iLCJ2aWV3Um90YXRpb25fIiwiY29udGV4dEZpbGxTdGF0ZV8iLCJjb250ZXh0U3Ryb2tlU3RhdGVfIiwiY29udGV4dFRleHRTdGF0ZV8iLCJmaWxsU3RhdGVfIiwic3Ryb2tlU3RhdGVfIiwiaW1hZ2VfIiwiaW1hZ2VBbmNob3JYXyIsImltYWdlQW5jaG9yWV8iLCJpbWFnZUhlaWdodF8iLCJpbWFnZU9wYWNpdHlfIiwiaW1hZ2VPcmlnaW5YXyIsImltYWdlT3JpZ2luWV8iLCJpbWFnZVJvdGF0ZVdpdGhWaWV3XyIsImltYWdlUm90YXRpb25fIiwiaW1hZ2VTY2FsZV8iLCJpbWFnZVdpZHRoXyIsInRleHRfIiwidGV4dE9mZnNldFhfIiwidGV4dE9mZnNldFlfIiwidGV4dFJvdGF0ZVdpdGhWaWV3XyIsInRleHRSb3RhdGlvbl8iLCJ0ZXh0U2NhbGVfIiwidGV4dEZpbGxTdGF0ZV8iLCJ0ZXh0U3Ryb2tlU3RhdGVfIiwidGV4dFN0YXRlXyIsInBpeGVsQ29vcmRpbmF0ZXNfIiwidG1wTG9jYWxUcmFuc2Zvcm1fIiwiZHJhd0ltYWdlc18iLCJwaXhlbENvb3JkaW5hdGVzIiwibG9jYWxUcmFuc2Zvcm0iLCJkcmF3VGV4dF8iLCJzZXRDb250ZXh0RmlsbFN0YXRlXyIsInNldENvbnRleHRTdHJva2VTdGF0ZV8iLCJzZXRDb250ZXh0VGV4dFN0YXRlXyIsInN0cm9rZVRleHQiLCJmaWxsVGV4dCIsIm1vdmVUb0xpbmVUb18iLCJjbG9zZSIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsImRyYXdSaW5nc18iLCJzaW1wbGVHZW9tZXRyeSIsInRyYW5zZm9ybUdlb20yRCIsImJlZ2luUGF0aCIsImFyYyIsImZpbGwiLCJzdHJva2UiLCJnZXRGaWxsIiwiZ2V0U3Ryb2tlIiwiZ2V0VGV4dCIsImdldEdlb21ldHJ5RnVuY3Rpb24iLCJnZW9tZXRyaWVzIiwiZ2V0R2VvbWV0cmllc0FycmF5IiwiZmxhdE1pZHBvaW50IiwiZ2V0RmxhdE1pZHBvaW50IiwiZ2VvbWV0cnlFeHRlbnQiLCJmbGF0TWlkcG9pbnRzIiwiZ2V0RmxhdE1pZHBvaW50cyIsImZsYXRJbnRlcmlvclBvaW50IiwiZ2V0RW5kc3MiLCJmbGF0SW50ZXJpb3JQb2ludHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludHMiLCJmaWxsU3RhdGUiLCJjb250ZXh0RmlsbFN0YXRlIiwic3Ryb2tlU3RhdGUiLCJjb250ZXh0U3Ryb2tlU3RhdGUiLCJsaW5lQ2FwIiwibGluZURhc2giLCJsaW5lRGFzaE9mZnNldCIsImxpbmVKb2luIiwibGluZVdpZHRoIiwibWl0ZXJMaW1pdCIsInRleHRTdGF0ZSIsImNvbnRleHRUZXh0U3RhdGUiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsU3R5bGVDb2xvciIsImdldENvbG9yIiwic3Ryb2tlU3R5bGVDb2xvciIsInN0cm9rZVN0eWxlTGluZUNhcCIsImdldExpbmVDYXAiLCJzdHJva2VTdHlsZUxpbmVEYXNoIiwiZ2V0TGluZURhc2giLCJzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0IiwiZ2V0TGluZURhc2hPZmZzZXQiLCJzdHJva2VTdHlsZUxpbmVKb2luIiwiZ2V0TGluZUpvaW4iLCJzdHJva2VTdHlsZVdpZHRoIiwic3Ryb2tlU3R5bGVNaXRlckxpbWl0IiwiZ2V0TWl0ZXJMaW1pdCIsImltYWdlQW5jaG9yIiwiZ2V0QW5jaG9yIiwiaW1hZ2VJbWFnZSIsImltYWdlT3JpZ2luIiwiZ2V0T3JpZ2luIiwiaW1hZ2VTaXplIiwiZ2V0Um90YXRlV2l0aFZpZXciLCJnZXRTY2FsZSIsInRleHRGaWxsU3R5bGUiLCJ0ZXh0RmlsbFN0eWxlQ29sb3IiLCJ0ZXh0U3Ryb2tlU3R5bGUiLCJ0ZXh0U3Ryb2tlU3R5bGVDb2xvciIsInRleHRTdHJva2VTdHlsZUxpbmVDYXAiLCJ0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCIsInRleHRTdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0IiwidGV4dFN0cm9rZVN0eWxlTGluZUpvaW4iLCJ0ZXh0U3Ryb2tlU3R5bGVXaWR0aCIsInRleHRTdHJva2VTdHlsZU1pdGVyTGltaXQiLCJ0ZXh0Rm9udCIsImdldEZvbnQiLCJ0ZXh0T2Zmc2V0WCIsImdldE9mZnNldFgiLCJ0ZXh0T2Zmc2V0WSIsImdldE9mZnNldFkiLCJ0ZXh0Um90YXRlV2l0aFZpZXciLCJ0ZXh0Um90YXRpb24iLCJ0ZXh0U2NhbGUiLCJ0ZXh0VGV4dCIsInRleHRUZXh0QWxpZ24iLCJnZXRUZXh0QWxpZ24iLCJ0ZXh0VGV4dEJhc2VsaW5lIiwiZ2V0VGV4dEJhc2VsaW5lIiwiSWNvbkltYWdlQ2FjaGUiLCJjYWNoZV8iLCJjYWNoZVNpemVfIiwibWF4Q2FjaGVTaXplXyIsImNyb3NzT3JpZ2luIiwiZXhwaXJlIiwiaWNvbkltYWdlIiwibWF4Q2FjaGVTaXplIiwic2hhcmVkIiwiZXhwaXJlSWNvbkNhY2hlIiwic29ydEJ5WkluZGV4Iiwic3RhdGUxIiwic3RhdGUyIiwibGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycyIsImNhbnZhc19NYXAiLCJNYXBSZW5kZXJlciIsIkNhbnZhc01hcFJlbmRlcmVyIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImdldFRyYW5zZm9ybSIsImNvbXBvc2VFdmVudCIsImNsZWFyUmVjdCIsImNhbGN1bGF0ZU1hdHJpY2VzMkQiLCJjb21wYXJlRm5jIiwic3RhYmxlU29ydCIsInNhdmUiLCJ2aWV3UmVzb2x1dGlvbiIsImxheWVyUmVuZGVyZXIiLCJnZXRMYXllclJlbmRlcmVyIiwicHJlcGFyZUZyYW1lIiwiY29tcG9zZUZyYW1lIiwicmVzdG9yZSIsInNjaGVkdWxlUmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnMiLCJzY2hlZHVsZUV4cGlyZUljb25DYWNoZSIsInRoaXNBcmciLCJ0aGlzQXJnMiIsIm51bUxheWVycyIsImZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSIsInJlZ2lzdGVyTGF5ZXJSZW5kZXJlcnMiLCJjb25zdHJ1Y3RvcnMiLCJjdG9yIiwibGF5ZXJSZW5kZXJlcnNfIiwibGF5ZXJSZW5kZXJlckxpc3RlbmVyc18iLCJsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzXyIsIm1hdCIsImRldCIsImludmVydCIsInJlbW92ZUxheWVyUmVuZGVyZXJCeUtleV8iLCJ0cmFuc2xhdGVkQ29vcmRpbmF0ZSIsInByb2plY3Rpb25FeHRlbnQiLCJ3b3JsZFdpZHRoIiwiZ2V0V3JhcFgiLCJsYXllcktleSIsImNhbmRpZGF0ZSIsImhhbmRsZUxheWVyUmVuZGVyZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJSZW5kZXJlckJ5S2V5IiwiZ2V0TGF5ZXJSZW5kZXJlcnMiLCJyZW1vdmVVbnVzZWRMYXllclJlbmRlcmVyc18iLCJjYW52YXNfTGF5ZXIiLCJMYXllclJlbmRlcmVyIiwiQ2FudmFzTGF5ZXJSZW5kZXJlciIsInJlbmRlcmVkUmVzb2x1dGlvbiIsImNsaXAiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJkaXNwYXRjaENvbXBvc2VFdmVudF8iLCJvcHRfdHJhbnNmb3JtIiwiZ2V0TGF5ZXIiLCJwb3N0Q29tcG9zZSIsInByZUNvbXBvc2UiLCJsYXllcl8iLCJjcmVhdGVMb2FkZWRUaWxlRmluZGVyIiwidGlsZXMiLCJ0aWxlUmFuZ2UiLCJmb3JFYWNoTG9hZGVkVGlsZSIsInRpbGVDb29yZCIsImhhbmRsZUltYWdlQ2hhbmdlXyIsInJlbmRlcklmUmVhZHlBbmRWaXNpYmxlIiwibG9hZEltYWdlIiwiaW1hZ2VTdGF0ZSIsInNjaGVkdWxlRXhwaXJlQ2FjaGUiLCJ0aWxlU291cmNlIiwicG9zdFJlbmRlckZ1bmN0aW9uIiwiZXhwaXJlQ2FjaGUiLCJ1cGRhdGVVc2VkVGlsZXMiLCJ6S2V5IiwibWFuYWdlVGlsZVB5cmFtaWQiLCJjdXJyZW50WiIsInByZWxvYWQiLCJvcHRfdGlsZUNhbGxiYWNrIiwiZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWiIsImdldFRpbGUiLCJnZXRUaWxlQ29vcmRDZW50ZXIiLCJ1c2VUaWxlIiwiSW50ZXJtZWRpYXRlQ2FudmFzIiwiSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIiLCJjb29yZGluYXRlVG9DYW52YXNQaXhlbFRyYW5zZm9ybSIsImhpdENhbnZhc0NvbnRleHRfIiwiY2xpcHBlZCIsImltYWdlVHJhbnNmb3JtIiwiZ2V0SW1hZ2VUcmFuc2Zvcm0iLCJkdyIsImRoIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwiSW1hZ2VMYXllcl9DYW52YXNJbWFnZUxheWVyUmVuZGVyZXIiLCJDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIiLCJpbWFnZUxheWVyIiwiaW1hZ2VUcmFuc2Zvcm1fIiwic2tpcHBlZEZlYXR1cmVzXyIsInZlY3RvclJlbmRlcmVyXyIsInZpZXdDZW50ZXIiLCJpbWFnZVNvdXJjZSIsInZlY3RvclJlbmRlcmVyIiwicmVuZGVyZWRFeHRlbnQiLCJza2lwcGVkRmVhdHVyZXMiLCJpbWFnZUZyYW1lU3RhdGUiLCJuZXdTa2lwcGVkRmVhdHVyZXMiLCJyZXBsYXlHcm91cENoYW5nZWQiLCJjb21wb3NlIiwiaW1hZ2VFeHRlbnQiLCJpbWFnZVJlc29sdXRpb24iLCJpbWFnZVBpeGVsUmF0aW8iLCJnZXRSZW5kZXJNb2RlIiwibWFwUmVuZGVyZXIiLCJJbWFnZUxheWVyIiwiVGlsZVJhbmdlIiwiVGlsZVJhbmdlX2NyZWF0ZU9yVXBkYXRlIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJvbF9UaWxlUmFuZ2UiLCJUaWxlTGF5ZXJfQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIiLCJDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciIsInRpbGVMYXllciIsIm9wdF9ub0NvbnRleHQiLCJvdmVyc2FtcGxpbmdfIiwicmVuZGVyZWRFeHRlbnRfIiwicmVuZGVyZWRSZXZpc2lvbiIsInJlbmRlcmVkVGlsZXMiLCJuZXdUaWxlc18iLCJ0bXBFeHRlbnQiLCJ0bXBUaWxlUmFuZ2VfIiwiekRpcmVjdGlvbiIsImlzRHJhd2FibGVUaWxlXyIsInRpbGVTdGF0ZSIsInVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJnZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0UHJlbG9hZCIsInNldFN0YXRlIiwiZ2V0SW50ZXJpbVRpbGUiLCJzb3VyY2VSZXZpc2lvbiIsImdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiIsImdldFpGb3JSZXNvbHV0aW9uIiwib3ZlcnNhbXBsaW5nIiwiZ2V0VGlsZVJhbmdlRXh0ZW50IiwidGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlUGl4ZWxSYXRpbyIsInRpbGVzVG9EcmF3QnlaIiwiZmluZExvYWRlZFRpbGVzIiwiYW5pbWF0aW5nT3JJbnRlcmFjdGluZyIsInRtcFRpbGVSYW5nZSIsInVpZCIsImluVHJhbnNpdGlvbiIsImdldEFscGhhIiwiY2hpbGRUaWxlUmFuZ2UiLCJnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSIsImNvdmVyZWQiLCJmb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlIiwidGlsZVBpeGVsU2l6ZSIsImdldFRpbGVQaXhlbFNpemUiLCJjdXJyZW50U2NhbGUiLCJjdXJyZW50VGlsZVBpeGVsU2l6ZSIsInRpbGVFeHRlbnQiLCJ0aWxlR3V0dGVyIiwidGlsZXNUb0RyYXciLCJ6cyIsInRpbGVDb29yZEtleSIsImdldEd1dHRlckZvclByb2plY3Rpb24iLCJnZXRUaWxlQ29vcmRFeHRlbnQiLCJnZXRUaWxlQ29vcmQiLCJkcmF3VGlsZUltYWdlIiwiZ3V0dGVyIiwidHJhbnNpdGlvbiIsImdldFRpbGVJbWFnZSIsImdldE9wYXF1ZSIsImFscGhhQ2hhbmdlZCIsImVuZFRyYW5zaXRpb24iLCJjYW52YXNfVGlsZUxheWVyIiwiUmVwbGF5R3JvdXBfUmVwbGF5R3JvdXAiLCJnZXRSZXBsYXkiLCJyZXBsYXlUeXBlIiwiYWRkRGVjbHV0dGVyIiwiZ3JvdXAiLCJyZW5kZXJfUmVwbGF5R3JvdXAiLCJSZXBsYXlUeXBlIiwiREVGQVVMVCIsIlRFWFQiLCJsaW5lU3RyaW5nTGVuZ3RoIiwiZHJhd1RleHRPblBhdGgiLCJtZWFzdXJlIiwic3RhcnRNIiwibWF4QW5nbGUiLCJwcmV2aW91c0FuZ2xlIiwicmV2ZXJzZSIsIm51bUNoYXJzIiwic2VnbWVudE0iLCJjaHVuayIsImNodW5rTGVuZ3RoIiwiY2hhciIsImNoYXJBdCIsImNoYXJMZW5ndGgiLCJjaGFyTSIsInNlZ21lbnRQb3MiLCJpbnRlcnBvbGF0ZSIsInVuc2hpZnQiLCJJbnN0cnVjdGlvbiIsIkJFR0lOX0dFT01FVFJZIiwiQkVHSU5fUEFUSCIsIkNMT1NFX1BBVEgiLCJDVVNUT00iLCJEUkFXX0NIQVJTIiwiRFJBV19JTUFHRSIsIkVORF9HRU9NRVRSWSIsIkZJTEwiLCJNT1ZFX1RPX0xJTkVfVE8iLCJTRVRfRklMTF9TVFlMRSIsIlNFVF9TVFJPS0VfU1RZTEUiLCJTVFJPS0UiLCJJbnN0cnVjdGlvbl9maWxsSW5zdHJ1Y3Rpb24iLCJJbnN0cnVjdGlvbl9zdHJva2VJbnN0cnVjdGlvbiIsImJlZ2luUGF0aEluc3RydWN0aW9uIiwiY2xvc2VQYXRoSW5zdHJ1Y3Rpb24iLCJjYW52YXNfSW5zdHJ1Y3Rpb24iLCJPUkRFUiIsIlRFWFRfQUxJR04iLCJtaWRkbGUiLCJoYW5naW5nIiwiYWxwaGFiZXRpYyIsImlkZW9ncmFwaGljIiwiYm90dG9tIiwiUmVwbGF5X3RtcEV4dGVudCIsIlJlcGxheV90bXBUcmFuc2Zvcm0iLCJSZXBsYXkiLCJDYW52YXNSZXBsYXkiLCJtYXhFeHRlbnQiLCJvdmVybGFwcyIsImRlY2x1dHRlclRyZWUiLCJtYXhMaW5lV2lkdGgiLCJhbGlnbkZpbGxfIiwiYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8iLCJiZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yXyIsImJ1ZmZlcmVkTWF4RXh0ZW50XyIsImluc3RydWN0aW9ucyIsImNvb3JkaW5hdGVDYWNoZV8iLCJyZW5kZXJlZFRyYW5zZm9ybV8iLCJoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMiLCJyZXBsYXlUZXh0QmFja2dyb3VuZF8iLCJwMSIsInAyIiwicDMiLCJwNCIsImZpbGxJbnN0cnVjdGlvbiIsInN0cm9rZUluc3RydWN0aW9uIiwiZmlsbF8iLCJzZXRTdHJva2VTdHlsZV8iLCJyZXBsYXlJbWFnZV8iLCJkZWNsdXR0ZXJHcm91cCIsInNuYXBUb1BpeGVsIiwiZmlsbFN0cm9rZSIsImJveFciLCJib3hIIiwiYm94WCIsImJveFkiLCJzdHJva2VQYWRkaW5nIiwiZGVjbHV0dGVyQXJncyIsImFwcGx5UGl4ZWxSYXRpbyIsImRhc2hBcnJheSIsImRhc2giLCJhcHBlbmRGbGF0Q29vcmRpbmF0ZXMiLCJjbG9zZWQiLCJza2lwRmlyc3QiLCJteUVuZCIsImdldEJ1ZmZlcmVkTWF4RXh0ZW50IiwibGFzdFJlbCIsIm5leHRSZWwiLCJsYXN0Q29vcmQiLCJuZXh0Q29vcmQiLCJza2lwcGVkIiwiZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyIsInJlcGxheUVuZHMiLCJyZXBsYXlFbmQiLCJiZWdpbkdlb21ldHJ5IiwicmVwbGF5RW5kc3MiLCJyZXBsYXlCZWdpbiIsIm15RW5kcyIsImVuZEdlb21ldHJ5IiwiZmluaXNoIiwib3JpZ2luIiwicmVwZWF0U2l6ZSIsImluc3RydWN0aW9uIiwicmVuZGVyRGVjbHV0dGVyXyIsImdyb3VwQ291bnQiLCJib3giLCJkZWNsdXR0ZXJEYXRhIiwicmVwbGF5XyIsInNraXBwZWRGZWF0dXJlc0hhc2giLCJmZWF0dXJlQ2FsbGJhY2siLCJvcHRfaGl0RXh0ZW50IiwiZGQiLCJwcmV2WCIsInByZXZZIiwicm91bmRYIiwicm91bmRZIiwic2tpcEZlYXR1cmVzIiwicGVuZGluZ0ZpbGwiLCJwZW5kaW5nU3Ryb2tlIiwibGFzdEZpbGxJbnN0cnVjdGlvbiIsImxhc3RTdHJva2VJbnN0cnVjdGlvbiIsImNvb3JkaW5hdGVDYWNoZSIsImJhdGNoU2l6ZSIsInJvdGF0ZVdpdGhWaWV3IiwiYmFja2dyb3VuZEZpbGwiLCJiYWNrZ3JvdW5kU3Ryb2tlIiwiYmFzZWxpbmUiLCJmaWxsS2V5Iiwic3Ryb2tlS2V5Iiwic3Ryb2tlV2lkdGgiLCJ0ZXh0S2V5IiwicGF0aExlbmd0aCIsInRleHRMZW5ndGgiLCJ0ZXh0U3RhdGVzIiwicGFydHMiLCJjYyIsImNoYXJzIiwicGFydCIsInJlcGxheSIsInJlcGxheUhpdERldGVjdGlvbiIsIm9wdF9mZWF0dXJlQ2FsbGJhY2siLCJyZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIiwiY3JlYXRlRmlsbCIsImFwcGx5U3Ryb2tlIiwiY3JlYXRlU3Ryb2tlIiwidXBkYXRlRmlsbFN0eWxlIiwiY3VycmVudEZpbGxTdHlsZSIsInVwZGF0ZVN0cm9rZVN0eWxlIiwiY3VycmVudFN0cm9rZVN0eWxlIiwiY3VycmVudExpbmVDYXAiLCJjdXJyZW50TGluZURhc2giLCJjdXJyZW50TGluZURhc2hPZmZzZXQiLCJjdXJyZW50TGluZUpvaW4iLCJjdXJyZW50TGluZVdpZHRoIiwiY3VycmVudE1pdGVyTGltaXQiLCJlbmRHZW9tZXRyeUluc3RydWN0aW9uIiwiSW1hZ2VSZXBsYXkiLCJDYW52YXNJbWFnZVJlcGxheSIsImRlY2x1dHRlckdyb3VwXyIsImhpdERldGVjdGlvbkltYWdlXyIsImFuY2hvclhfIiwiYW5jaG9yWV8iLCJoZWlnaHRfIiwib3BhY2l0eV8iLCJvcmlnaW5YXyIsIm9yaWdpbllfIiwicm90YXRlV2l0aFZpZXdfIiwic2NhbGVfIiwid2lkdGhfIiwiZHJhd0Nvb3JkaW5hdGVzXyIsIm15QmVnaW4iLCJoaXREZXRlY3Rpb25JbWFnZSIsImdldEhpdERldGVjdGlvbkltYWdlIiwiTGluZVN0cmluZ1JlcGxheSIsIkNhbnZhc0xpbmVTdHJpbmdSZXBsYXkiLCJkcmF3RmxhdENvb3JkaW5hdGVzXyIsIm1vdmVUb0xpbmVUb0luc3RydWN0aW9uIiwibGFzdFN0cm9rZSIsIlBvbHlnb25SZXBsYXlfQ2FudmFzUG9seWdvblJlcGxheSIsIkNhbnZhc1BvbHlnb25SZXBsYXkiLCJkcmF3RmxhdENvb3JkaW5hdGVzc18iLCJudW1FbmRzIiwic2V0RmlsbFN0cm9rZVN0eWxlc18iLCJjaXJjbGVJbnN0cnVjdGlvbiIsIm1hdGNoaW5nQ2h1bmsiLCJtMTIiLCJtMjMiLCJ4MTIiLCJ5MTIiLCJ4MjMiLCJ5MjMiLCJjaHVua1N0YXJ0IiwiY2h1bmtFbmQiLCJjaHVua00iLCJhY29zIiwiVGV4dFBsYWNlbWVudCIsIkJBVENIX0NPTlNUUlVDVE9SUyIsIkNpcmNsZSIsIkRlZmF1bHQiLCJJbWFnZSIsIkxpbmVTdHJpbmciLCJUZXh0IiwiQ2FudmFzVGV4dFJlcGxheSIsImxhYmVsc18iLCJmaWxsU3RhdGVzIiwic3Ryb2tlU3RhdGVzIiwidGV4dEtleV8iLCJmaWxsS2V5XyIsInN0cm9rZUtleV8iLCJ3aWR0aHNfIiwiZ2VvbWV0cnlUeXBlIiwicGxhY2VtZW50IiwiZmxhdEVuZCIsImZsYXRPZmZzZXQiLCJvbyIsInJhbmdlIiwiZHJhd0NoYXJzXyIsImludGVyaW9yUG9pbnRzIiwiZHJhd1RleHRJbWFnZV8iLCJhbGlnbiIsImxpbmVzIiwibnVtTGluZXMiLCJ3aWR0aHMiLCJjdXJyZW50V2lkdGgiLCJtZWFzdXJlVGV4dFdpZHRocyIsImxpbmVIZWlnaHQiLCJyZW5kZXJXaWR0aCIsImxlZnRSaWdodCIsImdldE92ZXJmbG93IiwiZ2V0TWF4QW5nbGUiLCJnZXRQbGFjZW1lbnQiLCJnZXRCYWNrZ3JvdW5kRmlsbCIsImdldEJhY2tncm91bmRTdHJva2UiLCJnZXRQYWRkaW5nIiwiUmVwbGF5R3JvdXBfQ2FudmFzUmVwbGF5R3JvdXAiLCJSZXBsYXlHcm91cCIsIkNhbnZhc1JlcGxheUdyb3VwIiwib3B0X3JlbmRlckJ1ZmZlciIsImRlY2x1dHRlclRyZWVfIiwidG9sZXJhbmNlXyIsIm1heEV4dGVudF8iLCJvdmVybGFwc18iLCJyZXNvbHV0aW9uXyIsInJlbmRlckJ1ZmZlcl8iLCJyZXBsYXlzQnlaSW5kZXhfIiwiaGl0RGV0ZWN0aW9uQ29udGV4dF8iLCJoaXREZXRlY3Rpb25UcmFuc2Zvcm1fIiwiZGVjbHV0dGVyIiwiZmxhdENsaXBDb29yZHMiLCJnZXRDbGlwQ29vcmRzIiwiaGFzUmVwbGF5cyIsInJlcGxheXMiLCJjYW5kaWRhdGVzIiwicmVwbGF5S2V5IiwiZGVjbHV0dGVyUmVwbGF5cyIsImhpdEV4dGVudCIsImNvbnRleHRTaXplIiwiZGVjbHV0dGVyZWRGZWF0dXJlcyIsIm1hc2siLCJjaXJjbGVBcnJheUNhY2hlIiwiYXJyYXlTaXplIiwiZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUiLCJnZXRDaXJjbGVBcnJheSIsInpJbmRleEtleSIsIkNvbnN0cnVjdG9yIiwiZ2V0UmVwbGF5cyIsIm9wdF9yZXBsYXlUeXBlcyIsIm9wdF9kZWNsdXR0ZXJSZXBsYXlzIiwicmVwbGF5VHlwZXMiLCIwIiwiY2FudmFzX1JlcGxheUdyb3VwIiwiU0lNUExJRllfVE9MRVJBTkNFIiwiR0VPTUVUUllfUkVOREVSRVJTIiwicmVwbGF5R3JvdXAiLCJnZXRJbWFnZVN0YXRlIiwiaW1hZ2VSZXBsYXkiLCJ0ZXh0UmVwbGF5IiwibGluZVN0cmluZ1JlcGxheSIsInBvbHlnb25SZXBsYXkiLCJNdWx0aVBvaW50IiwiTXVsdGlMaW5lU3RyaW5nIiwiTXVsdGlQb2x5Z29uIiwiR2VvbWV0cnlDb2xsZWN0aW9uIiwiZ2VvbWV0cnlSZW5kZXJlciIsImNpcmNsZVJlcGxheSIsImRlZmF1bHRPcmRlciIsImZlYXR1cmUxIiwiZmVhdHVyZTIiLCJnZXRTcXVhcmVkVG9sZXJhbmNlIiwiZ2V0VG9sZXJhbmNlIiwicmVuZGVyRmVhdHVyZSIsInVubGlzdGVuSW1hZ2VDaGFuZ2UiLCJsaXN0ZW5JbWFnZUNoYW5nZSIsInJlbmRlckdlb21ldHJ5IiwiZ2V0R2VvbWV0cmllcyIsInJlbmRlckZlYXR1cmVJbnRlcm5hbCIsIlZlY3RvckxheWVyX0NhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIiLCJDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyIiwidmVjdG9yTGF5ZXIiLCJnZXREZWNsdXR0ZXIiLCJyYnVzaF9kZWZhdWx0IiwiZGlydHlfIiwicmVuZGVyZWRSZXZpc2lvbl8iLCJyZW5kZXJlZFJlc29sdXRpb25fIiwicmVuZGVyZWRSZW5kZXJPcmRlcl8iLCJyZXBsYXlHcm91cF8iLCJoYW5kbGVGb250c0NoYW5nZWRfIiwidmVjdG9yU291cmNlIiwiY2xpcEV4dGVudCIsInJlcGxheUNvbnRleHQiLCJkcmF3T2Zmc2V0WCIsImRyYXdPZmZzZXRZIiwidHJhbnNwYXJlbnRMYXllciIsImhhc1JlbmRlckxpc3RlbmVycyIsImRyYXdXaWR0aCIsImRyYXdIZWlnaHQiLCJkcmF3U2l6ZSIsIndvcmxkIiwibWFpbkNvbnRleHRBbHBoYSIsImhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfIiwiYW5pbWF0aW5nIiwiaW50ZXJhY3RpbmciLCJ1cGRhdGVXaGlsZUFuaW1hdGluZyIsImdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwidXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsImdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmciLCJmcmFtZVN0YXRlRXh0ZW50IiwidmVjdG9yTGF5ZXJSZXZpc2lvbiIsInZlY3RvckxheWVyUmVuZGVyQnVmZmVyIiwiZ2V0UmVuZGVyQnVmZmVyIiwidmVjdG9yTGF5ZXJSZW5kZXJPcmRlciIsImdldFJlbmRlck9yZGVyIiwiZ2V0T3ZlcmxhcHMiLCJsb2FkRmVhdHVyZXMiLCJzdHlsZXMiLCJzdHlsZUZ1bmN0aW9uIiwiZ2V0U3R5bGVGdW5jdGlvbiIsImRpcnR5IiwiZm9yRWFjaEZlYXR1cmVJbkV4dGVudCIsIlZlY3RvckxheWVyIiwiVmVjdG9yVGlsZVJlbmRlclR5cGUiLCJIWUJSSUQiLCJJTUFHRV9SRVBMQVlTIiwiaHlicmlkIiwiVkVDVE9SX1JFUExBWVMiLCJ2ZWN0b3IiLCJWZWN0b3JUaWxlTGF5ZXJfQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIiLCJDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciIsInJlbmRlcmVkTGF5ZXJSZXZpc2lvbl8iLCJ0bXBUcmFuc2Zvcm1fIiwicmVuZGVyTW9kZSIsImNyZWF0ZVJlcGxheUdyb3VwXyIsInJlbmRlclRpbGVJbWFnZV8iLCJsYXllclJldmlzaW9uIiwidGhpcyQxIiwicmV2aXNpb24iLCJyZW5kZXJPcmRlciIsInJlcGxheVN0YXRlIiwiZ2V0UmVwbGF5U3RhdGUiLCJyZW5kZXJlZFJlbmRlck9yZGVyIiwic291cmNlVGlsZUdyaWQiLCJnZXRUaWxlR3JpZCIsImxvb3AiLCJ0dCIsInNvdXJjZVRpbGUiLCJ0aWxlS2V5cyIsInNvdXJjZVRpbGVDb29yZCIsInNvdXJjZVRpbGVFeHRlbnQiLCJzaGFyZWRFeHRlbnQiLCJidWZmZXJlZEV4dGVudCIsInRpbGVQcm9qZWN0aW9uIiwicmVwcm9qZWN0Iiwic2V0UHJvamVjdGlvbiIsImdldEZlYXR1cmVzIiwic2V0UmVwbGF5R3JvdXAiLCJmb3VuZCIsImdldFJlcGxheUdyb3VwIiwiZ2V0UmVwbGF5VHJhbnNmb3JtXyIsInJlbmRlclJlc29sdXRpb24iLCJjbGlwcyIsIndvcmxkT2Zmc2V0IiwiY3VycmVudENsaXAiLCJ6eiIsInJlcGxheURhdGEiLCJyZXBsYXlEZWNsdXR0ZXIiLCJyZW5kZXJlZFRpbGVSZXZpc2lvbiIsIndyYXBwZWRUaWxlQ29vcmQiLCJwaXhlbFNjYWxlIiwiVmVjdG9yVGlsZUxheWVyIiwib2xfTWFwIiwiTWFwIiwiYWx0U2hpZnREcmFnUm90YXRlIiwiZG91YmxlQ2xpY2tab29tIiwiem9vbURlbHRhIiwiem9vbUR1cmF0aW9uIiwiZHJhZ1BhbiIsIm9uRm9jdXNPbmx5IiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsImludGVyYWN0aW9uX2RlZmF1bHRzIiwiVGlsZVByb3BlcnR5IiwiVGlsZV9UaWxlTGF5ZXIiLCJUaWxlTGF5ZXIiLCJzZXRQcmVsb2FkIiwic2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsImxheWVyX1RpbGUiLCJvbF9UaWxlIiwiVGlsZSIsImludGVyaW1UaWxlIiwidHJhbnNpdGlvbl8iLCJ0cmFuc2l0aW9uU3RhcnRzXyIsInJlZnJlc2hJbnRlcmltQ2hhaW4iLCJnZXRCbGFua0ltYWdlIiwiY3R4IiwiZmlsbFJlY3QiLCJvbF9JbWFnZVRpbGUiLCJJbWFnZVRpbGUiLCJ0aWxlTG9hZEZ1bmN0aW9uIiwiY3Jvc3NPcmlnaW5fIiwic3JjXyIsImltYWdlTGlzdGVuZXJLZXlzXyIsInRpbGVMb2FkRnVuY3Rpb25fIiwidW5saXN0ZW5JbWFnZV8iLCJoYW5kbGVJbWFnZUVycm9yXyIsImhhbmRsZUltYWdlTG9hZF8iLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwidGlsZWNvb3JkX2NyZWF0ZU9yVXBkYXRlIiwib3B0X3RpbGVDb29yZCIsImdldEtleVpYWSIsInRpbGVjb29yZF9nZXRLZXkiLCJvbF9UaWxlQ2FjaGUiLCJUaWxlQ2FjaGUiLCJwcnVuZUV4Y2VwdE5ld2VzdFoiLCJmcm9tS2V5IiwiZW5sYXJnZUNsaXBQb2ludCIsImNlbnRyb2lkWCIsImNlbnRyb2lkWSIsImRYIiwiZFkiLCJyZXByb2pfcmVuZGVyIiwic291cmNlRXh0ZW50IiwidGFyZ2V0RXh0ZW50IiwidHJpYW5ndWxhdGlvbiIsInNvdXJjZXMiLCJvcHRfcmVuZGVyRWRnZXMiLCJzb3VyY2VEYXRhRXh0ZW50IiwiY2FudmFzV2lkdGhJblVuaXRzIiwiY2FudmFzSGVpZ2h0SW5Vbml0cyIsInN0aXRjaENvbnRleHQiLCJzdGl0Y2hTY2FsZSIsInhQb3MiLCJ5UG9zIiwic3JjV2lkdGgiLCJzcmNIZWlnaHQiLCJ0YXJnZXRUb3BMZWZ0IiwiZ2V0VHJpYW5nbGVzIiwidHJpYW5nbGUiLCJ1MCIsInYwIiwidTEiLCJ2MSIsInUyIiwidjIiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFgiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFkiLCJhZmZpbmVDb2VmcyIsIm1heFJvdyIsIm1heEVsIiwiYWJzVmFsdWUiLCJjb2VmIiwic29sdmVMaW5lYXJTeXN0ZW0iLCJwMCIsIlRyaWFuZ3VsYXRpb25fVHJpYW5ndWxhdGlvbiIsInRhcmdldFByb2oiLCJtYXhTb3VyY2VFeHRlbnQiLCJlcnJvclRocmVzaG9sZCIsInNvdXJjZVByb2pfIiwidGFyZ2V0UHJval8iLCJ0cmFuc2Zvcm1JbnZDYWNoZSIsInRyYW5zZm9ybUludiIsInRyYW5zZm9ybUludl8iLCJtYXhTb3VyY2VFeHRlbnRfIiwiZXJyb3JUaHJlc2hvbGRTcXVhcmVkXyIsInRyaWFuZ2xlc18iLCJ3cmFwc1hJblNvdXJjZV8iLCJjYW5XcmFwWEluU291cmNlXyIsInNvdXJjZVdvcmxkV2lkdGhfIiwidGFyZ2V0V29ybGRXaWR0aF8iLCJkZXN0aW5hdGlvblRvcExlZnQiLCJkZXN0aW5hdGlvblRvcFJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21SaWdodCIsImRlc3RpbmF0aW9uQm90dG9tTGVmdCIsInNvdXJjZVRvcExlZnQiLCJzb3VyY2VUb3BSaWdodCIsInNvdXJjZUJvdHRvbVJpZ2h0Iiwic291cmNlQm90dG9tTGVmdCIsImFkZFF1YWRfIiwibGVmdEJvdW5kIiwibmV3VHJpYW5nbGUiLCJhZGRUcmlhbmdsZV8iLCJhU3JjIiwiYlNyYyIsImNTcmMiLCJkU3JjIiwibWF4U3ViZGl2aXNpb24iLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJpc0Zpbml0ZSIsImNlbnRlclNyYyIsImJjIiwiYmNTcmMiLCJkYSIsImRhU3JjIiwiYWIiLCJhYlNyYyIsImNkIiwiY2RTcmMiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnQiLCJyZXByb2pfVHJpYW5ndWxhdGlvbiIsInJlcHJval9UaWxlIiwiUmVwcm9qVGlsZSIsInRhcmdldFRpbGVHcmlkIiwiZ2V0VGlsZUZ1bmN0aW9uIiwib3B0X2Vycm9yVGhyZXNob2xkIiwicmVuZGVyRWRnZXNfIiwiZ3V0dGVyXyIsInNvdXJjZVRpbGVHcmlkXyIsInRhcmdldFRpbGVHcmlkXyIsIndyYXBwZWRUaWxlQ29vcmRfIiwic291cmNlVGlsZXNfIiwic291cmNlc0xpc3RlbmVyS2V5c18iLCJzb3VyY2VaXyIsIm1heFRhcmdldEV4dGVudCIsImxpbWl0ZWRUYXJnZXRFeHRlbnQiLCJzb3VyY2VQcm9qRXh0ZW50IiwidGFyZ2V0TWV0ZXJzUGVyVW5pdCIsInNvdXJjZU1ldGVyc1BlclVuaXQiLCJjb21wZW5zYXRpb25GYWN0b3IiLCJjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uIiwiZXJyb3JUaHJlc2hvbGRJblBpeGVscyIsInRyaWFuZ3VsYXRpb25fIiwic291cmNlUmFuZ2UiLCJzcmNYIiwic3JjWSIsInVubGlzdGVuU291cmNlc18iLCJyZXByb2plY3RfIiwiZ2V0VGlsZVNpemUiLCJsZWZ0VG9Mb2FkIiwic291cmNlTGlzdGVuS2V5IiwiY3JlYXRlRnJvbVRlbXBsYXRlIiwielJlZ0V4IiwieFJlZ0V4IiwieVJlZ0V4IiwiZGFzaFlSZWdFeCIsImdldEZ1bGxUaWxlUmFuZ2UiLCJjcmVhdGVGcm9tVGVtcGxhdGVzIiwidGVtcGxhdGVzIiwidGlsZVVybEZ1bmN0aW9ucyIsImhhc2giLCJjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyIsIm51bGxUaWxlVXJsRnVuY3Rpb24iLCJhZGFwdEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uTGlrZSIsInNvdXJjZV9Tb3VyY2UiLCJTb3VyY2UiLCJhdHRyaWJ1dGlvbnNfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJ3cmFwWF8iLCJ3cmFwWCIsInJlZnJlc2giLCJzZXRBdHRyaWJ1dGlvbnMiLCJ0bXBUaWxlQ29vcmQiLCJUaWxlR3JpZF9UaWxlR3JpZCIsIm9wdF9zdHJpY3QiLCJldmVyeSIsImN1cnJlbnRWYWwiLCJyZXMiLCJvcmlnaW5zIiwib3JpZ2luXyIsIm9yaWdpbnNfIiwidGlsZVNpemVzXyIsInRpbGVTaXplcyIsInRpbGVTaXplXyIsInRpbGVTaXplIiwiZnVsbFRpbGVSYW5nZXNfIiwidG1wU2l6ZV8iLCJzaXplcyIsImNhbGN1bGF0ZVRpbGVSYW5nZXNfIiwiZm9yRWFjaFRpbGVDb29yZCIsIm9wdF90aWxlUmFuZ2UiLCJ0aWxlQ29vcmRFeHRlbnQiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFpfIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyIsInJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kiLCJhZGp1c3RYIiwiYWRqdXN0WSIsInhGcm9tT3JpZ2luIiwieUZyb21PcmlnaW4iLCJ0aWxlQ29vcmRYIiwidGlsZUNvb3JkWSIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kWiIsImdldFRpbGVDb29yZFJlc29sdXRpb24iLCJmdWxsVGlsZVJhbmdlcyIsInRpbGVncmlkX1RpbGVHcmlkIiwiZ2V0Rm9yUHJvamVjdGlvbiIsIm9wdF9tYXhab29tIiwib3B0X3RpbGVTaXplIiwib3B0X2Nvcm5lciIsInJlc29sdXRpb25zRnJvbUV4dGVudCIsImNyZWF0ZUZvckV4dGVudCIsImV4dGVudEZyb21Qcm9qZWN0aW9uIiwiY3JlYXRlRm9yUHJvamVjdGlvbiIsImhhbGYiLCJUaWxlX1RpbGVTb3VyY2UiLCJUaWxlU291cmNlIiwib3BhcXVlXyIsIm9wYXF1ZSIsInRpbGVQaXhlbFJhdGlvXyIsInRpbGVDYWNoZSIsInRtcFNpemUiLCJ0aWxlT3B0aW9ucyIsImdldFRpbGVDYWNoZUZvclByb2plY3Rpb24iLCJsb2FkZWQiLCJzZXRLZXkiLCJ0aGlzUHJvaiIsInJhdGlvIiwiZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uIiwib3B0X3Byb2plY3Rpb24iLCJ3b3JsZHNBd2F5Iiwid2l0aGluRXh0ZW50QW5kWiIsIlRpbGVTb3VyY2VFdmVudCIsIlRpbGVFdmVudFR5cGUiLCJkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbiIsImltYWdlVGlsZSIsInNvdXJjZV9YWVoiLCJUaWxlSW1hZ2UiLCJ4eXpPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJjcmVhdGVYWVoiLCJyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCIsInRpbGVVcmxGdW5jdGlvbiIsInVybCIsInVybHMiLCJVcmxUaWxlIiwidGlsZUNsYXNzIiwidGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsInRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fIiwic2V0VXJscyIsInNldFVybCIsInNldFRpbGVVcmxGdW5jdGlvbiIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0VXJscyIsInNldFRpbGVMb2FkRnVuY3Rpb24iLCJtYXRjaCIsImV4ZWMiLCJzdGFydENoYXJDb2RlIiwic3RvcENoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcCIsImV4cGFuZFVybCIsIlBST0pFQ1RJT04iLCJNb3VzZVBvc2l0aW9uX3JlbmRlciIsIm1hcFByb2plY3Rpb25fIiwibW91c2VQb3NpdGlvbkNvbnRyb2wiLCJNb3VzZVBvc2l0aW9uIiwiaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfIiwiY29vcmRpbmF0ZUZvcm1hdCIsInNldENvb3JkaW5hdGVGb3JtYXQiLCJ1bmRlZmluZWRIVE1MXyIsInVuZGVmaW5lZEhUTUwiLCJyZW5kZXJPbk1vdXNlT3V0XyIsInJlbmRlcmVkSFRNTF8iLCJsYXN0TW91c2VNb3ZlUGl4ZWxfIiwiZ2V0Q29vcmRpbmF0ZUZvcm1hdCIsImhhbmRsZU1vdXNlTW92ZSIsInVwZGF0ZUhUTUxfIiwiaGFuZGxlTW91c2VPdXQiLCJ2aWV3cG9ydCIsImh0bWwiLCJtaW5ab20iXSwibWFwcGluZ3MiOiJhQUdBLElBQUFBLEVBQUFDLE9BQUEsaUJBQ0FBLE9BQUEsaUJBQ0EsU0FBQUMsRUFBQUMsSUFnUkEsU0FBQUQsRUFBQUMsR0FDQSxJQUFBQyxFQUFBRixLQUFBRyxFQUFBSCxHQUNBLE9BRUEsUUFBQUksS0FEQUQsRUFBQUgsSUFBQSxFQUNBQyxFQUNBSSxPQUFBQyxVQUFBQyxlQUFBQyxLQUFBUCxFQUFBRyxLQUNBSyxFQUFBTCxHQUFBSCxFQUFBRyxJQUdBLEtBQUFNLEdBQUEsSUFBQUMsR0FDQUMsSUF6UkFDLENBQUFiLEVBQUFDLEdBQ0FILEtBQUFFLEVBQUFDLElBdURBLElBS0FhLEVBTEFDLEdBQUEsRUFFQUMsRUFBQSx1QkFDQUMsRUFBQSxJQUNBQyxFQUFBLEdBR0FDLEVBQUEsR0FFQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFqQixHQUNBLElBQUFrQixFQUFBQyxFQUFBbkIsR0FDQSxJQUFBa0IsRUFBQSxPQUFBRSxFQUNBLElBQUFDLEVBQUEsU0FBQUMsR0FzQkEsT0FyQkFKLEVBQUFLLElBQUFDLFFBQ0FMLEVBQUFHLElBQ0EsSUFBQUgsRUFBQUcsR0FBQUcsUUFBQUMsUUFBQTFCLElBQ0FtQixFQUFBRyxHQUFBRyxRQUFBRSxLQUFBM0IsSUFHQWUsRUFBQSxDQUFBZixHQUNBVSxFQUFBWSxJQUVBLElBQUFKLEVBQUFVLFNBQUFGLFFBQUFKLElBQ0FKLEVBQUFVLFNBQUFELEtBQUFMLEtBR0FPLFFBQUFDLEtBQ0EsNEJBQ0FSLEVBQ0EsMEJBQ0F0QixHQUVBZSxFQUFBLElBRUFL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WixFQUNBQSxFQUFBMTlFLEdBRUFBLEVBQUErQyxZQUlBL1MsS0FBQSt0RixlQUFBTyxJQUFBdHVGLEtBQUErdEYsZ0JBQ0EvdEYsS0FBQWlPLFFBQUF5ckMsVUFBQTQwQyxFQUNBdHVGLEtBQUErdEYsY0FBQU8sSUFJQWQsRUFyTWlCLENBc01mdjNDLElDL08yQixDQUFrQixDQUMzQ3kzQyxpQkFBa0IzbkUsR0FBZSxHQUNqQ21NLFdBQVksWUFHWnljLFVBQVcsd0JBQ1g3bkMsT0FBUXZOLFNBQVMyekMsZUFBZSxrQkFDaEMyZ0QsY0FBZSxXQUdNdDBGLFNBQVMyekMsZUFBZSxjQUNoQ3RrQyxpQkFBaUIsU0FBVSxTQUFTeUIsR0FDakRrakYsR0FBcUI3VCxjQUFjcnZFLEVBQU12RCxVQUd0QnZOLFNBQVMyekMsZUFBZSxhQUNoQ3RrQyxpQkFBaUIsU0FBVSxTQUFTeUIsR0FDL0MsSUFBTXRLLEVBQVNnbUIsR0FBZTFiLEVBQU12RCxRQUNwQ3ltRixHQUFxQkksb0JBQW9CNXRGLEtBSTdDLEloSHNVT2lRLEdBQUFrNkUsR2dIdFVRM3dGLFNBQVMyekMsZUFBZSxVQUMzQixJQUFJeXRDLEdBQUksQ0FDaEJ4dEMsU0FBVXFPLEtBQWtCcDZDLE9BQU8sQ0FBQ21zRixLQUNwQ3ptRixPQUFRLFNBQ1JnbEMsT0FBUSxDQUNKLElBQUlnd0MsR0FBVSxDQUNWejBFLE9BQVEsSUFBSW9qRixHQUFJLENBQ1pPLElBQUssZ0NBSWpCNXlFLEtBQU0sSUFBSXFvQixHQUFLLENBQ1hsYixRaEgwVER2VixHZ0gxVG9CLENBQUMsSUFBSyxJaEgyVHhCeWpCLEdBQVN6akIsR0FBQSxpQkFDbEJ0WixJQUFBd3pGLE1BQUEsY2dIM1RRaG5ELEtBQU0sR0FDTnFyRCxPQUFRIiwiZmlsZSI6Im1haW4uNTFkNThmNmZhMDkwZmRmMmFlODQuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0ZnVuY3Rpb24gaG90RGlzcG9zZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0ZGVsZXRlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdH1cbiBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHtcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xuIFx0XHRpZiAocGFyZW50SG90VXBkYXRlQ2FsbGJhY2spIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcbiBcdH0gO1xuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XG4gXHRcdHNjcmlwdC5zcmMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLlwiICsgaG90Q3VycmVudEhhc2ggKyBcIi5ob3QtdXBkYXRlLmpzXCI7XG4gXHRcdGlmIChudWxsKSBzY3JpcHQuY3Jvc3NPcmlnaW4gPSBudWxsO1xuIFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRNYW5pZmVzdChyZXF1ZXN0VGltZW91dCkge1xuIFx0XHRyZXF1ZXN0VGltZW91dCA9IHJlcXVlc3RUaW1lb3V0IHx8IDEwMDAwO1xuIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gXHRcdFx0aWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuIFx0XHRcdFx0cmV0dXJuIHJlamVjdChuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnRcIikpO1xuIFx0XHRcdH1cbiBcdFx0XHR0cnkge1xuIFx0XHRcdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiBcdFx0XHRcdHZhciByZXF1ZXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiO1xuIFx0XHRcdFx0cmVxdWVzdC5vcGVuKFwiR0VUXCIsIHJlcXVlc3RQYXRoLCB0cnVlKTtcbiBcdFx0XHRcdHJlcXVlc3QudGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xuIFx0XHRcdFx0cmVxdWVzdC5zZW5kKG51bGwpO1xuIFx0XHRcdH0gY2F0Y2ggKGVycikge1xuIFx0XHRcdFx0cmV0dXJuIHJlamVjdChlcnIpO1xuIFx0XHRcdH1cbiBcdFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0aWYgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xuIFx0XHRcdFx0aWYgKHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XG4gXHRcdFx0XHRcdC8vIHRpbWVvdXRcbiBcdFx0XHRcdFx0cmVqZWN0KFxuIFx0XHRcdFx0XHRcdG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIilcbiBcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xuIFx0XHRcdFx0XHQvLyBubyB1cGRhdGUgYXZhaWxhYmxlXG4gXHRcdFx0XHRcdHJlc29sdmUoKTtcbiBcdFx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5zdGF0dXMgIT09IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyAhPT0gMzA0KSB7XG4gXHRcdFx0XHRcdC8vIG90aGVyIGZhaWx1cmVcbiBcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0Ly8gc3VjY2Vzc1xuIFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdHZhciB1cGRhdGUgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiBcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuIFx0XHRcdFx0XHRcdHJlamVjdChlKTtcbiBcdFx0XHRcdFx0XHRyZXR1cm47XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0cmVzb2x2ZSh1cGRhdGUpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH07XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHR2YXIgaG90QXBwbHlPblVwZGF0ZSA9IHRydWU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiNTFkNThmNmZhMDkwZmRmMmFlODRcIjtcbiBcdHZhciBob3RSZXF1ZXN0VGltZW91dCA9IDEwMDAwO1xuIFx0dmFyIGhvdEN1cnJlbnRNb2R1bGVEYXRhID0ge307XG4gXHR2YXIgaG90Q3VycmVudENoaWxkTW9kdWxlO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IFtdO1xuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHtcbiBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdGlmICghbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xuIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gXHRcdFx0aWYgKG1lLmhvdC5hY3RpdmUpIHtcbiBcdFx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XG4gXHRcdFx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPT09IC0xKSB7XG4gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHJlcXVlc3Q7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0Y29uc29sZS53YXJuKFxuIFx0XHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArXG4gXHRcdFx0XHRcdFx0cmVxdWVzdCArXG4gXHRcdFx0XHRcdFx0XCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICtcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZFxuIFx0XHRcdFx0KTtcbiBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XG4gXHRcdFx0fVxuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHJlcXVlc3QpO1xuIFx0XHR9O1xuIFx0XHR2YXIgT2JqZWN0RmFjdG9yeSA9IGZ1bmN0aW9uIE9iamVjdEZhY3RvcnkobmFtZSkge1xuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XG4gXHRcdFx0XHR9LFxuIFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuIFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fTtcbiBcdFx0Zm9yICh2YXIgbmFtZSBpbiBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcImVcIiAmJlxuIFx0XHRcdFx0bmFtZSAhPT0gXCJ0XCJcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgT2JqZWN0RmFjdG9yeShuYW1lKSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGZuLmUgPSBmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYgKGhvdFN0YXR1cyA9PT0gXCJyZWFkeVwiKSBob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xuIFx0XHRcdGhvdENodW5rc0xvYWRpbmcrKztcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKGNodW5rSWQpLnRoZW4oZmluaXNoQ2h1bmtMb2FkaW5nLCBmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xuIFx0XHRcdFx0dGhyb3cgZXJyO1xuIFx0XHRcdH0pO1xuXG4gXHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xuIFx0XHRcdFx0aG90Q2h1bmtzTG9hZGluZy0tO1xuIFx0XHRcdFx0aWYgKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIpIHtcbiBcdFx0XHRcdFx0aWYgKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH07XG4gXHRcdGZuLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRcdGlmIChtb2RlICYgMSkgdmFsdWUgPSBmbih2YWx1ZSk7XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18udCh2YWx1ZSwgbW9kZSAmIH4xKTtcbiBcdFx0fTtcbiBcdFx0cmV0dXJuIGZuO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgaG90ID0ge1xuIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcbiBcdFx0XHRfYWNjZXB0ZWREZXBlbmRlbmNpZXM6IHt9LFxuIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXG4gXHRcdFx0X3NlbGZEZWNsaW5lZDogZmFsc2UsXG4gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXG4gXHRcdFx0X21haW46IGhvdEN1cnJlbnRDaGlsZE1vZHVsZSAhPT0gbW9kdWxlSWQsXG5cbiBcdFx0XHQvLyBNb2R1bGUgQVBJXG4gXHRcdFx0YWN0aXZlOiB0cnVlLFxuIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xuIFx0XHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpIGhvdC5fc2VsZkFjY2VwdGVkID0gZGVwO1xuIFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcbiBcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXG4gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcbiBcdFx0XHRcdGVsc2UgaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcbiBcdFx0XHR9LFxuIFx0XHRcdGRlY2xpbmU6IGZ1bmN0aW9uKGRlcCkge1xuIFx0XHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xuIFx0XHRcdFx0ZWxzZSBob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGlzcG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0XHR9LFxuIFx0XHRcdHJlbW92ZURpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aWYgKCFsKSByZXR1cm4gaG90U3RhdHVzO1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4gXHRcdFx0fSxcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0fSxcblxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuIFx0XHR9O1xuIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG4gXHRcdHJldHVybiBob3Q7XG4gXHR9XG5cbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbiBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG4gXHR9XG5cbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdEF2YWlsYWJsZUZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90RGVmZXJyZWQ7XG5cbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcblxuIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xuIFx0XHR2YXIgaXNOdW1iZXIgPSAraWQgKyBcIlwiID09PSBpZDtcbiBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5KSB7XG4gXHRcdGlmIChob3RTdGF0dXMgIT09IFwiaWRsZVwiKSB7XG4gXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XG4gXHRcdH1cbiBcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xuIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcbiBcdFx0cmV0dXJuIGhvdERvd25sb2FkTWFuaWZlc3QoaG90UmVxdWVzdFRpbWVvdXQpLnRoZW4oZnVuY3Rpb24odXBkYXRlKSB7XG4gXHRcdFx0aWYgKCF1cGRhdGUpIHtcbiBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiBcdFx0XHR9XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcblxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuIFx0XHRcdFx0XHRyZWplY3Q6IHJlamVjdFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XG4gXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvbmUtYmxvY2tzXG4gXHRcdFx0e1xuIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmXG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nID09PSAwICYmXG4gXHRcdFx0XHRob3RXYWl0aW5nRmlsZXMgPT09IDBcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIHByb21pc2U7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdGlmICghaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxuIFx0XHRcdHJldHVybjtcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcbiBcdFx0Zm9yICh2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmICgtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XG4gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcbiBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xuIFx0XHRob3REZWZlcnJlZCA9IG51bGw7XG4gXHRcdGlmICghZGVmZXJyZWQpIHJldHVybjtcbiBcdFx0aWYgKGhvdEFwcGx5T25VcGRhdGUpIHtcbiBcdFx0XHQvLyBXcmFwIGRlZmVycmVkIG9iamVjdCBpbiBQcm9taXNlIHRvIG1hcmsgaXQgYXMgYSB3ZWxsLWhhbmRsZWQgUHJvbWlzZSB0b1xuIFx0XHRcdC8vIGF2b2lkIHRyaWdnZXJpbmcgdW5jYXVnaHQgZXhjZXB0aW9uIHdhcm5pbmcgaW4gQ2hyb21lLlxuIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcbiBcdFx0XHRQcm9taXNlLnJlc29sdmUoKVxuIFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdHJldHVybiBob3RBcHBseShob3RBcHBseU9uVXBkYXRlKTtcbiBcdFx0XHRcdH0pXG4gXHRcdFx0XHQudGhlbihcbiBcdFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG4gXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0KTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKVxuIFx0XHRcdHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcbiBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiBcdFx0dmFyIGNiO1xuIFx0XHR2YXIgaTtcbiBcdFx0dmFyIGo7XG4gXHRcdHZhciBtb2R1bGU7XG4gXHRcdHZhciBtb2R1bGVJZDtcblxuIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKHVwZGF0ZU1vZHVsZUlkKSB7XG4gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XG4gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG5cbiBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMubWFwKGZ1bmN0aW9uKGlkKSB7XG4gXHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRjaGFpbjogW2lkXSxcbiBcdFx0XHRcdFx0aWQ6IGlkXG4gXHRcdFx0XHR9O1xuIFx0XHRcdH0pO1xuIFx0XHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gXHRcdFx0XHR2YXIgcXVldWVJdGVtID0gcXVldWUucG9wKCk7XG4gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZUl0ZW0uaWQ7XG4gXHRcdFx0XHR2YXIgY2hhaW4gPSBxdWV1ZUl0ZW0uY2hhaW47XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmICghbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZCkgY29udGludWU7XG4gXHRcdFx0XHRpZiAobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XG4gXHRcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWRlY2xpbmVkXCIsXG4gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxuIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxuIFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKG1vZHVsZS5ob3QuX21haW4pIHtcbiBcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcInVuYWNjZXB0ZWRcIixcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xuIFx0XHRcdFx0XHR2YXIgcGFyZW50ID0gaW5zdGFsbGVkTW9kdWxlc1twYXJlbnRJZF07XG4gXHRcdFx0XHRcdGlmICghcGFyZW50KSBjb250aW51ZTtcbiBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuIFx0XHRcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcImRlY2xpbmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0cGFyZW50SWQ6IHBhcmVudElkXG4gXHRcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpICE9PSAtMSkgY29udGludWU7XG4gXHRcdFx0XHRcdGlmIChwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRcdFx0XHRpZiAoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xuIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XG4gXHRcdFx0XHRcdFx0Y29udGludWU7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xuIFx0XHRcdFx0XHRxdWV1ZS5wdXNoKHtcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuIFx0XHRcdFx0XHRcdGlkOiBwYXJlbnRJZFxuIFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG5cbiBcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0dHlwZTogXCJhY2NlcHRlZFwiLFxuIFx0XHRcdFx0bW9kdWxlSWQ6IHVwZGF0ZU1vZHVsZUlkLFxuIFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzOiBvdXRkYXRlZE1vZHVsZXMsXG4gXHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llczogb3V0ZGF0ZWREZXBlbmRlbmNpZXNcbiBcdFx0XHR9O1xuIFx0XHR9XG5cbiBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xuIFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xuIFx0XHRcdFx0aWYgKGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIGEucHVzaChpdGVtKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxuIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXG4gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xuIFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XG5cbiBcdFx0dmFyIHdhcm5VbmV4cGVjdGVkUmVxdWlyZSA9IGZ1bmN0aW9uIHdhcm5VbmV4cGVjdGVkUmVxdWlyZSgpIHtcbiBcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlc3VsdC5tb2R1bGVJZCArIFwiKSB0byBkaXNwb3NlZCBtb2R1bGVcIlxuIFx0XHRcdCk7XG4gXHRcdH07XG5cbiBcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xuIFx0XHRcdFx0bW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcbiBcdFx0XHRcdC8qKiBAdHlwZSB7VE9ET30gKi9cbiBcdFx0XHRcdHZhciByZXN1bHQ7XG4gXHRcdFx0XHRpZiAoaG90VXBkYXRlW2lkXSkge1xuIFx0XHRcdFx0XHRyZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdHJlc3VsdCA9IHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcImRpc3Bvc2VkXCIsXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IGlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHQvKiogQHR5cGUge0Vycm9yfGZhbHNlfSAqL1xuIFx0XHRcdFx0dmFyIGFib3J0RXJyb3IgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBkb0FwcGx5ID0gZmFsc2U7XG4gXHRcdFx0XHR2YXIgZG9EaXNwb3NlID0gZmFsc2U7XG4gXHRcdFx0XHR2YXIgY2hhaW5JbmZvID0gXCJcIjtcbiBcdFx0XHRcdGlmIChyZXN1bHQuY2hhaW4pIHtcbiBcdFx0XHRcdFx0Y2hhaW5JbmZvID0gXCJcXG5VcGRhdGUgcHJvcGFnYXRpb246IFwiICsgcmVzdWx0LmNoYWluLmpvaW4oXCIgLT4gXCIpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c3dpdGNoIChyZXN1bHQudHlwZSkge1xuIFx0XHRcdFx0XHRjYXNlIFwic2VsZi1kZWNsaW5lZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5tb2R1bGVJZCArXG4gXHRcdFx0XHRcdFx0XHRcdFx0Y2hhaW5JbmZvXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiZGVjbGluZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRlY2xpbmVkKSBvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRcIiBpbiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0LnBhcmVudElkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJ1bmFjY2VwdGVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25VbmFjY2VwdGVkKSBvcHRpb25zLm9uVW5hY2NlcHRlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiICsgY2hhaW5JbmZvXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiYWNjZXB0ZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkFjY2VwdGVkKSBvcHRpb25zLm9uQWNjZXB0ZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRkb0FwcGx5ID0gdHJ1ZTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EaXNwb3NlZCkgb3B0aW9ucy5vbkRpc3Bvc2VkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0ZG9EaXNwb3NlID0gdHJ1ZTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0ZGVmYXVsdDpcbiBcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbmV4Y2VwdGlvbiB0eXBlIFwiICsgcmVzdWx0LnR5cGUpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGFib3J0RXJyb3IpIHtcbiBcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiYWJvcnRcIik7XG4gXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChhYm9ydEVycm9yKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChkb0FwcGx5KSB7XG4gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHQub3V0ZGF0ZWRNb2R1bGVzKTtcbiBcdFx0XHRcdFx0Zm9yIChtb2R1bGVJZCBpbiByZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRcdFx0XHRpZiAoXG4gXHRcdFx0XHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcyxcbiBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWRcbiBcdFx0XHRcdFx0XHRcdClcbiBcdFx0XHRcdFx0XHQpIHtcbiBcdFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxuIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcbiBcdFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KFxuIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sXG4gXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF1cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoZG9EaXNwb3NlKSB7XG4gXHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgW3Jlc3VsdC5tb2R1bGVJZF0pO1xuIFx0XHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IHdhcm5VbmV4cGVjdGVkUmVxdWlyZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBTdG9yZSBzZWxmIGFjY2VwdGVkIG91dGRhdGVkIG1vZHVsZXMgdG8gcmVxdWlyZSB0aGVtIGxhdGVyIGJ5IHRoZSBtb2R1bGUgc3lzdGVtXG4gXHRcdHZhciBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0Zm9yIChpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdG1vZHVsZUlkID0gb3V0ZGF0ZWRNb2R1bGVzW2ldO1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmXG4gXHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZCAmJlxuIFx0XHRcdFx0Ly8gcmVtb3ZlZCBzZWxmLWFjY2VwdGVkIG1vZHVsZXMgc2hvdWxkIG5vdCBiZSByZXF1aXJlZFxuIFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gIT09IHdhcm5VbmV4cGVjdGVkUmVxdWlyZVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0b3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLnB1c2goe1xuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4gXHRcdFx0XHR9KTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcbiBcdFx0aG90U2V0U3RhdHVzKFwiZGlzcG9zZVwiKTtcbiBcdFx0T2JqZWN0LmtleXMoaG90QXZhaWxhYmxlRmlsZXNNYXApLmZvckVhY2goZnVuY3Rpb24oY2h1bmtJZCkge1xuIFx0XHRcdGlmIChob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSA9PT0gZmFsc2UpIHtcbiBcdFx0XHRcdGhvdERpc3Bvc2VDaHVuayhjaHVua0lkKTtcbiBcdFx0XHR9XG4gXHRcdH0pO1xuXG4gXHRcdHZhciBpZHg7XG4gXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xuIFx0XHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuIFx0XHRcdG1vZHVsZUlkID0gcXVldWUucG9wKCk7XG4gXHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0aWYgKCFtb2R1bGUpIGNvbnRpbnVlO1xuXG4gXHRcdFx0dmFyIGRhdGEgPSB7fTtcblxuIFx0XHRcdC8vIENhbGwgZGlzcG9zZSBoYW5kbGVyc1xuIFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XG4gXHRcdFx0Zm9yIChqID0gMDsgaiA8IGRpc3Bvc2VIYW5kbGVycy5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0Y2IgPSBkaXNwb3NlSGFuZGxlcnNbal07XG4gXHRcdFx0XHRjYihkYXRhKTtcbiBcdFx0XHR9XG4gXHRcdFx0aG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdID0gZGF0YTtcblxuIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXG4gXHRcdFx0bW9kdWxlLmhvdC5hY3RpdmUgPSBmYWxzZTtcblxuIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxuIFx0XHRcdGRlbGV0ZSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcblxuIFx0XHRcdC8vIHdoZW4gZGlzcG9zaW5nIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCBkaXNwb3NlIGhhbmRsZXJcbiBcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuXG4gXHRcdFx0Ly8gcmVtb3ZlIFwicGFyZW50c1wiIHJlZmVyZW5jZXMgZnJvbSBhbGwgY2hpbGRyZW5cbiBcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgY2hpbGQgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZS5jaGlsZHJlbltqXV07XG4gXHRcdFx0XHRpZiAoIWNoaWxkKSBjb250aW51ZTtcbiBcdFx0XHRcdGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XG4gXHRcdFx0XHRpZiAoaWR4ID49IDApIHtcbiBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxuIFx0XHR2YXIgZGVwZW5kZW5jeTtcbiBcdFx0dmFyIG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzO1xuIFx0XHRmb3IgKG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZClcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0aWYgKG1vZHVsZSkge1xuIFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xuIFx0XHRcdFx0XHRcdGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xuIFx0XHRcdFx0XHRcdGlmIChpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gTm93IGluIFwiYXBwbHlcIiBwaGFzZVxuIFx0XHRob3RTZXRTdGF0dXMoXCJhcHBseVwiKTtcblxuIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XG5cbiBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXG4gXHRcdGZvciAobW9kdWxlSWQgaW4gYXBwbGllZFVwZGF0ZSkge1xuIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXG4gXHRcdHZhciBlcnJvciA9IG51bGw7XG4gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAobW9kdWxlKSB7XG4gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XG4gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcbiBcdFx0XHRcdFx0XHRjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xuIFx0XHRcdFx0XHRcdGlmIChjYikge1xuIFx0XHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrcy5pbmRleE9mKGNiKSAhPT0gLTEpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goY2IpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdFx0Y2IgPSBjYWxsYmFja3NbaV07XG4gXHRcdFx0XHRcdFx0dHJ5IHtcbiBcdFx0XHRcdFx0XHRcdGNiKG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzKTtcbiBcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcbiBcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhY2NlcHQtZXJyb3JlZFwiLFxuIFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdFx0XHRkZXBlbmRlbmN5SWQ6IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldLFxuIFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbiBcdFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xuIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbaV07XG4gXHRcdFx0bW9kdWxlSWQgPSBpdGVtLm1vZHVsZTtcbiBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XG4gXHRcdFx0dHJ5IHtcbiBcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpO1xuIFx0XHRcdH0gY2F0Y2ggKGVycikge1xuIFx0XHRcdFx0aWYgKHR5cGVvZiBpdGVtLmVycm9ySGFuZGxlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gXHRcdFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcbiBcdFx0XHRcdFx0fSBjYXRjaCAoZXJyMikge1xuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuIFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yLWhhbmRsZXItZXJyb3JlZFwiLFxuIFx0XHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxuIFx0XHRcdFx0XHRcdFx0XHRvcmlnaW5hbEVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnIyO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuIFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXG4gXHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXG4gXHRcdGlmIChlcnJvcikge1xuIFx0XHRcdGhvdFNldFN0YXR1cyhcImZhaWxcIik7XG4gXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiBcdFx0fVxuXG4gXHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4gXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gXHRcdFx0cmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9KTtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuIFx0XHRcdHBhcmVudHM6IChob3RDdXJyZW50UGFyZW50c1RlbXAgPSBob3RDdXJyZW50UGFyZW50cywgaG90Q3VycmVudFBhcmVudHMgPSBbXSwgaG90Q3VycmVudFBhcmVudHNUZW1wKSxcbiBcdFx0XHRjaGlsZHJlbjogW11cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkpO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIF9fd2VicGFja19oYXNoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18uaCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaG90Q3VycmVudEhhc2g7IH07XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKShfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5xdWlja3NlbGVjdCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyLCBrLCBsZWZ0LCByaWdodCwgY29tcGFyZSkge1xuICAgIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIGxlZnQgfHwgMCwgcmlnaHQgfHwgKGFyci5sZW5ndGggLSAxKSwgY29tcGFyZSB8fCBkZWZhdWx0Q29tcGFyZSk7XG59XG5cbmZ1bmN0aW9uIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIGxlZnQsIHJpZ2h0LCBjb21wYXJlKSB7XG5cbiAgICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7XG4gICAgICAgIGlmIChyaWdodCAtIGxlZnQgPiA2MDApIHtcbiAgICAgICAgICAgIHZhciBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIHZhciBtID0gayAtIGxlZnQgKyAxO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmxvZyhuKTtcbiAgICAgICAgICAgIHZhciBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgICAgICAgIHZhciBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTtcbiAgICAgICAgICAgIHZhciBuZXdMZWZ0ID0gTWF0aC5tYXgobGVmdCwgTWF0aC5mbG9vcihrIC0gbSAqIHMgLyBuICsgc2QpKTtcbiAgICAgICAgICAgIHZhciBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgICAgICAgcXVpY2tzZWxlY3RTdGVwKGFyciwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHQgPSBhcnJba107XG4gICAgICAgIHZhciBpID0gbGVmdDtcbiAgICAgICAgdmFyIGogPSByaWdodDtcblxuICAgICAgICBzd2FwKGFyciwgbGVmdCwgayk7XG4gICAgICAgIGlmIChjb21wYXJlKGFycltyaWdodF0sIHQpID4gMCkgc3dhcChhcnIsIGxlZnQsIHJpZ2h0KTtcblxuICAgICAgICB3aGlsZSAoaSA8IGopIHtcbiAgICAgICAgICAgIHN3YXAoYXJyLCBpLCBqKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIHdoaWxlIChjb21wYXJlKGFycltpXSwgdCkgPCAwKSBpKys7XG4gICAgICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJbal0sIHQpID4gMCkgai0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbXBhcmUoYXJyW2xlZnRdLCB0KSA9PT0gMCkgc3dhcChhcnIsIGxlZnQsIGopO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIHN3YXAoYXJyLCBqLCByaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7XG4gICAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzd2FwKGFyciwgaSwgaikge1xuICAgIHZhciB0bXAgPSBhcnJbaV07XG4gICAgYXJyW2ldID0gYXJyW2pdO1xuICAgIGFycltqXSA9IHRtcDtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdENvbXBhcmUoYSwgYikge1xuICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcbn1cblxucmV0dXJuIHF1aWNrc2VsZWN0O1xuXG59KSkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJidXNoO1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHJidXNoO1xuXG52YXIgcXVpY2tzZWxlY3QgPSByZXF1aXJlKCdxdWlja3NlbGVjdCcpO1xuXG5mdW5jdGlvbiByYnVzaChtYXhFbnRyaWVzLCBmb3JtYXQpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgcmJ1c2gpKSByZXR1cm4gbmV3IHJidXNoKG1heEVudHJpZXMsIGZvcm1hdCk7XG5cbiAgICAvLyBtYXggZW50cmllcyBpbiBhIG5vZGUgaXMgOSBieSBkZWZhdWx0OyBtaW4gbm9kZSBmaWxsIGlzIDQwJSBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoaXMuX21heEVudHJpZXMgPSBNYXRoLm1heCg0LCBtYXhFbnRyaWVzIHx8IDkpO1xuICAgIHRoaXMuX21pbkVudHJpZXMgPSBNYXRoLm1heCgyLCBNYXRoLmNlaWwodGhpcy5fbWF4RW50cmllcyAqIDAuNCkpO1xuXG4gICAgaWYgKGZvcm1hdCkge1xuICAgICAgICB0aGlzLl9pbml0Rm9ybWF0KGZvcm1hdCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhcigpO1xufVxuXG5yYnVzaC5wcm90b3R5cGUgPSB7XG5cbiAgICBhbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbCh0aGlzLmRhdGEsIFtdKTtcbiAgICB9LFxuXG4gICAgc2VhcmNoOiBmdW5jdGlvbiAoYmJveCkge1xuXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5kYXRhLFxuICAgICAgICAgICAgcmVzdWx0ID0gW10sXG4gICAgICAgICAgICB0b0JCb3ggPSB0aGlzLnRvQkJveDtcblxuICAgICAgICBpZiAoIWludGVyc2VjdHMoYmJveCwgbm9kZSkpIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXSxcbiAgICAgICAgICAgIGksIGxlbiwgY2hpbGQsIGNoaWxkQkJveDtcblxuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGNoaWxkQkJveCA9IG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZDtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzKGJib3gsIGNoaWxkQkJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubGVhZikgcmVzdWx0LnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyhiYm94LCBjaGlsZEJCb3gpKSB0aGlzLl9hbGwoY2hpbGQsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugbm9kZXNUb1NlYXJjaC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZXNUb1NlYXJjaC5wb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIGNvbGxpZGVzOiBmdW5jdGlvbiAoYmJveCkge1xuXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5kYXRhLFxuICAgICAgICAgICAgdG9CQm94ID0gdGhpcy50b0JCb3g7XG5cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKGJib3gsIG5vZGUpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXSxcbiAgICAgICAgICAgIGksIGxlbiwgY2hpbGQsIGNoaWxkQkJveDtcblxuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGNoaWxkQkJveCA9IG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZDtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzKGJib3gsIGNoaWxkQkJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubGVhZiB8fCBjb250YWlucyhiYm94LCBjaGlsZEJCb3gpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNUb1NlYXJjaC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZXNUb1NlYXJjaC5wb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgbG9hZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKCEoZGF0YSAmJiBkYXRhLmxlbmd0aCkpIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IHRoaXMuX21pbkVudHJpZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnQoZGF0YVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGJ1aWxkIHRoZSB0cmVlIHdpdGggdGhlIGdpdmVuIGRhdGEgZnJvbSBzY3JhdGNoIHVzaW5nIE9NVCBhbGdvcml0aG1cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLl9idWlsZChkYXRhLnNsaWNlKCksIDAsIGRhdGEubGVuZ3RoIC0gMSwgMCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBzYXZlIGFzIGlzIGlmIHRyZWUgaXMgZW1wdHlcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5vZGU7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuaGVpZ2h0ID09PSBub2RlLmhlaWdodCkge1xuICAgICAgICAgICAgLy8gc3BsaXQgcm9vdCBpZiB0cmVlcyBoYXZlIHRoZSBzYW1lIGhlaWdodFxuICAgICAgICAgICAgdGhpcy5fc3BsaXRSb290KHRoaXMuZGF0YSwgbm9kZSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaGVpZ2h0IDwgbm9kZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAvLyBzd2FwIHRyZWVzIGlmIGluc2VydGVkIG9uZSBpcyBiaWdnZXJcbiAgICAgICAgICAgICAgICB2YXIgdG1wTm9kZSA9IHRoaXMuZGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGUgPSB0bXBOb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnNlcnQgdGhlIHNtYWxsIHRyZWUgaW50byB0aGUgbGFyZ2UgdHJlZSBhdCBhcHByb3ByaWF0ZSBsZXZlbFxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0KG5vZGUsIHRoaXMuZGF0YS5oZWlnaHQgLSBub2RlLmhlaWdodCAtIDEsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGluc2VydDogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0pIHRoaXMuX2luc2VydChpdGVtLCB0aGlzLmRhdGEuaGVpZ2h0IC0gMSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBjcmVhdGVOb2RlKFtdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKGl0ZW0sIGVxdWFsc0ZuKSB7XG4gICAgICAgIGlmICghaXRlbSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgICBiYm94ID0gdGhpcy50b0JCb3goaXRlbSksXG4gICAgICAgICAgICBwYXRoID0gW10sXG4gICAgICAgICAgICBpbmRleGVzID0gW10sXG4gICAgICAgICAgICBpLCBwYXJlbnQsIGluZGV4LCBnb2luZ1VwO1xuXG4gICAgICAgIC8vIGRlcHRoLWZpcnN0IGl0ZXJhdGl2ZSB0cmVlIHRyYXZlcnNhbFxuICAgICAgICB3aGlsZSAobm9kZSB8fCBwYXRoLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHsgLy8gZ28gdXBcbiAgICAgICAgICAgICAgICBub2RlID0gcGF0aC5wb3AoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaSA9IGluZGV4ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgZ29pbmdVcCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub2RlLmxlYWYpIHsgLy8gY2hlY2sgY3VycmVudCBub2RlXG4gICAgICAgICAgICAgICAgaW5kZXggPSBmaW5kSXRlbShpdGVtLCBub2RlLmNoaWxkcmVuLCBlcXVhbHNGbik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZW0gZm91bmQsIHJlbW92ZSB0aGUgaXRlbSBhbmQgY29uZGVuc2UgdHJlZSB1cHdhcmRzXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25kZW5zZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWdvaW5nVXAgJiYgIW5vZGUubGVhZiAmJiBjb250YWlucyhub2RlLCBiYm94KSkgeyAvLyBnbyBkb3duXG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudCkgeyAvLyBnbyByaWdodFxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50LmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGdvaW5nVXAgPSBmYWxzZTtcblxuICAgICAgICAgICAgfSBlbHNlIG5vZGUgPSBudWxsOyAvLyBub3RoaW5nIGZvdW5kXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9CQm94OiBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbTsgfSxcblxuICAgIGNvbXBhcmVNaW5YOiBjb21wYXJlTm9kZU1pblgsXG4gICAgY29tcGFyZU1pblk6IGNvbXBhcmVOb2RlTWluWSxcblxuICAgIHRvSlNPTjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kYXRhOyB9LFxuXG4gICAgZnJvbUpTT046IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfYWxsOiBmdW5jdGlvbiAobm9kZSwgcmVzdWx0KSB7XG4gICAgICAgIHZhciBub2Rlc1RvU2VhcmNoID0gW107XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5sZWFmKSByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgZWxzZSBub2Rlc1RvU2VhcmNoLnB1c2guYXBwbHkobm9kZXNUb1NlYXJjaCwgbm9kZS5jaGlsZHJlbik7XG5cbiAgICAgICAgICAgIG5vZGUgPSBub2Rlc1RvU2VhcmNoLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIF9idWlsZDogZnVuY3Rpb24gKGl0ZW1zLCBsZWZ0LCByaWdodCwgaGVpZ2h0KSB7XG5cbiAgICAgICAgdmFyIE4gPSByaWdodCAtIGxlZnQgKyAxLFxuICAgICAgICAgICAgTSA9IHRoaXMuX21heEVudHJpZXMsXG4gICAgICAgICAgICBub2RlO1xuXG4gICAgICAgIGlmIChOIDw9IE0pIHtcbiAgICAgICAgICAgIC8vIHJlYWNoZWQgbGVhZiBsZXZlbDsgcmV0dXJuIGxlYWZcbiAgICAgICAgICAgIG5vZGUgPSBjcmVhdGVOb2RlKGl0ZW1zLnNsaWNlKGxlZnQsIHJpZ2h0ICsgMSkpO1xuICAgICAgICAgICAgY2FsY0JCb3gobm9kZSwgdGhpcy50b0JCb3gpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhlaWdodCkge1xuICAgICAgICAgICAgLy8gdGFyZ2V0IGhlaWdodCBvZiB0aGUgYnVsay1sb2FkZWQgdHJlZVxuICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKE1hdGgubG9nKE4pIC8gTWF0aC5sb2coTSkpO1xuXG4gICAgICAgICAgICAvLyB0YXJnZXQgbnVtYmVyIG9mIHJvb3QgZW50cmllcyB0byBtYXhpbWl6ZSBzdG9yYWdlIHV0aWxpemF0aW9uXG4gICAgICAgICAgICBNID0gTWF0aC5jZWlsKE4gLyBNYXRoLnBvdyhNLCBoZWlnaHQgLSAxKSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gY3JlYXRlTm9kZShbXSk7XG4gICAgICAgIG5vZGUubGVhZiA9IGZhbHNlO1xuICAgICAgICBub2RlLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvLyBzcGxpdCB0aGUgaXRlbXMgaW50byBNIG1vc3RseSBzcXVhcmUgdGlsZXNcblxuICAgICAgICB2YXIgTjIgPSBNYXRoLmNlaWwoTiAvIE0pLFxuICAgICAgICAgICAgTjEgPSBOMiAqIE1hdGguY2VpbChNYXRoLnNxcnQoTSkpLFxuICAgICAgICAgICAgaSwgaiwgcmlnaHQyLCByaWdodDM7XG5cbiAgICAgICAgbXVsdGlTZWxlY3QoaXRlbXMsIGxlZnQsIHJpZ2h0LCBOMSwgdGhpcy5jb21wYXJlTWluWCk7XG5cbiAgICAgICAgZm9yIChpID0gbGVmdDsgaSA8PSByaWdodDsgaSArPSBOMSkge1xuXG4gICAgICAgICAgICByaWdodDIgPSBNYXRoLm1pbihpICsgTjEgLSAxLCByaWdodCk7XG5cbiAgICAgICAgICAgIG11bHRpU2VsZWN0KGl0ZW1zLCBpLCByaWdodDIsIE4yLCB0aGlzLmNvbXBhcmVNaW5ZKTtcblxuICAgICAgICAgICAgZm9yIChqID0gaTsgaiA8PSByaWdodDI7IGogKz0gTjIpIHtcblxuICAgICAgICAgICAgICAgIHJpZ2h0MyA9IE1hdGgubWluKGogKyBOMiAtIDEsIHJpZ2h0Mik7XG5cbiAgICAgICAgICAgICAgICAvLyBwYWNrIGVhY2ggZW50cnkgcmVjdXJzaXZlbHlcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2godGhpcy5fYnVpbGQoaXRlbXMsIGosIHJpZ2h0MywgaGVpZ2h0IC0gMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsY0JCb3gobm9kZSwgdGhpcy50b0JCb3gpO1xuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICBfY2hvb3NlU3VidHJlZTogZnVuY3Rpb24gKGJib3gsIG5vZGUsIGxldmVsLCBwYXRoKSB7XG5cbiAgICAgICAgdmFyIGksIGxlbiwgY2hpbGQsIHRhcmdldE5vZGUsIGFyZWEsIGVubGFyZ2VtZW50LCBtaW5BcmVhLCBtaW5FbmxhcmdlbWVudDtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuXG4gICAgICAgICAgICBpZiAobm9kZS5sZWFmIHx8IHBhdGgubGVuZ3RoIC0gMSA9PT0gbGV2ZWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBtaW5BcmVhID0gbWluRW5sYXJnZW1lbnQgPSBJbmZpbml0eTtcblxuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBhcmVhID0gYmJveEFyZWEoY2hpbGQpO1xuICAgICAgICAgICAgICAgIGVubGFyZ2VtZW50ID0gZW5sYXJnZWRBcmVhKGJib3gsIGNoaWxkKSAtIGFyZWE7XG5cbiAgICAgICAgICAgICAgICAvLyBjaG9vc2UgZW50cnkgd2l0aCB0aGUgbGVhc3QgYXJlYSBlbmxhcmdlbWVudFxuICAgICAgICAgICAgICAgIGlmIChlbmxhcmdlbWVudCA8IG1pbkVubGFyZ2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkVubGFyZ2VtZW50ID0gZW5sYXJnZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIG1pbkFyZWEgPSBhcmVhIDwgbWluQXJlYSA/IGFyZWEgOiBtaW5BcmVhO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gY2hpbGQ7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVubGFyZ2VtZW50ID09PSBtaW5FbmxhcmdlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIG9uZSB3aXRoIHRoZSBzbWFsbGVzdCBhcmVhXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmVhIDwgbWluQXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUgPSB0YXJnZXROb2RlIHx8IG5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuXG4gICAgX2luc2VydDogZnVuY3Rpb24gKGl0ZW0sIGxldmVsLCBpc05vZGUpIHtcblxuICAgICAgICB2YXIgdG9CQm94ID0gdGhpcy50b0JCb3gsXG4gICAgICAgICAgICBiYm94ID0gaXNOb2RlID8gaXRlbSA6IHRvQkJveChpdGVtKSxcbiAgICAgICAgICAgIGluc2VydFBhdGggPSBbXTtcblxuICAgICAgICAvLyBmaW5kIHRoZSBiZXN0IG5vZGUgZm9yIGFjY29tbW9kYXRpbmcgdGhlIGl0ZW0sIHNhdmluZyBhbGwgbm9kZXMgYWxvbmcgdGhlIHBhdGggdG9vXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5fY2hvb3NlU3VidHJlZShiYm94LCB0aGlzLmRhdGEsIGxldmVsLCBpbnNlcnRQYXRoKTtcblxuICAgICAgICAvLyBwdXQgdGhlIGl0ZW0gaW50byB0aGUgbm9kZVxuICAgICAgICBub2RlLmNoaWxkcmVuLnB1c2goaXRlbSk7XG4gICAgICAgIGV4dGVuZChub2RlLCBiYm94KTtcblxuICAgICAgICAvLyBzcGxpdCBvbiBub2RlIG92ZXJmbG93OyBwcm9wYWdhdGUgdXB3YXJkcyBpZiBuZWNlc3NhcnlcbiAgICAgICAgd2hpbGUgKGxldmVsID49IDApIHtcbiAgICAgICAgICAgIGlmIChpbnNlcnRQYXRoW2xldmVsXS5jaGlsZHJlbi5sZW5ndGggPiB0aGlzLl9tYXhFbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3BsaXQoaW5zZXJ0UGF0aCwgbGV2ZWwpO1xuICAgICAgICAgICAgICAgIGxldmVsLS07XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGp1c3QgYmJveGVzIGFsb25nIHRoZSBpbnNlcnRpb24gcGF0aFxuICAgICAgICB0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMoYmJveCwgaW5zZXJ0UGF0aCwgbGV2ZWwpO1xuICAgIH0sXG5cbiAgICAvLyBzcGxpdCBvdmVyZmxvd2VkIG5vZGUgaW50byB0d29cbiAgICBfc3BsaXQ6IGZ1bmN0aW9uIChpbnNlcnRQYXRoLCBsZXZlbCkge1xuXG4gICAgICAgIHZhciBub2RlID0gaW5zZXJ0UGF0aFtsZXZlbF0sXG4gICAgICAgICAgICBNID0gbm9kZS5jaGlsZHJlbi5sZW5ndGgsXG4gICAgICAgICAgICBtID0gdGhpcy5fbWluRW50cmllcztcblxuICAgICAgICB0aGlzLl9jaG9vc2VTcGxpdEF4aXMobm9kZSwgbSwgTSk7XG5cbiAgICAgICAgdmFyIHNwbGl0SW5kZXggPSB0aGlzLl9jaG9vc2VTcGxpdEluZGV4KG5vZGUsIG0sIE0pO1xuXG4gICAgICAgIHZhciBuZXdOb2RlID0gY3JlYXRlTm9kZShub2RlLmNoaWxkcmVuLnNwbGljZShzcGxpdEluZGV4LCBub2RlLmNoaWxkcmVuLmxlbmd0aCAtIHNwbGl0SW5kZXgpKTtcbiAgICAgICAgbmV3Tm9kZS5oZWlnaHQgPSBub2RlLmhlaWdodDtcbiAgICAgICAgbmV3Tm9kZS5sZWFmID0gbm9kZS5sZWFmO1xuXG4gICAgICAgIGNhbGNCQm94KG5vZGUsIHRoaXMudG9CQm94KTtcbiAgICAgICAgY2FsY0JCb3gobmV3Tm9kZSwgdGhpcy50b0JCb3gpO1xuXG4gICAgICAgIGlmIChsZXZlbCkgaW5zZXJ0UGF0aFtsZXZlbCAtIDFdLmNoaWxkcmVuLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgIGVsc2UgdGhpcy5fc3BsaXRSb290KG5vZGUsIG5ld05vZGUpO1xuICAgIH0sXG5cbiAgICBfc3BsaXRSb290OiBmdW5jdGlvbiAobm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICAvLyBzcGxpdCByb290IG5vZGVcbiAgICAgICAgdGhpcy5kYXRhID0gY3JlYXRlTm9kZShbbm9kZSwgbmV3Tm9kZV0pO1xuICAgICAgICB0aGlzLmRhdGEuaGVpZ2h0ID0gbm9kZS5oZWlnaHQgKyAxO1xuICAgICAgICB0aGlzLmRhdGEubGVhZiA9IGZhbHNlO1xuICAgICAgICBjYWxjQkJveCh0aGlzLmRhdGEsIHRoaXMudG9CQm94KTtcbiAgICB9LFxuXG4gICAgX2Nob29zZVNwbGl0SW5kZXg6IGZ1bmN0aW9uIChub2RlLCBtLCBNKSB7XG5cbiAgICAgICAgdmFyIGksIGJib3gxLCBiYm94Miwgb3ZlcmxhcCwgYXJlYSwgbWluT3ZlcmxhcCwgbWluQXJlYSwgaW5kZXg7XG5cbiAgICAgICAgbWluT3ZlcmxhcCA9IG1pbkFyZWEgPSBJbmZpbml0eTtcblxuICAgICAgICBmb3IgKGkgPSBtOyBpIDw9IE0gLSBtOyBpKyspIHtcbiAgICAgICAgICAgIGJib3gxID0gZGlzdEJCb3gobm9kZSwgMCwgaSwgdGhpcy50b0JCb3gpO1xuICAgICAgICAgICAgYmJveDIgPSBkaXN0QkJveChub2RlLCBpLCBNLCB0aGlzLnRvQkJveCk7XG5cbiAgICAgICAgICAgIG92ZXJsYXAgPSBpbnRlcnNlY3Rpb25BcmVhKGJib3gxLCBiYm94Mik7XG4gICAgICAgICAgICBhcmVhID0gYmJveEFyZWEoYmJveDEpICsgYmJveEFyZWEoYmJveDIpO1xuXG4gICAgICAgICAgICAvLyBjaG9vc2UgZGlzdHJpYnV0aW9uIHdpdGggbWluaW11bSBvdmVybGFwXG4gICAgICAgICAgICBpZiAob3ZlcmxhcCA8IG1pbk92ZXJsYXApIHtcbiAgICAgICAgICAgICAgICBtaW5PdmVybGFwID0gb3ZlcmxhcDtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG5cbiAgICAgICAgICAgICAgICBtaW5BcmVhID0gYXJlYSA8IG1pbkFyZWEgPyBhcmVhIDogbWluQXJlYTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVybGFwID09PSBtaW5PdmVybGFwKSB7XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGNob29zZSBkaXN0cmlidXRpb24gd2l0aCBtaW5pbXVtIGFyZWFcbiAgICAgICAgICAgICAgICBpZiAoYXJlYSA8IG1pbkFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfSxcblxuICAgIC8vIHNvcnRzIG5vZGUgY2hpbGRyZW4gYnkgdGhlIGJlc3QgYXhpcyBmb3Igc3BsaXRcbiAgICBfY2hvb3NlU3BsaXRBeGlzOiBmdW5jdGlvbiAobm9kZSwgbSwgTSkge1xuXG4gICAgICAgIHZhciBjb21wYXJlTWluWCA9IG5vZGUubGVhZiA/IHRoaXMuY29tcGFyZU1pblggOiBjb21wYXJlTm9kZU1pblgsXG4gICAgICAgICAgICBjb21wYXJlTWluWSA9IG5vZGUubGVhZiA/IHRoaXMuY29tcGFyZU1pblkgOiBjb21wYXJlTm9kZU1pblksXG4gICAgICAgICAgICB4TWFyZ2luID0gdGhpcy5fYWxsRGlzdE1hcmdpbihub2RlLCBtLCBNLCBjb21wYXJlTWluWCksXG4gICAgICAgICAgICB5TWFyZ2luID0gdGhpcy5fYWxsRGlzdE1hcmdpbihub2RlLCBtLCBNLCBjb21wYXJlTWluWSk7XG5cbiAgICAgICAgLy8gaWYgdG90YWwgZGlzdHJpYnV0aW9ucyBtYXJnaW4gdmFsdWUgaXMgbWluaW1hbCBmb3IgeCwgc29ydCBieSBtaW5YLFxuICAgICAgICAvLyBvdGhlcndpc2UgaXQncyBhbHJlYWR5IHNvcnRlZCBieSBtaW5ZXG4gICAgICAgIGlmICh4TWFyZ2luIDwgeU1hcmdpbikgbm9kZS5jaGlsZHJlbi5zb3J0KGNvbXBhcmVNaW5YKTtcbiAgICB9LFxuXG4gICAgLy8gdG90YWwgbWFyZ2luIG9mIGFsbCBwb3NzaWJsZSBzcGxpdCBkaXN0cmlidXRpb25zIHdoZXJlIGVhY2ggbm9kZSBpcyBhdCBsZWFzdCBtIGZ1bGxcbiAgICBfYWxsRGlzdE1hcmdpbjogZnVuY3Rpb24gKG5vZGUsIG0sIE0sIGNvbXBhcmUpIHtcblxuICAgICAgICBub2RlLmNoaWxkcmVuLnNvcnQoY29tcGFyZSk7XG5cbiAgICAgICAgdmFyIHRvQkJveCA9IHRoaXMudG9CQm94LFxuICAgICAgICAgICAgbGVmdEJCb3ggPSBkaXN0QkJveChub2RlLCAwLCBtLCB0b0JCb3gpLFxuICAgICAgICAgICAgcmlnaHRCQm94ID0gZGlzdEJCb3gobm9kZSwgTSAtIG0sIE0sIHRvQkJveCksXG4gICAgICAgICAgICBtYXJnaW4gPSBiYm94TWFyZ2luKGxlZnRCQm94KSArIGJib3hNYXJnaW4ocmlnaHRCQm94KSxcbiAgICAgICAgICAgIGksIGNoaWxkO1xuXG4gICAgICAgIGZvciAoaSA9IG07IGkgPCBNIC0gbTsgaSsrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBleHRlbmQobGVmdEJCb3gsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZCk7XG4gICAgICAgICAgICBtYXJnaW4gKz0gYmJveE1hcmdpbihsZWZ0QkJveCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSBNIC0gbSAtIDE7IGkgPj0gbTsgaS0tKSB7XG4gICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBleHRlbmQocmlnaHRCQm94LCBub2RlLmxlYWYgPyB0b0JCb3goY2hpbGQpIDogY2hpbGQpO1xuICAgICAgICAgICAgbWFyZ2luICs9IGJib3hNYXJnaW4ocmlnaHRCQm94KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXJnaW47XG4gICAgfSxcblxuICAgIF9hZGp1c3RQYXJlbnRCQm94ZXM6IGZ1bmN0aW9uIChiYm94LCBwYXRoLCBsZXZlbCkge1xuICAgICAgICAvLyBhZGp1c3QgYmJveGVzIGFsb25nIHRoZSBnaXZlbiB0cmVlIHBhdGhcbiAgICAgICAgZm9yICh2YXIgaSA9IGxldmVsOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgZXh0ZW5kKHBhdGhbaV0sIGJib3gpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9jb25kZW5zZTogZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgLy8gZ28gdGhyb3VnaCB0aGUgcGF0aCwgcmVtb3ZpbmcgZW1wdHkgbm9kZXMgYW5kIHVwZGF0aW5nIGJib3hlc1xuICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxLCBzaWJsaW5nczsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChwYXRoW2ldLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncyA9IHBhdGhbaSAtIDFdLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5zcGxpY2Uoc2libGluZ3MuaW5kZXhPZihwYXRoW2ldKSwgMSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgICAgICB9IGVsc2UgY2FsY0JCb3gocGF0aFtpXSwgdGhpcy50b0JCb3gpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9pbml0Rm9ybWF0OiBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIC8vIGRhdGEgZm9ybWF0IChtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIGFjY2Vzc29ycylcblxuICAgICAgICAvLyB1c2VzIGV2YWwtdHlwZSBmdW5jdGlvbiBjb21waWxhdGlvbiBpbnN0ZWFkIG9mIGp1c3QgYWNjZXB0aW5nIGEgdG9CQm94IGZ1bmN0aW9uXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlIGFsZ29yaXRobXMgYXJlIHZlcnkgc2Vuc2l0aXZlIHRvIHNvcnRpbmcgZnVuY3Rpb25zIHBlcmZvcm1hbmNlLFxuICAgICAgICAvLyBzbyB0aGV5IHNob3VsZCBiZSBkZWFkIHNpbXBsZSBhbmQgd2l0aG91dCBpbm5lciBjYWxsc1xuXG4gICAgICAgIHZhciBjb21wYXJlQXJyID0gWydyZXR1cm4gYScsICcgLSBiJywgJzsnXTtcblxuICAgICAgICB0aGlzLmNvbXBhcmVNaW5YID0gbmV3IEZ1bmN0aW9uKCdhJywgJ2InLCBjb21wYXJlQXJyLmpvaW4oZm9ybWF0WzBdKSk7XG4gICAgICAgIHRoaXMuY29tcGFyZU1pblkgPSBuZXcgRnVuY3Rpb24oJ2EnLCAnYicsIGNvbXBhcmVBcnIuam9pbihmb3JtYXRbMV0pKTtcblxuICAgICAgICB0aGlzLnRvQkJveCA9IG5ldyBGdW5jdGlvbignYScsXG4gICAgICAgICAgICAncmV0dXJuIHttaW5YOiBhJyArIGZvcm1hdFswXSArXG4gICAgICAgICAgICAnLCBtaW5ZOiBhJyArIGZvcm1hdFsxXSArXG4gICAgICAgICAgICAnLCBtYXhYOiBhJyArIGZvcm1hdFsyXSArXG4gICAgICAgICAgICAnLCBtYXhZOiBhJyArIGZvcm1hdFszXSArICd9OycpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGZpbmRJdGVtKGl0ZW0sIGl0ZW1zLCBlcXVhbHNGbikge1xuICAgIGlmICghZXF1YWxzRm4pIHJldHVybiBpdGVtcy5pbmRleE9mKGl0ZW0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZXF1YWxzRm4oaXRlbSwgaXRlbXNbaV0pKSByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG4vLyBjYWxjdWxhdGUgbm9kZSdzIGJib3ggZnJvbSBiYm94ZXMgb2YgaXRzIGNoaWxkcmVuXG5mdW5jdGlvbiBjYWxjQkJveChub2RlLCB0b0JCb3gpIHtcbiAgICBkaXN0QkJveChub2RlLCAwLCBub2RlLmNoaWxkcmVuLmxlbmd0aCwgdG9CQm94LCBub2RlKTtcbn1cblxuLy8gbWluIGJvdW5kaW5nIHJlY3RhbmdsZSBvZiBub2RlIGNoaWxkcmVuIGZyb20gayB0byBwLTFcbmZ1bmN0aW9uIGRpc3RCQm94KG5vZGUsIGssIHAsIHRvQkJveCwgZGVzdE5vZGUpIHtcbiAgICBpZiAoIWRlc3ROb2RlKSBkZXN0Tm9kZSA9IGNyZWF0ZU5vZGUobnVsbCk7XG4gICAgZGVzdE5vZGUubWluWCA9IEluZmluaXR5O1xuICAgIGRlc3ROb2RlLm1pblkgPSBJbmZpbml0eTtcbiAgICBkZXN0Tm9kZS5tYXhYID0gLUluZmluaXR5O1xuICAgIGRlc3ROb2RlLm1heFkgPSAtSW5maW5pdHk7XG5cbiAgICBmb3IgKHZhciBpID0gaywgY2hpbGQ7IGkgPCBwOyBpKyspIHtcbiAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICBleHRlbmQoZGVzdE5vZGUsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3ROb2RlO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoYSwgYikge1xuICAgIGEubWluWCA9IE1hdGgubWluKGEubWluWCwgYi5taW5YKTtcbiAgICBhLm1pblkgPSBNYXRoLm1pbihhLm1pblksIGIubWluWSk7XG4gICAgYS5tYXhYID0gTWF0aC5tYXgoYS5tYXhYLCBiLm1heFgpO1xuICAgIGEubWF4WSA9IE1hdGgubWF4KGEubWF4WSwgYi5tYXhZKTtcbiAgICByZXR1cm4gYTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZU5vZGVNaW5YKGEsIGIpIHsgcmV0dXJuIGEubWluWCAtIGIubWluWDsgfVxuZnVuY3Rpb24gY29tcGFyZU5vZGVNaW5ZKGEsIGIpIHsgcmV0dXJuIGEubWluWSAtIGIubWluWTsgfVxuXG5mdW5jdGlvbiBiYm94QXJlYShhKSAgIHsgcmV0dXJuIChhLm1heFggLSBhLm1pblgpICogKGEubWF4WSAtIGEubWluWSk7IH1cbmZ1bmN0aW9uIGJib3hNYXJnaW4oYSkgeyByZXR1cm4gKGEubWF4WCAtIGEubWluWCkgKyAoYS5tYXhZIC0gYS5taW5ZKTsgfVxuXG5mdW5jdGlvbiBlbmxhcmdlZEFyZWEoYSwgYikge1xuICAgIHJldHVybiAoTWF0aC5tYXgoYi5tYXhYLCBhLm1heFgpIC0gTWF0aC5taW4oYi5taW5YLCBhLm1pblgpKSAqXG4gICAgICAgICAgIChNYXRoLm1heChiLm1heFksIGEubWF4WSkgLSBNYXRoLm1pbihiLm1pblksIGEubWluWSkpO1xufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3Rpb25BcmVhKGEsIGIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWF4KGEubWluWCwgYi5taW5YKSxcbiAgICAgICAgbWluWSA9IE1hdGgubWF4KGEubWluWSwgYi5taW5ZKSxcbiAgICAgICAgbWF4WCA9IE1hdGgubWluKGEubWF4WCwgYi5tYXhYKSxcbiAgICAgICAgbWF4WSA9IE1hdGgubWluKGEubWF4WSwgYi5tYXhZKTtcblxuICAgIHJldHVybiBNYXRoLm1heCgwLCBtYXhYIC0gbWluWCkgKlxuICAgICAgICAgICBNYXRoLm1heCgwLCBtYXhZIC0gbWluWSk7XG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zKGEsIGIpIHtcbiAgICByZXR1cm4gYS5taW5YIDw9IGIubWluWCAmJlxuICAgICAgICAgICBhLm1pblkgPD0gYi5taW5ZICYmXG4gICAgICAgICAgIGIubWF4WCA8PSBhLm1heFggJiZcbiAgICAgICAgICAgYi5tYXhZIDw9IGEubWF4WTtcbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0cyhhLCBiKSB7XG4gICAgcmV0dXJuIGIubWluWCA8PSBhLm1heFggJiZcbiAgICAgICAgICAgYi5taW5ZIDw9IGEubWF4WSAmJlxuICAgICAgICAgICBiLm1heFggPj0gYS5taW5YICYmXG4gICAgICAgICAgIGIubWF4WSA+PSBhLm1pblk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoY2hpbGRyZW4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgICAgIGhlaWdodDogMSxcbiAgICAgICAgbGVhZjogdHJ1ZSxcbiAgICAgICAgbWluWDogSW5maW5pdHksXG4gICAgICAgIG1pblk6IEluZmluaXR5LFxuICAgICAgICBtYXhYOiAtSW5maW5pdHksXG4gICAgICAgIG1heFk6IC1JbmZpbml0eVxuICAgIH07XG59XG5cbi8vIHNvcnQgYW4gYXJyYXkgc28gdGhhdCBpdGVtcyBjb21lIGluIGdyb3VwcyBvZiBuIHVuc29ydGVkIGl0ZW1zLCB3aXRoIGdyb3VwcyBzb3J0ZWQgYmV0d2VlbiBlYWNoIG90aGVyO1xuLy8gY29tYmluZXMgc2VsZWN0aW9uIGFsZ29yaXRobSB3aXRoIGJpbmFyeSBkaXZpZGUgJiBjb25xdWVyIGFwcHJvYWNoXG5cbmZ1bmN0aW9uIG11bHRpU2VsZWN0KGFyciwgbGVmdCwgcmlnaHQsIG4sIGNvbXBhcmUpIHtcbiAgICB2YXIgc3RhY2sgPSBbbGVmdCwgcmlnaHRdLFxuICAgICAgICBtaWQ7XG5cbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgIHJpZ2h0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIGxlZnQgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0IDw9IG4pIGNvbnRpbnVlO1xuXG4gICAgICAgIG1pZCA9IGxlZnQgKyBNYXRoLmNlaWwoKHJpZ2h0IC0gbGVmdCkgLyBuIC8gMikgKiBuO1xuICAgICAgICBxdWlja3NlbGVjdChhcnIsIG1pZCwgbGVmdCwgcmlnaHQsIGNvbXBhcmUpO1xuXG4gICAgICAgIHN0YWNrLnB1c2gobGVmdCwgbWlkLCBtaWQsIHJpZ2h0KTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvdXRpbFxuICovXG5cbi8qKlxuICogQHJldHVybiB7P30gQW55IHJldHVybi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/fSAqLyAoKGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG4gIH0pKCkpO1xufVxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiAgICAgZnVuY3Rpb24gUGFyZW50Q2xhc3MoYSwgYikgeyB9XG4gKiAgICAgUGFyZW50Q2xhc3MucHJvdG90eXBlLmZvbyA9IGZ1bmN0aW9uKGEpIHsgfVxuICpcbiAqICAgICBmdW5jdGlvbiBDaGlsZENsYXNzKGEsIGIsIGMpIHtcbiAqICAgICAgIC8vIENhbGwgcGFyZW50IGNvbnN0cnVjdG9yXG4gKiAgICAgICBQYXJlbnRDbGFzcy5jYWxsKHRoaXMsIGEsIGIpO1xuICogICAgIH1cbiAqICAgICBpbmhlcml0cyhDaGlsZENsYXNzLCBQYXJlbnRDbGFzcyk7XG4gKlxuICogICAgIHZhciBjaGlsZCA9IG5ldyBDaGlsZENsYXNzKCdhJywgJ2InLCAnc2VlJyk7XG4gKiAgICAgY2hpbGQuZm9vKCk7IC8vIFRoaXMgd29ya3MuXG4gKlxuICogQHBhcmFtIHshRnVuY3Rpb259IGNoaWxkQ3RvciBDaGlsZCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBwYXJlbnRDdG9yIFBhcmVudCBjb25zdHJ1Y3Rvci5cbiAqIEBmdW5jdGlvbiBtb2R1bGU6b2wuaW5oZXJpdHNcbiAqIEBkZXByZWNhdGVkXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0cyhjaGlsZEN0b3IsIHBhcmVudEN0b3IpIHtcbiAgY2hpbGRDdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50Q3Rvci5wcm90b3R5cGUpO1xuICBjaGlsZEN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGRDdG9yO1xufVxuXG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdWlkQ291bnRlcl8gPSAwO1xuXG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKiBAZnVuY3Rpb24gbW9kdWxlOm9sLmdldFVpZFxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VWlkKG9iaikge1xuICByZXR1cm4gb2JqLm9sX3VpZCB8fCAob2JqLm9sX3VpZCA9IFN0cmluZygrK3VpZENvdW50ZXJfKSk7XG59XG5cbi8qKlxuICogT3BlbkxheWVycyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBWRVJTSU9OID0gJzUuMy4zJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQXNzZXJ0aW9uRXJyb3JcbiAqL1xuaW1wb3J0IHtWRVJTSU9OfSBmcm9tICcuL3V0aWwuanMnO1xuXG4vKipcbiAqIEVycm9yIG9iamVjdCB0aHJvd24gd2hlbiBhbiBhc3NlcnRpb24gZmFpbGVkLiBUaGlzIGlzIGFuIEVDTUEtMjYyIEVycm9yLFxuICogZXh0ZW5kZWQgd2l0aCBhIGBjb2RlYCBwcm9wZXJ0eS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvci5cbiAqL1xudmFyIEFzc2VydGlvbkVycm9yID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXJyb3IpIHtcbiAgZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IoY29kZSkge1xuICAgIHZhciBwYXRoID0gVkVSU0lPTiA9PT0gJ2xhdGVzdCcgPyBWRVJTSU9OIDogJ3YnICsgVkVSU0lPTi5zcGxpdCgnLScpWzBdO1xuICAgIHZhciBtZXNzYWdlID0gJ0Fzc2VydGlvbiBmYWlsZWQuIFNlZSBodHRwczovL29wZW5sYXllcnMub3JnL2VuLycgKyBwYXRoICtcbiAgICAnL2RvYy9lcnJvcnMvIycgKyBjb2RlICsgJyBmb3IgZGV0YWlscy4nO1xuXG4gICAgRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuICAgIC8qKlxuICAgICAqIEVycm9yIGNvZGUuIFRoZSBtZWFuaW5nIG9mIHRoZSBjb2RlIGNhbiBiZSBmb3VuZCBvblxuICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgKiB0aGUgdmVyc2lvbiBmb3VuZCBpbiB0aGUgT3BlbkxheWVycyBzY3JpcHQncyBoZWFkZXIgY29tbWVudCBpZiBhIHZlcnNpb25cbiAgICAgKiBvdGhlciB0aGFuIHRoZSBsYXRlc3QgaXMgdXNlZCkuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5jb2RlID0gY29kZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblxuICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH1cblxuICBpZiAoIEVycm9yICkgQXNzZXJ0aW9uRXJyb3IuX19wcm90b19fID0gRXJyb3I7XG4gIEFzc2VydGlvbkVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEVycm9yICYmIEVycm9yLnByb3RvdHlwZSApO1xuICBBc3NlcnRpb25FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBc3NlcnRpb25FcnJvcjtcblxuICByZXR1cm4gQXNzZXJ0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFzc2VydGlvbkVycm9yO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3NlcnRpb25FcnJvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNhZGRcbiAgICogQGFwaVxuICAgKi9cbiAgQUREOiAnYWRkJyxcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I3JlbW92ZVxuICAgKiBAYXBpXG4gICAqL1xuICBSRU1PVkU6ICdyZW1vdmUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcHJvcGVydHkgaXMgY2hhbmdlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICogQGFwaVxuICAgKi9cbiAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvb2JqXG4gKi9cblxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKCkuICBBc3NpZ25zIGVudW1lcmFibGUgYW5kIG93biBwcm9wZXJ0aWVzIGZyb21cbiAqIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduLlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IHZhcl9zb3VyY2VzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpLlxuICogQHJldHVybiB7IU9iamVjdH0gVGhlIG1vZGlmaWVkIHRhcmdldCBvYmplY3QuXG4gKi9cbmV4cG9ydCB2YXIgYXNzaWduID0gKHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbih0YXJnZXQsIHZhcl9zb3VyY2VzKSB7XG4gIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50cztcblxuICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gIGZvciAodmFyIGkgPSAxLCBpaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50cyQxW2ldO1xuICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHByb3BlcnRpZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xlYXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihvYmplY3QpIHtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gIH1cbn1cblxuXG4vKipcbiAqIEdldCBhbiBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdDxLLFY+fSBvYmplY3QgVGhlIG9iamVjdCBmcm9tIHdoaWNoIHRvIGdldCB0aGUgdmFsdWVzLlxuICogQHJldHVybiB7IUFycmF5PFY+fSBUaGUgcHJvcGVydHkgdmFsdWVzLlxuICogQHRlbXBsYXRlIEssVlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVzKG9iamVjdCkge1xuICB2YXIgdmFsdWVzID0gW107XG4gIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgIHZhbHVlcy5wdXNoKG9iamVjdFtwcm9wZXJ0eV0pO1xuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGhhcyBhbnkgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iamVjdCkge1xuICB2YXIgcHJvcGVydHk7XG4gIGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAhcHJvcGVydHk7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iai5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzXG4gKi9cbmltcG9ydCB7Y2xlYXJ9IGZyb20gJy4vb2JqLmpzJztcblxuXG4vKipcbiAqIEtleSB0byB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSN1bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtPYmplY3R9IFtiaW5kVG9dXG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IFtib3VuZExpc3RlbmVyXVxuICogQHByb3BlcnR5IHtib29sZWFufSBjYWxsT25jZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWxldGVJbmRleF1cbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGxpc3RlbmVyT2JqIExpc3RlbmVyIG9iamVjdC5cbiAqIEByZXR1cm4ge0xpc3RlbmVyRnVuY3Rpb259IEJvdW5kIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZExpc3RlbmVyKGxpc3RlbmVyT2JqKSB7XG4gIHZhciBib3VuZExpc3RlbmVyID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJPYmoubGlzdGVuZXI7XG4gICAgdmFyIGJpbmRUbyA9IGxpc3RlbmVyT2JqLmJpbmRUbyB8fCBsaXN0ZW5lck9iai50YXJnZXQ7XG4gICAgaWYgKGxpc3RlbmVyT2JqLmNhbGxPbmNlKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KGxpc3RlbmVyT2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3RlbmVyLmNhbGwoYmluZFRvLCBldnQpO1xuICB9O1xuICBsaXN0ZW5lck9iai5ib3VuZExpc3RlbmVyID0gYm91bmRMaXN0ZW5lcjtcbiAgcmV0dXJuIGJvdW5kTGlzdGVuZXI7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgbWF0Y2hpbmcge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+RXZlbnRzS2V5fSBpbiB0aGUgZ2l2ZW4gbGlzdGVuZXJcbiAqIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5PCFFdmVudHNLZXk+fSBsaXN0ZW5lcnMgQXJyYXkgb2YgbGlzdGVuZXJzLlxuICogQHBhcmFtIHshRnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3RoaXMgVGhlIGB0aGlzYCB2YWx1ZSBpbnNpZGUgdGhlIGxpc3RlbmVyLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NldERlbGV0ZUluZGV4IFNldCB0aGUgZGVsZXRlSW5kZXggb24gdGhlIG1hdGNoaW5nXG4gKiAgICAgbGlzdGVuZXIsIGZvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c351bmxpc3RlbkJ5S2V5fS5cbiAqIEByZXR1cm4ge0V2ZW50c0tleXx1bmRlZmluZWR9IFRoZSBtYXRjaGluZyBsaXN0ZW5lciBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIG9wdF9zZXREZWxldGVJbmRleCkge1xuICB2YXIgbGlzdGVuZXJPYmo7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgbGlzdGVuZXJPYmogPSBsaXN0ZW5lcnNbaV07XG4gICAgaWYgKGxpc3RlbmVyT2JqLmxpc3RlbmVyID09PSBsaXN0ZW5lciAmJlxuICAgICAgICBsaXN0ZW5lck9iai5iaW5kVG8gPT09IG9wdF90aGlzKSB7XG4gICAgICBpZiAob3B0X3NldERlbGV0ZUluZGV4KSB7XG4gICAgICAgIGxpc3RlbmVyT2JqLmRlbGV0ZUluZGV4ID0gaTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsaXN0ZW5lck9iajtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAcmV0dXJuIHtBcnJheTxFdmVudHNLZXk+fHVuZGVmaW5lZH0gTGlzdGVuZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKHRhcmdldCwgdHlwZSkge1xuICB2YXIgbGlzdGVuZXJNYXAgPSBnZXRMaXN0ZW5lck1hcCh0YXJnZXQpO1xuICByZXR1cm4gbGlzdGVuZXJNYXAgPyBsaXN0ZW5lck1hcFt0eXBlXSA6IHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgbG9va3VwIG9mIGxpc3RlbmVycy5cbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2NyZWF0ZSBJZiBhIG1hcCBzaG91bGQgYmUgY3JlYXRlZCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIEFycmF5PEV2ZW50c0tleT4+fSBNYXAgb2ZcbiAqICAgICBsaXN0ZW5lcnMgYnkgZXZlbnQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGlzdGVuZXJNYXAodGFyZ2V0LCBvcHRfY3JlYXRlKSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IHRhcmdldC5vbF9sbTtcbiAgaWYgKCFsaXN0ZW5lck1hcCAmJiBvcHRfY3JlYXRlKSB7XG4gICAgbGlzdGVuZXJNYXAgPSB0YXJnZXQub2xfbG0gPSB7fTtcbiAgfVxuICByZXR1cm4gbGlzdGVuZXJNYXA7XG59XG5cblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVyIG1hcCBmcm9tIGEgdGFyZ2V0LlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUYXJnZXQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyTWFwKHRhcmdldCkge1xuICBkZWxldGUgdGFyZ2V0Lm9sX2xtO1xufVxuXG5cbi8qKlxuICogQ2xlYW4gdXAgYWxsIGxpc3RlbmVyIG9iamVjdHMgb2YgdGhlIGdpdmVuIHR5cGUuICBBbGwgcHJvcGVydGllcyBvbiB0aGVcbiAqIGxpc3RlbmVyIG9iamVjdHMgd2lsbCBiZSByZW1vdmVkLCBhbmQgaWYgbm8gbGlzdGVuZXJzIHJlbWFpbiBpbiB0aGUgbGlzdGVuZXJcbiAqIG1hcCwgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIHRhcmdldC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyh0YXJnZXQsIHR5cGUpIHtcbiAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0YXJnZXQsIHR5cGUpO1xuICBpZiAobGlzdGVuZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLmRlZmF1bHR9ICovICh0YXJnZXQpLlxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpXS5ib3VuZExpc3RlbmVyKTtcbiAgICAgIGNsZWFyKGxpc3RlbmVyc1tpXSk7XG4gICAgfVxuICAgIGxpc3RlbmVycy5sZW5ndGggPSAwO1xuICAgIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCk7XG4gICAgaWYgKGxpc3RlbmVyTWFwKSB7XG4gICAgICBkZWxldGUgbGlzdGVuZXJNYXBbdHlwZV07XG4gICAgICBpZiAoT2JqZWN0LmtleXMobGlzdGVuZXJNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVMaXN0ZW5lck1hcCh0YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnNcbiAqIGEga2V5IGZvciB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c351bmxpc3RlbkJ5S2V5fS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3RoaXMgT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9vbmNlIElmIHRydWUsIGFkZCB0aGUgbGlzdGVuZXIgYXMgb25lLW9mZiBsaXN0ZW5lci5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCBvcHRfb25jZSkge1xuICB2YXIgbGlzdGVuZXJNYXAgPSBnZXRMaXN0ZW5lck1hcCh0YXJnZXQsIHRydWUpO1xuICB2YXIgbGlzdGVuZXJzID0gbGlzdGVuZXJNYXBbdHlwZV07XG4gIGlmICghbGlzdGVuZXJzKSB7XG4gICAgbGlzdGVuZXJzID0gbGlzdGVuZXJNYXBbdHlwZV0gPSBbXTtcbiAgfVxuICB2YXIgbGlzdGVuZXJPYmogPSBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIGZhbHNlKTtcbiAgaWYgKGxpc3RlbmVyT2JqKSB7XG4gICAgaWYgKCFvcHRfb25jZSkge1xuICAgICAgLy8gVHVybiBvbmUtb2ZmIGxpc3RlbmVyIGludG8gYSBwZXJtYW5lbnQgb25lLlxuICAgICAgbGlzdGVuZXJPYmouY2FsbE9uY2UgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlzdGVuZXJPYmogPSAvKiogQHR5cGUge0V2ZW50c0tleX0gKi8gKHtcbiAgICAgIGJpbmRUbzogb3B0X3RoaXMsXG4gICAgICBjYWxsT25jZTogISFvcHRfb25jZSxcbiAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgdHlwZTogdHlwZVxuICAgIH0pO1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLmRlZmF1bHR9ICovICh0YXJnZXQpLlxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBiaW5kTGlzdGVuZXIobGlzdGVuZXJPYmopKTtcbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lck9iaik7XG4gIH1cblxuICByZXR1cm4gbGlzdGVuZXJPYmo7XG59XG5cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfdGhpcyBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBLZXkgZm9yIHVubGlzdGVuQnlLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzKSB7XG4gIHJldHVybiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xufVxuXG5cbi8qKlxuICogVW5yZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVG8gcmV0dXJuIGEgbGlzdGVuZXIsIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWVcbiAqIGFyZ3VtZW50cyB0aGF0IHdlcmUgdXNlZCBmb3IgYSBwcmV2aW91cyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35saXN0ZW59IGNhbGwuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcykge1xuICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRhcmdldCwgdHlwZSk7XG4gIGlmIChsaXN0ZW5lcnMpIHtcbiAgICB2YXIgbGlzdGVuZXJPYmogPSBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xuICAgIGlmIChsaXN0ZW5lck9iaikge1xuICAgICAgdW5saXN0ZW5CeUtleShsaXN0ZW5lck9iaik7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5kZWZhdWx0fSAqLyAoa2V5LnRhcmdldCkuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkuYm91bmRMaXN0ZW5lcik7XG4gICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyhrZXkudGFyZ2V0LCBrZXkudHlwZSk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdmFyIGkgPSAnZGVsZXRlSW5kZXgnIGluIGtleSA/IGtleS5kZWxldGVJbmRleCA6IGxpc3RlbmVycy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVycyhrZXkudGFyZ2V0LCBrZXkudHlwZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNsZWFyKGtleSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFVucmVnaXN0ZXJzIGFsbCBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGFyZ2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5BbGwodGFyZ2V0KSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCk7XG4gIGlmIChsaXN0ZW5lck1hcCkge1xuICAgIGZvciAodmFyIHR5cGUgaW4gbGlzdGVuZXJNYXApIHtcbiAgICAgIHJlbW92ZUxpc3RlbmVycyh0YXJnZXQsIHR5cGUpO1xuICAgIH1cbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0Rpc3Bvc2FibGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIE9iamVjdHMgdGhhdCBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIHRoZW1zZWx2ZXMuXG4gKi9cbnZhciBEaXNwb3NhYmxlID0gZnVuY3Rpb24gRGlzcG9zYWJsZSgpIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmRpc3Bvc2VkXyA9IGZhbHNlO1xufTtcblxuLyoqXG4gKiBDbGVhbiB1cC5cbiAqL1xuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UgKCkge1xuICBpZiAoIXRoaXMuZGlzcG9zZWRfKSB7XG4gICAgdGhpcy5kaXNwb3NlZF8gPSB0cnVlO1xuICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRXh0ZW5zaW9uIHBvaW50IGZvciBkaXNwb3NhYmxlIG9iamVjdHMuXG4gKiBAcHJvdGVjdGVkXG4gKi9cbkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7fTtcblxuZXhwb3J0IGRlZmF1bHQgRGlzcG9zYWJsZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlzcG9zYWJsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZnVuY3Rpb25zXG4gKi9cblxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUUlVFKCkge1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyBmYWxzZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZBTFNFKCkge1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQSByZXVzYWJsZSBmdW5jdGlvbiwgdXNlZCBlLmcuIGFzIGEgZGVmYXVsdCBmb3IgY2FsbGJhY2tzLlxuICpcbiAqIEByZXR1cm4ge3ZvaWR9IE5vdGhpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBWT0lEKCkge31cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFN0cmlwcGVkIGRvd24gaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLUV2ZW50cy9ldmVudHMuaHRtbCNFdmVudHMtaW50ZXJmYWNlLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gb25seSBwcm92aWRlcyBgdHlwZWAgYW5kIGB0YXJnZXRgIHByb3BlcnRpZXMsIGFuZFxuICogYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgbWV0aG9kcy4gSXQgaXMgbWVhbnQgYXMgYmFzZSBjbGFzc1xuICogZm9yIGhpZ2hlciBsZXZlbCBldmVudHMgZGVmaW5lZCBpbiB0aGUgbGlicmFyeSwgYW5kIHdvcmtzIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL1RhcmdldH5UYXJnZXR9LlxuICovXG52YXIgRXZlbnQgPSBmdW5jdGlvbiBFdmVudCh0eXBlKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCB0eXBlLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAYXBpXG4gICAqL1xuICB0aGlzLnR5cGUgPSB0eXBlO1xuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgdGFyZ2V0LlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAYXBpXG4gICAqL1xuICB0aGlzLnRhcmdldCA9IG51bGw7XG59O1xuXG4vKipcbiAqIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gKiBAYXBpXG4gKi9cbkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHtcbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICogQGFwaVxuICovXG5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHtcbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9UYXJnZXRcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQge3VubGlzdGVuQWxsfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge0V2ZW50VGFyZ2V0fFRhcmdldH0gRXZlbnRUYXJnZXRMaWtlXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xudmFyIFRhcmdldCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERpc3Bvc2FibGUpIHtcbiAgZnVuY3Rpb24gVGFyZ2V0KCkge1xuXG4gICAgRGlzcG9zYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmRpc3BhdGNoaW5nXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9uPj59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcnNfID0ge307XG5cbiAgfVxuXG4gIGlmICggRGlzcG9zYWJsZSApIFRhcmdldC5fX3Byb3RvX18gPSBEaXNwb3NhYmxlO1xuICBUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRGlzcG9zYWJsZSAmJiBEaXNwb3NhYmxlLnByb3RvdHlwZSApO1xuICBUYXJnZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGFyZ2V0O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIgKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW3R5cGVdID0gW107XG4gICAgfVxuICAgIGlmIChsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCBjYWxscyBhbGwgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAqIG9mIHRoaXMgdHlwZS4gVGhlIGV2ZW50IHBhcmFtZXRlciBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuXG4gICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3t0eXBlOiBzdHJpbmcsXG4gICAqICAgICB0YXJnZXQ6IChFdmVudFRhcmdldExpa2V8dW5kZWZpbmVkKSxcbiAgICogICAgIHByb3BhZ2F0aW9uU3RvcHBlZDogKGJvb2xlYW58dW5kZWZpbmVkKX18XG4gICAqICAgICBpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBgZmFsc2VgIGlmIGFueW9uZSBjYWxsZWQgcHJldmVudERlZmF1bHQgb24gdGhlXG4gICAqICAgICBldmVudCBvYmplY3Qgb3IgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgcmV0dXJuZWQgZmFsc2UuXG4gICAqIEBhcGlcbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQgKGV2ZW50KSB7XG4gICAgdmFyIGV2dCA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycgPyBuZXcgRXZlbnQoZXZlbnQpIDogZXZlbnQ7XG4gICAgdmFyIHR5cGUgPSBldnQudHlwZTtcbiAgICBldnQudGFyZ2V0ID0gdGhpcztcbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgIHZhciBwcm9wYWdhdGU7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLmRpc3BhdGNoaW5nXykpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGluZ19bdHlwZV0gPSAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV0gPSAwO1xuICAgICAgfVxuICAgICAgKyt0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uY2FsbCh0aGlzLCBldnQpID09PSBmYWxzZSB8fCBldnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgcHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC0tdGhpcy5kaXNwYXRjaGluZ19bdHlwZV07XG4gICAgICBpZiAodGhpcy5kaXNwYXRjaGluZ19bdHlwZV0gPT09IDApIHtcbiAgICAgICAgdmFyIHBlbmRpbmdSZW1vdmFscyA9IHRoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgd2hpbGUgKHBlbmRpbmdSZW1vdmFscy0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wYWdhdGU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIHVubGlzdGVuQWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICogb3JkZXIgdGhhdCB0aGV5IHdpbGwgYmUgY2FsbGVkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbj59IExpc3RlbmVycy5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuZ2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TGlzdGVuZXJzICh0eXBlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZSBUeXBlLiBJZiBub3QgcHJvdmlkZWQsXG4gICAqICAgICBgdHJ1ZWAgd2lsbCBiZSByZXR1cm5lZCBpZiB0aGlzIGV2ZW50IHRhcmdldCBoYXMgYW55IGxpc3RlbmVycy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSGFzIGxpc3RlbmVycy5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuaGFzTGlzdGVuZXIgPSBmdW5jdGlvbiBoYXNMaXN0ZW5lciAob3B0X3R5cGUpIHtcbiAgICByZXR1cm4gb3B0X3R5cGUgP1xuICAgICAgb3B0X3R5cGUgaW4gdGhpcy5saXN0ZW5lcnNfIDpcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzXykubGVuZ3RoID4gMDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICBUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKHR5cGUgaW4gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfKSB7XG4gICAgICAgIC8vIG1ha2UgbGlzdGVuZXIgYSBuby1vcCwgYW5kIHJlbW92ZSBsYXRlciBpbiAjZGlzcGF0Y2hFdmVudCgpXG4gICAgICAgIGxpc3RlbmVyc1tpbmRleF0gPSBWT0lEO1xuICAgICAgICArK3RoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRhcmdldDtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFyZ2V0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEdlbmVyaWMgY2hhbmdlIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiB0aGUgcmV2aXNpb24gY291bnRlciBpcyBpbmNyZWFzZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkV2ZW50I2NoYW5nZVxuICAgKiBAYXBpXG4gICAqL1xuICBDSEFOR0U6ICdjaGFuZ2UnLFxuXG4gIENMRUFSOiAnY2xlYXInLFxuICBDT05URVhUTUVOVTogJ2NvbnRleHRtZW51JyxcbiAgQ0xJQ0s6ICdjbGljaycsXG4gIERCTENMSUNLOiAnZGJsY2xpY2snLFxuICBEUkFHRU5URVI6ICdkcmFnZW50ZXInLFxuICBEUkFHT1ZFUjogJ2RyYWdvdmVyJyxcbiAgRFJPUDogJ2Ryb3AnLFxuICBFUlJPUjogJ2Vycm9yJyxcbiAgS0VZRE9XTjogJ2tleWRvd24nLFxuICBLRVlQUkVTUzogJ2tleXByZXNzJyxcbiAgTE9BRDogJ2xvYWQnLFxuICBNT1VTRURPV046ICdtb3VzZWRvd24nLFxuICBNT1VTRU1PVkU6ICdtb3VzZW1vdmUnLFxuICBNT1VTRU9VVDogJ21vdXNlb3V0JyxcbiAgTU9VU0VVUDogJ21vdXNldXAnLFxuICBNT1VTRVdIRUVMOiAnbW91c2V3aGVlbCcsXG4gIE1TUE9JTlRFUkRPV046ICdNU1BvaW50ZXJEb3duJyxcbiAgUkVTSVpFOiAncmVzaXplJyxcbiAgVE9VQ0hTVEFSVDogJ3RvdWNoc3RhcnQnLFxuICBUT1VDSE1PVkU6ICd0b3VjaG1vdmUnLFxuICBUT1VDSEVORDogJ3RvdWNoZW5kJyxcbiAgV0hFRUw6ICd3aGVlbCdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvT2JzZXJ2YWJsZVxuICovXG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleSwgdW5saXN0ZW4sIGxpc3Rlbk9uY2V9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEFuIGV2ZW50IHRhcmdldCBwcm92aWRpbmcgY29udmVuaWVudCBtZXRob2RzIGZvciBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIGFuZCB1bnJlZ2lzdHJhdGlvbi4gQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGFsd2F5cyBhdmFpbGFibGUgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGUjY2hhbmdlZH0uXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLkV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRUYXJnZXQpIHtcbiAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcblxuICAgIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZXZpc2lvbl8gPSAwO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50VGFyZ2V0ICkgT2JzZXJ2YWJsZS5fX3Byb3RvX18gPSBFdmVudFRhcmdldDtcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudFRhcmdldCAmJiBFdmVudFRhcmdldC5wcm90b3R5cGUgKTtcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBPYnNlcnZhYmxlO1xuXG4gIC8qKlxuICAgKiBJbmNyZWFzZXMgdGhlIHJldmlzaW9uIGNvdW50ZXIgYW5kIGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uIGNoYW5nZWQgKCkge1xuICAgICsrdGhpcy5yZXZpc2lvbl87XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGlzIG9iamVjdC4gIEVhY2ggdGltZSB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLFxuICAgKiBpdHMgdmVyc2lvbiBudW1iZXIgd2lsbCBiZSBpbmNyZW1lbnRlZC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBSZXZpc2lvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0UmV2aXNpb24gPSBmdW5jdGlvbiBnZXRSZXZpc2lvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmV2aXNpb25fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMaXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuIElmXG4gICAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAgICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAgICogQGFwaVxuICAgKi9cbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5c1tpXSA9IGxpc3Rlbih0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxpc3Rlbih0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMaXN0ZW4gb25jZSBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAgICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICAgKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5c1tpXSA9IGxpc3Rlbk9uY2UodGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsaXN0ZW5PbmNlKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS51biA9IGZ1bmN0aW9uIHVuICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0eXBlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdW5saXN0ZW4odGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bmxpc3Rlbih0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBPYnNlcnZhYmxlO1xufShFdmVudFRhcmdldCkpO1xuXG5cbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBPYnNlcnZhYmxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4vb2JqLmpzJztcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBPYmplY3RFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIE9iamVjdEV2ZW50KHR5cGUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICBFdmVudC5jYWxsKHRoaXMsIHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHdob3NlIHZhbHVlIGlzIGNoYW5naW5nLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMua2V5ID0ga2V5O1xuXG4gICAgLyoqXG4gICAgICogVGhlIG9sZCB2YWx1ZS4gVG8gZ2V0IHRoZSBuZXcgdmFsdWUgdXNlIGBlLnRhcmdldC5nZXQoZS5rZXkpYCB3aGVyZVxuICAgICAqIGBlYCBpcyB0aGUgZXZlbnQgb2JqZWN0LlxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm9sZFZhbHVlID0gb2xkVmFsdWU7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBPYmplY3RFdmVudC5fX3Byb3RvX18gPSBFdmVudDtcbiAgT2JqZWN0RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIE9iamVjdEV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9iamVjdEV2ZW50O1xuXG4gIHJldHVybiBPYmplY3RFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE1vc3Qgbm9uLXRyaXZpYWwgY2xhc3NlcyBpbmhlcml0IGZyb20gdGhpcy5cbiAqXG4gKiBUaGlzIGV4dGVuZHMge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfSB3aXRoIG9ic2VydmFibGVcbiAqIHByb3BlcnRpZXMsIHdoZXJlIGVhY2ggcHJvcGVydHkgaXMgb2JzZXJ2YWJsZSBhcyB3ZWxsIGFzIHRoZSBvYmplY3QgYXMgYVxuICogd2hvbGUuXG4gKlxuICogQ2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIGhhdmUgcHJlLWRlZmluZWQgcHJvcGVydGllcywgdG8gd2hpY2ggeW91IGNhblxuICogYWRkIHlvdXIgb3ducy4gVGhlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMgYXJlIGxpc3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24gYXNcbiAqICdPYnNlcnZhYmxlIFByb3BlcnRpZXMnLCBhbmQgaGF2ZSB0aGVpciBvd24gYWNjZXNzb3JzOyBmb3IgZXhhbXBsZSxcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaGFzIGEgYHRhcmdldGAgcHJvcGVydHksIGFjY2Vzc2VkIHdpdGhcbiAqIGBnZXRUYXJnZXQoKWAgYW5kIGNoYW5nZWQgd2l0aCBgc2V0VGFyZ2V0KClgLiBOb3QgYWxsIHByb3BlcnRpZXMgYXJlIGhvd2V2ZXJcbiAqIHNldHRhYmxlLiBUaGVyZSBhcmUgYWxzbyBnZW5lcmFsLXB1cnBvc2UgYWNjZXNzb3JzIGBnZXQoKWAgYW5kIGBzZXQoKWAuIEZvclxuICogZXhhbXBsZSwgYGdldCgndGFyZ2V0JylgIGlzIGVxdWl2YWxlbnQgdG8gYGdldFRhcmdldCgpYC5cbiAqXG4gKiBUaGUgYHNldGAgYWNjZXNzb3JzIHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQsIGFuZCB5b3UgY2FuIG1vbml0b3IgdGhpcyBieVxuICogcmVnaXN0ZXJpbmcgYSBsaXN0ZW5lci4gRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvVmlld35WaWV3fSBoYXMgYVxuICogYGNlbnRlcmAgcHJvcGVydHksIHNvIGB2aWV3Lm9uKCdjaGFuZ2U6Y2VudGVyJywgZnVuY3Rpb24oZXZ0KSB7Li4ufSk7YCB3b3VsZFxuICogY2FsbCB0aGUgZnVuY3Rpb24gd2hlbmV2ZXIgdGhlIHZhbHVlIG9mIHRoZSBjZW50ZXIgcHJvcGVydHkgY2hhbmdlcy4gV2l0aGluXG4gKiB0aGUgZnVuY3Rpb24sIGBldnQudGFyZ2V0YCB3b3VsZCBiZSB0aGUgdmlldywgc28gYGV2dC50YXJnZXQuZ2V0Q2VudGVyKClgXG4gKiB3b3VsZCByZXR1cm4gdGhlIG5ldyBjZW50ZXIuXG4gKlxuICogWW91IGNhbiBhZGQgeW91ciBvd24gb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIHdpdGhcbiAqIGBvYmplY3Quc2V0KCdwcm9wJywgJ3ZhbHVlJylgLCBhbmQgcmV0cmlldmUgdGhhdCB3aXRoIGBvYmplY3QuZ2V0KCdwcm9wJylgLlxuICogWW91IGNhbiBsaXN0ZW4gZm9yIGNoYW5nZXMgb24gdGhhdCBwcm9wZXJ0eSB2YWx1ZSB3aXRoXG4gKiBgb2JqZWN0Lm9uKCdjaGFuZ2U6cHJvcCcsIGxpc3RlbmVyKWAuIFlvdSBjYW4gZ2V0IGEgbGlzdCBvZiBhbGxcbiAqIHByb3BlcnRpZXMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0I2dldFByb3BlcnRpZXN9LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHN0YW5kYXJkIEpTIHByb3BlcnRpZXMuXG4gKiBZb3UgY2FuLCBmb3IgZXhhbXBsZSwgZ2l2ZSB5b3VyIG1hcCBvYmplY3QgYSB0aXRsZSB3aXRoXG4gKiBgbWFwLnRpdGxlPSdOZXcgdGl0bGUnYCBhbmQgd2l0aCBgbWFwLnNldCgndGl0bGUnLCAnQW5vdGhlciB0aXRsZScpYC4gVGhlXG4gKiBmaXJzdCB3aWxsIGJlIGEgYGhhc093blByb3BlcnR5YDsgdGhlIHNlY29uZCB3aWxsIGFwcGVhciBpblxuICogYGdldFByb3BlcnRpZXMoKWAuIE9ubHkgdGhlIHNlY29uZCBpcyBvYnNlcnZhYmxlLlxuICpcbiAqIFByb3BlcnRpZXMgY2FuIGJlIGRlbGV0ZWQgYnkgdXNpbmcgdGhlIHVuc2V0IG1ldGhvZC4gRS5nLlxuICogb2JqZWN0LnVuc2V0KCdmb28nKS5cbiAqXG4gKiBAZmlyZXMgT2JqZWN0RXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VPYmplY3QgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChPYnNlcnZhYmxlKSB7XG4gIGZ1bmN0aW9uIEJhc2VPYmplY3Qob3B0X3ZhbHVlcykge1xuICAgIE9ic2VydmFibGUuY2FsbCh0aGlzKTtcblxuICAgIC8vIENhbGwge0BsaW5rIG1vZHVsZTpvbC91dGlsfmdldFVpZH0gdG8gZW5zdXJlIHRoYXQgdGhlIG9yZGVyIG9mIG9iamVjdHMnIGlkcyBpc1xuICAgIC8vIHRoZSBzYW1lIGFzIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgY3JlYXRlZC4gIFRoaXMgYWxzbyBoZWxwcyB0b1xuICAgIC8vIGVuc3VyZSB0aGF0IG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYWRkZWQgaW4gdGhlIHNhbWUgb3JkZXIsIHdoaWNoXG4gICAgLy8gaGVscHMgbWFueSBKYXZhU2NyaXB0IGVuZ2luZXMgZ2VuZXJhdGUgZmFzdGVyIGNvZGUuXG4gICAgZ2V0VWlkKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHRoaXMudmFsdWVzXyA9IHt9O1xuXG4gICAgaWYgKG9wdF92YWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdF92YWx1ZXMpO1xuICAgIH1cbiAgfVxuXG4gIGlmICggT2JzZXJ2YWJsZSApIEJhc2VPYmplY3QuX19wcm90b19fID0gT2JzZXJ2YWJsZTtcbiAgQmFzZU9iamVjdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBPYnNlcnZhYmxlICYmIE9ic2VydmFibGUucHJvdG90eXBlICk7XG4gIEJhc2VPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFzZU9iamVjdDtcblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcmV0dXJuIHsqfSBWYWx1ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChrZXkpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKHRoaXMudmFsdWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2Ygb2JqZWN0IHByb3BlcnR5IG5hbWVzLlxuICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBMaXN0IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gZ2V0S2V5cyAoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzXyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3Qgb2YgYWxsIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuXG4gICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsICo+fSBPYmplY3QuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLmdldFByb3BlcnRpZXMgPSBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzICgpIHtcbiAgICByZXR1cm4gYXNzaWduKHt9LCB0aGlzLnZhbHVlc18pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIE9sZCB2YWx1ZS5cbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIG5vdGlmeSAoa2V5LCBvbGRWYWx1ZSkge1xuICAgIHZhciBldmVudFR5cGU7XG4gICAgZXZlbnRUeXBlID0gZ2V0Q2hhbmdlRXZlbnRUeXBlKGtleSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICBldmVudFR5cGUgPSBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0U7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSwgb3B0X3NpbGVudCkge1xuICAgIGlmIChvcHRfc2lsZW50KSB7XG4gICAgICB0aGlzLnZhbHVlc19ba2V5XSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgIHRoaXMudmFsdWVzX1trZXldID0gdmFsdWU7XG4gICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0cyBhIGNvbGxlY3Rpb24gb2Yga2V5LXZhbHVlIHBhaXJzLiAgTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyBhbnkgZXhpc3RpbmdcbiAgICogcHJvcGVydGllcyBhbmQgYWRkcyBuZXcgb25lcyAoaXQgZG9lcyBub3QgcmVtb3ZlIGFueSBleGlzdGluZyBwcm9wZXJ0aWVzKS5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NpbGVudCBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gc2V0UHJvcGVydGllcyAodmFsdWVzLCBvcHRfc2lsZW50KSB7XG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZXNba2V5XSwgb3B0X3NpbGVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVbnNldHMgYSBwcm9wZXJ0eS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NpbGVudCBVbnNldCB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLnVuc2V0ID0gZnVuY3Rpb24gdW5zZXQgKGtleSwgb3B0X3NpbGVudCkge1xuICAgIGlmIChrZXkgaW4gdGhpcy52YWx1ZXNfKSB7XG4gICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgIGlmICghb3B0X3NpbGVudCkge1xuICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEJhc2VPYmplY3Q7XG59KE9ic2VydmFibGUpKTtcblxuXG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG52YXIgY2hhbmdlRXZlbnRUeXBlQ2FjaGUgPSB7fTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENoYW5nZSBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhbmdlRXZlbnRUeXBlKGtleSkge1xuICByZXR1cm4gY2hhbmdlRXZlbnRUeXBlQ2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KSA/XG4gICAgY2hhbmdlRXZlbnRUeXBlQ2FjaGVba2V5XSA6XG4gICAgKGNoYW5nZUV2ZW50VHlwZUNhY2hlW2tleV0gPSAnY2hhbmdlOicgKyBrZXkpO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VPYmplY3Q7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvblxuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gIExFTkdUSDogJ2xlbmd0aCdcbn07XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBDb2xsZWN0aW9uRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBDb2xsZWN0aW9uRXZlbnQodHlwZSwgb3B0X2VsZW1lbnQpIHtcbiAgICBFdmVudC5jYWxsKHRoaXMsIHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGVsZW1lbnQgdGhhdCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHR5cGUgeyp9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudCA9IG9wdF9lbGVtZW50O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgQ29sbGVjdGlvbkV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBDb2xsZWN0aW9uRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIENvbGxlY3Rpb25FdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb2xsZWN0aW9uRXZlbnQ7XG5cbiAgcmV0dXJuIENvbGxlY3Rpb25FdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VuaXF1ZT1mYWxzZV0gRGlzYWxsb3cgdGhlIHNhbWUgaXRlbSBmcm9tIGJlaW5nIGFkZGVkIHRvXG4gKiB0aGUgY29sbGVjdGlvbiB0d2ljZS5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFuIGV4cGFuZGVkIHZlcnNpb24gb2Ygc3RhbmRhcmQgSlMgQXJyYXksIGFkZGluZyBjb252ZW5pZW5jZSBtZXRob2RzIGZvclxuICogbWFuaXB1bGF0aW9uLiBBZGQgYW5kIHJlbW92ZSBjaGFuZ2VzIHRvIHRoZSBDb2xsZWN0aW9uIHRyaWdnZXIgYSBDb2xsZWN0aW9uXG4gKiBldmVudC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgY292ZXIgY2hhbmdlcyB0byB0aGUgb2JqZWN0cyBfd2l0aGluXyB0aGVcbiAqIENvbGxlY3Rpb247IHRoZXkgdHJpZ2dlciBldmVudHMgb24gdGhlIGFwcHJvcHJpYXRlIG9iamVjdCwgbm90IG9uIHRoZVxuICogQ29sbGVjdGlvbiBhcyBhIHdob2xlLlxuICpcbiAqIEBmaXJlcyBDb2xsZWN0aW9uRXZlbnRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQGFwaVxuICovXG52YXIgQ29sbGVjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gQ29sbGVjdGlvbihvcHRfYXJyYXksIG9wdF9vcHRpb25zKSB7XG5cbiAgICBCYXNlT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnVuaXF1ZV8gPSAhIW9wdGlvbnMudW5pcXVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PFQ+fVxuICAgICAqL1xuICAgIHRoaXMuYXJyYXlfID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG5cbiAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyh0aGlzLmFycmF5X1tpXSwgaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG5cbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIENvbGxlY3Rpb24uX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29sbGVjdGlvbjtcblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBlbGVtZW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICB3aGlsZSAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcbiAgICAgIHRoaXMucG9wKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgZWxlbWVudHMgdG8gdGhlIGNvbGxlY3Rpb24uICBUaGlzIHB1c2hlcyBlYWNoIGl0ZW0gaW4gdGhlIHByb3ZpZGVkIGFycmF5XG4gICAqIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIgQXJyYXkuXG4gICAqIEByZXR1cm4ge0NvbGxlY3Rpb248VD59IFRoaXMgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kIChhcnIpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdGhpcy5wdXNoKGFycltpXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBlbGVtZW50LCBjYWxsaW5nIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsIEFycmF5PFQ+KTogKn0gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICAgKiAgICAgZm9yIGV2ZXJ5IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gdGFrZXMgMyBhcmd1bWVudHMgKHRoZSBlbGVtZW50LCB0aGVcbiAgICogICAgIGluZGV4IGFuZCB0aGUgYXJyYXkpLiBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoIChmKSB7XG4gICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheV87XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgZihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIEFycmF5IG9iamVjdC4gV2FybmluZzogaWYgdGhlIGFycmF5XG4gICAqIGlzIG11dGF0ZWQsIG5vIGV2ZW50cyB3aWxsIGJlIGRpc3BhdGNoZWQgYnkgdGhlIGNvbGxlY3Rpb24sIGFuZCB0aGVcbiAgICogY29sbGVjdGlvbidzIFwibGVuZ3RoXCIgcHJvcGVydHkgd29uJ3QgYmUgaW4gc3luYyB3aXRoIHRoZSBhY3R1YWwgbGVuZ3RoXG4gICAqIG9mIHRoZSBhcnJheS5cbiAgICogQHJldHVybiB7IUFycmF5PFQ+fSBBcnJheS5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QXJyYXkgPSBmdW5jdGlvbiBnZXRBcnJheSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiBpdGVtIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmFycmF5X1tpbmRleF07XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24gZ2V0TGVuZ3RoICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoUHJvcGVydHkuTEVOR1RIKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGFuIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pbnNlcnRBdCA9IGZ1bmN0aW9uIGluc2VydEF0IChpbmRleCwgZWxlbSkge1xuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICB9XG4gICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAwLCBlbGVtKTtcbiAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIGFuZCByZXR1cm4gaXQuXG4gICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uIHBvcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5nZXRMZW5ndGgoKSAtIDEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXQgdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2ggKGVsZW0pIHtcbiAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgfVxuICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICB0aGlzLmluc2VydEF0KG4sIGVsZW0pO1xuICAgIHJldHVybiB0aGlzLmdldExlbmd0aCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGVsZW1lbnQgb3IgdW5kZWZpbmVkIGlmIG5vbmUgZm91bmQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSAoZWxlbSkge1xuICAgIHZhciBhcnIgPSB0aGlzLmFycmF5XztcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgaWYgKGFycltpXSA9PT0gZWxlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleCBhbmQgcmV0dXJuIGl0LlxuICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgY29udGFpbiB0aGlzIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBWYWx1ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQXQgPSBmdW5jdGlvbiByZW1vdmVBdCAoaW5kZXgpIHtcbiAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2KSk7XG4gICAgcmV0dXJuIHByZXY7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnNldEF0ID0gZnVuY3Rpb24gc2V0QXQgKGluZGV4LCBlbGVtKSB7XG4gICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgIGlmIChpbmRleCA8IG4pIHtcbiAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0sIGluZGV4KTtcbiAgICAgIH1cbiAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgdGhpcy5hcnJheV9baW5kZXhdID0gZWxlbTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldikpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGogPSBuOyBqIDwgaW5kZXg7ICsraikge1xuICAgICAgICB0aGlzLmluc2VydEF0KGosIHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgICB0aGlzLmluc2VydEF0KGluZGV4LCBlbGVtKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVMZW5ndGhfID0gZnVuY3Rpb24gdXBkYXRlTGVuZ3RoXyAoKSB7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuTEVOR1RILCB0aGlzLmFycmF5Xy5sZW5ndGgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZXhjZXB0IE9wdGlvbmFsIGluZGV4IHRvIGlnbm9yZS5cbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmFzc2VydFVuaXF1ZV8gPSBmdW5jdGlvbiBhc3NlcnRVbmlxdWVfIChlbGVtLCBvcHRfZXhjZXB0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgaWYgKHRoaXMuYXJyYXlfW2ldID09PSBlbGVtICYmIGkgIT09IG9wdF9leGNlcHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKDU4KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENvbGxlY3Rpb247XG59KEJhc2VPYmplY3QpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbnZhciBNYXBFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIE1hcEV2ZW50KHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwIHdoZXJlIHRoZSBldmVudCBvY2N1cnJlZC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5tYXAgPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhbWUgc3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9mcmFtZVN0YXRlIDogbnVsbDtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIE1hcEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBNYXBFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgTWFwRXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWFwRXZlbnQ7XG5cbiAgcmV0dXJuIE1hcEV2ZW50O1xufShFdmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFxuICovXG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGJyb3dzZXIgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwflBsdWdnYWJsZU1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGJyb3dzZXIgZXZlbnQuXG4gKi9cbnZhciBNYXBCcm93c2VyRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChNYXBFdmVudCkge1xuICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnQodHlwZSwgbWFwLCBicm93c2VyRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcblxuICAgIE1hcEV2ZW50LmNhbGwodGhpcywgdHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7RXZlbnR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luYWxFdmVudCA9IGJyb3dzZXJFdmVudDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWwgPSBtYXAuZ2V0RXZlbnRQaXhlbChicm93c2VyRXZlbnQpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGUgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLnBpeGVsKTtcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBpZiB0aGUgbWFwIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBPbmx5IHNldCBmb3JcbiAgICAgKiBgUE9JTlRFUkRSQUdgIGFuZCBgUE9JTlRFUk1PVkVgIGV2ZW50cy4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ2dpbmcgPSBvcHRfZHJhZ2dpbmcgIT09IHVuZGVmaW5lZCA/IG9wdF9kcmFnZ2luZyA6IGZhbHNlO1xuXG4gIH1cblxuICBpZiAoIE1hcEV2ZW50ICkgTWFwQnJvd3NlckV2ZW50Ll9fcHJvdG9fXyA9IE1hcEV2ZW50O1xuICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTWFwRXZlbnQgJiYgTWFwRXZlbnQucHJvdG90eXBlICk7XG4gIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBCcm93c2VyRXZlbnQ7XG5cbiAgLyoqXG4gICAqIFByZXZlbnRzIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uLlxuICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnByZXZlbnREZWZhdWx0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHtcbiAgICBNYXBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7XG4gICAgTWFwRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfTtcblxuICByZXR1cm4gTWFwQnJvd3NlckV2ZW50O1xufShNYXBFdmVudCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9oYXNcbiAqL1xuXG52YXIgdWEgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/XG4gIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSA6ICcnO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBGaXJlZm94IGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBGSVJFRk9YID0gdWEuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggU2FmYXJpIGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBTQUZBUkkgPSB1YS5pbmRleE9mKCdzYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignY2hyb20nKSA9PSAtMTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBXZWJLaXQgZW5naW5lLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgV0VCS0lUID0gdWEuaW5kZXhPZignd2Via2l0JykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2VkZ2UnKSA9PSAtMTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBNYWMgYXMgcGxhdGZvcm0uXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBNQUMgPSB1YS5pbmRleE9mKCdtYWNpbnRvc2gnKSAhPT0gLTE7XG5cblxuLyoqXG4gKiBUaGUgcmF0aW8gYmV0d2VlbiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHNcbiAqIChkaXBzKSBvbiB0aGUgZGV2aWNlIChgd2luZG93LmRldmljZVBpeGVsUmF0aW9gKS5cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBERVZJQ0VfUElYRUxfUkFUSU8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuXG5cbi8qKlxuICogVHJ1ZSBpZiB0aGUgYnJvd3NlcidzIENhbnZhcyBpbXBsZW1lbnRhdGlvbiBpbXBsZW1lbnRzIHtnZXQsc2V0fUxpbmVEYXNoLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgQ0FOVkFTX0xJTkVfREFTSCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaGFzID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaGFzID0gISFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpLnNldExpbmVEYXNoO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gcGFzc1xuICB9XG4gIHJldHVybiBoYXM7XG59KCk7XG5cblxuLyoqXG4gKiBJcyBIVE1MNSBnZW9sb2NhdGlvbiBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgYnJvd3Nlcj9cbiAqIEBjb25zdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgR0VPTE9DQVRJT04gPSAnZ2VvbG9jYXRpb24nIGluIG5hdmlnYXRvcjtcblxuXG4vKipcbiAqIFRydWUgaWYgYnJvd3NlciBzdXBwb3J0cyB0b3VjaCBldmVudHMuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIFRPVUNIID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93O1xuXG5cbi8qKlxuICogVHJ1ZSBpZiBicm93c2VyIHN1cHBvcnRzIHBvaW50ZXIgZXZlbnRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBQT0lOVEVSID0gJ1BvaW50ZXJFdmVudCcgaW4gd2luZG93O1xuXG5cbi8qKlxuICogVHJ1ZSBpZiBicm93c2VyIHN1cHBvcnRzIG1zIHBvaW50ZXIgZXZlbnRzIChJRSAxMCkuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIE1TUE9JTlRFUiA9ICEhKG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKTtcblxuXG5leHBvcnQge0hBUyBhcyBXRUJHTH0gZnJvbSAnLi93ZWJnbC5qcyc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50VHlwZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQSB0cnVlIHNpbmdsZSBjbGljayB3aXRoIG5vIGRyYWdnaW5nIGFuZCBubyBkb3VibGUgY2xpY2suIE5vdGUgdGhhdCB0aGlzXG4gICAqIGV2ZW50IGlzIGRlbGF5ZWQgYnkgMjUwIG1zIHRvIGVuc3VyZSB0aGF0IGl0IGlzIG5vdCBhIGRvdWJsZSBjbGljay5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3NpbmdsZWNsaWNrXG4gICAqIEBhcGlcbiAgICovXG4gIFNJTkdMRUNMSUNLOiAnc2luZ2xlY2xpY2snLFxuXG4gIC8qKlxuICAgKiBBIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcuIEEgZG91YmxlIGNsaWNrIHdpbGwgZmlyZSB0d28gb2YgdGhpcy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2NsaWNrXG4gICAqIEBhcGlcbiAgICovXG4gIENMSUNLOiBFdmVudFR5cGUuQ0xJQ0ssXG5cbiAgLyoqXG4gICAqIEEgdHJ1ZSBkb3VibGUgY2xpY2ssIHdpdGggbm8gZHJhZ2dpbmcuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNkYmxjbGlja1xuICAgKiBAYXBpXG4gICAqL1xuICBEQkxDTElDSzogRXZlbnRUeXBlLkRCTENMSUNLLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgZHJhZ2dlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJkcmFnXG4gICAqIEBhcGlcbiAgICovXG4gIFBPSU5URVJEUkFHOiAncG9pbnRlcmRyYWcnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgbW92ZWQuIE5vdGUgdGhhdCBvbiB0b3VjaCBkZXZpY2VzIHRoaXMgaXNcbiAgICogdHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBpcyBwYW5uZWQsIHNvIGlzIG5vdCB0aGUgc2FtZSBhcyBtb3VzZW1vdmUuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVybW92ZVxuICAgKiBAYXBpXG4gICAqL1xuICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcblxuICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyUG9pbnRlckV2ZW50XG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnQgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnQuanMnO1xuXG52YXIgTWFwQnJvd3NlclBvaW50ZXJFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcEJyb3dzZXJFdmVudCkge1xuICBmdW5jdGlvbiBNYXBCcm93c2VyUG9pbnRlckV2ZW50KHR5cGUsIG1hcCwgcG9pbnRlckV2ZW50LCBvcHRfZHJhZ2dpbmcsIG9wdF9mcmFtZVN0YXRlKSB7XG5cbiAgICBNYXBCcm93c2VyRXZlbnQuY2FsbCh0aGlzLCB0eXBlLCBtYXAsIHBvaW50ZXJFdmVudC5vcmlnaW5hbEV2ZW50LCBvcHRfZHJhZ2dpbmcsIG9wdF9mcmFtZVN0YXRlKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyRXZlbnQgPSBwb2ludGVyRXZlbnQ7XG5cbiAgfVxuXG4gIGlmICggTWFwQnJvd3NlckV2ZW50ICkgTWFwQnJvd3NlclBvaW50ZXJFdmVudC5fX3Byb3RvX18gPSBNYXBCcm93c2VyRXZlbnQ7XG4gIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTWFwQnJvd3NlckV2ZW50ICYmIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUgKTtcbiAgTWFwQnJvd3NlclBvaW50ZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBCcm93c2VyUG9pbnRlckV2ZW50O1xuXG4gIHJldHVybiBNYXBCcm93c2VyUG9pbnRlckV2ZW50O1xufShNYXBCcm93c2VyRXZlbnQpKTtcblxuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlclBvaW50ZXJFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlclBvaW50ZXJFdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvRXZlbnRTb3VyY2VcbiAqL1xuXG52YXIgRXZlbnRTb3VyY2UgPSBmdW5jdGlvbiBFdmVudFNvdXJjZShkaXNwYXRjaGVyLCBtYXBwaW5nKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXJFdmVudEhhbmRsZXIuanNcIikuZGVmYXVsdH1cbiAgICovXG4gIHRoaXMuZGlzcGF0Y2hlciA9IGRpc3BhdGNoZXI7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGZ1bmN0aW9uKEV2ZW50KT59XG4gICAqL1xuICB0aGlzLm1hcHBpbmdfID0gbWFwcGluZztcbn07XG5cbi8qKlxuICogTGlzdCBvZiBldmVudHMgc3VwcG9ydGVkIGJ5IHRoaXMgc291cmNlLlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gRXZlbnQgbmFtZXNcbiAqL1xuRXZlbnRTb3VyY2UucHJvdG90eXBlLmdldEV2ZW50cyA9IGZ1bmN0aW9uIGdldEV2ZW50cyAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcHBpbmdfKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaGFuZGxlciB0aGF0IHNob3VsZCBoYW5kbGUgYSBnaXZlbiBldmVudCB0eXBlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKEV2ZW50KX0gSGFuZGxlclxuICovXG5FdmVudFNvdXJjZS5wcm90b3R5cGUuZ2V0SGFuZGxlckZvckV2ZW50ID0gZnVuY3Rpb24gZ2V0SGFuZGxlckZvckV2ZW50IChldmVudFR5cGUpIHtcbiAgcmV0dXJuIHRoaXMubWFwcGluZ19bZXZlbnRUeXBlXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50U291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9Nb3VzZVNvdXJjZVxuICovXG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL1BvaW50ZXJFdmVudHNcblxuLy8gQ29weXJpZ2h0IChjKSAyMDEzIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vL1xuLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4vLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlXG4vLyBtZXQ6XG4vL1xuLy8gKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy8gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXG4vLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyXG4vLyBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlXG4vLyBkaXN0cmlidXRpb24uXG4vLyAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHNcbi8vIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4vLyB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuLy9cbi8vIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlNcbi8vIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUlxuLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFRcbi8vIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxuLy8gU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsXG4vLyBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTllcbi8vIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuLy8gT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cblxuaW1wb3J0IEV2ZW50U291cmNlIGZyb20gJy4vRXZlbnRTb3VyY2UuanMnO1xuXG5cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBQT0lOVEVSX0lEID0gMTtcblxuXG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgUE9JTlRFUl9UWVBFID0gJ21vdXNlJztcblxuXG4vKipcbiAqIFJhZGl1cyBhcm91bmQgdG91Y2hlbmQgdGhhdCBzd2FsbG93cyBtb3VzZSBldmVudHMuXG4gKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRFVQX0RJU1QgPSAyNTtcblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbW91c2Vkb3duYC5cbiAqXG4gKiBAdGhpcyB7TW91c2VTb3VyY2V9XG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtb3VzZWRvd24oaW5FdmVudCkge1xuICBpZiAoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8oaW5FdmVudCkpIHtcbiAgICAvLyBUT0RPKGRmcmVlZG1hbikgd29ya2Fyb3VuZCBmb3Igc29tZSBlbGVtZW50cyBub3Qgc2VuZGluZyBtb3VzZXVwXG4gICAgLy8gaHR0cDovL2NyYnVnLzE0OTA5MVxuICAgIGlmIChQT0lOVEVSX0lELnRvU3RyaW5nKCkgaW4gdGhpcy5wb2ludGVyTWFwKSB7XG4gICAgICB0aGlzLmNhbmNlbChpbkV2ZW50KTtcbiAgICB9XG4gICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICB0aGlzLnBvaW50ZXJNYXBbUE9JTlRFUl9JRC50b1N0cmluZygpXSA9IGluRXZlbnQ7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmRvd24oZSwgaW5FdmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbW91c2Vtb3ZlYC5cbiAqXG4gKiBAdGhpcyB7TW91c2VTb3VyY2V9XG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtb3VzZW1vdmUoaW5FdmVudCkge1xuICBpZiAoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8oaW5FdmVudCkpIHtcbiAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgIHRoaXMuZGlzcGF0Y2hlci5tb3ZlKGUsIGluRXZlbnQpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1vdXNldXBgLlxuICpcbiAqIEB0aGlzIHtNb3VzZVNvdXJjZX1cbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1vdXNldXAoaW5FdmVudCkge1xuICBpZiAoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8oaW5FdmVudCkpIHtcbiAgICB2YXIgcCA9IHRoaXMucG9pbnRlck1hcFtQT0lOVEVSX0lELnRvU3RyaW5nKCldO1xuXG4gICAgaWYgKHAgJiYgcC5idXR0b24gPT09IGluRXZlbnQuYnV0dG9uKSB7XG4gICAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgICAgdGhpcy5kaXNwYXRjaGVyLnVwKGUsIGluRXZlbnQpO1xuICAgICAgdGhpcy5jbGVhbnVwTW91c2UoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbW91c2VvdmVyYC5cbiAqXG4gKiBAdGhpcyB7TW91c2VTb3VyY2V9XG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtb3VzZW92ZXIoaW5FdmVudCkge1xuICBpZiAoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8oaW5FdmVudCkpIHtcbiAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgIHRoaXMuZGlzcGF0Y2hlci5lbnRlck92ZXIoZSwgaW5FdmVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbW91c2VvdXRgLlxuICpcbiAqIEB0aGlzIHtNb3VzZVNvdXJjZX1cbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1vdXNlb3V0KGluRXZlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfKGluRXZlbnQpKSB7XG4gICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICB0aGlzLmRpc3BhdGNoZXIubGVhdmVPdXQoZSwgaW5FdmVudCk7XG4gIH1cbn1cblxuXG52YXIgTW91c2VTb3VyY2UgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFNvdXJjZSkge1xuICBmdW5jdGlvbiBNb3VzZVNvdXJjZShkaXNwYXRjaGVyKSB7XG4gICAgdmFyIG1hcHBpbmcgPSB7XG4gICAgICAnbW91c2Vkb3duJzogbW91c2Vkb3duLFxuICAgICAgJ21vdXNlbW92ZSc6IG1vdXNlbW92ZSxcbiAgICAgICdtb3VzZXVwJzogbW91c2V1cCxcbiAgICAgICdtb3VzZW92ZXInOiBtb3VzZW92ZXIsXG4gICAgICAnbW91c2VvdXQnOiBtb3VzZW91dFxuICAgIH07XG4gICAgRXZlbnRTb3VyY2UuY2FsbCh0aGlzLCBkaXNwYXRjaGVyLCBtYXBwaW5nKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRXZlbnR8T2JqZWN0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJNYXAgPSBkaXNwYXRjaGVyLnBvaW50ZXJNYXA7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWw+fVxuICAgICAqL1xuICAgIHRoaXMubGFzdFRvdWNoZXMgPSBbXTtcbiAgfVxuXG4gIGlmICggRXZlbnRTb3VyY2UgKSBNb3VzZVNvdXJjZS5fX3Byb3RvX18gPSBFdmVudFNvdXJjZTtcbiAgTW91c2VTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRTb3VyY2UgJiYgRXZlbnRTb3VyY2UucHJvdG90eXBlICk7XG4gIE1vdXNlU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1vdXNlU291cmNlO1xuXG4gIC8qKlxuICAgKiBEZXRlY3QgaWYgYSBtb3VzZSBldmVudCB3YXMgc2ltdWxhdGVkIGZyb20gYSB0b3VjaCBieVxuICAgKiBjaGVja2luZyBpZiBwcmV2aW91c2x5IHRoZXJlIHdhcyBhIHRvdWNoIGV2ZW50IGF0IHRoZVxuICAgKiBzYW1lIHBvc2l0aW9uLlxuICAgKlxuICAgKiBGSVhNRSAtIEtub3duIHByb2JsZW0gd2l0aCB0aGUgbmF0aXZlIEFuZHJvaWQgYnJvd3NlciBvblxuICAgKiBTYW1zdW5nIEdULUk5MTAwIChBbmRyb2lkIDQuMS4yKTpcbiAgICogSW4gY2FzZSB0aGUgcGFnZSBpcyBzY3JvbGxlZCwgdGhpcyBmdW5jdGlvbiBkb2VzIG5vdCB3b3JrXG4gICAqIGNvcnJlY3RseSB3aGVuIGEgY2FudmFzIGlzIHVzZWQgKFdlYkdMIG9yIGNhbnZhcyByZW5kZXJlcikuXG4gICAqIE1vdXNlIGxpc3RlbmVycyBvbiBjYW52YXMgZWxlbWVudHMgKGZvciB0aGlzIGJyb3dzZXIpLCBjcmVhdGVcbiAgICogdHdvIG1vdXNlIGV2ZW50czogT25lICdnb29kJyBhbmQgb25lICdiYWQnIG9uZSAob24gb3RoZXIgYnJvd3NlcnMgb3JcbiAgICogd2hlbiBhIGRpdiBpcyB1c2VkLCB0aGVyZSBpcyBvbmx5IG9uZSBldmVudCkuIEZvciB0aGUgJ2JhZCcgb25lLFxuICAgKiBjbGllbnRYL2NsaWVudFkgYW5kIGFsc28gcGFnZVgvcGFnZVkgYXJlIHdyb25nIHdoZW4gdGhlIHBhZ2VcbiAgICogaXMgc2Nyb2xsZWQuIEJlY2F1c2Ugb2YgdGhhdCwgdGhpcyBmdW5jdGlvbiBjYW4gbm90IGRldGVjdCBpZlxuICAgKiB0aGUgZXZlbnRzIHdlcmUgc2ltdWxhdGVkIGZyb20gYSB0b3VjaCBldmVudC4gQXMgcmVzdWx0LCBhXG4gICAqIHBvaW50ZXIgZXZlbnQgYXQgYSB3cm9uZyBwb3NpdGlvbiBpcyBkaXNwYXRjaGVkLCB3aGljaCBjb25mdXNlc1xuICAgKiB0aGUgbWFwIGludGVyYWN0aW9ucy5cbiAgICogSXQgaXMgdW5jbGVhciwgaG93IG9uZSBjYW4gZ2V0IHRoZSBjb3JyZWN0IHBvc2l0aW9uIGZvciB0aGUgZXZlbnRcbiAgICogb3IgZGV0ZWN0IHRoYXQgdGhlIHBvc2l0aW9ucyBhcmUgaW52YWxpZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSwgaWYgdGhlIGV2ZW50IHdhcyBnZW5lcmF0ZWQgYnkgYSB0b3VjaC5cbiAgICovXG4gIE1vdXNlU291cmNlLnByb3RvdHlwZS5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyA9IGZ1bmN0aW9uIGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfIChpbkV2ZW50KSB7XG4gICAgdmFyIGx0cyA9IHRoaXMubGFzdFRvdWNoZXM7XG4gICAgdmFyIHggPSBpbkV2ZW50LmNsaWVudFg7XG4gICAgdmFyIHkgPSBpbkV2ZW50LmNsaWVudFk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsdHMubGVuZ3RoLCB0ID0gKHZvaWQgMCk7IGkgPCBsICYmICh0ID0gbHRzW2ldKTsgaSsrKSB7XG4gICAgICAvLyBzaW11bGF0ZWQgbW91c2UgZXZlbnRzIHdpbGwgYmUgc3dhbGxvd2VkIG5lYXIgYSBwcmltYXJ5IHRvdWNoZW5kXG4gICAgICB2YXIgZHggPSBNYXRoLmFicyh4IC0gdFswXSk7XG4gICAgICB2YXIgZHkgPSBNYXRoLmFicyh5IC0gdFsxXSk7XG4gICAgICBpZiAoZHggPD0gREVEVVBfRElTVCAmJiBkeSA8PSBERURVUF9ESVNUKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBgcG9pbnRlcmNhbmNlbGAgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICAgKi9cbiAgTW91c2VTb3VyY2UucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCAoaW5FdmVudCkge1xuICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmNhbmNlbChlLCBpbkV2ZW50KTtcbiAgICB0aGlzLmNsZWFudXBNb3VzZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIG1vdXNlIGZyb20gdGhlIGxpc3Qgb2YgYWN0aXZlIHBvaW50ZXJzLlxuICAgKi9cbiAgTW91c2VTb3VyY2UucHJvdG90eXBlLmNsZWFudXBNb3VzZSA9IGZ1bmN0aW9uIGNsZWFudXBNb3VzZSAoKSB7XG4gICAgZGVsZXRlIHRoaXMucG9pbnRlck1hcFtQT0lOVEVSX0lELnRvU3RyaW5nKCldO1xuICB9O1xuXG4gIHJldHVybiBNb3VzZVNvdXJjZTtcbn0oRXZlbnRTb3VyY2UpKTtcblxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBldmVudCB0aGF0IHdpbGwgYmUgdXNlZFxuICogZm9yIHRoZSBmYWtlIHBvaW50ZXIgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUG9pbnRlckV2ZW50SGFuZGxlci5qc1wiKS5kZWZhdWx0fSBkaXNwYXRjaGVyIEV2ZW50IGhhbmRsZXIuXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBjb3BpZWQgZXZlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlRXZlbnQoaW5FdmVudCwgZGlzcGF0Y2hlcikge1xuICB2YXIgZSA9IGRpc3BhdGNoZXIuY2xvbmVFdmVudChpbkV2ZW50LCBpbkV2ZW50KTtcblxuICAvLyBmb3J3YXJkIG1vdXNlIHByZXZlbnREZWZhdWx0XG4gIHZhciBwZCA9IGUucHJldmVudERlZmF1bHQ7XG4gIGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHtcbiAgICBpbkV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcGQoKTtcbiAgfTtcblxuICBlLnBvaW50ZXJJZCA9IFBPSU5URVJfSUQ7XG4gIGUuaXNQcmltYXJ5ID0gdHJ1ZTtcbiAgZS5wb2ludGVyVHlwZSA9IFBPSU5URVJfVFlQRTtcblxuICByZXR1cm4gZTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBNb3VzZVNvdXJjZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VTb3VyY2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvTXNTb3VyY2VcbiAqL1xuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQgRXZlbnRTb3VyY2UgZnJvbSAnLi9FdmVudFNvdXJjZS5qcyc7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICovXG52YXIgUE9JTlRFUl9UWVBFUyA9IFtcbiAgJycsXG4gICd1bmF2YWlsYWJsZScsXG4gICd0b3VjaCcsXG4gICdwZW4nLFxuICAnbW91c2UnXG5dO1xuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc1BvaW50ZXJEb3duYC5cbiAqXG4gKiBAdGhpcyB7TXNTb3VyY2V9XG4gKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbXNQb2ludGVyRG93bihpbkV2ZW50KSB7XG4gIHRoaXMucG9pbnRlck1hcFtpbkV2ZW50LnBvaW50ZXJJZC50b1N0cmluZygpXSA9IGluRXZlbnQ7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIuZG93bihlLCBpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbXNQb2ludGVyTW92ZWAuXG4gKlxuICogQHRoaXMge01zU291cmNlfVxuICogQHBhcmFtIHtNU1BvaW50ZXJFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIG1zUG9pbnRlck1vdmUoaW5FdmVudCkge1xuICB2YXIgZSA9IHRoaXMucHJlcGFyZUV2ZW50XyhpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLm1vdmUoZSwgaW5FdmVudCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1zUG9pbnRlclVwYC5cbiAqXG4gKiBAdGhpcyB7TXNTb3VyY2V9XG4gKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbXNQb2ludGVyVXAoaW5FdmVudCkge1xuICB2YXIgZSA9IHRoaXMucHJlcGFyZUV2ZW50XyhpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLnVwKGUsIGluRXZlbnQpO1xuICB0aGlzLmNsZWFudXAoaW5FdmVudC5wb2ludGVySWQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc1BvaW50ZXJPdXRgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc1BvaW50ZXJPdXQoaW5FdmVudCkge1xuICB2YXIgZSA9IHRoaXMucHJlcGFyZUV2ZW50XyhpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLmxlYXZlT3V0KGUsIGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc1BvaW50ZXJPdmVyYC5cbiAqXG4gKiBAdGhpcyB7TXNTb3VyY2V9XG4gKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbXNQb2ludGVyT3ZlcihpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5wcmVwYXJlRXZlbnRfKGluRXZlbnQpO1xuICB0aGlzLmRpc3BhdGNoZXIuZW50ZXJPdmVyKGUsIGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc1BvaW50ZXJDYW5jZWxgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc1BvaW50ZXJDYW5jZWwoaW5FdmVudCkge1xuICB2YXIgZSA9IHRoaXMucHJlcGFyZUV2ZW50XyhpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLmNhbmNlbChlLCBpbkV2ZW50KTtcbiAgdGhpcy5jbGVhbnVwKGluRXZlbnQucG9pbnRlcklkKTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgbXNMb3N0UG9pbnRlckNhcHR1cmVgLlxuICpcbiAqIEB0aGlzIHtNc1NvdXJjZX1cbiAqIEBwYXJhbSB7TVNQb2ludGVyRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtc0xvc3RQb2ludGVyQ2FwdHVyZShpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5kaXNwYXRjaGVyLm1ha2VFdmVudCgnbG9zdHBvaW50ZXJjYXB0dXJlJywgaW5FdmVudCwgaW5FdmVudCk7XG4gIHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KGUpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtc0dvdFBvaW50ZXJDYXB0dXJlYC5cbiAqXG4gKiBAdGhpcyB7TXNTb3VyY2V9XG4gKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbXNHb3RQb2ludGVyQ2FwdHVyZShpbkV2ZW50KSB7XG4gIHZhciBlID0gdGhpcy5kaXNwYXRjaGVyLm1ha2VFdmVudCgnZ290cG9pbnRlcmNhcHR1cmUnLCBpbkV2ZW50LCBpbkV2ZW50KTtcbiAgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoZSk7XG59XG5cbnZhciBNc1NvdXJjZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50U291cmNlKSB7XG4gIGZ1bmN0aW9uIE1zU291cmNlKGRpc3BhdGNoZXIpIHtcbiAgICB2YXIgbWFwcGluZyA9IHtcbiAgICAgICdNU1BvaW50ZXJEb3duJzogbXNQb2ludGVyRG93bixcbiAgICAgICdNU1BvaW50ZXJNb3ZlJzogbXNQb2ludGVyTW92ZSxcbiAgICAgICdNU1BvaW50ZXJVcCc6IG1zUG9pbnRlclVwLFxuICAgICAgJ01TUG9pbnRlck91dCc6IG1zUG9pbnRlck91dCxcbiAgICAgICdNU1BvaW50ZXJPdmVyJzogbXNQb2ludGVyT3ZlcixcbiAgICAgICdNU1BvaW50ZXJDYW5jZWwnOiBtc1BvaW50ZXJDYW5jZWwsXG4gICAgICAnTVNHb3RQb2ludGVyQ2FwdHVyZSc6IG1zR290UG9pbnRlckNhcHR1cmUsXG4gICAgICAnTVNMb3N0UG9pbnRlckNhcHR1cmUnOiBtc0xvc3RQb2ludGVyQ2FwdHVyZVxuICAgIH07XG4gICAgRXZlbnRTb3VyY2UuY2FsbCh0aGlzLCBkaXNwYXRjaGVyLCBtYXBwaW5nKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgTVNQb2ludGVyRXZlbnR8T2JqZWN0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJNYXAgPSBkaXNwYXRjaGVyLnBvaW50ZXJNYXA7XG4gIH1cblxuICBpZiAoIEV2ZW50U291cmNlICkgTXNTb3VyY2UuX19wcm90b19fID0gRXZlbnRTb3VyY2U7XG4gIE1zU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50U291cmNlICYmIEV2ZW50U291cmNlLnByb3RvdHlwZSApO1xuICBNc1NvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNc1NvdXJjZTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRoYXQgd2lsbCBiZSB1c2VkXG4gICAqIGZvciB0aGUgZmFrZSBwb2ludGVyIGV2ZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge01TUG9pbnRlckV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgY29waWVkIGV2ZW50LlxuICAgKi9cbiAgTXNTb3VyY2UucHJvdG90eXBlLnByZXBhcmVFdmVudF8gPSBmdW5jdGlvbiBwcmVwYXJlRXZlbnRfIChpbkV2ZW50KSB7XG4gICAgLyoqIEB0eXBlIHtNU1BvaW50ZXJFdmVudHxPYmplY3R9ICovXG4gICAgdmFyIGUgPSBpbkV2ZW50O1xuICAgIGlmICh0eXBlb2YgaW5FdmVudC5wb2ludGVyVHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGUgPSB0aGlzLmRpc3BhdGNoZXIuY2xvbmVFdmVudChpbkV2ZW50LCBpbkV2ZW50KTtcbiAgICAgIGUucG9pbnRlclR5cGUgPSBQT0lOVEVSX1RZUEVTW2luRXZlbnQucG9pbnRlclR5cGVdO1xuICAgIH1cblxuICAgIHJldHVybiBlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhpcyBwb2ludGVyIGZyb20gdGhlIGxpc3Qgb2YgYWN0aXZlIHBvaW50ZXJzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRlcklkIFBvaW50ZXIgaWRlbnRpZmllci5cbiAgICovXG4gIE1zU291cmNlLnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCAocG9pbnRlcklkKSB7XG4gICAgZGVsZXRlIHRoaXMucG9pbnRlck1hcFtwb2ludGVySWQudG9TdHJpbmcoKV07XG4gIH07XG5cbiAgcmV0dXJuIE1zU291cmNlO1xufShFdmVudFNvdXJjZSkpO1xuXG5leHBvcnQgZGVmYXVsdCBNc1NvdXJjZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TXNTb3VyY2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvTmF0aXZlU291cmNlXG4gKi9cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQgRXZlbnRTb3VyY2UgZnJvbSAnLi9FdmVudFNvdXJjZS5qcyc7XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHBvaW50ZXJkb3duYC5cbiAqXG4gKiBAdGhpcyB7TmF0aXZlU291cmNlfVxuICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHBvaW50ZXJEb3duKGluRXZlbnQpIHtcbiAgdGhpcy5kaXNwYXRjaGVyLmZpcmVOYXRpdmVFdmVudChpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgcG9pbnRlcm1vdmVgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnRlck1vdmUoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBwb2ludGVydXBgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnRlclVwKGluRXZlbnQpIHtcbiAgdGhpcy5kaXNwYXRjaGVyLmZpcmVOYXRpdmVFdmVudChpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgcG9pbnRlcm91dGAuXG4gKlxuICogQHRoaXMge05hdGl2ZVNvdXJjZX1cbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBwb2ludGVyT3V0KGluRXZlbnQpIHtcbiAgdGhpcy5kaXNwYXRjaGVyLmZpcmVOYXRpdmVFdmVudChpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgcG9pbnRlcm92ZXJgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnRlck92ZXIoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBwb2ludGVyY2FuY2VsYC5cbiAqXG4gKiBAdGhpcyB7TmF0aXZlU291cmNlfVxuICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHBvaW50ZXJDYW5jZWwoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBsb3N0cG9pbnRlcmNhcHR1cmVgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbG9zdFBvaW50ZXJDYXB0dXJlKGluRXZlbnQpIHtcbiAgdGhpcy5kaXNwYXRjaGVyLmZpcmVOYXRpdmVFdmVudChpbkV2ZW50KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgZ290cG9pbnRlcmNhcHR1cmVgLlxuICpcbiAqIEB0aGlzIHtOYXRpdmVTb3VyY2V9XG4gKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gZ290UG9pbnRlckNhcHR1cmUoaW5FdmVudCkge1xuICB0aGlzLmRpc3BhdGNoZXIuZmlyZU5hdGl2ZUV2ZW50KGluRXZlbnQpO1xufVxuXG52YXIgTmF0aXZlU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRTb3VyY2UpIHtcbiAgZnVuY3Rpb24gTmF0aXZlU291cmNlKGRpc3BhdGNoZXIpIHtcbiAgICB2YXIgbWFwcGluZyA9IHtcbiAgICAgICdwb2ludGVyZG93bic6IHBvaW50ZXJEb3duLFxuICAgICAgJ3BvaW50ZXJtb3ZlJzogcG9pbnRlck1vdmUsXG4gICAgICAncG9pbnRlcnVwJzogcG9pbnRlclVwLFxuICAgICAgJ3BvaW50ZXJvdXQnOiBwb2ludGVyT3V0LFxuICAgICAgJ3BvaW50ZXJvdmVyJzogcG9pbnRlck92ZXIsXG4gICAgICAncG9pbnRlcmNhbmNlbCc6IHBvaW50ZXJDYW5jZWwsXG4gICAgICAnZ290cG9pbnRlcmNhcHR1cmUnOiBnb3RQb2ludGVyQ2FwdHVyZSxcbiAgICAgICdsb3N0cG9pbnRlcmNhcHR1cmUnOiBsb3N0UG9pbnRlckNhcHR1cmVcbiAgICB9O1xuICAgIEV2ZW50U291cmNlLmNhbGwodGhpcywgZGlzcGF0Y2hlciwgbWFwcGluZyk7XG4gIH1cblxuICBpZiAoIEV2ZW50U291cmNlICkgTmF0aXZlU291cmNlLl9fcHJvdG9fXyA9IEV2ZW50U291cmNlO1xuICBOYXRpdmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRTb3VyY2UgJiYgRXZlbnRTb3VyY2UucHJvdG90eXBlICk7XG4gIE5hdGl2ZVNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOYXRpdmVTb3VyY2U7XG5cbiAgcmV0dXJuIE5hdGl2ZVNvdXJjZTtcbn0oRXZlbnRTb3VyY2UpKTtcblxuZXhwb3J0IGRlZmF1bHQgTmF0aXZlU291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1OYXRpdmVTb3VyY2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvUG9pbnRlckV2ZW50XG4gKi9cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQgX0V2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5cblxuLyoqXG4gKiBJcyB0aGUgYGJ1dHRvbnNgIHByb3BlcnR5IHN1cHBvcnRlZD9cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG52YXIgSEFTX0JVVFRPTlMgPSBmYWxzZTtcblxuXG52YXIgUG9pbnRlckV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoX0V2ZW50KSB7XG4gIGZ1bmN0aW9uIFBvaW50ZXJFdmVudCh0eXBlLCBvcmlnaW5hbEV2ZW50LCBvcHRfZXZlbnREaWN0KSB7XG4gICAgX0V2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7RXZlbnR9XG4gICAgICovXG4gICAgdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcblxuICAgIHZhciBldmVudERpY3QgPSBvcHRfZXZlbnREaWN0ID8gb3B0X2V2ZW50RGljdCA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmJ1dHRvbnMgPSBnZXRCdXR0b25zKGV2ZW50RGljdCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucHJlc3N1cmUgPSBnZXRQcmVzc3VyZShldmVudERpY3QsIHRoaXMuYnV0dG9ucyk7XG5cbiAgICAvLyBNb3VzZUV2ZW50IHJlbGF0ZWQgcHJvcGVydGllc1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5idWJibGVzID0gJ2J1YmJsZXMnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnYnViYmxlcyddIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNhbmNlbGFibGUgPSAnY2FuY2VsYWJsZScgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydjYW5jZWxhYmxlJ10gOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy52aWV3ID0gJ3ZpZXcnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsndmlldyddIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZXRhaWwgPSAnZGV0YWlsJyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2RldGFpbCddIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zY3JlZW5YID0gJ3NjcmVlblgnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnc2NyZWVuWCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zY3JlZW5ZID0gJ3NjcmVlblknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnc2NyZWVuWSddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5jbGllbnRYID0gJ2NsaWVudFgnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnY2xpZW50WCddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5jbGllbnRZID0gJ2NsaWVudFknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnY2xpZW50WSddIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY3RybEtleSA9ICdjdHJsS2V5JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2N0cmxLZXknXSA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5hbHRLZXkgPSAnYWx0S2V5JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2FsdEtleSddIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnNoaWZ0S2V5ID0gJ3NoaWZ0S2V5JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ3NoaWZ0S2V5J10gOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubWV0YUtleSA9ICdtZXRhS2V5JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ21ldGFLZXknXSA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmJ1dHRvbiA9ICdidXR0b24nIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnYnV0dG9uJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge05vZGV9XG4gICAgICovXG4gICAgdGhpcy5yZWxhdGVkVGFyZ2V0ID0gJ3JlbGF0ZWRUYXJnZXQnIGluIGV2ZW50RGljdCA/XG4gICAgICBldmVudERpY3RbJ3JlbGF0ZWRUYXJnZXQnXSA6IG51bGw7XG5cbiAgICAvLyBQb2ludGVyRXZlbnQgcmVsYXRlZCBwcm9wZXJ0aWVzXG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlcklkID0gJ3BvaW50ZXJJZCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0Wydwb2ludGVySWQnXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMud2lkdGggPSAnd2lkdGgnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsnd2lkdGgnXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaGVpZ2h0ID0gJ2hlaWdodCcgaW4gZXZlbnREaWN0ID8gZXZlbnREaWN0WydoZWlnaHQnXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGlsdFggPSAndGlsdFgnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsndGlsdFgnXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGlsdFkgPSAndGlsdFknIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsndGlsdFknXSA6IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlclR5cGUgPSAncG9pbnRlclR5cGUnIGluIGV2ZW50RGljdCA/IGV2ZW50RGljdFsncG9pbnRlclR5cGUnXSA6ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmh3VGltZXN0YW1wID0gJ2h3VGltZXN0YW1wJyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2h3VGltZXN0YW1wJ10gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5pc1ByaW1hcnkgPSAnaXNQcmltYXJ5JyBpbiBldmVudERpY3QgPyBldmVudERpY3RbJ2lzUHJpbWFyeSddIDogZmFsc2U7XG5cbiAgICAvLyBrZWVwIHRoZSBzZW1hbnRpY3Mgb2YgcHJldmVudERlZmF1bHRcbiAgICBpZiAob3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBvcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGlmICggX0V2ZW50ICkgUG9pbnRlckV2ZW50Ll9fcHJvdG9fXyA9IF9FdmVudDtcbiAgUG9pbnRlckV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIF9FdmVudCAmJiBfRXZlbnQucHJvdG90eXBlICk7XG4gIFBvaW50ZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2ludGVyRXZlbnQ7XG5cbiAgcmV0dXJuIFBvaW50ZXJFdmVudDtcbn0oX0V2ZW50KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsID8+fSBldmVudERpY3QgVGhlIGV2ZW50IGRpY3Rpb25hcnkuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEJ1dHRvbiBpbmRpY2F0b3IuXG4gKi9cbmZ1bmN0aW9uIGdldEJ1dHRvbnMoZXZlbnREaWN0KSB7XG4gIC8vIEFjY29yZGluZyB0byB0aGUgdzNjIHNwZWMsXG4gIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLU1vdXNlRXZlbnQtYnV0dG9uXG4gIC8vIE1vdXNlRXZlbnQuYnV0dG9uID09IDAgY2FuIG1lYW4gZWl0aGVyIG5vIG1vdXNlIGJ1dHRvbiBkZXByZXNzZWQsIG9yIHRoZVxuICAvLyBsZWZ0IG1vdXNlIGJ1dHRvbiBkZXByZXNzZWQuXG4gIC8vXG4gIC8vIEFzIG9mIG5vdywgdGhlIG9ubHkgd2F5IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gdGhlIHR3byBzdGF0ZXMgb2ZcbiAgLy8gTW91c2VFdmVudC5idXR0b24gaXMgYnkgdXNpbmcgdGhlIGRlcHJlY2F0ZWQgTW91c2VFdmVudC53aGljaCBwcm9wZXJ0eSwgYXNcbiAgLy8gdGhpcyBtYXBzIG1vdXNlIGJ1dHRvbnMgdG8gcG9zaXRpdmUgaW50ZWdlcnMgPiAwLCBhbmQgdXNlcyAwIHRvIG1lYW4gdGhhdFxuICAvLyBubyBtb3VzZSBidXR0b24gaXMgaGVsZC5cbiAgLy9cbiAgLy8gTW91c2VFdmVudC53aGljaCBpcyBkZXJpdmVkIGZyb20gTW91c2VFdmVudC5idXR0b24gYXQgTW91c2VFdmVudCBjcmVhdGlvbixcbiAgLy8gYnV0IGluaXRNb3VzZUV2ZW50IGRvZXMgbm90IGV4cG9zZSBhbiBhcmd1bWVudCB3aXRoIHdoaWNoIHRvIHNldFxuICAvLyBNb3VzZUV2ZW50LndoaWNoLiBDYWxsaW5nIGluaXRNb3VzZUV2ZW50IHdpdGggYSBidXR0b25Bcmcgb2YgMCB3aWxsIHNldFxuICAvLyBNb3VzZUV2ZW50LmJ1dHRvbiA9PSAwIGFuZCBNb3VzZUV2ZW50LndoaWNoID09IDEsIGJyZWFraW5nIHRoZSBleHBlY3RhdGlvbnNcbiAgLy8gb2YgYXBwIGRldmVsb3BlcnMuXG4gIC8vXG4gIC8vIFRoZSBvbmx5IHdheSB0byBwcm9wYWdhdGUgdGhlIGNvcnJlY3Qgc3RhdGUgb2YgTW91c2VFdmVudC53aGljaCBhbmRcbiAgLy8gTW91c2VFdmVudC5idXR0b24gdG8gYSBuZXcgTW91c2VFdmVudC5idXR0b24gPT0gMCBhbmQgTW91c2VFdmVudC53aGljaCA9PSAwXG4gIC8vIGlzIHRvIGNhbGwgaW5pdE1vdXNlRXZlbnQgd2l0aCBhIGJ1dHRvbkFyZyB2YWx1ZSBvZiAtMS5cbiAgLy9cbiAgLy8gVGhpcyBpcyBmaXhlZCB3aXRoIERPTSBMZXZlbCA0J3MgdXNlIG9mIGJ1dHRvbnNcbiAgdmFyIGJ1dHRvbnM7XG4gIGlmIChldmVudERpY3QuYnV0dG9ucyB8fCBIQVNfQlVUVE9OUykge1xuICAgIGJ1dHRvbnMgPSBldmVudERpY3QuYnV0dG9ucztcbiAgfSBlbHNlIHtcbiAgICBzd2l0Y2ggKGV2ZW50RGljdC53aGljaCkge1xuICAgICAgY2FzZSAxOiBidXR0b25zID0gMTsgYnJlYWs7XG4gICAgICBjYXNlIDI6IGJ1dHRvbnMgPSA0OyBicmVhaztcbiAgICAgIGNhc2UgMzogYnV0dG9ucyA9IDI7IGJyZWFrO1xuICAgICAgZGVmYXVsdDogYnV0dG9ucyA9IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiBidXR0b25zO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCA/Pn0gZXZlbnREaWN0IFRoZSBldmVudCBkaWN0aW9uYXJ5LlxuICogQHBhcmFtIHtudW1iZXJ9IGJ1dHRvbnMgQnV0dG9uIGluZGljYXRvci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHByZXNzdXJlLlxuICovXG5mdW5jdGlvbiBnZXRQcmVzc3VyZShldmVudERpY3QsIGJ1dHRvbnMpIHtcbiAgLy8gU3BlYyByZXF1aXJlcyB0aGF0IHBvaW50ZXJzIHdpdGhvdXQgcHJlc3N1cmUgc3BlY2lmaWVkIHVzZSAwLjUgZm9yIGRvd25cbiAgLy8gc3RhdGUgYW5kIDAgZm9yIHVwIHN0YXRlLlxuICB2YXIgcHJlc3N1cmUgPSAwO1xuICBpZiAoZXZlbnREaWN0LnByZXNzdXJlKSB7XG4gICAgcHJlc3N1cmUgPSBldmVudERpY3QucHJlc3N1cmU7XG4gIH0gZWxzZSB7XG4gICAgcHJlc3N1cmUgPSBidXR0b25zID8gMC41IDogMDtcbiAgfVxuICByZXR1cm4gcHJlc3N1cmU7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGBidXR0b25zYCBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQuXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZXYgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7YnV0dG9uczogMX0pO1xuICAgIEhBU19CVVRUT05TID0gZXYuYnV0dG9ucyA9PT0gMTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIHBhc3NcbiAgfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2FycmF5XG4gKi9cblxuXG4vKipcbiAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgcHJvdmlkZWQgc29ydGVkIGxpc3QgYW5kIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLiBJZiBpdCBjYW4ndCBiZSBmb3VuZCBpdCdsbCByZXR1cm4gLTEuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9iaW5hcnktc2VhcmNoXG4gKlxuICogQHBhcmFtIHtBcnJheTwqPn0gaGF5c3RhY2sgSXRlbXMgdG8gc2VhcmNoIHRocm91Z2guXG4gKiBAcGFyYW0geyp9IG5lZWRsZSBUaGUgaXRlbSB0byBsb29rIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb249fSBvcHRfY29tcGFyYXRvciBDb21wYXJhdG9yIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQsIC0xIGlmIG5vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeVNlYXJjaChoYXlzdGFjaywgbmVlZGxlLCBvcHRfY29tcGFyYXRvcikge1xuICB2YXIgbWlkLCBjbXA7XG4gIHZhciBjb21wYXJhdG9yID0gb3B0X2NvbXBhcmF0b3IgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgdmFyIGxvdyA9IDA7XG4gIHZhciBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICB2YXIgZm91bmQgPSBmYWxzZTtcblxuICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgIC8qIE5vdGUgdGhhdCBcIihsb3cgKyBoaWdoKSA+Pj4gMVwiIG1heSBvdmVyZmxvdywgYW5kIHJlc3VsdHMgaW4gYSB0eXBlY2FzdFxuICAgICAqIHRvIGRvdWJsZSAod2hpY2ggZ2l2ZXMgdGhlIHdyb25nIHJlc3VsdHMpLiAqL1xuICAgIG1pZCA9IGxvdyArIChoaWdoIC0gbG93ID4+IDEpO1xuICAgIGNtcCA9ICtjb21wYXJhdG9yKGhheXN0YWNrW21pZF0sIG5lZWRsZSk7XG5cbiAgICBpZiAoY21wIDwgMC4wKSB7IC8qIFRvbyBsb3cuICovXG4gICAgICBsb3cgPSBtaWQgKyAxO1xuXG4gICAgfSBlbHNlIHsgLyogS2V5IGZvdW5kIG9yIHRvbyBoaWdoICovXG4gICAgICBoaWdoID0gbWlkO1xuICAgICAgZm91bmQgPSAhY21wO1xuICAgIH1cbiAgfVxuXG4gIC8qIEtleSBub3QgZm91bmQuICovXG4gIHJldHVybiBmb3VuZCA/IGxvdyA6IH5sb3c7XG59XG5cblxuLyoqXG4gKiBDb21wYXJlIGZ1bmN0aW9uIGZvciBhcnJheSBzb3J0IHRoYXQgaXMgc2FmZSBmb3IgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gYSBUaGUgZmlyc3Qgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHBhcmFtIHsqfSBiIFRoZSBzZWNvbmQgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHJldHVybiB7bnVtYmVyfSBBIG5lZ2F0aXZlIG51bWJlciwgemVybywgb3IgYSBwb3NpdGl2ZSBudW1iZXIgYXMgdGhlIGZpcnN0XG4gKiAgICAgYXJndW1lbnQgaXMgbGVzcyB0aGFuLCBlcXVhbCB0bywgb3IgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGdpdmVuIG9iamVjdC5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHsqfSBvYmogVGhlIG9iamVjdCBmb3Igd2hpY2ggdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgaW4gdGhlIGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZXMoYXJyLCBvYmopIHtcbiAgcmV0dXJuIGFyci5pbmRleE9mKG9iaikgPj0gMDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIDAgbWVhbnMgcmV0dXJuIHRoZSBuZWFyZXN0LCA+IDBcbiAqICAgIG1lYW5zIHJldHVybiB0aGUgbGFyZ2VzdCBuZWFyZXN0LCA8IDAgbWVhbnMgcmV0dXJuIHRoZVxuICogICAgc21hbGxlc3QgbmVhcmVzdC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJGaW5kTmVhcmVzdChhcnIsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gIHZhciBuID0gYXJyLmxlbmd0aDtcbiAgaWYgKGFyclswXSA8PSB0YXJnZXQpIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIGlmICh0YXJnZXQgPD0gYXJyW24gLSAxXSkge1xuICAgIHJldHVybiBuIC0gMTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaTtcbiAgICBpZiAoZGlyZWN0aW9uID4gMCkge1xuICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPD0gdGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoYXJyW2ldID09IHRhcmdldCkge1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2UgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICAgIGlmIChhcnJbaSAtIDFdIC0gdGFyZ2V0IDwgdGFyZ2V0IC0gYXJyW2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbiAtIDE7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBBcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbiBpbmRleC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV2ZXJzZVN1YkFycmF5KGFyciwgYmVnaW4sIGVuZCkge1xuICB3aGlsZSAoYmVnaW4gPCBlbmQpIHtcbiAgICB2YXIgdG1wID0gYXJyW2JlZ2luXTtcbiAgICBhcnJbYmVnaW5dID0gYXJyW2VuZF07XG4gICAgYXJyW2VuZF0gPSB0bXA7XG4gICAgKytiZWdpbjtcbiAgICAtLWVuZDtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHshQXJyYXk8VkFMVUU+fFZBTFVFfSBkYXRhIFRoZSBlbGVtZW50cyBvciBhcnJheXMgb2YgZWxlbWVudHMgdG8gYWRkIHRvIGFyci5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGFyciwgZGF0YSkge1xuICB2YXIgZXh0ZW5zaW9uID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG4gIHZhciBsZW5ndGggPSBleHRlbnNpb24ubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgYXJyW2Fyci5sZW5ndGhdID0gZXh0ZW5zaW9uW2ldO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge1ZBTFVFfSBvYmogVGhlIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZWxlbWVudCB3YXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5pbmRleE9mKG9iaik7XG4gIHZhciBmb3VuZCA9IGkgPiAtMTtcbiAgaWYgKGZvdW5kKSB7XG4gICAgYXJyLnNwbGljZShpLCAxKTtcbiAgfVxuICByZXR1cm4gZm91bmQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFZBTFVFLCBudW1iZXIsID8pIDogYm9vbGVhbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29tcGFyZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7VkFMVUV8bnVsbH0gVGhlIGVsZW1lbnQgZm91bmQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyLCBmdW5jKSB7XG4gIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoID4+PiAwO1xuICB2YXIgdmFsdWU7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhbHVlID0gYXJyW2ldO1xuICAgIGlmIChmdW5jKHZhbHVlLCBpLCBhcnIpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMSBUaGUgZmlyc3QgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjIgVGhlIHNlY29uZCBhcnJheSB0byBjb21wYXJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHdvIGFycmF5cyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYXJyMSwgYXJyMikge1xuICB2YXIgbGVuMSA9IGFycjEubGVuZ3RoO1xuICBpZiAobGVuMSAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4xOyBpKyspIHtcbiAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXZlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoO1xuICB2YXIgdG1wID0gQXJyYXkoYXJyLmxlbmd0aCk7XG4gIHZhciBpO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0bXBbaV0gPSB7aW5kZXg6IGksIHZhbHVlOiBhcnJbaV19O1xuICB9XG4gIHRtcC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gY29tcGFyZUZuYyhhLnZhbHVlLCBiLnZhbHVlKSB8fCBhLmluZGV4IC0gYi5pbmRleDtcbiAgfSk7XG4gIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbaV0gPSB0bXBbaV0udmFsdWU7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyLCBmdW5jKSB7XG4gIHZhciBpbmRleDtcbiAgdmFyIGZvdW5kID0gIWFyci5ldmVyeShmdW5jdGlvbihlbCwgaWR4KSB7XG4gICAgaW5kZXggPSBpZHg7XG4gICAgcmV0dXJuICFmdW5jKGVsLCBpZHgsIGFycik7XG4gIH0pO1xuICByZXR1cm4gZm91bmQgPyBpbmRleCA6IC0xO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbj19IG9wdF9mdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc3RyaWN0IFN0cmljdGx5IHNvcnRlZCAoZGVmYXVsdCBmYWxzZSkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NvcnRlZChhcnIsIG9wdF9mdW5jLCBvcHRfc3RyaWN0KSB7XG4gIHZhciBjb21wYXJlID0gb3B0X2Z1bmMgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgcmV0dXJuIGFyci5ldmVyeShmdW5jdGlvbihjdXJyZW50VmFsLCBpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciByZXMgPSBjb21wYXJlKGFycltpbmRleCAtIDFdLCBjdXJyZW50VmFsKTtcbiAgICByZXR1cm4gIShyZXMgPiAwIHx8IG9wdF9zdHJpY3QgJiYgcmVzID09PSAwKTtcbiAgfSk7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL1RvdWNoU291cmNlXG4gKi9cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvUG9pbnRlckV2ZW50c1xuXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTMgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmVcbi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXJcbi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGVcbi8vIGRpc3RyaWJ1dGlvbi5cbi8vICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQge3JlbW92ZX0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IEV2ZW50U291cmNlIGZyb20gJy4vRXZlbnRTb3VyY2UuanMnO1xuaW1wb3J0IHtQT0lOVEVSX0lEfSBmcm9tICcuL01vdXNlU291cmNlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBDTElDS19DT1VOVF9USU1FT1VUID0gMjAwO1xuXG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBQT0lOVEVSX1RZUEUgPSAndG91Y2gnO1xuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGB0b3VjaHN0YXJ0YCwgdHJpZ2dlcnMgYHBvaW50ZXJvdmVyYCxcbiAqIGBwb2ludGVyZW50ZXJgIGFuZCBgcG9pbnRlcmRvd25gIGV2ZW50cy5cbiAqXG4gKiBAdGhpcyB7VG91Y2hTb3VyY2V9XG4gKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiB0b3VjaHN0YXJ0KGluRXZlbnQpIHtcbiAgdGhpcy52YWN1dW1Ub3VjaGVzXyhpbkV2ZW50KTtcbiAgdGhpcy5zZXRQcmltYXJ5VG91Y2hfKGluRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0pO1xuICB0aGlzLmRlZHVwU3ludGhNb3VzZV8oaW5FdmVudCk7XG4gIHRoaXMuY2xpY2tDb3VudF8rKztcbiAgdGhpcy5wcm9jZXNzVG91Y2hlc18oaW5FdmVudCwgdGhpcy5vdmVyRG93bl8pO1xufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGB0b3VjaG1vdmVgLlxuICpcbiAqIEB0aGlzIHtUb3VjaFNvdXJjZX1cbiAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHRvdWNobW92ZShpbkV2ZW50KSB7XG4gIHRoaXMucHJvY2Vzc1RvdWNoZXNfKGluRXZlbnQsIHRoaXMubW92ZU92ZXJPdXRfKTtcbn1cblxuLyoqXG4gKiBIYW5kbGVyIGZvciBgdG91Y2hlbmRgLCB0cmlnZ2VycyBgcG9pbnRlcnVwYCxcbiAqIGBwb2ludGVyb3V0YCBhbmQgYHBvaW50ZXJsZWF2ZWAgZXZlbnRzLlxuICpcbiAqIEB0aGlzIHtUb3VjaFNvdXJjZX1cbiAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUaGUgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHRvdWNoZW5kKGluRXZlbnQpIHtcbiAgdGhpcy5kZWR1cFN5bnRoTW91c2VfKGluRXZlbnQpO1xuICB0aGlzLnByb2Nlc3NUb3VjaGVzXyhpbkV2ZW50LCB0aGlzLnVwT3V0Xyk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYHRvdWNoY2FuY2VsYCwgdHJpZ2dlcnMgYHBvaW50ZXJjYW5jZWxgLFxuICogYHBvaW50ZXJvdXRgIGFuZCBgcG9pbnRlcmxlYXZlYCBldmVudHMuXG4gKlxuICogQHRoaXMge1RvdWNoU291cmNlfVxuICogQHBhcmFtIHtUb3VjaEV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gdG91Y2hjYW5jZWwoaW5FdmVudCkge1xuICB0aGlzLnByb2Nlc3NUb3VjaGVzXyhpbkV2ZW50LCB0aGlzLmNhbmNlbE91dF8pO1xufVxuXG5cbnZhciBUb3VjaFNvdXJjZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50U291cmNlKSB7XG4gIGZ1bmN0aW9uIFRvdWNoU291cmNlKGRpc3BhdGNoZXIsIG1vdXNlU291cmNlKSB7XG4gICAgdmFyIG1hcHBpbmcgPSB7XG4gICAgICAndG91Y2hzdGFydCc6IHRvdWNoc3RhcnQsXG4gICAgICAndG91Y2htb3ZlJzogdG91Y2htb3ZlLFxuICAgICAgJ3RvdWNoZW5kJzogdG91Y2hlbmQsXG4gICAgICAndG91Y2hjYW5jZWwnOiB0b3VjaGNhbmNlbFxuICAgIH07XG4gICAgRXZlbnRTb3VyY2UuY2FsbCh0aGlzLCBkaXNwYXRjaGVyLCBtYXBwaW5nKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRXZlbnR8T2JqZWN0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ZXJNYXAgPSBkaXNwYXRjaGVyLnBvaW50ZXJNYXA7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Nb3VzZVNvdXJjZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubW91c2VTb3VyY2UgPSBtb3VzZVNvdXJjZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5maXJzdFRvdWNoSWRfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuY2xpY2tDb3VudF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P31cbiAgICAgKi9cbiAgICB0aGlzLnJlc2V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogTW91c2UgZXZlbnQgdGltZW91dDogVGhpcyBzaG91bGQgYmUgbG9uZyBlbm91Z2ggdG9cbiAgICAgKiBpZ25vcmUgY29tcGF0IG1vdXNlIGV2ZW50cyBtYWRlIGJ5IHRvdWNoLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlZHVwVGltZW91dF8gPSAyNTAwO1xuICB9XG5cbiAgaWYgKCBFdmVudFNvdXJjZSApIFRvdWNoU291cmNlLl9fcHJvdG9fXyA9IEV2ZW50U291cmNlO1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudFNvdXJjZSAmJiBFdmVudFNvdXJjZS5wcm90b3R5cGUgKTtcbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVG91Y2hTb3VyY2U7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2h9IGluVG91Y2ggVGhlIGluIHRvdWNoLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLCBpZiB0aGlzIGlzIHRoZSBwcmltYXJ5IHRvdWNoLlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLmlzUHJpbWFyeVRvdWNoXyA9IGZ1bmN0aW9uIGlzUHJpbWFyeVRvdWNoXyAoaW5Ub3VjaCkge1xuICAgIHJldHVybiB0aGlzLmZpcnN0VG91Y2hJZF8gPT09IGluVG91Y2guaWRlbnRpZmllcjtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHByaW1hcnkgdG91Y2ggaWYgdGhlcmUgYXJlIG5vIHBvaW50ZXJzLCBvciB0aGUgb25seSBwb2ludGVyIGlzIHRoZSBtb3VzZS5cbiAgICogQHBhcmFtIHtUb3VjaH0gaW5Ub3VjaCBUaGUgaW4gdG91Y2guXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuc2V0UHJpbWFyeVRvdWNoXyA9IGZ1bmN0aW9uIHNldFByaW1hcnlUb3VjaF8gKGluVG91Y2gpIHtcbiAgICB2YXIgY291bnQgPSBPYmplY3Qua2V5cyh0aGlzLnBvaW50ZXJNYXApLmxlbmd0aDtcbiAgICBpZiAoY291bnQgPT09IDAgfHwgKGNvdW50ID09PSAxICYmIFBPSU5URVJfSUQudG9TdHJpbmcoKSBpbiB0aGlzLnBvaW50ZXJNYXApKSB7XG4gICAgICB0aGlzLmZpcnN0VG91Y2hJZF8gPSBpblRvdWNoLmlkZW50aWZpZXI7XG4gICAgICB0aGlzLmNhbmNlbFJlc2V0Q2xpY2tDb3VudF8oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBpblBvaW50ZXIgVGhlIGluIHBvaW50ZXIgb2JqZWN0LlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLnJlbW92ZVByaW1hcnlQb2ludGVyXyA9IGZ1bmN0aW9uIHJlbW92ZVByaW1hcnlQb2ludGVyXyAoaW5Qb2ludGVyKSB7XG4gICAgaWYgKGluUG9pbnRlci5pc1ByaW1hcnkpIHtcbiAgICAgIHRoaXMuZmlyc3RUb3VjaElkXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucmVzZXRDbGlja0NvdW50XygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5yZXNldENsaWNrQ291bnRfID0gZnVuY3Rpb24gcmVzZXRDbGlja0NvdW50XyAoKSB7XG4gICAgdGhpcy5yZXNldElkXyA9IHNldFRpbWVvdXQoXG4gICAgICB0aGlzLnJlc2V0Q2xpY2tDb3VudEhhbmRsZXJfLmJpbmQodGhpcyksXG4gICAgICBDTElDS19DT1VOVF9USU1FT1VUKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5yZXNldENsaWNrQ291bnRIYW5kbGVyXyA9IGZ1bmN0aW9uIHJlc2V0Q2xpY2tDb3VudEhhbmRsZXJfICgpIHtcbiAgICB0aGlzLmNsaWNrQ291bnRfID0gMDtcbiAgICB0aGlzLnJlc2V0SWRfID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLmNhbmNlbFJlc2V0Q2xpY2tDb3VudF8gPSBmdW5jdGlvbiBjYW5jZWxSZXNldENsaWNrQ291bnRfICgpIHtcbiAgICBpZiAodGhpcy5yZXNldElkXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNldElkXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50XG4gICAqIEBwYXJhbSB7VG91Y2h9IGluVG91Y2ggVG91Y2ggZXZlbnRcbiAgICogQHJldHVybiB7UG9pbnRlckV2ZW50fSBBIHBvaW50ZXIgb2JqZWN0LlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLnRvdWNoVG9Qb2ludGVyXyA9IGZ1bmN0aW9uIHRvdWNoVG9Qb2ludGVyXyAoYnJvd3NlckV2ZW50LCBpblRvdWNoKSB7XG4gICAgdmFyIGUgPSB0aGlzLmRpc3BhdGNoZXIuY2xvbmVFdmVudChicm93c2VyRXZlbnQsIGluVG91Y2gpO1xuICAgIC8vIFNwZWMgc3BlY2lmaWVzIHRoYXQgcG9pbnRlcklkIDEgaXMgcmVzZXJ2ZWQgZm9yIE1vdXNlLlxuICAgIC8vIFRvdWNoIGlkZW50aWZpZXJzIGNhbiBzdGFydCBhdCAwLlxuICAgIC8vIEFkZCAyIHRvIHRoZSB0b3VjaCBpZGVudGlmaWVyIGZvciBjb21wYXRpYmlsaXR5LlxuICAgIGUucG9pbnRlcklkID0gaW5Ub3VjaC5pZGVudGlmaWVyICsgMjtcbiAgICAvLyBUT0RPOiBjaGVjayBpZiB0aGlzIGlzIG5lY2Vzc2FyeT9cbiAgICAvL2UudGFyZ2V0ID0gZmluZFRhcmdldChlKTtcbiAgICBlLmJ1YmJsZXMgPSB0cnVlO1xuICAgIGUuY2FuY2VsYWJsZSA9IHRydWU7XG4gICAgZS5kZXRhaWwgPSB0aGlzLmNsaWNrQ291bnRfO1xuICAgIGUuYnV0dG9uID0gMDtcbiAgICBlLmJ1dHRvbnMgPSAxO1xuICAgIGUud2lkdGggPSBpblRvdWNoLnJhZGl1c1ggfHwgMDtcbiAgICBlLmhlaWdodCA9IGluVG91Y2gucmFkaXVzWSB8fCAwO1xuICAgIGUucHJlc3N1cmUgPSBpblRvdWNoLmZvcmNlIHx8IDAuNTtcbiAgICBlLmlzUHJpbWFyeSA9IHRoaXMuaXNQcmltYXJ5VG91Y2hfKGluVG91Y2gpO1xuICAgIGUucG9pbnRlclR5cGUgPSBQT0lOVEVSX1RZUEU7XG5cbiAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgcHJvcGVydGllcyB0aGF0IGFyZSBkaWZmZXJlbnQgZm9yXG4gICAgLy8gZWFjaCBgVG91Y2hgIG9iamVjdCBhcmUgbm90IGNvcGllZCBmcm9tIHRoZSBCcm93c2VyRXZlbnQgb2JqZWN0XG4gICAgZS5jbGllbnRYID0gaW5Ub3VjaC5jbGllbnRYO1xuICAgIGUuY2xpZW50WSA9IGluVG91Y2guY2xpZW50WTtcbiAgICBlLnNjcmVlblggPSBpblRvdWNoLnNjcmVlblg7XG4gICAgZS5zY3JlZW5ZID0gaW5Ub3VjaC5zY3JlZW5ZO1xuXG4gICAgcmV0dXJuIGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUb3VjaCBldmVudFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFRvdWNoRXZlbnQsIFBvaW50ZXJFdmVudCl9IGluRnVuY3Rpb24gSW4gZnVuY3Rpb24uXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUucHJvY2Vzc1RvdWNoZXNfID0gZnVuY3Rpb24gcHJvY2Vzc1RvdWNoZXNfIChpbkV2ZW50LCBpbkZ1bmN0aW9uKSB7XG4gICAgdmFyIHRvdWNoZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpbkV2ZW50LmNoYW5nZWRUb3VjaGVzKTtcbiAgICB2YXIgY291bnQgPSB0b3VjaGVzLmxlbmd0aDtcbiAgICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICAgIGluRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICB2YXIgcG9pbnRlciA9IHRoaXMudG91Y2hUb1BvaW50ZXJfKGluRXZlbnQsIHRvdWNoZXNbaV0pO1xuICAgICAgLy8gZm9yd2FyZCB0b3VjaCBwcmV2ZW50RGVmYXVsdHNcbiAgICAgIHBvaW50ZXIucHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdDtcbiAgICAgIGluRnVuY3Rpb24uY2FsbCh0aGlzLCBpbkV2ZW50LCBwb2ludGVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hMaXN0fSB0b3VjaExpc3QgVGhlIHRvdWNoIGxpc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWFyY2hJZCBTZWFyY2ggaWRlbnRpZmllci5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSwgaWYgdGhlIGBUb3VjaGAgd2l0aCB0aGUgZ2l2ZW4gaWQgaXMgaW4gdGhlIGxpc3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuZmluZFRvdWNoXyA9IGZ1bmN0aW9uIGZpbmRUb3VjaF8gKHRvdWNoTGlzdCwgc2VhcmNoSWQpIHtcbiAgICB2YXIgbCA9IHRvdWNoTGlzdC5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciB0b3VjaCA9IHRvdWNoTGlzdFtpXTtcbiAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSBzZWFyY2hJZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbiBzb21lIGluc3RhbmNlcywgYSB0b3VjaHN0YXJ0IGNhbiBoYXBwZW4gd2l0aG91dCBhIHRvdWNoZW5kLiBUaGlzXG4gICAqIGxlYXZlcyB0aGUgcG9pbnRlcm1hcCBpbiBhIGJyb2tlbiBzdGF0ZS5cbiAgICogVGhlcmVmb3JlLCBvbiBldmVyeSB0b3VjaHN0YXJ0LCB3ZSByZW1vdmUgdGhlIHRvdWNoZXMgdGhhdCBkaWQgbm90IGZpcmUgYVxuICAgKiB0b3VjaGVuZCBldmVudC5cbiAgICogVG8ga2VlcCBzdGF0ZSBnbG9iYWxseSBjb25zaXN0ZW50LCB3ZSBmaXJlIGEgcG9pbnRlcmNhbmNlbCBmb3JcbiAgICogdGhpcyBcImFiYW5kb25lZFwiIHRvdWNoXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUudmFjdXVtVG91Y2hlc18gPSBmdW5jdGlvbiB2YWN1dW1Ub3VjaGVzXyAoaW5FdmVudCkge1xuICAgIHZhciB0b3VjaExpc3QgPSBpbkV2ZW50LnRvdWNoZXM7XG4gICAgLy8gcG9pbnRlck1hcC5nZXRDb3VudCgpIHNob3VsZCBiZSA8IHRvdWNoTGlzdC5sZW5ndGggaGVyZSxcbiAgICAvLyBhcyB0aGUgdG91Y2hzdGFydCBoYXMgbm90IGJlZW4gcHJvY2Vzc2VkIHlldC5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucG9pbnRlck1hcCk7XG4gICAgdmFyIGNvdW50ID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID49IHRvdWNoTGlzdC5sZW5ndGgpIHtcbiAgICAgIHZhciBkID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IE51bWJlcihrZXlzW2ldKTtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5wb2ludGVyTWFwW2tleV07XG4gICAgICAgIC8vIE5ldmVyIHJlbW92ZSBwb2ludGVySWQgPT0gMSwgd2hpY2ggaXMgbW91c2UuXG4gICAgICAgIC8vIFRvdWNoIGlkZW50aWZpZXJzIGFyZSAyIHNtYWxsZXIgdGhhbiB0aGVpciBwb2ludGVySWQsIHdoaWNoIGlzIHRoZVxuICAgICAgICAvLyBpbmRleCBpbiBwb2ludGVybWFwLlxuICAgICAgICBpZiAoa2V5ICE9IFBPSU5URVJfSUQgJiYgIXRoaXMuZmluZFRvdWNoXyh0b3VjaExpc3QsIGtleSAtIDIpKSB7XG4gICAgICAgICAgZC5wdXNoKHZhbHVlLm91dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGQubGVuZ3RoOyArK2kkMSkge1xuICAgICAgICB0aGlzLmNhbmNlbE91dF8oaW5FdmVudCwgZFtpJDFdKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gYnJvd3NlckV2ZW50IFRoZSBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGluUG9pbnRlciBUaGUgaW4gcG9pbnRlciBvYmplY3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUub3ZlckRvd25fID0gZnVuY3Rpb24gb3ZlckRvd25fIChicm93c2VyRXZlbnQsIGluUG9pbnRlcikge1xuICAgIHRoaXMucG9pbnRlck1hcFtpblBvaW50ZXIucG9pbnRlcklkXSA9IHtcbiAgICAgIHRhcmdldDogaW5Qb2ludGVyLnRhcmdldCxcbiAgICAgIG91dDogaW5Qb2ludGVyLFxuICAgICAgb3V0VGFyZ2V0OiBpblBvaW50ZXIudGFyZ2V0XG4gICAgfTtcbiAgICB0aGlzLmRpc3BhdGNoZXIub3ZlcihpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmVudGVyKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoZXIuZG93bihpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gYnJvd3NlckV2ZW50IFRoZSBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGluUG9pbnRlciBUaGUgaW4gcG9pbnRlci5cbiAgICovXG4gIFRvdWNoU291cmNlLnByb3RvdHlwZS5tb3ZlT3Zlck91dF8gPSBmdW5jdGlvbiBtb3ZlT3Zlck91dF8gKGJyb3dzZXJFdmVudCwgaW5Qb2ludGVyKSB7XG4gICAgdmFyIGV2ZW50ID0gaW5Qb2ludGVyO1xuICAgIHZhciBwb2ludGVyID0gdGhpcy5wb2ludGVyTWFwW2V2ZW50LnBvaW50ZXJJZF07XG4gICAgLy8gYSBmaW5nZXIgZHJpZnRlZCBvZmYgdGhlIHNjcmVlbiwgaWdub3JlIGl0XG4gICAgaWYgKCFwb2ludGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvdXRFdmVudCA9IHBvaW50ZXIub3V0O1xuICAgIHZhciBvdXRUYXJnZXQgPSBwb2ludGVyLm91dFRhcmdldDtcbiAgICB0aGlzLmRpc3BhdGNoZXIubW92ZShldmVudCwgYnJvd3NlckV2ZW50KTtcbiAgICBpZiAob3V0RXZlbnQgJiYgb3V0VGFyZ2V0ICE9PSBldmVudC50YXJnZXQpIHtcbiAgICAgIG91dEV2ZW50LnJlbGF0ZWRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGV2ZW50KS5yZWxhdGVkVGFyZ2V0ID0gb3V0VGFyZ2V0O1xuICAgICAgLy8gcmVjb3ZlciBmcm9tIHJldGFyZ2V0aW5nIGJ5IHNoYWRvd1xuICAgICAgb3V0RXZlbnQudGFyZ2V0ID0gb3V0VGFyZ2V0O1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoZXIubGVhdmVPdXQob3V0RXZlbnQsIGJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlci5lbnRlck92ZXIoZXZlbnQsIGJyb3dzZXJFdmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjbGVhbiB1cCBjYXNlIHdoZW4gZmluZ2VyIGxlYXZlcyB0aGUgc2NyZWVuXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAoZXZlbnQpLnRhcmdldCA9IG91dFRhcmdldDtcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovIChldmVudCkucmVsYXRlZFRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FuY2VsT3V0Xyhicm93c2VyRXZlbnQsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcG9pbnRlci5vdXQgPSBldmVudDtcbiAgICBwb2ludGVyLm91dFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBicm93c2VyRXZlbnQgQW4gZXZlbnQuXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBpblBvaW50ZXIgVGhlIGluUG9pbnRlciBvYmplY3QuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUudXBPdXRfID0gZnVuY3Rpb24gdXBPdXRfIChicm93c2VyRXZlbnQsIGluUG9pbnRlcikge1xuICAgIHRoaXMuZGlzcGF0Y2hlci51cChpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaGVyLm91dChpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmxlYXZlKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmNsZWFuVXBQb2ludGVyXyhpblBvaW50ZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGJyb3dzZXJFdmVudCBUaGUgZXZlbnQuXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBpblBvaW50ZXIgVGhlIGluIHBvaW50ZXIuXG4gICAqL1xuICBUb3VjaFNvdXJjZS5wcm90b3R5cGUuY2FuY2VsT3V0XyA9IGZ1bmN0aW9uIGNhbmNlbE91dF8gKGJyb3dzZXJFdmVudCwgaW5Qb2ludGVyKSB7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmNhbmNlbChpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaGVyLm91dChpblBvaW50ZXIsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmxlYXZlKGluUG9pbnRlciwgYnJvd3NlckV2ZW50KTtcbiAgICB0aGlzLmNsZWFuVXBQb2ludGVyXyhpblBvaW50ZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gaW5Qb2ludGVyIFRoZSBpblBvaW50ZXIgb2JqZWN0LlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLmNsZWFuVXBQb2ludGVyXyA9IGZ1bmN0aW9uIGNsZWFuVXBQb2ludGVyXyAoaW5Qb2ludGVyKSB7XG4gICAgZGVsZXRlIHRoaXMucG9pbnRlck1hcFtpblBvaW50ZXIucG9pbnRlcklkXTtcbiAgICB0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyXyhpblBvaW50ZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmV2ZW50IHN5bnRoIG1vdXNlIGV2ZW50cyBmcm9tIGNyZWF0aW5nIHBvaW50ZXIgZXZlbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICAgKi9cbiAgVG91Y2hTb3VyY2UucHJvdG90eXBlLmRlZHVwU3ludGhNb3VzZV8gPSBmdW5jdGlvbiBkZWR1cFN5bnRoTW91c2VfIChpbkV2ZW50KSB7XG4gICAgdmFyIGx0cyA9IHRoaXMubW91c2VTb3VyY2UubGFzdFRvdWNoZXM7XG4gICAgdmFyIHQgPSBpbkV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIC8vIG9ubHkgdGhlIHByaW1hcnkgZmluZ2VyIHdpbGwgc3ludGggbW91c2UgZXZlbnRzXG4gICAgaWYgKHRoaXMuaXNQcmltYXJ5VG91Y2hfKHQpKSB7XG4gICAgICAvLyByZW1lbWJlciB4L3kgb2YgbGFzdCB0b3VjaFxuICAgICAgdmFyIGx0ID0gW3QuY2xpZW50WCwgdC5jbGllbnRZXTtcbiAgICAgIGx0cy5wdXNoKGx0KTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRvdWNoIGFmdGVyIHRpbWVvdXRcbiAgICAgICAgcmVtb3ZlKGx0cywgbHQpO1xuICAgICAgfSwgdGhpcy5kZWR1cFRpbWVvdXRfKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRvdWNoU291cmNlO1xufShFdmVudFNvdXJjZSkpO1xuXG5leHBvcnQgZGVmYXVsdCBUb3VjaFNvdXJjZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VG91Y2hTb3VyY2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvUG9pbnRlckV2ZW50SGFuZGxlclxuICovXG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL1BvaW50ZXJFdmVudHNcblxuLy8gQ29weXJpZ2h0IChjKSAyMDEzIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vL1xuLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4vLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlXG4vLyBtZXQ6XG4vL1xuLy8gKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy8gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXG4vLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyXG4vLyBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlXG4vLyBkaXN0cmlidXRpb24uXG4vLyAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHNcbi8vIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4vLyB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuLy9cbi8vIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlNcbi8vIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUlxuLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFRcbi8vIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxuLy8gU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsXG4vLyBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTllcbi8vIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuLy8gT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cblxuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHtQT0lOVEVSLCBNU1BPSU5URVIsIFRPVUNIfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1vdXNlU291cmNlLCB7cHJlcGFyZUV2ZW50IGFzIHByZXBhcmVNb3VzZUV2ZW50fSBmcm9tICcuL01vdXNlU291cmNlLmpzJztcbmltcG9ydCBNc1NvdXJjZSBmcm9tICcuL01zU291cmNlLmpzJztcbmltcG9ydCBOYXRpdmVTb3VyY2UgZnJvbSAnLi9OYXRpdmVTb3VyY2UuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudCBmcm9tICcuL1BvaW50ZXJFdmVudC5qcyc7XG5pbXBvcnQgVG91Y2hTb3VyY2UgZnJvbSAnLi9Ub3VjaFNvdXJjZS5qcyc7XG5cblxuLyoqXG4gKiBQcm9wZXJ0aWVzIHRvIGNvcHkgd2hlbiBjbG9uaW5nIGFuIGV2ZW50LCB3aXRoIGRlZmF1bHQgdmFsdWVzLlxuICogQHR5cGUge0FycmF5PEFycmF5Pn1cbiAqL1xudmFyIENMT05FX1BST1BTID0gW1xuICAvLyBNb3VzZUV2ZW50XG4gIFsnYnViYmxlcycsIGZhbHNlXSxcbiAgWydjYW5jZWxhYmxlJywgZmFsc2VdLFxuICBbJ3ZpZXcnLCBudWxsXSxcbiAgWydkZXRhaWwnLCBudWxsXSxcbiAgWydzY3JlZW5YJywgMF0sXG4gIFsnc2NyZWVuWScsIDBdLFxuICBbJ2NsaWVudFgnLCAwXSxcbiAgWydjbGllbnRZJywgMF0sXG4gIFsnY3RybEtleScsIGZhbHNlXSxcbiAgWydhbHRLZXknLCBmYWxzZV0sXG4gIFsnc2hpZnRLZXknLCBmYWxzZV0sXG4gIFsnbWV0YUtleScsIGZhbHNlXSxcbiAgWydidXR0b24nLCAwXSxcbiAgWydyZWxhdGVkVGFyZ2V0JywgbnVsbF0sXG4gIC8vIERPTSBMZXZlbCAzXG4gIFsnYnV0dG9ucycsIDBdLFxuICAvLyBQb2ludGVyRXZlbnRcbiAgWydwb2ludGVySWQnLCAwXSxcbiAgWyd3aWR0aCcsIDBdLFxuICBbJ2hlaWdodCcsIDBdLFxuICBbJ3ByZXNzdXJlJywgMF0sXG4gIFsndGlsdFgnLCAwXSxcbiAgWyd0aWx0WScsIDBdLFxuICBbJ3BvaW50ZXJUeXBlJywgJyddLFxuICBbJ2h3VGltZXN0YW1wJywgMF0sXG4gIFsnaXNQcmltYXJ5JywgZmFsc2VdLFxuICAvLyBldmVudCBpbnN0YW5jZVxuICBbJ3R5cGUnLCAnJ10sXG4gIFsndGFyZ2V0JywgbnVsbF0sXG4gIFsnY3VycmVudFRhcmdldCcsIG51bGxdLFxuICBbJ3doaWNoJywgMF1cbl07XG5cblxudmFyIFBvaW50ZXJFdmVudEhhbmRsZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBQb2ludGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQpIHtcbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7RWxlbWVudHxIVE1MRG9jdW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEV2ZW50fE9iamVjdD59XG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyTWFwID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgZnVuY3Rpb24oRXZlbnQpPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZXZlbnRNYXBfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9FdmVudFNvdXJjZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZXZlbnRTb3VyY2VMaXN0XyA9IFtdO1xuXG4gICAgdGhpcy5yZWdpc3RlclNvdXJjZXMoKTtcbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBQb2ludGVyRXZlbnRIYW5kbGVyLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50VGFyZ2V0ICYmIEV2ZW50VGFyZ2V0LnByb3RvdHlwZSApO1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBvaW50ZXJFdmVudEhhbmRsZXI7XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgZXZlbnQgc291cmNlcyAobW91c2UsIHRvdWNoIGFuZCBuYXRpdmUgcG9pbnRlcnMpXG4gICAqIHRoYXQgZ2VuZXJhdGUgcG9pbnRlciBldmVudHMuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWdpc3RlclNvdXJjZXMgPSBmdW5jdGlvbiByZWdpc3RlclNvdXJjZXMgKCkge1xuICAgIGlmIChQT0lOVEVSKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyU291cmNlKCduYXRpdmUnLCBuZXcgTmF0aXZlU291cmNlKHRoaXMpKTtcbiAgICB9IGVsc2UgaWYgKE1TUE9JTlRFUikge1xuICAgICAgdGhpcy5yZWdpc3RlclNvdXJjZSgnbXMnLCBuZXcgTXNTb3VyY2UodGhpcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbW91c2VTb3VyY2UgPSBuZXcgTW91c2VTb3VyY2UodGhpcyk7XG4gICAgICB0aGlzLnJlZ2lzdGVyU291cmNlKCdtb3VzZScsIG1vdXNlU291cmNlKTtcblxuICAgICAgaWYgKFRPVUNIKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJTb3VyY2UoJ3RvdWNoJywgbmV3IFRvdWNoU291cmNlKHRoaXMsIG1vdXNlU291cmNlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVnaXN0ZXIgZXZlbnRzIG9uIHRoZSB2aWV3cG9ydCBlbGVtZW50XG4gICAgdGhpcy5yZWdpc3Rlcl8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGEgbmV3IGV2ZW50IHNvdXJjZSB0aGF0IHdpbGwgZ2VuZXJhdGUgcG9pbnRlciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgbmFtZSBmb3IgdGhlIGV2ZW50IHNvdXJjZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnRTb3VyY2UuanNcIikuZGVmYXVsdH0gc291cmNlIFRoZSBzb3VyY2UgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWdpc3RlclNvdXJjZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyU291cmNlIChuYW1lLCBzb3VyY2UpIHtcbiAgICB2YXIgcyA9IHNvdXJjZTtcbiAgICB2YXIgbmV3RXZlbnRzID0gcy5nZXRFdmVudHMoKTtcblxuICAgIGlmIChuZXdFdmVudHMpIHtcbiAgICAgIG5ld0V2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBzLmdldEhhbmRsZXJGb3JFdmVudChlKTtcblxuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIHRoaXMuZXZlbnRNYXBfW2VdID0gaGFuZGxlci5iaW5kKHMpO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5ldmVudFNvdXJjZUxpc3RfLnB1c2gocyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIGV2ZW50cyBmb3IgYWxsIHJlZ2lzdGVyZWQgZXZlbnQgc291cmNlcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnJlZ2lzdGVyXyA9IGZ1bmN0aW9uIHJlZ2lzdGVyXyAoKSB7XG4gICAgdmFyIGwgPSB0aGlzLmV2ZW50U291cmNlTGlzdF8ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgZXZlbnRTb3VyY2UgPSB0aGlzLmV2ZW50U291cmNlTGlzdF9baV07XG4gICAgICB0aGlzLmFkZEV2ZW50c18oZXZlbnRTb3VyY2UuZ2V0RXZlbnRzKCkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCByZWdpc3RlcmVkIGV2ZW50cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnVucmVnaXN0ZXJfID0gZnVuY3Rpb24gdW5yZWdpc3Rlcl8gKCkge1xuICAgIHZhciBsID0gdGhpcy5ldmVudFNvdXJjZUxpc3RfLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGV2ZW50U291cmNlID0gdGhpcy5ldmVudFNvdXJjZUxpc3RfW2ldO1xuICAgICAgdGhpcy5yZW1vdmVFdmVudHNfKGV2ZW50U291cmNlLmdldEV2ZW50cygpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGxzIHRoZSByaWdodCBoYW5kbGVyIGZvciBhIG5ldyBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtFdmVudH0gaW5FdmVudCBCcm93c2VyIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZXZlbnRIYW5kbGVyXyA9IGZ1bmN0aW9uIGV2ZW50SGFuZGxlcl8gKGluRXZlbnQpIHtcbiAgICB2YXIgdHlwZSA9IGluRXZlbnQudHlwZTtcbiAgICB2YXIgaGFuZGxlciA9IHRoaXMuZXZlbnRNYXBfW3R5cGVdO1xuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICBoYW5kbGVyKGluRXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgbGlzdGVuZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnRzLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGV2ZW50cyBMaXN0IG9mIGV2ZW50cy5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmFkZEV2ZW50c18gPSBmdW5jdGlvbiBhZGRFdmVudHNfIChldmVudHMpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICAgIGxpc3Rlbih0aGlzLmVsZW1lbnRfLCBldmVudE5hbWUsIHRoaXMuZXZlbnRIYW5kbGVyXywgdGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICAvKipcbiAgICogVW5yZWdpc3RlciBsaXN0ZW5lcnMgZm9yIHRoZSBnaXZlbiBldmVudHMuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUucmVtb3ZlRXZlbnRzXyA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50c18gKGV2ZW50cykge1xuICAgIGV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgIHVubGlzdGVuKHRoaXMuZWxlbWVudF8sIGUsIHRoaXMuZXZlbnRIYW5kbGVyXywgdGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHNuYXBzaG90IG9mIGluRXZlbnQsIHdpdGggd3JpdGFibGUgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQnJvd3NlciBldmVudC5cbiAgICogQHBhcmFtIHtFdmVudHxUb3VjaH0gaW5FdmVudCBBbiBldmVudCB0aGF0IGNvbnRhaW5zXG4gICAqICAgIHByb3BlcnRpZXMgdG8gY29weS5cbiAgICogQHJldHVybiB7T2JqZWN0fSBBbiBvYmplY3QgY29udGFpbmluZyBzaGFsbG93IGNvcGllcyBvZlxuICAgKiAgICBgaW5FdmVudGAncyBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuY2xvbmVFdmVudCA9IGZ1bmN0aW9uIGNsb25lRXZlbnQgKGV2ZW50LCBpbkV2ZW50KSB7XG4gICAgdmFyIGV2ZW50Q29weSA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IENMT05FX1BST1BTLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBwID0gQ0xPTkVfUFJPUFNbaV1bMF07XG4gICAgICBldmVudENvcHlbcF0gPSBldmVudFtwXSB8fCBpbkV2ZW50W3BdIHx8IENMT05FX1BST1BTW2ldWzFdO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudENvcHk7XG4gIH07XG5cbiAgLy8gRVZFTlRTXG5cblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcmRvd24nIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmRvd24gPSBmdW5jdGlvbiBkb3duIChkYXRhLCBldmVudCkge1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIGRhdGEsIGV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcm1vdmUnIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiBtb3ZlIChkYXRhLCBldmVudCkge1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIGRhdGEsIGV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcnVwJyBldmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgUG9pbnRlciBldmVudCBkYXRhLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS51cCA9IGZ1bmN0aW9uIHVwIChkYXRhLCBldmVudCkge1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUlVQLCBkYXRhLCBldmVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgJ3BvaW50ZXJlbnRlcicgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbiBlbnRlciAoZGF0YSwgZXZlbnQpIHtcbiAgICBkYXRhLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICB0aGlzLmZpcmVFdmVudChQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJFTlRFUiwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVybGVhdmUnIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24gbGVhdmUgKGRhdGEsIGV2ZW50KSB7XG4gICAgZGF0YS5idWJibGVzID0gZmFsc2U7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTEVBVkUsIGRhdGEsIGV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcm92ZXInIGV2ZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLm92ZXIgPSBmdW5jdGlvbiBvdmVyIChkYXRhLCBldmVudCkge1xuICAgIGRhdGEuYnViYmxlcyA9IHRydWU7XG4gICAgdGhpcy5maXJlRXZlbnQoUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVST1ZFUiwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhICdwb2ludGVyb3V0JyBldmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgUG9pbnRlciBldmVudCBkYXRhLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vdXQgPSBmdW5jdGlvbiBvdXQgKGRhdGEsIGV2ZW50KSB7XG4gICAgZGF0YS5idWJibGVzID0gdHJ1ZTtcbiAgICB0aGlzLmZpcmVFdmVudChQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJPVVQsIGRhdGEsIGV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSAncG9pbnRlcmNhbmNlbCcgZXZlbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFBvaW50ZXIgZXZlbnQgZGF0YS5cbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50LlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsIChkYXRhLCBldmVudCkge1xuICAgIHRoaXMuZmlyZUV2ZW50KFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCwgZGF0YSwgZXZlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhIGNvbWJpbmF0aW9uIG9mICdwb2ludGVyb3V0JyBhbmQgJ3BvaW50ZXJsZWF2ZScgZXZlbnRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmxlYXZlT3V0ID0gZnVuY3Rpb24gbGVhdmVPdXQgKGRhdGEsIGV2ZW50KSB7XG4gICAgdGhpcy5vdXQoZGF0YSwgZXZlbnQpO1xuICAgIGlmICghdGhpcy5jb250YWluc18oZGF0YS50YXJnZXQsIGRhdGEucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgIHRoaXMubGVhdmUoZGF0YSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBjb21iaW5hdGlvbiBvZiAncG9pbnRlcm92ZXInIGFuZCAncG9pbnRlcmV2ZW50cycgZXZlbnRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVudGVyT3ZlciA9IGZ1bmN0aW9uIGVudGVyT3ZlciAoZGF0YSwgZXZlbnQpIHtcbiAgICB0aGlzLm92ZXIoZGF0YSwgZXZlbnQpO1xuICAgIGlmICghdGhpcy5jb250YWluc18oZGF0YS50YXJnZXQsIGRhdGEucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgIHRoaXMuZW50ZXIoZGF0YSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXIgVGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lZCBUaGUgY29udGFpbmVkIGVsZW1lbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgY29udGFpbmVyIGVsZW1lbnRcbiAgICogICBjb250YWlucyB0aGUgb3RoZXIgZWxlbWVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmNvbnRhaW5zXyA9IGZ1bmN0aW9uIGNvbnRhaW5zXyAoY29udGFpbmVyLCBjb250YWluZWQpIHtcbiAgICBpZiAoIWNvbnRhaW5lciB8fCAhY29udGFpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBjb250YWluZXIuY29udGFpbnMoY29udGFpbmVkKTtcbiAgfTtcblxuICAvLyBFVkVOVCBDUkVBVElPTiBBTkQgVFJBQ0tJTkdcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRXZlbnQgb2YgdHlwZSBgaW5UeXBlYCwgYmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGluXG4gICAqIGBkYXRhYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGluVHlwZSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHR5cGUgb2YgZXZlbnQgdG8gY3JlYXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBQb2ludGVyIGV2ZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICogQHJldHVybiB7UG9pbnRlckV2ZW50fSBBIFBvaW50ZXJFdmVudCBvZiB0eXBlIGBpblR5cGVgLlxuICAgKi9cbiAgUG9pbnRlckV2ZW50SGFuZGxlci5wcm90b3R5cGUubWFrZUV2ZW50ID0gZnVuY3Rpb24gbWFrZUV2ZW50IChpblR5cGUsIGRhdGEsIGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludGVyRXZlbnQoaW5UeXBlLCBldmVudCwgZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYW5kIGRpc3BhdGNoIGFuIGV2ZW50IGluIG9uZSBjYWxsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW5UeXBlIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdHlwZSBvZiBldmVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgUG9pbnRlciBldmVudCBkYXRhLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQuXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5maXJlRXZlbnQgPSBmdW5jdGlvbiBmaXJlRXZlbnQgKGluVHlwZSwgZGF0YSwgZXZlbnQpIHtcbiAgICB2YXIgZSA9IHRoaXMubWFrZUV2ZW50KGluVHlwZSwgZGF0YSwgZXZlbnQpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHBvaW50ZXIgZXZlbnQgZnJvbSBhIG5hdGl2ZSBwb2ludGVyIGV2ZW50XG4gICAqIGFuZCBkaXNwYXRjaGVzIHRoaXMgZXZlbnQuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEEgcGxhdGZvcm0gZXZlbnQgd2l0aCBhIHRhcmdldC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmZpcmVOYXRpdmVFdmVudCA9IGZ1bmN0aW9uIGZpcmVOYXRpdmVFdmVudCAoZXZlbnQpIHtcbiAgICB2YXIgZSA9IHRoaXMubWFrZUV2ZW50KGV2ZW50LnR5cGUsIGV2ZW50LCBldmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXcmFwIGEgbmF0aXZlIG1vdXNlIGV2ZW50IGludG8gYSBwb2ludGVyIGV2ZW50LlxuICAgKiBUaGlzIHByb3h5IG1ldGhvZCBpcyByZXF1aXJlZCBmb3IgdGhlIGxlZ2FjeSBJRSBzdXBwb3J0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIFRoZSBwb2ludGVyIGV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudC5cbiAgICogQHJldHVybiB7UG9pbnRlckV2ZW50fSBUaGUgd3JhcHBlZCBldmVudC5cbiAgICovXG4gIFBvaW50ZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLndyYXBNb3VzZUV2ZW50ID0gZnVuY3Rpb24gd3JhcE1vdXNlRXZlbnQgKGV2ZW50VHlwZSwgZXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2ZW50ID0gdGhpcy5tYWtlRXZlbnQoXG4gICAgICBldmVudFR5cGUsIHByZXBhcmVNb3VzZUV2ZW50KGV2ZW50LCB0aGlzKSwgZXZlbnQpO1xuICAgIHJldHVybiBwb2ludGVyRXZlbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2ludGVyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIHRoaXMudW5yZWdpc3Rlcl8oKTtcbiAgICBFdmVudFRhcmdldC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgcmV0dXJuIFBvaW50ZXJFdmVudEhhbmRsZXI7XG59KEV2ZW50VGFyZ2V0KSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBvaW50ZXJFdmVudEhhbmRsZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50ZXJFdmVudEhhbmRsZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudEhhbmRsZXJcbiAqL1xuaW1wb3J0IHtERVZJQ0VfUElYRUxfUkFUSU99IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlclBvaW50ZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50SGFuZGxlciBmcm9tICcuL3BvaW50ZXIvUG9pbnRlckV2ZW50SGFuZGxlci5qcyc7XG5cbnZhciBNYXBCcm93c2VyRXZlbnRIYW5kbGVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRUYXJnZXQpIHtcbiAgZnVuY3Rpb24gTWFwQnJvd3NlckV2ZW50SGFuZGxlcihtYXAsIG1vdmVUb2xlcmFuY2UpIHtcblxuICAgIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2lsbCBsaXN0ZW4gdG8gdGhlIHJlYWwgZXZlbnRzIG9uLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2FueX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gPSBtb3ZlVG9sZXJhbmNlID9cbiAgICAgIG1vdmVUb2xlcmFuY2UgKiBERVZJQ0VfUElYRUxfUkFUSU8gOiBERVZJQ0VfUElYRUxfUkFUSU87XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW9zdCByZWNlbnQgXCJkb3duXCIgdHlwZSBldmVudCAob3IgbnVsbCBpZiBub25lIGhhdmUgb2NjdXJyZWQpLlxuICAgICAqIFNldCBvbiBwb2ludGVyZG93bi5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kb3duXyA9IG51bGw7XG5cbiAgICB2YXIgZWxlbWVudCA9IHRoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PG51bWJlciwgYm9vbGVhbj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRUb3VjaGVzXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciB3aGljaCBnZW5lcmF0ZXMgcG9pbnRlciBldmVudHMgZm9yXG4gICAgICogdGhlIHZpZXdwb3J0IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50SGFuZGxlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlckV2ZW50SGFuZGxlcl8gPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcihlbGVtZW50KTtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgd2hpY2ggZ2VuZXJhdGVzIHBvaW50ZXIgZXZlbnRzIGZvclxuICAgICAqIHRoZSBkb2N1bWVudCAodXNlZCB3aGVuIGRyYWdnaW5nKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnRIYW5kbGVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5XyA9IGxpc3Rlbih0aGlzLnBvaW50ZXJFdmVudEhhbmRsZXJfLFxuICAgICAgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTixcbiAgICAgIHRoaXMuaGFuZGxlUG9pbnRlckRvd25fLCB0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfID0gbGlzdGVuKHRoaXMucG9pbnRlckV2ZW50SGFuZGxlcl8sXG4gICAgICBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLFxuICAgICAgdGhpcy5yZWxheUV2ZW50XywgdGhpcyk7XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50VGFyZ2V0ICYmIEV2ZW50VGFyZ2V0LnByb3RvdHlwZSApO1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVtdWxhdGVDbGlja18gPSBmdW5jdGlvbiBlbXVsYXRlQ2xpY2tfIChwb2ludGVyRXZlbnQpIHtcbiAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgIGlmICh0aGlzLmNsaWNrVGltZW91dElkXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBkb3VibGUtY2xpY2tcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZW91dElkXyk7XG4gICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQoXG4gICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNsaWNrXG4gICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICB9LmJpbmQodGhpcyksIDI1MCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBLZWVwcyB0cmFjayBvbiBob3cgbWFueSBwb2ludGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUudXBkYXRlQWN0aXZlUG9pbnRlcnNfID0gZnVuY3Rpb24gdXBkYXRlQWN0aXZlUG9pbnRlcnNfIChwb2ludGVyRXZlbnQpIHtcbiAgICB2YXIgZXZlbnQgPSBwb2ludGVyRXZlbnQ7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgICBldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCkge1xuICAgICAgZGVsZXRlIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF07XG4gICAgfSBlbHNlIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF0gPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IE9iamVjdC5rZXlzKHRoaXMudHJhY2tlZFRvdWNoZXNfKS5sZW5ndGg7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJVcF8gPSBmdW5jdGlvbiBoYW5kbGVQb2ludGVyVXBfIChwb2ludGVyRXZlbnQpIHtcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyUG9pbnRlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuXG4gICAgLy8gV2UgZW11bGF0ZSBjbGljayBldmVudHMgb24gbGVmdCBtb3VzZSBidXR0b24gY2xpY2ssIHRvdWNoIGNvbnRhY3QsIGFuZCBwZW5cbiAgICAvLyBjb250YWN0LiBpc01vdXNlQWN0aW9uQnV0dG9uIHJldHVybnMgdHJ1ZSBpbiB0aGVzZSBjYXNlcyAoZXZ0LmJ1dHRvbiBpcyBzZXRcbiAgICAvLyB0byAwKS5cbiAgICAvLyBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jYnV0dG9uLXN0YXRlc1xuICAgIC8vIFdlIG9ubHkgZmlyZSBjbGljaywgc2luZ2xlY2xpY2ssIGFuZCBkb3VibGVjbGljayBpZiBub2JvZHkgaGFzIGNhbGxlZFxuICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIG9yIGV2ZW50LnByZXZlbnREZWZhdWx0KCkuXG4gICAgaWYgKCFuZXdFdmVudC5wcm9wYWdhdGlvblN0b3BwZWQgJiYgIXRoaXMuZHJhZ2dpbmdfICYmIHRoaXMuaXNNb3VzZUFjdGlvbkJ1dHRvbl8ocG9pbnRlckV2ZW50KSkge1xuICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tfKHRoaXMuZG93bl8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9PT0gMCkge1xuICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5kcmFnZ2luZ18gPSBmYWxzZTtcbiAgICAgIHRoaXMuZG93bl8gPSBudWxsO1xuICAgICAgdGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyXyA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiB3YXMgcHJlc3NlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW91c2VBY3Rpb25CdXR0b25fID0gZnVuY3Rpb24gaXNNb3VzZUFjdGlvbkJ1dHRvbl8gKHBvaW50ZXJFdmVudCkge1xuICAgIHJldHVybiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyRG93bl8gPSBmdW5jdGlvbiBoYW5kbGVQb2ludGVyRG93bl8gKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQoXG4gICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcblxuICAgIHRoaXMuZG93bl8gPSBwb2ludGVyRXZlbnQ7XG5cbiAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8qIFNldCB1cCBhIHBvaW50ZXIgZXZlbnQgaGFuZGxlciBvbiB0aGUgYGRvY3VtZW50YCxcbiAgICAgICAqIHdoaWNoIGlzIHJlcXVpcmVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgbW92ZWQgb3V0c2lkZVxuICAgICAgICogdGhlIHZpZXdwb3J0IHdoZW4gZHJhZ2dpbmcuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyXyA9XG4gICAgICAgICAgbmV3IFBvaW50ZXJFdmVudEhhbmRsZXIoZG9jdW1lbnQpO1xuXG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2goXG4gICAgICAgIGxpc3Rlbih0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8sXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXywgdGhpcyksXG4gICAgICAgIGxpc3Rlbih0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8sXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsXG4gICAgICAgICAgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSxcbiAgICAgICAgLyogTm90ZSB0aGF0IHRoZSBsaXN0ZW5lciBmb3IgYHBvaW50ZXJjYW5jZWwgaXMgc2V0IHVwIG9uXG4gICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AgYW5kIG5vdCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgbGlrZVxuICAgICAgICAgKiB0aGUgYHBvaW50ZXJ1cGAgYW5kIGBwb2ludGVybW92ZWAgbGlzdGVuZXJzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoZSBmb2xsb3dpbmc6IGBUb3VjaFNvdXJjZS52YWN1dW1Ub3VjaGVzXygpYFxuICAgICAgICAgKiBpc3N1ZXMgYHBvaW50ZXJjYW5jZWxgIGV2ZW50cywgd2hlbiB0aGVyZSB3YXMgbm8gYHRvdWNoZW5kYCBmb3IgYVxuICAgICAgICAgKiBgdG91Y2hzdGFydGAuIE5vdywgbGV0J3Mgc2F5IGEgZmlyc3QgYHRvdWNoc3RhcnRgIGlzIHJlZ2lzdGVyZWQgb25cbiAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYC4gVGhlIGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBpcyBzZXQgdXAuXG4gICAgICAgICAqIEJ1dCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgZG9lc24ndCBrbm93IGFib3V0IHRoZSBmaXJzdFxuICAgICAgICAgKiBgdG91Y2hzdGFydGAuIElmIHRoZXJlIGlzIG5vIGB0b3VjaGVuZGAgZm9yIHRoZSBgdG91Y2hzdGFydGAsIHdlIGNhblxuICAgICAgICAgKiBvbmx5IHJlY2VpdmUgYSBgdG91Y2hjYW5jZWxgIGZyb20gYHBvaW50ZXJFdmVudEhhbmRsZXJfYCwgYmVjYXVzZSBpdCBpc1xuICAgICAgICAgKiBvbmx5IHJlZ2lzdGVyZWQgdGhlcmUuXG4gICAgICAgICAqL1xuICAgICAgICBsaXN0ZW4odGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXyxcbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwsXG4gICAgICAgICAgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJNb3ZlXyAocG9pbnRlckV2ZW50KSB7XG4gICAgLy8gQmV0d2VlbiBwb2ludGVyZG93biBhbmQgcG9pbnRlcnVwLCBwb2ludGVybW92ZSBldmVudHMgYXJlIHRyaWdnZXJlZC5cbiAgICAvLyBUbyBhdm9pZCBhICdmYWxzZScgdG91Y2htb3ZlIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQsIHdlIHRlc3QgaWYgdGhlIHBvaW50ZXJcbiAgICAvLyBtb3ZlZCBhIHNpZ25pZmljYW50IGRpc3RhbmNlLlxuICAgIGlmICh0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICB0aGlzLmRyYWdnaW5nXyA9IHRydWU7XG4gICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlclBvaW50ZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsXG4gICAgICAgIHRoaXMuZHJhZ2dpbmdfKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgfVxuXG4gICAgLy8gU29tZSBuYXRpdmUgYW5kcm9pZCBicm93c2VyIHRyaWdnZXJzIG1vdXNlbW92ZSBldmVudHMgZHVyaW5nIHNtYWxsIHBlcmlvZFxuICAgIC8vIG9mIHRpbWUuIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9NTQ5MSBvclxuICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTE5ODI3XG4gICAgLy8gZXg6IEdhbGF4eSBUYWIgUDMxMTAgKyBBbmRyb2lkIDQuMS4xXG4gICAgcG9pbnRlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdyYXAgYW5kIHJlbGF5IGEgcG9pbnRlciBldmVudC4gIE5vdGUgdGhhdCB0aGlzIHJlcXVpcmVzIHRoYXQgdGhlIHR5cGVcbiAgICogc3RyaW5nIGZvciB0aGUgTWFwQnJvd3NlclBvaW50ZXJFdmVudCBtYXRjaGVzIHRoZSBQb2ludGVyRXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUucmVsYXlFdmVudF8gPSBmdW5jdGlvbiByZWxheUV2ZW50XyAocG9pbnRlckV2ZW50KSB7XG4gICAgdmFyIGRyYWdnaW5nID0gISEodGhpcy5kb3duXyAmJiB0aGlzLmlzTW92aW5nXyhwb2ludGVyRXZlbnQpKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQoXG4gICAgICBwb2ludGVyRXZlbnQudHlwZSwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIGRyYWdnaW5nKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgKiBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgbW92aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3ZpbmdfID0gZnVuY3Rpb24gaXNNb3ZpbmdfIChwb2ludGVyRXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5kcmFnZ2luZ18gfHxcbiAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFggLSB0aGlzLmRvd25fLmNsaWVudFgpID4gdGhpcy5tb3ZlVG9sZXJhbmNlXyB8fFxuICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICBpZiAodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG5cbiAgICBpZiAodGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfKSB7XG4gICAgICB0aGlzLmRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5kb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMucG9pbnRlckV2ZW50SGFuZGxlcl8pIHtcbiAgICAgIHRoaXMucG9pbnRlckV2ZW50SGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5wb2ludGVyRXZlbnRIYW5kbGVyXyA9IG51bGw7XG4gICAgfVxuICAgIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbn0oRXZlbnRUYXJnZXQpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbWFwIGZyYW1lIGlzIHJlbmRlcmVkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I3Bvc3RyZW5kZXJcbiAgICogQGFwaVxuICAgKi9cbiAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgbWFwIHN0YXJ0cyBtb3ZpbmcuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZXN0YXJ0XG4gICAqIEBhcGlcbiAgICovXG4gIE1PVkVTVEFSVDogJ21vdmVzdGFydCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgbWFwIGlzIG1vdmVkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVlbmRcbiAgICogQGFwaVxuICAgKi9cbiAgTU9WRUVORDogJ21vdmVlbmQnXG5cbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwUHJvcGVydHlcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEFZRVJHUk9VUDogJ2xheWVyZ3JvdXAnLFxuICBTSVpFOiAnc2l6ZScsXG4gIFRBUkdFVDogJ3RhcmdldCcsXG4gIFZJRVc6ICd2aWV3J1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwUHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3Rjb21wb3NlXG4gICAqIEBhcGlcbiAgICovXG4gIFBPU1RDT01QT1NFOiAncG9zdGNvbXBvc2UnLFxuICAvKipcbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlY29tcG9zZVxuICAgKiBAYXBpXG4gICAqL1xuICBQUkVDT01QT1NFOiAncHJlY29tcG9zZScsXG4gIC8qKlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNyZW5kZXJcbiAgICogQGFwaVxuICAgKi9cbiAgUkVOREVSOiAncmVuZGVyJyxcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIHJlbmRlcmluZyBpcyBjb21wbGV0ZSwgaS5lLiBhbGwgc291cmNlcyBhbmQgdGlsZXMgaGF2ZVxuICAgKiBmaW5pc2hlZCBsb2FkaW5nIGZvciB0aGUgY3VycmVudCB2aWV3cG9ydCwgYW5kIGFsbCB0aWxlcyBhcmUgZmFkZWQgaW4uXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gICAqIEBhcGlcbiAgICovXG4gIFJFTkRFUkNPTVBMRVRFOiAncmVuZGVyY29tcGxldGUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVTdGF0ZVxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJRExFOiAwLFxuICBMT0FESU5HOiAxLFxuICBMT0FERUQ6IDIsXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCB0aWxlIGxvYWRpbmcgZmFpbGVkXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBFUlJPUjogMyxcbiAgRU1QVFk6IDQsXG4gIEFCT1JUOiA1XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlU3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Fzc2VydHNcbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7Kn0gYXNzZXJ0aW9uIEFzc2VydGlvbiB3ZSBleHBlY3RlZCB0byBiZSB0cnV0aHkuXG4gKiBAcGFyYW0ge251bWJlcn0gZXJyb3JDb2RlIEVycm9yIGNvZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoYXNzZXJ0aW9uLCBlcnJvckNvZGUpIHtcbiAgaWYgKCFhc3NlcnRpb24pIHtcbiAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoZXJyb3JDb2RlKTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWVcbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcblxuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRFJPUCA9IEluZmluaXR5O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHA6Ly9jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vc3ZuL2RvY3MvY2xvc3VyZV9nb29nX3N0cnVjdHNfaGVhcC5qcy5zb3VyY2UuaHRtbFxuICogYW5kIGh0dHA6Ly9oZy5weXRob24ub3JnL2NweXRob24vZmlsZS8yLjcvTGliL2hlYXBxLnB5LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBQcmlvcml0eVF1ZXVlID0gZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShwcmlvcml0eUZ1bmN0aW9uLCBrZXlGdW5jdGlvbikge1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IG51bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucHJpb3JpdHlGdW5jdGlvbl8gPSBwcmlvcml0eUZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IHN0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMua2V5RnVuY3Rpb25fID0ga2V5RnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheTxUPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuZWxlbWVudHNfID0gW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5wcmlvcml0aWVzXyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5xdWV1ZWRFbGVtZW50c18gPSB7fTtcblxufTtcblxuLyoqXG4gKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhciQxICgpIHtcbiAgdGhpcy5lbGVtZW50c18ubGVuZ3RoID0gMDtcbiAgdGhpcy5wcmlvcml0aWVzXy5sZW5ndGggPSAwO1xuICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIGFuZCByZXR1cm4gdGhlIGhpZ2hlc3QtcHJpb3JpdHkgZWxlbWVudC4gTyhsb2cgTikuXG4gKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gZGVxdWV1ZSAoKSB7XG4gIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gIHZhciBlbGVtZW50ID0gZWxlbWVudHNbMF07XG4gIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgIGVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgcHJpb3JpdGllcy5sZW5ndGggPSAwO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnRzWzBdID0gZWxlbWVudHMucG9wKCk7XG4gICAgcHJpb3JpdGllc1swXSA9IHByaW9yaXRpZXMucG9wKCk7XG4gICAgdGhpcy5zaWZ0VXBfKDApO1xuICB9XG4gIHZhciBlbGVtZW50S2V5ID0gdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCk7XG4gIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1tlbGVtZW50S2V5XTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG5cbi8qKlxuICogRW5xdWV1ZSBhbiBlbGVtZW50LiBPKGxvZyBOKS5cbiAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIGVucXVldWUgKGVsZW1lbnQpIHtcbiAgYXNzZXJ0KCEodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c18pLFxuICAgIDMxKTsgLy8gVHJpZWQgdG8gZW5xdWV1ZSBhbiBgZWxlbWVudGAgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgcXVldWVcbiAgdmFyIHByaW9yaXR5ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgaWYgKHByaW9yaXR5ICE9IERST1ApIHtcbiAgICB0aGlzLmVsZW1lbnRzXy5wdXNoKGVsZW1lbnQpO1xuICAgIHRoaXMucHJpb3JpdGllc18ucHVzaChwcmlvcml0eSk7XG4gICAgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldID0gdHJ1ZTtcbiAgICB0aGlzLnNpZnREb3duXygwLCB0aGlzLmVsZW1lbnRzXy5sZW5ndGggLSAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiBnZXRDb3VudCAoKSB7XG4gIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGg7XG59O1xuXG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIGxlZnQgY2hpbGQgZm9yLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQuXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRMZWZ0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiBnZXRMZWZ0Q2hpbGRJbmRleF8gKGluZGV4KSB7XG4gIHJldHVybiBpbmRleCAqIDIgKyAxO1xufTtcblxuXG4vKipcbiAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSByaWdodCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcmlnaHQgY2hpbGQgZm9yLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICogQHByaXZhdGVcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UmlnaHRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIGdldFJpZ2h0Q2hpbGRJbmRleF8gKGluZGV4KSB7XG4gIHJldHVybiBpbmRleCAqIDIgKyAyO1xufTtcblxuXG4vKipcbiAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHBhcmVudCBmb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcGFyZW50LlxuICogQHByaXZhdGVcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UGFyZW50SW5kZXhfID0gZnVuY3Rpb24gZ2V0UGFyZW50SW5kZXhfIChpbmRleCkge1xuICByZXR1cm4gKGluZGV4IC0gMSkgPj4gMTtcbn07XG5cblxuLyoqXG4gKiBNYWtlIHRoaXMgYSBoZWFwLiBPKE4pLlxuICogQHByaXZhdGVcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaGVhcGlmeV8gPSBmdW5jdGlvbiBoZWFwaWZ5XyAoKSB7XG4gIHZhciBpO1xuICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB0aGlzLnNpZnRVcF8oaSk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkgKCkge1xuICByZXR1cm4gdGhpcy5lbGVtZW50c18ubGVuZ3RoID09PSAwO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMga2V5IHF1ZXVlZC5cbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNLZXlRdWV1ZWQgPSBmdW5jdGlvbiBpc0tleVF1ZXVlZCAoa2V5KSB7XG4gIHJldHVybiBrZXkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c187XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gKi9cblByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzUXVldWVkID0gZnVuY3Rpb24gaXNRdWV1ZWQgKGVsZW1lbnQpIHtcbiAgcmV0dXJuIHRoaXMuaXNLZXlRdWV1ZWQodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSBkb3duLlxuICogQHByaXZhdGVcbiAqL1xuUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdFVwXyA9IGZ1bmN0aW9uIHNpZnRVcF8gKGluZGV4KSB7XG4gIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gIHZhciBjb3VudCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICB2YXIgc3RhcnRJbmRleCA9IGluZGV4O1xuXG4gIHdoaWxlIChpbmRleCA8IChjb3VudCA+PiAxKSkge1xuICAgIHZhciBsSW5kZXggPSB0aGlzLmdldExlZnRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgdmFyIHJJbmRleCA9IHRoaXMuZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCk7XG5cbiAgICB2YXIgc21hbGxlckNoaWxkSW5kZXggPSBySW5kZXggPCBjb3VudCAmJlxuICAgICAgICBwcmlvcml0aWVzW3JJbmRleF0gPCBwcmlvcml0aWVzW2xJbmRleF0gP1xuICAgICAgckluZGV4IDogbEluZGV4O1xuXG4gICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgaW5kZXggPSBzbWFsbGVyQ2hpbGRJbmRleDtcbiAgfVxuXG4gIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gIHRoaXMuc2lmdERvd25fKHN0YXJ0SW5kZXgsIGluZGV4KTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgdXAuXG4gKiBAcHJpdmF0ZVxuICovXG5Qcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0RG93bl8gPSBmdW5jdGlvbiBzaWZ0RG93bl8gKHN0YXJ0SW5kZXgsIGluZGV4KSB7XG4gIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcblxuICB3aGlsZSAoaW5kZXggPiBzdGFydEluZGV4KSB7XG4gICAgdmFyIHBhcmVudEluZGV4ID0gdGhpcy5nZXRQYXJlbnRJbmRleF8oaW5kZXgpO1xuICAgIGlmIChwcmlvcml0aWVzW3BhcmVudEluZGV4XSA+IHByaW9yaXR5KSB7XG4gICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbcGFyZW50SW5kZXhdO1xuICAgICAgaW5kZXggPSBwYXJlbnRJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG59O1xuXG5cbi8qKlxuICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gKi9cblByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlcHJpb3JpdGl6ZSA9IGZ1bmN0aW9uIHJlcHJpb3JpdGl6ZSAoKSB7XG4gIHZhciBwcmlvcml0eUZ1bmN0aW9uID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXztcbiAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIG4gPSBlbGVtZW50cy5sZW5ndGg7XG4gIHZhciBlbGVtZW50LCBpLCBwcmlvcml0eTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgaWYgKHByaW9yaXR5ID09IERST1ApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgICBlbGVtZW50c1tpbmRleCsrXSA9IGVsZW1lbnQ7XG4gICAgfVxuICB9XG4gIGVsZW1lbnRzLmxlbmd0aCA9IGluZGV4O1xuICBwcmlvcml0aWVzLmxlbmd0aCA9IGluZGV4O1xuICB0aGlzLmhlYXBpZnlfKCk7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFByaW9yaXR5UXVldWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByaW9yaXR5UXVldWUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVRdWV1ZVxuICovXG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3Rlbn0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUgZnJvbSAnLi9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0LCBzdHJpbmcsIGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBudW1iZXIpOiBudW1iZXJ9IFByaW9yaXR5RnVuY3Rpb25cbiAqL1xuXG5cbnZhciBUaWxlUXVldWUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQcmlvcml0eVF1ZXVlKSB7XG4gIGZ1bmN0aW9uIFRpbGVRdWV1ZSh0aWxlUHJpb3JpdHlGdW5jdGlvbiwgdGlsZUNoYW5nZUNhbGxiYWNrKSB7XG5cbiAgICBQcmlvcml0eVF1ZXVlLmNhbGwoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUHJpb3JpdHkuXG4gICAgICAgKi9cbiAgICAgIHRoaXMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRpbGVQcmlvcml0eUZ1bmN0aW9uLmFwcGx5KG51bGwsIGVsZW1lbnQpO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuICgvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZWxlbWVudFswXSkuZ2V0S2V5KCkpO1xuICAgICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVzTG9hZGluZ18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsYm9vbGVhbj59XG4gICAgICovXG4gICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzXyA9IHt9O1xuXG4gIH1cblxuICBpZiAoIFByaW9yaXR5UXVldWUgKSBUaWxlUXVldWUuX19wcm90b19fID0gUHJpb3JpdHlRdWV1ZTtcbiAgVGlsZVF1ZXVlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFByaW9yaXR5UXVldWUgJiYgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUgKTtcbiAgVGlsZVF1ZXVlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGVRdWV1ZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIGVucXVldWUgKGVsZW1lbnQpIHtcbiAgICB2YXIgYWRkZWQgPSBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgaWYgKGFkZGVkKSB7XG4gICAgICB2YXIgdGlsZSA9IGVsZW1lbnRbMF07XG4gICAgICBsaXN0ZW4odGlsZSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGFkZGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiB0aWxlcyBsb2FkaW5nLlxuICAgKi9cbiAgVGlsZVF1ZXVlLnByb3RvdHlwZS5nZXRUaWxlc0xvYWRpbmcgPSBmdW5jdGlvbiBnZXRUaWxlc0xvYWRpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnRpbGVzTG9hZGluZ187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRpbGVDaGFuZ2UgKGV2ZW50KSB7XG4gICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgaWYgKHN0YXRlID09PSBUaWxlU3RhdGUuTE9BREVEIHx8IHN0YXRlID09PSBUaWxlU3RhdGUuRVJST1IgfHxcbiAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWSB8fCBzdGF0ZSA9PT0gVGlsZVN0YXRlLkFCT1JUKSB7XG4gICAgICB1bmxpc3Rlbih0aWxlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UsIHRoaXMpO1xuICAgICAgdmFyIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgaWYgKHRpbGVLZXkgaW4gdGhpcy50aWxlc0xvYWRpbmdLZXlzXykge1xuICAgICAgICBkZWxldGUgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XTtcbiAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICB9XG4gICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb3RhbExvYWRpbmcgTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZCBzaW11bHRhbmVvdXNseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heE5ld0xvYWRzIE1heGltdW0gbnVtYmVyIG9mIG5ldyB0aWxlcyB0byBsb2FkLlxuICAgKi9cbiAgVGlsZVF1ZXVlLnByb3RvdHlwZS5sb2FkTW9yZVRpbGVzID0gZnVuY3Rpb24gbG9hZE1vcmVUaWxlcyAobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcykge1xuICAgIHZhciBuZXdMb2FkcyA9IDA7XG4gICAgdmFyIGFib3J0ZWRUaWxlcyA9IGZhbHNlO1xuICAgIHZhciBzdGF0ZSwgdGlsZSwgdGlsZUtleTtcbiAgICB3aGlsZSAodGhpcy50aWxlc0xvYWRpbmdfIDwgbWF4VG90YWxMb2FkaW5nICYmIG5ld0xvYWRzIDwgbWF4TmV3TG9hZHMgJiZcbiAgICAgICAgICAgdGhpcy5nZXRDb3VudCgpID4gMCkge1xuICAgICAgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmRlcXVldWUoKVswXSk7XG4gICAgICB0aWxlS2V5ID0gdGlsZS5nZXRLZXkoKTtcbiAgICAgIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgaWYgKHN0YXRlID09PSBUaWxlU3RhdGUuQUJPUlQpIHtcbiAgICAgICAgYWJvcnRlZFRpbGVzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5JRExFICYmICEodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSkge1xuICAgICAgICB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldID0gdHJ1ZTtcbiAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICsrbmV3TG9hZHM7XG4gICAgICAgIHRpbGUubG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3TG9hZHMgPT09IDAgJiYgYWJvcnRlZFRpbGVzKSB7XG4gICAgICAvLyBEbyBub3Qgc3RvcCB0aGUgcmVuZGVyIGxvb3Agd2hlbiBhbGwgd2FudGVkIHRpbGVzIHdlcmUgYWJvcnRlZCBkdWUgdG9cbiAgICAgIC8vIGEgc21hbGwsIHNhdHVyYXRlZCB0aWxlIGNhY2hlLlxuICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUaWxlUXVldWU7XG59KFByaW9yaXR5UXVldWUpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBUaWxlUXVldWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVRdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvY29tbW9uXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gem9vbSBmb3IgZGVmYXVsdCB0aWxlIGdyaWRzLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX01BWF9aT09NID0gNDI7XG5cbi8qKlxuICogRGVmYXVsdCB0aWxlIHNpemUuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL21hdGhcbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5cbi8qKlxuICogVGFrZXMgYSBudW1iZXIgYW5kIGNsYW1wcyBpdCB0byB3aXRoaW4gdGhlIHByb3ZpZGVkIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciBpZiBpdCBpcyB3aXRoaW4gYm91bmRzLCBvciB0aGUgbmVhcmVzdFxuICogICAgIG51bWJlciB3aXRoaW4gdGhlIGJvdW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmNvc2hgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBoeXBlcmJvbGljXG4gKiBjb3NpbmUgd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNb3ppbGxhXG4gKiBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBIeXBlcmJvbGljIGNvc2luZSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGNvc2ggPSAoZnVuY3Rpb24oKSB7XG4gIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAvLyBpbXBsZW1lbnRhdGlvbiBvbiBldmVyeSBpbnZvY2F0aW9uLlxuICB2YXIgY29zaDtcbiAgaWYgKCdjb3NoJyBpbiBNYXRoKSB7XG4gICAgLy8gVGhlIGVudmlyb25tZW50IHN1cHBvcnRzIHRoZSBuYXRpdmUgTWF0aC5jb3NoIGZ1bmN0aW9uLCB1c2UgaXTigKZcbiAgICBjb3NoID0gTWF0aC5jb3NoO1xuICB9IGVsc2Uge1xuICAgIC8vIOKApiBlbHNlLCB1c2UgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiBNRE46XG4gICAgY29zaCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciB5ID0gLyoqIEB0eXBlIHtNYXRofSAqLyAoTWF0aCkuZXhwKHgpO1xuICAgICAgcmV0dXJuICh5ICsgMSAvIHkpIC8gMjtcbiAgICB9O1xuICB9XG4gIHJldHVybiBjb3NoO1xufSgpKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzbWFsbGVzdCBwb3dlciBvZiB0d28gZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZFVwVG9Qb3dlck9mVHdvKHgpIHtcbiAgYXNzZXJ0KDAgPCB4LCAyOSk7IC8vIGB4YCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBgMGBcbiAgcmV0dXJuIE1hdGgucG93KDIsIE1hdGguY2VpbChNYXRoLmxvZyh4KSAvIE1hdGguTE4yKSk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhlIGNsb3Nlc3QgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnQgKHgsIHkpIGFuZCB0aGVcbiAqIGxpbmUgc2VnbWVudCAoeDEsIHkxKSB0byAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHgxIFgxLlxuICogQHBhcmFtIHtudW1iZXJ9IHkxIFkxLlxuICogQHBhcmFtIHtudW1iZXJ9IHgyIFgyLlxuICogQHBhcmFtIHtudW1iZXJ9IHkyIFkyLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mikge1xuICB2YXIgZHggPSB4MiAtIHgxO1xuICB2YXIgZHkgPSB5MiAtIHkxO1xuICBpZiAoZHggIT09IDAgfHwgZHkgIT09IDApIHtcbiAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIGlmICh0ID4gMSkge1xuICAgICAgeDEgPSB4MjtcbiAgICAgIHkxID0geTI7XG4gICAgfSBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgeDEgKz0gZHggKiB0O1xuICAgICAgeTEgKz0gZHkgKiB0O1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKHgsIHksIHgxLCB5MSk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoeDEsIHkxKSBhbmQgKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpIHtcbiAgdmFyIGR4ID0geDIgLSB4MTtcbiAgdmFyIGR5ID0geTIgLSB5MTtcbiAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG5cbi8qKlxuICogU29sdmVzIHN5c3RlbSBvZiBsaW5lYXIgZXF1YXRpb25zIHVzaW5nIEdhdXNzaWFuIGVsaW1pbmF0aW9uIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBtYXQgQXVnbWVudGVkIG1hdHJpeCAobiB4IG4gKyAxIGNvbHVtbilcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHJvdy1tYWpvciBvcmRlci5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSByZXN1bHRpbmcgdmVjdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc29sdmVMaW5lYXJTeXN0ZW0obWF0KSB7XG4gIHZhciBuID0gbWF0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIC8vIEZpbmQgbWF4IGluIHRoZSBpLXRoIGNvbHVtbiAoaWdub3JpbmcgaSAtIDEgZmlyc3Qgcm93cylcbiAgICB2YXIgbWF4Um93ID0gaTtcbiAgICB2YXIgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgIGZvciAodmFyIHIgPSBpICsgMTsgciA8IG47IHIrKykge1xuICAgICAgdmFyIGFic1ZhbHVlID0gTWF0aC5hYnMobWF0W3JdW2ldKTtcbiAgICAgIGlmIChhYnNWYWx1ZSA+IG1heEVsKSB7XG4gICAgICAgIG1heEVsID0gYWJzVmFsdWU7XG4gICAgICAgIG1heFJvdyA9IHI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1heEVsID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDsgLy8gbWF0cml4IGlzIHNpbmd1bGFyXG4gICAgfVxuXG4gICAgLy8gU3dhcCBtYXggcm93IHdpdGggaS10aCAoY3VycmVudCkgcm93XG4gICAgdmFyIHRtcCA9IG1hdFttYXhSb3ddO1xuICAgIG1hdFttYXhSb3ddID0gbWF0W2ldO1xuICAgIG1hdFtpXSA9IHRtcDtcblxuICAgIC8vIFN1YnRyYWN0IHRoZSBpLXRoIHJvdyB0byBtYWtlIGFsbCB0aGUgcmVtYWluaW5nIHJvd3MgMCBpbiB0aGUgaS10aCBjb2x1bW5cbiAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBuOyBqKyspIHtcbiAgICAgIHZhciBjb2VmID0gLW1hdFtqXVtpXSAvIG1hdFtpXVtpXTtcbiAgICAgIGZvciAodmFyIGsgPSBpOyBrIDwgbiArIDE7IGsrKykge1xuICAgICAgICBpZiAoaSA9PSBrKSB7XG4gICAgICAgICAgbWF0W2pdW2tdID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRbal1ba10gKz0gY29lZiAqIG1hdFtpXVtrXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgdmFyIHggPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGwgPSBuIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICB4W2xdID0gbWF0W2xdW25dIC8gbWF0W2xdW2xdO1xuICAgIGZvciAodmFyIG0gPSBsIC0gMTsgbSA+PSAwOyBtLS0pIHtcbiAgICAgIG1hdFttXVtuXSAtPSBtYXRbbV1bbF0gKiB4W2xdO1xuICAgIH1cbiAgfVxuICByZXR1cm4geDtcbn1cblxuXG4vKipcbiAqIENvbnZlcnRzIHJhZGlhbnMgdG8gdG8gZGVncmVlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGVncmVlcyhhbmdsZUluUmFkaWFucykge1xuICByZXR1cm4gYW5nbGVJblJhZGlhbnMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG5cbi8qKlxuICogQ29udmVydHMgZGVncmVlcyB0byByYWRpYW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluRGVncmVlcyBBbmdsZSBpbiBkZWdyZWVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiByYWRpYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW5zKGFuZ2xlSW5EZWdyZWVzKSB7XG4gIHJldHVybiBhbmdsZUluRGVncmVlcyAqIE1hdGguUEkgLyAxODA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kdWxvIG9mIGEgLyBiLCBkZXBlbmRpbmcgb24gdGhlIHNpZ24gb2YgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBEaXZpZGVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIERpdmlzb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1vZHVsby5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gIHZhciByID0gYSAlIGI7XG4gIHJldHVybiByICogYiA8IDAgPyByICsgYiA6IHI7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGluZWFybHkgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHggYmV0d2VlbiBhIGFuZCBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0geCBWYWx1ZSB0byBiZSBpbnRlcnBvbGF0ZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEludGVycG9sYXRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoYSwgYiwgeCkge1xuICByZXR1cm4gYSArIHggKiAoYiAtIGEpO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jZW50ZXJjb25zdHJhaW50XG4gKi9cbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCkpOiAoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKX0gVHlwZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge1R5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXh0ZW50KGV4dGVudCkge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKGNlbnRlcikge1xuICAgICAgaWYgKGNlbnRlcikge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIGNsYW1wKGNlbnRlclswXSwgZXh0ZW50WzBdLCBleHRlbnRbMl0pLFxuICAgICAgICAgIGNsYW1wKGNlbnRlclsxXSwgZXh0ZW50WzFdLCBleHRlbnRbM10pXG4gICAgICAgIF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBjZW50ZXIgQ2VudGVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKGNlbnRlcikge1xuICByZXR1cm4gY2VudGVyO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jZW50ZXJjb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yb3RhdGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHt0b1JhZGlhbnN9IGZyb20gJy4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBudW1iZXIpOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZShyb3RhdGlvbiwgZGVsdGEpIHtcbiAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uLCBkZWx0YSkge1xuICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByb3RhdGlvbiArIGRlbHRhO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gIHZhciB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gbjtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihyb3RhdGlvbiwgZGVsdGEpIHtcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcigocm90YXRpb24gKyBkZWx0YSkgLyB0aGV0YSArIDAuNSkgKiB0aGV0YTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3RvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvWmVybyhvcHRfdG9sZXJhbmNlKSB7XG4gIHZhciB0b2xlcmFuY2UgPSBvcHRfdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihyb3RhdGlvbiwgZGVsdGEpIHtcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGlvbiArIGRlbHRhKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3SGludFxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBTklNQVRJTkc6IDAsXG4gIElOVEVSQUNUSU5HOiAxXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3SGludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIENFTlRFUjogJ2NlbnRlcicsXG4gIFJFU09MVVRJT046ICdyZXNvbHV0aW9uJyxcbiAgUk9UQVRJT046ICdyb3RhdGlvbidcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7cGFkTnVtYmVyfSBmcm9tICcuL3N0cmluZy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFuZFxuICogdHJhbnNmb3JtcyBpdCBpbnRvIGEgYHtzdHJpbmd9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKENvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IHN0cmluZ30gQ29vcmRpbmF0ZUZvcm1hdFxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGFkZChjb29yZCwgWy0yLCA0XSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs1Ljg1LCA1MS45ODMzMzNdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGlucHV0IGNvb3JkaW5hdGUgYWRqdXN0ZWQgYnlcbiAqIHRoZSBnaXZlbiBkZWx0YS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb29yZGluYXRlLCBkZWx0YSkge1xuICBjb29yZGluYXRlWzBdICs9IGRlbHRhWzBdO1xuICBjb29yZGluYXRlWzFdICs9IGRlbHRhWzFdO1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgVGhlIGNpcmNsZS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQgb24gdGhlIGNpcmN1bWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25DaXJjbGUoY29vcmRpbmF0ZSwgY2lyY2xlKSB7XG4gIHZhciByID0gY2lyY2xlLmdldFJhZGl1cygpO1xuICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICB2YXIgeDAgPSBjZW50ZXJbMF07XG4gIHZhciB5MCA9IGNlbnRlclsxXTtcbiAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkxID0gY29vcmRpbmF0ZVsxXTtcblxuICB2YXIgZHggPSB4MSAtIHgwO1xuICB2YXIgZHkgPSB5MSAtIHkwO1xuICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICBkeCA9IDE7XG4gIH1cbiAgdmFyIGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gIHZhciB4ID0geDAgKyByICogZHggLyBkO1xuICB2YXIgeSA9IHkwICsgciAqIGR5IC8gZDtcblxuICByZXR1cm4gW3gsIHldO1xufVxuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICB2YXIgeTAgPSBjb29yZGluYXRlWzFdO1xuICB2YXIgc3RhcnQgPSBzZWdtZW50WzBdO1xuICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgdmFyIHgxID0gc3RhcnRbMF07XG4gIHZhciB5MSA9IHN0YXJ0WzFdO1xuICB2YXIgeDIgPSBlbmRbMF07XG4gIHZhciB5MiA9IGVuZFsxXTtcbiAgdmFyIGR4ID0geDIgLSB4MTtcbiAgdmFyIGR5ID0geTIgLSB5MTtcbiAgdmFyIGFsb25nID0gKGR4ID09PSAwICYmIGR5ID09PSAwKSA/IDAgOlxuICAgICgoZHggKiAoeDAgLSB4MSkpICsgKGR5ICogKHkwIC0geTEpKSkgLyAoKGR4ICogZHggKyBkeSAqIGR5KSB8fCAwKTtcbiAgdmFyIHgsIHk7XG4gIGlmIChhbG9uZyA8PSAwKSB7XG4gICAgeCA9IHgxO1xuICAgIHkgPSB5MTtcbiAgfSBlbHNlIGlmIChhbG9uZyA+PSAxKSB7XG4gICAgeCA9IHgyO1xuICAgIHkgPSB5MjtcbiAgfSBlbHNlIHtcbiAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgIHkgPSB5MSArIGFsb25nICogZHk7XG4gIH1cbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZUZvcm1hdH0gZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAqIHVzZWQgdG8gZm9ybWF0XG4gKiBhIHtDb29yZGluYXRlfSB0byBhIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgd2l0aCBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMiBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuODUsIDQ3Ljk4J1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGVGb3JtYXR9IENvb3JkaW5hdGUgZm9ybWF0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RyaW5nWFkob3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVtaXNwaGVyZXMgSGVtaXNwaGVyZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBEZWdyZWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzVG9TdHJpbmdIRE1TKGhlbWlzcGhlcmVzLCBkZWdyZWVzLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgdmFyIGRmbFByZWNpc2lvbiA9IG9wdF9mcmFjdGlvbkRpZ2l0cyB8fCAwO1xuICB2YXIgcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIGRmbFByZWNpc2lvbik7XG5cbiAgdmFyIGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICB2YXIgc2VjID0geCAtIChkZWcgKiAzNjAwKSAtIChtaW4gKiA2MCk7XG4gIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuXG4gIGlmIChzZWMgPj0gNjApIHtcbiAgICBzZWMgPSAwO1xuICAgIG1pbiArPSAxO1xuICB9XG5cbiAgaWYgKG1pbiA+PSA2MCkge1xuICAgIG1pbiA9IDA7XG4gICAgZGVnICs9IDE7XG4gIH1cblxuICByZXR1cm4gZGVnICsgJ1xcdTAwYjAgJyArIHBhZE51bWJlcihtaW4sIDIpICsgJ1xcdTIwMzIgJyArXG4gICAgcGFkTnVtYmVyKHNlYywgMiwgZGZsUHJlY2lzaW9uKSArICdcXHUyMDMzJyArXG4gICAgKG5vcm1hbGl6ZWREZWdyZWVzID09IDAgPyAnJyA6ICcgJyArIGhlbWlzcGhlcmVzLmNoYXJBdChub3JtYWxpemVkRGVncmVlcyA8IDAgPyAxIDogMCkpO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4ge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IHRvIGEgc3RyaW5nXG4gKiB1c2luZyB0aGUgZ2l2ZW4gc3RyaW5nIHRlbXBsYXRlLiBUaGUgc3RyaW5ncyBge3h9YCBhbmQgYHt5fWAgaW4gdGhlIHRlbXBsYXRlXG4gKiB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoOHw0OCkuJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSwgMik7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoNy44NXw0Ny45OCkuJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIEEgdGVtcGxhdGUgc3RyaW5nIHdpdGggYHt4fWAgYW5kIGB7eX1gIHBsYWNlaG9sZGVyc1xuICogICAgIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICB2YXIgZXF1YWxzID0gdHJ1ZTtcbiAgZm9yICh2YXIgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXF1YWxzO1xufVxuXG5cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gIHZhciB5ID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICBjb29yZGluYXRlWzBdID0geDtcbiAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogU2NhbGUgYGNvb3JkaW5hdGVgIGJ5IGBzY2FsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgdmFyIGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICB2YXIgZHkgPSBjb29yZDFbMV0gLSBjb29yZDJbMV07XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZShjb29yZGluYXRlLFxuICAgIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuXG5cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYw4oCzIE4gN8KwIDUw4oCyIDYw4oCzIEUnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjAuMOKAsyBOIDfCsCA1MOKAsiA2MC4w4oCzIEUnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArICcgJyArXG4gICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuXG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZWFzaW5nXG4gKi9cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3cgYW5kIHNwZWVkIHVwLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluKHQpIHtcbiAgcmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuXG5cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgdGhlbiBzbG93IGRvd24gYWdhaW4uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbkFuZE91dCh0KSB7XG4gIHJldHVybiAzICogdCAqIHQgLSAyICogdCAqIHQgKiB0O1xufVxuXG5cbi8qKlxuICogTWFpbnRhaW4gYSBjb25zdGFudCBzcGVlZCBvdmVyIHRpbWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIodCkge1xuICByZXR1cm4gdDtcbn1cblxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhc2luZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L0Nvcm5lclxuICovXG5cbi8qKlxuICogRXh0ZW50IGNvcm5lci5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db3JuZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuXG4vKipcbiAqIFJlbGF0aW9uc2hpcCB0byBhbiBleHRlbnQuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFVOS05PV046IDAsXG4gIElOVEVSU0VDVElORzogMSxcbiAgQUJPVkU6IDIsXG4gIFJJR0hUOiA0LFxuICBCRUxPVzogOCxcbiAgTEVGVDogMTZcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbGF0aW9uc2hpcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuL2V4dGVudC9SZWxhdGlvbnNoaXAuanMnO1xuXG5cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4gZXh0ZW50OiBgW21pbngsIG1pbnksIG1heHgsIG1heHldYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBFeHRlbnRcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEJ1aWxkIGFuIGV4dGVudCB0aGF0IGluY2x1ZGVzIGFsbCBnaXZlbiBjb29yZGluYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEJvdW5kaW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4cyBYcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geXMgWXMuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5mdW5jdGlvbiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICB2YXIgbWluWSA9IE1hdGgubWluLmFwcGx5KG51bGwsIHlzKTtcbiAgdmFyIG1heFggPSBNYXRoLm1heC5hcHBseShudWxsLCB4cyk7XG4gIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gZXh0ZW50IGluY3JlYXNlZCBieSB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRoZSBleHRlbnQgc2hvdWxkIGJlIGJ1ZmZlcmVkLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKGV4dGVudCwgdmFsdWUsIG9wdF9leHRlbnQpIHtcbiAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdIC0gdmFsdWU7XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXSAtIHZhbHVlO1xuICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl0gKyB2YWx1ZTtcbiAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdICsgdmFsdWU7XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGV4dGVudFswXSAtIHZhbHVlLFxuICAgICAgZXh0ZW50WzFdIC0gdmFsdWUsXG4gICAgICBleHRlbnRbMl0gKyB2YWx1ZSxcbiAgICAgIGV4dGVudFszXSArIHZhbHVlXG4gICAgXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudCB0byBjbG9uZS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBjbG9uZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICBpZiAob3B0X2V4dGVudCkge1xuICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4dGVudC5zbGljZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7bnVtYmVyfSBDbG9zZXN0IHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkoZXh0ZW50LCB4LCB5KSB7XG4gIHZhciBkeCwgZHk7XG4gIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgZHggPSBleHRlbnRbMF0gLSB4O1xuICB9IGVsc2UgaWYgKGV4dGVudFsyXSA8IHgpIHtcbiAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gIH0gZWxzZSB7XG4gICAgZHggPSAwO1xuICB9XG4gIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgZHkgPSBleHRlbnRbMV0gLSB5O1xuICB9IGVsc2UgaWYgKGV4dGVudFszXSA8IHkpIHtcbiAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gIH0gZWxzZSB7XG4gICAgZHkgPSAwO1xuICB9XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gIHJldHVybiBleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiYgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbMV0gJiYgZXh0ZW50MlszXSA8PSBleHRlbnQxWzNdO1xufVxuXG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHgsIHkgdmFsdWVzIGFyZSBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zWFkoZXh0ZW50LCB4LCB5KSB7XG4gIHJldHVybiBleHRlbnRbMF0gPD0geCAmJiB4IDw9IGV4dGVudFsyXSAmJiBleHRlbnRbMV0gPD0geSAmJiB5IDw9IGV4dGVudFszXTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7UmVsYXRpb25zaGlwfSBUaGUgcmVsYXRpb25zaGlwIChiaXR3aXNlIGNvbXBhcmUgd2l0aFxuICogICAgIGltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5SZWxhdGlvbnNoaXApLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICB2YXIgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLlVOS05PV047XG4gIGlmICh4IDwgbWluWCkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5MRUZUO1xuICB9IGVsc2UgaWYgKHggPiBtYXhYKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICB9XG4gIGlmICh5IDwgbWluWSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5CRUxPVztcbiAgfSBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5BQk9WRTtcbiAgfVxuICBpZiAocmVsYXRpb25zaGlwID09PSBSZWxhdGlvbnNoaXAuVU5LTk9XTikge1xuICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gIH1cbiAgcmV0dXJuIHJlbGF0aW9uc2hpcDtcbn1cblxuXG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICByZXR1cm4gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGV4dGVudCBvciB1cGRhdGUgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpIHtcbiAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICBvcHRfZXh0ZW50WzBdID0gbWluWDtcbiAgICBvcHRfZXh0ZW50WzFdID0gbWluWTtcbiAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICBvcHRfZXh0ZW50WzNdID0gbWF4WTtcbiAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW21pblgsIG1pblksIG1heFgsIG1heFldO1xuICB9XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZW1wdHkgZXh0ZW50IG9yIG1ha2UgdGhlIHByb3ZpZGVkIG9uZSBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCkge1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoXG4gICAgSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSwgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2V4dGVudCkge1xuICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgcmV0dXJuIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbVJpbmdzKHJpbmdzLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICByZXR1cm4gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncyk7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIGV4dGVudDFbMF0gPT0gZXh0ZW50MlswXSAmJiBleHRlbnQxWzJdID09IGV4dGVudDJbMl0gJiZcbiAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJiBleHRlbnQxWzNdID09IGV4dGVudDJbM107XG59XG5cblxuLyoqXG4gKiBNb2RpZnkgYW4gZXh0ZW50IHRvIGluY2x1ZGUgYW5vdGhlciBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBUaGUgZXh0ZW50IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgVGhlIGV4dGVudCB0aGF0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGZpcnN0LlxuICogQHJldHVybiB7RXh0ZW50fSBBIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgKGV4dGVuZGVkKSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoZXh0ZW50MSwgZXh0ZW50Mikge1xuICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICBleHRlbnQxWzBdID0gZXh0ZW50MlswXTtcbiAgfVxuICBpZiAoZXh0ZW50MlsyXSA+IGV4dGVudDFbMl0pIHtcbiAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgfVxuICBpZiAoZXh0ZW50MlsxXSA8IGV4dGVudDFbMV0pIHtcbiAgICBleHRlbnQxWzFdID0gZXh0ZW50MlsxXTtcbiAgfVxuICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICBleHRlbnQxWzNdID0gZXh0ZW50MlszXTtcbiAgfVxuICByZXR1cm4gZXh0ZW50MTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICBleHRlbnRbMF0gPSBjb29yZGluYXRlWzBdO1xuICB9XG4gIGlmIChjb29yZGluYXRlWzBdID4gZXh0ZW50WzJdKSB7XG4gICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgfVxuICBpZiAoY29vcmRpbmF0ZVsxXSA8IGV4dGVudFsxXSkge1xuICAgIGV4dGVudFsxXSA9IGNvb3JkaW5hdGVbMV07XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICBleHRlbnRbM10gPSBjb29yZGluYXRlWzFdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGV4dGVuZFhZKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSByaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCByaW5nc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRYWShleHRlbnQsIHgsIHkpIHtcbiAgZXh0ZW50WzBdID0gTWF0aC5taW4oZXh0ZW50WzBdLCB4KTtcbiAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgZXh0ZW50WzJdID0gTWF0aC5tYXgoZXh0ZW50WzJdLCB4KTtcbiAgZXh0ZW50WzNdID0gTWF0aC5tYXgoZXh0ZW50WzNdLCB5KTtcbn1cblxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlQsIGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogU30gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0ge1Q9fSBvcHRfdGhpcyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gKiBAcmV0dXJuIHtTfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFMsIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hDb3JuZXIoZXh0ZW50LCBjYWxsYmFjaywgb3B0X3RoaXMpIHtcbiAgdmFyIHZhbDtcbiAgdmFsID0gY2FsbGJhY2suY2FsbChvcHRfdGhpcywgZ2V0Qm90dG9tTGVmdChleHRlbnQpKTtcbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgdmFsID0gY2FsbGJhY2suY2FsbChvcHRfdGhpcywgZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSk7XG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHZhbCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICB2YWwgPSBjYWxsYmFjay5jYWxsKG9wdF90aGlzLCBnZXRUb3BMZWZ0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHNpemUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGV4dGVudCkge1xuICB2YXIgYXJlYSA9IDA7XG4gIGlmICghaXNFbXB0eShleHRlbnQpKSB7XG4gICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFsxXV07XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBjZW50ZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDZW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDZW50ZXIoZXh0ZW50KSB7XG4gIHJldHVybiBbKGV4dGVudFswXSArIGV4dGVudFsyXSkgLyAyLCAoZXh0ZW50WzFdICsgZXh0ZW50WzNdKSAvIDJdO1xufVxuXG5cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0Nvcm5lcn0gY29ybmVyIENvcm5lci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb3JuZXIgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvcm5lcihleHRlbnQsIGNvcm5lcikge1xuICB2YXIgY29vcmRpbmF0ZTtcbiAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgY29vcmRpbmF0ZSA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgfSBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5CT1RUT01fUklHSFQpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgfSBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfTEVGVCkge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gIH0gZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgY29vcmRpbmF0ZSA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gIH1cbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgdmFyIG1pblggPSBNYXRoLm1pbihleHRlbnQxWzBdLCBleHRlbnQyWzBdKTtcbiAgdmFyIG1pblkgPSBNYXRoLm1pbihleHRlbnQxWzFdLCBleHRlbnQyWzFdKTtcbiAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgdmFyIG1heFkgPSBNYXRoLm1heChleHRlbnQxWzNdLCBleHRlbnQyWzNdKTtcbiAgcmV0dXJuIChtYXhYIC0gbWluWCkgKiAobWF4WSAtIG1pblkpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudD19IG9wdF9leHRlbnQgRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBkeCA9IHJlc29sdXRpb24gKiBzaXplWzBdIC8gMjtcbiAgdmFyIGR5ID0gcmVzb2x1dGlvbiAqIHNpemVbMV0gLyAyO1xuICB2YXIgY29zUm90YXRpb24gPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgdmFyIHhDb3MgPSBkeCAqIGNvc1JvdGF0aW9uO1xuICB2YXIgeFNpbiA9IGR4ICogc2luUm90YXRpb247XG4gIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgdmFyIHlTaW4gPSBkeSAqIHNpblJvdGF0aW9uO1xuICB2YXIgeCA9IGNlbnRlclswXTtcbiAgdmFyIHkgPSBjZW50ZXJbMV07XG4gIHZhciB4MCA9IHggLSB4Q29zICsgeVNpbjtcbiAgdmFyIHgxID0geCAtIHhDb3MgLSB5U2luO1xuICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gIHZhciB4MyA9IHggKyB4Q29zICsgeVNpbjtcbiAgdmFyIHkwID0geSAtIHhTaW4gLSB5Q29zO1xuICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gIHZhciB5MiA9IHkgKyB4U2luICsgeUNvcztcbiAgdmFyIHkzID0geSArIHhTaW4gLSB5Q29zO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoXG4gICAgTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksXG4gICAgTWF0aC5tYXgoeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1heCh5MCwgeTEsIHkyLCB5MyksXG4gICAgb3B0X2V4dGVudCk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGhlaWdodCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJzZWN0aW9uIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25BcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgdmFyIGludGVyc2VjdGlvbiA9IGdldEludGVyc2VjdGlvbihleHRlbnQxLCBleHRlbnQyKTtcbiAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBleHRlbnRzLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBPcHRpb25hbCBleHRlbnQgdG8gcG9wdWxhdGUgd2l0aCBpbnRlcnNlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEludGVyc2VjdGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Miwgb3B0X2V4dGVudCkge1xuICB2YXIgaW50ZXJzZWN0aW9uID0gb3B0X2V4dGVudCA/IG9wdF9leHRlbnQgOiBjcmVhdGVFbXB0eSgpO1xuICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgIGlmIChleHRlbnQxWzBdID4gZXh0ZW50MlswXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MlswXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDFbMV0gPiBleHRlbnQyWzFdKSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQxWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MVsyXSA8IGV4dGVudDJbMl0pIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDFbMl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDJbMl07XG4gICAgfVxuICAgIGlmIChleHRlbnQxWzNdIDwgZXh0ZW50MlszXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MVszXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MlszXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY3JlYXRlT3JVcGRhdGVFbXB0eShpbnRlcnNlY3Rpb24pO1xuICB9XG4gIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWFyZ2luLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFyZ2luKGV4dGVudCkge1xuICByZXR1cm4gZ2V0V2lkdGgoZXh0ZW50KSArIGdldEhlaWdodChleHRlbnQpO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBzaXplICh3aWR0aCwgaGVpZ2h0KSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVGhlIGV4dGVudCBzaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6ZShleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMl0gLSBleHRlbnRbMF0sIGV4dGVudFszXSAtIGV4dGVudFsxXV07XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHRvcCBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSB0b3AgcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFJpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzNdXTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgoZXh0ZW50KSB7XG4gIHJldHVybiBleHRlbnRbMl0gLSBleHRlbnRbMF07XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgb25lIGV4dGVudCBpbnRlcnNlY3RzIGFub3RoZXIuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBpbnRlcnNlY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIGV4dGVudDFbMF0gPD0gZXh0ZW50MlsyXSAmJlxuICAgICAgZXh0ZW50MVsyXSA+PSBleHRlbnQyWzBdICYmXG4gICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbM10gJiZcbiAgICAgIGV4dGVudDFbM10gPj0gZXh0ZW50MlsxXTtcbn1cblxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBleHRlbnQgaXMgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50PX0gb3B0X2V4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHVybk9yVXBkYXRlKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICBpZiAob3B0X2V4dGVudCkge1xuICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4dGVudDtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICB2YXIgZGVsdGFYID0gKChleHRlbnRbMl0gLSBleHRlbnRbMF0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgdmFyIGRlbHRhWSA9ICgoZXh0ZW50WzNdIC0gZXh0ZW50WzFdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gIGV4dGVudFsyXSArPSBkZWx0YVg7XG4gIGV4dGVudFsxXSAtPSBkZWx0YVk7XG4gIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHNlZ21lbnQgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXMgaW50ZXJzZWN0cyAoY3Jvc3NlcyxcbiAqIHRvdWNoZXMsIG9yIGlzIGNvbnRhaW5lZCBieSkgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHN0YXJ0IFNlZ21lbnQgc3RhcnQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGVuZCBTZWdtZW50IGVuZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNlZ21lbnQgaW50ZXJzZWN0cyB0aGUgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBzdGFydCwgZW5kKSB7XG4gIHZhciBpbnRlcnNlY3RzID0gZmFsc2U7XG4gIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gIHZhciBlbmRSZWwgPSBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgZW5kKTtcbiAgaWYgKHN0YXJ0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HIHx8XG4gICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICBpbnRlcnNlY3RzID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgc3RhcnRYID0gc3RhcnRbMF07XG4gICAgdmFyIHN0YXJ0WSA9IHN0YXJ0WzFdO1xuICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgIHZhciBlbmRZID0gZW5kWzFdO1xuICAgIHZhciBzbG9wZSA9IChlbmRZIC0gc3RhcnRZKSAvIChlbmRYIC0gc3RhcnRYKTtcbiAgICB2YXIgeCwgeTtcbiAgICBpZiAoISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSAmJlxuICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyB0b3BcbiAgICAgIHggPSBlbmRYIC0gKChlbmRZIC0gbWF4WSkgLyBzbG9wZSk7XG4gICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnNlY3RzICYmICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgIHkgPSBlbmRZIC0gKChlbmRYIC0gbWF4WCkgKiBzbG9wZSk7XG4gICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnNlY3RzICYmICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykpIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgYm90dG9tXG4gICAgICB4ID0gZW5kWCAtICgoZW5kWSAtIG1pblkpIC8gc2xvcGUpO1xuICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgfVxuICAgIGlmICghaW50ZXJzZWN0cyAmJiAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBsZWZ0XG4gICAgICB5ID0gZW5kWSAtICgoZW5kWCAtIG1pblgpICogc2xvcGUpO1xuICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgfVxuXG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdHM7XG59XG5cblxuLyoqXG4gKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQ2FsbGVkIHdpdGggYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXWAgZXh0ZW50IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1Gbiwgb3B0X2V4dGVudCkge1xuICB2YXIgY29vcmRpbmF0ZXMgPSBbXG4gICAgZXh0ZW50WzBdLCBleHRlbnRbMV0sXG4gICAgZXh0ZW50WzBdLCBleHRlbnRbM10sXG4gICAgZXh0ZW50WzJdLCBleHRlbnRbMV0sXG4gICAgZXh0ZW50WzJdLCBleHRlbnRbM11cbiAgXTtcbiAgdHJhbnNmb3JtRm4oY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzLCAyKTtcbiAgdmFyIHhzID0gW2Nvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1syXSwgY29vcmRpbmF0ZXNbNF0sIGNvb3JkaW5hdGVzWzZdXTtcbiAgdmFyIHlzID0gW2Nvb3JkaW5hdGVzWzFdLCBjb29yZGluYXRlc1szXSwgY29vcmRpbmF0ZXNbNV0sIGNvb3JkaW5hdGVzWzddXTtcbiAgcmV0dXJuIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlUeXBlXG4gKi9cblxuLyoqXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgYCdDaXJjbGUnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlQ6ICdQb2ludCcsXG4gIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gIExJTkVBUl9SSU5HOiAnTGluZWFyUmluZycsXG4gIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgTVVMVElfUE9JTlQ6ICdNdWx0aVBvaW50JyxcbiAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgR0VPTUVUUllfQ09MTEVDVElPTjogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gIENJUkNMRTogJ0NpcmNsZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeUxheW91dFxuICovXG5cbi8qKlxuICogVGhlIGNvb3JkaW5hdGUgbGF5b3V0IGZvciBnZW9tZXRyaWVzLCBpbmRpY2F0aW5nIHdoZXRoZXIgYSAzcmQgb3IgNHRoIHogKCdaJylcbiAqIG9yIG1lYXN1cmUgKCdNJykgY29vcmRpbmF0ZSBpcyBhdmFpbGFibGUuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlIGAnWFknYCxcbiAqIGAnWFlaJ2AsIGAnWFlNJ2AsIGAnWFlaTSdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBYWTogJ1hZJyxcbiAgWFlaOiAnWFlaJyxcbiAgWFlNOiAnWFlNJyxcbiAgWFlaTTogJ1hZWk0nXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2pdO1xuICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgfVxuICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBSb3RhdGlvbiBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgZGVsdGFYICogY29zIC0gZGVsdGFZICogc2luO1xuICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBkZWx0YVggKiBzaW4gKyBkZWx0YVkgKiBjb3M7XG4gICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG5cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgZGVzdFtpKytdID0gYW5jaG9yWSArIHN5ICogZGVsdGFZO1xuICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgIH1cbiAgfVxuICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIG9wdF9kZXN0KSB7XG4gIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICB2YXIgaSA9IDA7XG4gIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gKyBkZWx0YVk7XG4gICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwiLyoqXG4gKiBAbGljZW5zZVxuICogTGF0aXR1ZGUvbG9uZ2l0dWRlIHNwaGVyaWNhbCBnZW9kZXN5IGZvcm11bGFlIHRha2VuIGZyb21cbiAqIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG4gKiBMaWNlbnNlZCB1bmRlciBDQy1CWS0zLjAuXG4gKi9cblxuLyoqXG4gKiBAbW9kdWxlIG9sL3NwaGVyZVxuICovXG5pbXBvcnQge3RvUmFkaWFucywgdG9EZWdyZWVzfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggb3B0aW9ucyBmb3IgdGhlIHtAbGluayBnZXRMZW5ndGh9IG9yIHtAbGluayBnZXRBcmVhfVxuICogZnVuY3Rpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gU3BoZXJlTWV0cmljT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXVxuICogUHJvamVjdGlvbiBvZiB0aGUgIGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGdlb21ldHJ5IGlzIGFzc3VtZWQgdG8gYmUgaW5cbiAqIFdlYiBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFkaXVzPTYzNzEwMDguOF0gU3BoZXJlIHJhZGl1cy4gIEJ5IGRlZmF1bHQsIHRoZSByYWRpdXMgb2YgdGhlXG4gKiBlYXJ0aCBpcyB1c2VkIChDbGFya2UgMTg2NiBBdXRoYWxpYyBTcGhlcmUpLlxuICovXG5cblxuLyoqXG4gKiBUaGUgbWVhbiBFYXJ0aCByYWRpdXMgKDEvMyAqICgyYSArIGIpKSBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1c1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1JBRElVUyA9IDYzNzEwMDguODtcblxuXG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICB2YXIgcmFkaXVzID0gb3B0X3JhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gIHZhciBkZWx0YUxhdEJ5MiA9IChsYXQyIC0gbGF0MSkgLyAyO1xuICB2YXIgZGVsdGFMb25CeTIgPSB0b1JhZGlhbnMoYzJbMF0gLSBjMVswXSkgLyAyO1xuICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKiBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgTWF0aC5jb3MobGF0MSkgKiBNYXRoLmNvcyhsYXQyKTtcbiAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGN1bXVsYXRpdmUgZ3JlYXQgY2lyY2xlIGxlbmd0aCBvZiBsaW5lc3RyaW5nIGNvb3JkaW5hdGVzIChnZW9ncmFwaGljKS5cbiAqIEBwYXJhbSB7QXJyYXl9IGNvb3JkaW5hdGVzIExpbmVzdHJpbmcgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICB2YXIgbGVuZ3RoID0gMDtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICBsZW5ndGggKz0gZ2V0RGlzdGFuY2UoY29vcmRpbmF0ZXNbaV0sIGNvb3JkaW5hdGVzW2kgKyAxXSwgcmFkaXVzKTtcbiAgfVxuICByZXR1cm4gbGVuZ3RoO1xufVxuXG5cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgbGVuZ3RoIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZVxuICogZ3JlYXQgY2lyY2xlIGRpc3RhbmNlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzLiAgRm9yIHBvbHlnb25zLCB0aGUgbGVuZ3RoIGlzXG4gKiB0aGUgc3VtIG9mIGFsbCByaW5ncy4gIEZvciBwb2ludHMsIHRoZSBsZW5ndGggaXMgemVyby4gIEZvciBtdWx0aS1wYXJ0XG4gKiBnZW9tZXRyaWVzLCB0aGUgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIGxlbmd0aCBvZiBlYWNoIHBhcnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlXG4gKiBsZW5ndGggY2FsY3VsYXRpb24uICBCeSBkZWZhdWx0LCBnZW9tZXRyaWVzIGFyZSBhc3N1bWVkIHRvIGJlIGluICdFUFNHOjM4NTcnLlxuICogWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICB9XG4gIHZhciBsZW5ndGggPSAwO1xuICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDoge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGxlbmd0aCA9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICB2YXIgZ2VvbWV0cmllcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGgoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGVuZ3RoO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3BoZXJpY2FsIGFyZWEgZm9yIGEgbGlzdCBvZiBjb29yZGluYXRlcy5cbiAqXG4gKiBbUmVmZXJlbmNlXShodHRwczovL3Rycy1uZXcuanBsLm5hc2EuZ292L2hhbmRsZS8yMDE0LzQwNDA5KVxuICogUm9iZXJ0LiBHLiBDaGFtYmVybGFpbiBhbmQgV2lsbGlhbSBILiBEdXF1ZXR0ZSwgXCJTb21lIEFsZ29yaXRobXMgZm9yXG4gKiBQb2x5Z29ucyBvbiBhIFNwaGVyZVwiLCBKUEwgUHVibGljYXRpb24gMDctMDMsIEpldCBQcm9wdWxzaW9uXG4gKiBMYWJvcmF0b3J5LCBQYXNhZGVuYSwgQ0EsIEp1bmUgMjAwN1xuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBMaXN0IG9mIGNvb3JkaW5hdGVzIG9mIGEgbGluZWFyXG4gKiByaW5nLiBJZiB0aGUgcmluZyBpcyBvcmllbnRlZCBjbG9ja3dpc2UsIHRoZSBhcmVhIHdpbGwgYmUgcG9zaXRpdmUsXG4gKiBvdGhlcndpc2UgaXQgd2lsbCBiZSBuZWdhdGl2ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICB2YXIgYXJlYSA9IDA7XG4gIHZhciBsZW4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gIHZhciB4MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzBdO1xuICB2YXIgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgIHZhciB5MiA9IGNvb3JkaW5hdGVzW2ldWzFdO1xuICAgIGFyZWEgKz0gdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICAgKDIgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTEpKSArXG4gICAgICAgIE1hdGguc2luKHRvUmFkaWFucyh5MikpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGFyZWEgKiByYWRpdXMgKiByYWRpdXMgLyAyLjA7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICB9XG4gIHZhciBhcmVhID0gMDtcbiAgdmFyIGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgYXJlYSA9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlc1swXSwgcmFkaXVzKSk7XG4gICAgICBmb3IgKGkgPSAxLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cykpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBhcmVhICs9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbMF0sIHJhZGl1cykpO1xuICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgIHZhciBnZW9tZXRyaWVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgYXJlYSArPSBnZXRBcmVhKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyZWE7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGF0IHRoZSBnaXZlbiBkaXN0YW5jZSBhbmQgYmVhcmluZyBmcm9tIGBjMWAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYzEgVGhlIG9yaWdpbiBwb2ludCAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgb3JpZ2luXG4gKiAgICAgcG9pbnQgYW5kIHRoZSB0YXJnZXQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBUaGUgYmVhcmluZyAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9yYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSB0YXJnZXQgcG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQoYzEsIGRpc3RhbmNlLCBiZWFyaW5nLCBvcHRfcmFkaXVzKSB7XG4gIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICB2YXIgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gIHZhciBsb24xID0gdG9SYWRpYW5zKGMxWzBdKTtcbiAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgdmFyIGxhdCA9IE1hdGguYXNpbihcbiAgICBNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGRCeVIpICtcbiAgICAgIE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhiZWFyaW5nKSk7XG4gIHZhciBsb24gPSBsb24xICsgTWF0aC5hdGFuMihcbiAgICBNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksXG4gICAgTWF0aC5jb3MoZEJ5UikgLSBNYXRoLnNpbihsYXQxKSAqIE1hdGguc2luKGxhdCkpO1xuICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwaGVyZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Vbml0c1xuICovXG5cbi8qKlxuICogUHJvamVjdGlvbiB1bml0czogYCdkZWdyZWVzJ2AsIGAnZnQnYCwgYCdtJ2AsIGAncGl4ZWxzJ2AsIGAndGlsZS1waXhlbHMnYCBvclxuICogYCd1cy1mdCdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFVuaXRzID0ge1xuICBERUdSRUVTOiAnZGVncmVlcycsXG4gIEZFRVQ6ICdmdCcsXG4gIE1FVEVSUzogJ20nLFxuICBQSVhFTFM6ICdwaXhlbHMnLFxuICBUSUxFX1BJWEVMUzogJ3RpbGUtcGl4ZWxzJyxcbiAgVVNGRUVUOiAndXMtZnQnXG59O1xuXG5cbi8qKlxuICogTWV0ZXJzIHBlciB1bml0IGxvb2t1cCB0YWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxVbml0cywgbnVtYmVyPn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSB7fTtcbi8vIHVzZSB0aGUgcmFkaXVzIG9mIHRoZSBOb3JtYWwgc3BoZXJlXG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gPSAyICogTWF0aC5QSSAqIDYzNzA5OTcgLyAzNjA7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuRkVFVF0gPSAwLjMwNDg7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuTUVURVJTXSA9IDE7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuVVNGRUVUXSA9IDEyMDAgLyAzOTM3O1xuXG5leHBvcnQgZGVmYXVsdCBVbml0cztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5pdHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQge01FVEVSU19QRVJfVU5JVH0gZnJvbSAnLi9Vbml0cy5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYHtudW1iZXJ9YCB2aWV3IHJlc29sdXRpb24gYW5kIGFuIGB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfWAgYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGB7bnVtYmVyfWAgcmVzb2x1dGlvbiBhdCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUuIElmIHRoaXMgaXMgYHVuZGVmaW5lZGAsXG4gKiB0aGUgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ojZ2V0UG9pbnRSZXNvbHV0aW9ufSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gZGVmaW5pdGlvbiBjbGFzcy4gT25lIG9mIHRoZXNlIGlzIGNyZWF0ZWQgZm9yIGVhY2ggcHJvamVjdGlvblxuICogc3VwcG9ydGVkIGluIHRoZSBhcHBsaWNhdGlvbiBhbmQgc3RvcmVkIGluIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p9IG5hbWVzcGFjZS5cbiAqIFlvdSBjYW4gdXNlIHRoZXNlIGluIGFwcGxpY2F0aW9ucywgYnV0IHRoaXMgaXMgbm90IHJlcXVpcmVkLCBhcyBBUEkgcGFyYW1zXG4gKiBhbmQgb3B0aW9ucyB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qflByb2plY3Rpb25MaWtlfSB3aGljaCBtZWFucyB0aGUgc2ltcGxlIHN0cmluZ1xuICogY29kZSB3aWxsIHN1ZmZpY2UuXG4gKlxuICogWW91IGNhbiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmdldH0gdG8gcmV0cmlldmUgdGhlIG9iamVjdCBmb3IgYSBwYXJ0aWN1bGFyXG4gKiBwcm9qZWN0aW9uLlxuICpcbiAqIFRoZSBsaWJyYXJ5IGluY2x1ZGVzIGRlZmluaXRpb25zIGZvciBgRVBTRzo0MzI2YCBhbmQgYEVQU0c6Mzg1N2AsIHRvZ2V0aGVyXG4gKiB3aXRoIHRoZSBmb2xsb3dpbmcgYWxpYXNlczpcbiAqICogYEVQU0c6NDMyNmA6IENSUzo4NCwgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQsIHVybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCxcbiAqICAgICBodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNixcbiAqICAgICB1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjZcbiAqICogYEVQU0c6Mzg1N2A6IEVQU0c6MTAyMTAwLCBFUFNHOjEwMjExMywgRVBTRzo5MDA5MTMsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni4xODozOjM4NTcsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTdcbiAqXG4gKiBJZiB5b3UgdXNlIFtwcm9qNGpzXShodHRwczovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzKSwgYWxpYXNlcyBjYW5cbiAqIGJlIGFkZGVkIHVzaW5nIGBwcm9qNC5kZWZzKClgLiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmVcbiAqIGFkZGVkLCBjYWxsIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovcHJvajR+cmVnaXN0ZXJ9IGZ1bmN0aW9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFByb2plY3Rpb24gPSBmdW5jdGlvbiBQcm9qZWN0aW9uKG9wdGlvbnMpIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICB0aGlzLmNvZGVfID0gb3B0aW9ucy5jb2RlO1xuXG4gIC8qKlxuICAgKiBVbml0cyBvZiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIFdoZW4gc2V0IHRvIGBUSUxFX1BJWEVMU2AsIGFcbiAgICogYHRoaXMuZXh0ZW50X2AgYW5kIGB0aGlzLndvcmxkRXh0ZW50X2AgbXVzdCBiZSBjb25maWd1cmVkIHByb3Blcmx5IGZvciBlYWNoXG4gICAqIHRpbGUuXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9XG4gICAqL1xuICB0aGlzLnVuaXRzXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSAqLyAob3B0aW9ucy51bml0cyk7XG5cbiAgLyoqXG4gICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICovXG4gIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG5cbiAgLyoqXG4gICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgKiBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICogcHJvamVjdGVkIGNvb3JkaW5hdGUgc3BhY2UuXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgKi9cbiAgdGhpcy53b3JsZEV4dGVudF8gPSBvcHRpb25zLndvcmxkRXh0ZW50ICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgdGhpcy5heGlzT3JpZW50YXRpb25fID0gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICB0aGlzLmNhbldyYXBYXyA9ICEhKHRoaXMuZ2xvYmFsXyAmJiB0aGlzLmV4dGVudF8pO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgKi9cbiAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLm1ldGVyc1BlclVuaXRfID0gb3B0aW9ucy5tZXRlcnNQZXJVbml0O1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcHJvamVjdGlvbiBpcyBzdWl0YWJsZSBmb3Igd3JhcHBpbmcgdGhlIHgtYXhpc1xuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5jYW5XcmFwWCA9IGZ1bmN0aW9uIGNhbldyYXBYICgpIHtcbiAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvZGUgZm9yIHRoaXMgcHJvamVjdGlvbiwgZS5nLiAnRVBTRzo0MzI2Jy5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uIGdldENvZGUgKCkge1xuICByZXR1cm4gdGhpcy5jb2RlXztcbn07XG5cbi8qKlxuICogR2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gZ2V0RXh0ZW50ICgpIHtcbiAgcmV0dXJuIHRoaXMuZXh0ZW50Xztcbn07XG5cbi8qKlxuICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFVuaXRzLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRVbml0cyA9IGZ1bmN0aW9uIGdldFVuaXRzICgpIHtcbiAgcmV0dXJuIHRoaXMudW5pdHNfO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGFtb3VudCBvZiBtZXRlcnMgcGVyIHVuaXQgb2YgdGhpcyBwcm9qZWN0aW9uLklmIHRoZSBwcm9qZWN0aW9uIGlzXG4gKiBub3QgY29uZmlndXJlZCB3aXRoIGBtZXRlcnNQZXJVbml0YCBvciBhIHVuaXRzIGlkZW50aWZpZXIsIHRoZSByZXR1cm4gaXNcbiAqIGB1bmRlZmluZWRgLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gTWV0ZXJzLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRNZXRlcnNQZXJVbml0ID0gZnVuY3Rpb24gZ2V0TWV0ZXJzUGVyVW5pdCAoKSB7XG4gIHJldHVybiB0aGlzLm1ldGVyc1BlclVuaXRfIHx8IE1FVEVSU19QRVJfVU5JVFt0aGlzLnVuaXRzX107XG59O1xuXG4vKipcbiAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gZ2V0V29ybGRFeHRlbnQgKCkge1xuICByZXR1cm4gdGhpcy53b3JsZEV4dGVudF87XG59O1xuXG4vKipcbiAqIEdldCB0aGUgYXhpcyBvcmllbnRhdGlvbiBvZiB0aGlzIHByb2plY3Rpb24uXG4gKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gKiBlbnUgLSB0aGUgZGVmYXVsdCBlYXN0aW5nLCBub3J0aGluZywgZWxldmF0aW9uLlxuICogbmV1IC0gbm9ydGhpbmcsIGVhc3RpbmcsIHVwIC0gdXNlZnVsIGZvciBcImxhdC9sb25nXCIgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyxcbiAqICAgb3Igc291dGggb3JpZW50YXRlZCB0cmFuc3ZlcnNlIG1lcmNhdG9yLlxuICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAqICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEF4aXMgb3JpZW50YXRpb24uXG4gKiBAYXBpXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldEF4aXNPcmllbnRhdGlvbiA9IGZ1bmN0aW9uIGdldEF4aXNPcmllbnRhdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG59O1xuXG4vKipcbiAqIElzIHRoaXMgcHJvamVjdGlvbiBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZD9cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5pc0dsb2JhbCA9IGZ1bmN0aW9uIGlzR2xvYmFsICgpIHtcbiAgcmV0dXJuIHRoaXMuZ2xvYmFsXztcbn07XG5cbi8qKlxuICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2xvYmFsID0gZnVuY3Rpb24gc2V0R2xvYmFsIChnbG9iYWwpIHtcbiAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gKi9cblByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uIGdldERlZmF1bHRUaWxlR3JpZCAoKSB7XG4gIHJldHVybiB0aGlzLmRlZmF1bHRUaWxlR3JpZF87XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXREZWZhdWx0VGlsZUdyaWQgPSBmdW5jdGlvbiBzZXREZWZhdWx0VGlsZUdyaWQgKHRpbGVHcmlkKSB7XG4gIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IHRpbGVHcmlkO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiBzZXRFeHRlbnQgKGV4dGVudCkge1xuICB0aGlzLmV4dGVudF8gPSBleHRlbnQ7XG4gIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIGV4dGVudCk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHdvcmxkRXh0ZW50IFdvcmxkIGV4dGVudFxuICogICBbbWlubG9uLCBtaW5sYXQsIG1heGxvbiwgbWF4bGF0XS5cbiAqIEBhcGlcbiAqL1xuUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0V29ybGRFeHRlbnQgPSBmdW5jdGlvbiBzZXRXb3JsZEV4dGVudCAod29ybGRFeHRlbnQpIHtcbiAgdGhpcy53b3JsZEV4dGVudF8gPSB3b3JsZEV4dGVudDtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBnZXRQb2ludFJlc29sdXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+Z2V0UG9pbnRSZXNvbHV0aW9ufVxuICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcn0gZnVuYyBGdW5jdGlvblxuICogQGFwaVxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRHZXRQb2ludFJlc29sdXRpb24gPSBmdW5jdGlvbiBzZXRHZXRQb2ludFJlc29sdXRpb24gKGZ1bmMpIHtcbiAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VzdG9tIHBvaW50IHJlc29sdXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgcHJvamVjdGlvbiAoaWYgc2V0KS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfSBUaGUgY3VzdG9tIHBvaW50XG4gKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICovXG5Qcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludFJlc29sdXRpb25GdW5jID0gZnVuY3Rpb24gZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyAoKSB7XG4gIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvamVjdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQge2Nvc2h9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcblxuXG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBIQUxGX1NJWkUgPSBNYXRoLlBJICogUkFESVVTO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbXG4gIC1IQUxGX1NJWkUsIC1IQUxGX1NJWkUsXG4gIEhBTEZfU0laRSwgSEFMRl9TSVpFXG5dO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBXT1JMRF9FWFRFTlQgPSBbLTE4MCwgLTg1LCAxODAsIDg1XTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUHJvamVjdGlvbikge1xuICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgIFByb2plY3Rpb24uY2FsbCh0aGlzLCB7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6IFVuaXRzLk1FVEVSUyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24ocmVzb2x1dGlvbiwgcG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb24gLyBjb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbiAgaWYgKCBQcm9qZWN0aW9uICkgRVBTRzM4NTdQcm9qZWN0aW9uLl9fcHJvdG9fXyA9IFByb2plY3Rpb247XG4gIEVQU0czODU3UHJvamVjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQcm9qZWN0aW9uICYmIFByb2plY3Rpb24ucHJvdG90eXBlICk7XG4gIEVQU0czODU3UHJvamVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFUFNHMzg1N1Byb2plY3Rpb247XG5cbiAgcmV0dXJuIEVQU0czODU3UHJvamVjdGlvbjtcbn0oUHJvamVjdGlvbikpO1xuXG5cbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzozODU3LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTAwJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTEzJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjozODU3JyksXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3Jylcbl07XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6NDMyNiB0byBFUFNHOjM4NTcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9vdXRwdXQgT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGltZW5zaW9uIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIHZhciBoYWxmU2l6ZSA9IEhBTEZfU0laRTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgb3V0cHV0W2ldID0gaGFsZlNpemUgKiBpbnB1dFtpXSAvIDE4MDtcbiAgICB2YXIgeSA9IFJBRElVUyAqXG4gICAgICAgIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgKiAoaW5wdXRbaSArIDFdICsgOTApIC8gMzYwKSk7XG4gICAgaWYgKHkgPiBoYWxmU2l6ZSkge1xuICAgICAgeSA9IGhhbGZTaXplO1xuICAgIH0gZWxzZSBpZiAoeSA8IC1oYWxmU2l6ZSkge1xuICAgICAgeSA9IC1oYWxmU2l6ZTtcbiAgICB9XG4gICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzozODU3IHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0VQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9IDE4MCAqIGlucHV0W2ldIC8gSEFMRl9TSVpFO1xuICAgIG91dHB1dFtpICsgMV0gPSAzNjAgKiBNYXRoLmF0YW4oXG4gICAgICBNYXRoLmV4cChpbnB1dFtpICsgMV0gLyBSQURJVVMpKSAvIE1hdGguUEkgLSA5MDtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnMzg1Ny5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnNDMyNlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vVW5pdHMuanMnO1xuXG5cbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcblxuXG4vKipcbiAqIEV4dGVudCBvZiB0aGUgRVBTRzo0MzI2IHByb2plY3Rpb24gd2hpY2ggaXMgdGhlIHdob2xlIHdvcmxkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy0xODAsIC05MCwgMTgwLCA5MF07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUVURVJTX1BFUl9VTklUID0gTWF0aC5QSSAqIFJBRElVUyAvIDE4MDtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciBXR1M4NCBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChFUFNHOjQzMjYpLlxuICpcbiAqIE5vdGUgdGhhdCBPcGVuTGF5ZXJzIGRvZXMgbm90IHN0cmljdGx5IGNvbXBseSB3aXRoIHRoZSBFUFNHIGRlZmluaXRpb24uXG4gKiBUaGUgRVBTRyByZWdpc3RyeSBkZWZpbmVzIDQzMjYgYXMgYSBDUlMgZm9yIExhdGl0dWRlLExvbmdpdHVkZSAoeSx4KS5cbiAqIE9wZW5MYXllcnMgdHJlYXRzIEVQU0c6NDMyNiBhcyBhIHBzZXVkby1wcm9qZWN0aW9uLCB3aXRoIHgseSBjb29yZGluYXRlcy5cbiAqL1xudmFyIEVQU0c0MzI2UHJvamVjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFByb2plY3Rpb24pIHtcbiAgZnVuY3Rpb24gRVBTRzQzMjZQcm9qZWN0aW9uKGNvZGUsIG9wdF9heGlzT3JpZW50YXRpb24pIHtcbiAgICBQcm9qZWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgY29kZTogY29kZSxcbiAgICAgIHVuaXRzOiBVbml0cy5ERUdSRUVTLFxuICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICBheGlzT3JpZW50YXRpb246IG9wdF9heGlzT3JpZW50YXRpb24sXG4gICAgICBnbG9iYWw6IHRydWUsXG4gICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICB3b3JsZEV4dGVudDogRVhURU5UXG4gICAgfSk7XG5cbiAgfVxuXG4gIGlmICggUHJvamVjdGlvbiApIEVQU0c0MzI2UHJvamVjdGlvbi5fX3Byb3RvX18gPSBQcm9qZWN0aW9uO1xuICBFUFNHNDMyNlByb2plY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUHJvamVjdGlvbiAmJiBQcm9qZWN0aW9uLnByb3RvdHlwZSApO1xuICBFUFNHNDMyNlByb2plY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRVBTRzQzMjZQcm9qZWN0aW9uO1xuXG4gIHJldHVybiBFUFNHNDMyNlByb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcblxuXG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0NSUzo4NCcpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdFUFNHOjQzMjYnLCAnbmV1JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6RVBTRzo2LjY6NDMyNicsICduZXUnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjYnLCAnbmV1Jylcbl07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2c0MzI2LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3Byb2plY3Rpb25zXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbnZhciBjYWNoZSA9IHt9O1xuXG5cbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gIGNhY2hlID0ge307XG59XG5cblxuLyoqXG4gKiBHZXQgYSBjYWNoZWQgcHJvamVjdGlvbiBieSBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIGNvZGUgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIChpZiBjYWNoZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNvZGUpIHtcbiAgcmV0dXJuIGNhY2hlW2NvZGVdIHx8IG51bGw7XG59XG5cblxuLyoqXG4gKiBBZGQgYSBwcm9qZWN0aW9uIHRvIHRoZSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBwcm9qZWN0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvZGUsIHByb2plY3Rpb24pIHtcbiAgY2FjaGVbY29kZV0gPSBwcm9qZWN0aW9uO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vb2JqLmpzJztcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb24+Pn1cbiAqL1xudmFyIHRyYW5zZm9ybXMgPSB7fTtcblxuXG4vKipcbiAqIENsZWFyIHRoZSB0cmFuc2Zvcm0gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgdHJhbnNmb3JtcyA9IHt9O1xufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gIGlmICghKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcykpIHtcbiAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdID0ge307XG4gIH1cbiAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdID0gdHJhbnNmb3JtRm47XG59XG5cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyB0aGUgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY2xlYW4gdXBcbiAqIGNhY2hlZCB0cmFuc2Zvcm1zIGR1cmluZyB0ZXN0aW5nLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUaGUgdW5yZWdpc3RlcmVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgaWYgKGlzRW1wdHkodHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkpIHtcbiAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtO1xufVxuXG5cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gIHZhciB0cmFuc2Zvcm07XG4gIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3Jtcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvalxuICovXG5cbi8qKlxuICogVGhlIG9sL3Byb2ogbW9kdWxlIHN0b3JlczpcbiAqICogYSBsaXN0IG9mIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufVxuICogb2JqZWN0cywgb25lIGZvciBlYWNoIHByb2plY3Rpb24gc3VwcG9ydGVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICogKiBhIGxpc3Qgb2YgdHJhbnNmb3JtIGZ1bmN0aW9ucyBuZWVkZWQgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBvbmUgcHJvamVjdGlvblxuICogaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBzdGF0aWMgZnVuY3Rpb25zIGFyZSB0aGUgbWV0aG9kcyB1c2VkIHRvIG1haW50YWluIHRoZXNlLlxuICogRWFjaCB0cmFuc2Zvcm0gZnVuY3Rpb24gY2FuIGhhbmRsZSBub3Qgb25seSBzaW1wbGUgY29vcmRpbmF0ZSBwYWlycywgYnV0IGFsc29cbiAqIGxhcmdlIGFycmF5cyBvZiBjb29yZGluYXRlcyBzdWNoIGFzIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFdoZW4gbG9hZGVkLCB0aGUgbGlicmFyeSBhZGRzIHByb2plY3Rpb24gb2JqZWN0cyBmb3IgRVBTRzo0MzI2IChXR1M4NFxuICogZ2VvZ3JhcGhpYyBjb29yZGluYXRlcykgYW5kIEVQU0c6Mzg1NyAoV2ViIG9yIFNwaGVyaWNhbCBNZXJjYXRvciwgYXMgdXNlZFxuICogZm9yIGV4YW1wbGUgYnkgQmluZyBNYXBzIG9yIE9wZW5TdHJlZXRNYXApLCB0b2dldGhlciB3aXRoIHRoZSByZWxldmFudFxuICogdHJhbnNmb3JtIGZ1bmN0aW9ucy5cbiAqXG4gKiBBZGRpdGlvbmFsIHRyYW5zZm9ybXMgbWF5IGJlIGFkZGVkIGJ5IHVzaW5nIHRoZSBodHRwOi8vcHJvajRqcy5vcmcvXG4gKiBsaWJyYXJ5ICh2ZXJzaW9uIDIuMiBvciBsYXRlcikuIFlvdSBjYW4gdXNlIHRoZSBmdWxsIGJ1aWxkIHN1cHBsaWVkIGJ5XG4gKiBQcm9qNGpzLCBvciBjcmVhdGUgYSBjdXN0b20gYnVpbGQgdG8gc3VwcG9ydCB0aG9zZSBwcm9qZWN0aW9ucyB5b3UgbmVlZDsgc2VlXG4gKiB0aGUgUHJvajRqcyB3ZWJzaXRlIGZvciBob3cgdG8gZG8gdGhpcy4gWW91IGFsc28gbmVlZCB0aGUgUHJvajRqcyBkZWZpbml0aW9uc1xuICogZm9yIHRoZSByZXF1aXJlZCBwcm9qZWN0aW9ucy4gVGhlc2UgZGVmaW5pdGlvbnMgY2FuIGJlIG9idGFpbmVkIGZyb21cbiAqIGh0dHBzOi8vZXBzZy5pby8sIGFuZCBhcmUgYSBKUyBmdW5jdGlvbiwgc28gY2FuIGJlIGxvYWRlZCBpbiBhIHNjcmlwdFxuICogdGFnIChhcyBpbiB0aGUgZXhhbXBsZXMpIG9yIHBhc3RlZCBpbnRvIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlIGFkZGVkIHRvIHByb2o0J3MgcmVnaXN0cnkgKGJ5XG4gKiB1c2luZyBgcHJvajQuZGVmcygpYCksIHNpbXBseSBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGZyb20gdGhlIGBvbC9wcm9qL3Byb2o0YFxuICogcGFja2FnZS4gRXhpc3RpbmcgdHJhbnNmb3JtcyBhcmUgbm90IGNoYW5nZWQgYnkgdGhpcyBmdW5jdGlvbi4gU2VlXG4gKiBleGFtcGxlcy93bXMtaW1hZ2UtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBBZGRpdGlvbmFsIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgY2FuIGJlIHJlZ2lzdGVyZWQgd2l0aCBgcHJvajQuZGVmcygpYCBhbnlcbiAqIHRpbWUuIEp1c3QgbWFrZSBzdXJlIHRvIGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgYWdhaW47IGZvciBleGFtcGxlLCB3aXRoIHVzZXItc3VwcGxpZWQgZGF0YSB3aGVyZSB5b3UgZG9uJ3RcbiAqIGtub3cgaW4gYWR2YW5jZSB3aGF0IHByb2plY3Rpb25zIGFyZSBuZWVkZWQsIHlvdSBjYW4gaW5pdGlhbGx5IGxvYWQgbWluaW1hbFxuICogc3VwcG9ydCBhbmQgdGhlbiBsb2FkIHdoaWNoZXZlciBhcmUgcmVxdWVzdGVkLlxuICpcbiAqIE5vdGUgdGhhdCBQcm9qNGpzIGRvZXMgbm90IHN1cHBvcnQgcHJvamVjdGlvbiBleHRlbnRzLiBJZiB5b3Ugd2FudCB0byBhZGRcbiAqIG9uZSBmb3IgY3JlYXRpbmcgZGVmYXVsdCB0aWxlIGdyaWRzLCB5b3UgY2FuIGFkZCBpdCBhZnRlciB0aGUgUHJvamVjdGlvblxuICogb2JqZWN0IGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBgc2V0RXh0ZW50YCwgZm9yIGV4YW1wbGUsXG4gKiBgZ2V0KCdFUFNHOjEyMzQnKS5zZXRFeHRlbnQoZXh0ZW50KWAuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gUHJvajRqcyBzdXBwb3J0LCBhbnkgdHJhbnNmb3JtIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qfmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gVG8gdXNlIHRoaXMsIHlvdSBtdXN0IGZpcnN0IGNyZWF0ZVxuICogYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gb2JqZWN0IGZvciB0aGUgbmV3IHByb2plY3Rpb24gYW5kIGFkZCBpdCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkUHJvamVjdGlvbn0uIFlvdSBjYW4gdGhlbiBhZGQgdGhlIGZvcndhcmQgYW5kIGludmVyc2VcbiAqIGZ1bmN0aW9ucyB3aXRoIHtAbGluayBtb2R1bGU6b2wvcHJvan5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFNlZVxuICogZXhhbXBsZXMvd21zLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogTm90ZSB0aGF0IGlmIG5vIHRyYW5zZm9ybXMgYXJlIG5lZWRlZCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlXG4gKiBwcm9qZWN0aW9uLCBqdXN0IGFkZCBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+YWRkUHJvamVjdGlvbn0uIFNlZSBleGFtcGxlcy93bXMtbm8tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZlxuICogdGhpcy5cbiAqL1xuaW1wb3J0IHtnZXREaXN0YW5jZX0gZnJvbSAnLi9zcGhlcmUuanMnO1xuaW1wb3J0IHthcHBseVRyYW5zZm9ybX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge3RvRVBTRzQzMjYsIGZyb21FUFNHNDMyNiwgUFJPSkVDVElPTlMgYXMgRVBTRzM4NTdfUFJPSkVDVElPTlN9IGZyb20gJy4vcHJvai9lcHNnMzg1Ny5qcyc7XG5pbXBvcnQge1BST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TfSBmcm9tICcuL3Byb2ovZXBzZzQzMjYuanMnO1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9wcm9qL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzLCB7TUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0ICogYXMgcHJvamVjdGlvbnMgZnJvbSAnLi9wcm9qL3Byb2plY3Rpb25zLmpzJztcbmltcG9ydCB7YWRkIGFzIGFkZFRyYW5zZm9ybUZ1bmMsIGNsZWFyIGFzIGNsZWFyVHJhbnNmb3JtRnVuY3MsIGdldCBhcyBnZXRUcmFuc2Zvcm1GdW5jfSBmcm9tICcuL3Byb2ovdHJhbnNmb3Jtcy5qcyc7XG5cblxuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIGFuIG9wdGlvbmFsXG4gKiBvdXRwdXQgYXJyYXksIGFuZCBhbiBvcHRpb25hbCBkaW1lbnNpb24gKGRlZmF1bHQgc2hvdWxkIGJlIDIpLiAgVGhlIGZ1bmN0aW9uXG4gKiB0cmFuc2Zvcm1zIHRoZSBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgcG9wdWxhdGVzIHRoZSBvdXRwdXQgYXJyYXksIGFuZFxuICogcmV0dXJucyB0aGUgb3V0cHV0IGFycmF5LlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihBcnJheTxudW1iZXI+LCBBcnJheTxudW1iZXI+PSwgbnVtYmVyPSk6IEFycmF5PG51bWJlcj59IFRyYW5zZm9ybUZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuXG5leHBvcnQge01FVEVSU19QRVJfVU5JVH07XG5cbmV4cG9ydCB7UHJvamVjdGlvbn07XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGNvb3JkaW5hdGUgYXJyYXkgKG5ldyBhcnJheSwgc2FtZSBjb29yZGluYXRlXG4gKiAgICAgdmFsdWVzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lVHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gIHZhciBvdXRwdXQ7XG4gIGlmIChvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgfVxuICAgIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X291dHB1dCBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW5wdXQgY29vcmRpbmF0ZSBhcnJheSAoc2FtZSBhcnJheSBhcyBpbnB1dCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgIH1cbiAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufVxuXG5cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBwcm9qZWN0aW9ucy5hZGQocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24sIHByb2plY3Rpb24sIGNsb25lVHJhbnNmb3JtKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cblxuXG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uIG9iamVjdCwgb3IgbnVsbCBpZiBub3QgaW4gbGlzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChwcm9qZWN0aW9uTGlrZSkge1xuICByZXR1cm4gdHlwZW9mIHByb2plY3Rpb25MaWtlID09PSAnc3RyaW5nJyA/XG4gICAgcHJvamVjdGlvbnMuZ2V0KC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKSA6XG4gICAgKC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsKTtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgcG9pbnQgaW4gZGVncmVlcyBvciBkaXN0YW5jZSB1bml0cy5cbiAqIEZvciBwcm9qZWN0aW9ucyB3aXRoIGRlZ3JlZXMgYXMgdGhlIHVuaXQgdGhpcyB3aWxsIHNpbXBseSByZXR1cm4gdGhlXG4gKiBwcm92aWRlZCByZXNvbHV0aW9uLiBGb3Igb3RoZXIgcHJvamVjdGlvbnMgdGhlIHBvaW50IHJlc29sdXRpb24gaXNcbiAqIGJ5IGRlZmF1bHQgZXN0aW1hdGVkIGJ5IHRyYW5zZm9ybWluZyB0aGUgJ3BvaW50JyBwaXhlbCB0byBFUFNHOjQzMjYsXG4gKiBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsXG4gKiBhbmQgdGFraW5nIHRoZSBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICogQSBjdXN0b20gZnVuY3Rpb24gY2FuIGJlIHByb3ZpZGVkIGZvciBhIHNwZWNpZmljIHByb2plY3Rpb24sIGVpdGhlclxuICogYnkgc2V0dGluZyB0aGUgYGdldFBvaW50UmVzb2x1dGlvbmAgb3B0aW9uIGluIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gY29uc3RydWN0b3Igb3IgYnkgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb24jc2V0R2V0UG9pbnRSZXNvbHV0aW9ufSB0byBjaGFuZ2UgYW4gZXhpc3RpbmdcbiAqIHByb2plY3Rpb24gb2JqZWN0LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIE5vbWluYWwgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQgdG8gZmluZCBhZGp1c3RlZCByZXNvbHV0aW9uIGF0LlxuICogQHBhcmFtIHtVbml0cz19IG9wdF91bml0cyBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIG9wdF91bml0cykge1xuICBwcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xuICB2YXIgcG9pbnRSZXNvbHV0aW9uO1xuICB2YXIgZ2V0dGVyID0gcHJvamVjdGlvbi5nZXRQb2ludFJlc29sdXRpb25GdW5jKCk7XG4gIGlmIChnZXR0ZXIpIHtcbiAgICBwb2ludFJlc29sdXRpb24gPSBnZXR0ZXIocmVzb2x1dGlvbiwgcG9pbnQpO1xuICB9IGVsc2Uge1xuICAgIHZhciB1bml0cyA9IHByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICBpZiAodW5pdHMgPT0gVW5pdHMuREVHUkVFUyAmJiAhb3B0X3VuaXRzIHx8IG9wdF91bml0cyA9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICB2YXIgdG9FUFNHNDMyNiA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uLCBnZXQoJ0VQU0c6NDMyNicpKTtcbiAgICAgIHZhciB2ZXJ0aWNlcyA9IFtcbiAgICAgICAgcG9pbnRbMF0gLSByZXNvbHV0aW9uIC8gMiwgcG9pbnRbMV0sXG4gICAgICAgIHBvaW50WzBdICsgcmVzb2x1dGlvbiAvIDIsIHBvaW50WzFdLFxuICAgICAgICBwb2ludFswXSwgcG9pbnRbMV0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgcG9pbnRbMF0sIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDJcbiAgICAgIF07XG4gICAgICB2ZXJ0aWNlcyA9IHRvRVBTRzQzMjYodmVydGljZXMsIHZlcnRpY2VzLCAyKTtcbiAgICAgIHZhciB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICB2YXIgaGVpZ2h0ID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoNCwgNiksIHZlcnRpY2VzLnNsaWNlKDYsIDgpKTtcbiAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBvcHRfdW5pdHMgP1xuICAgICAgICBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXSA6XG4gICAgICAgIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cblxuXG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcy4gVGhvc2UgYWxsb3dcbiAqIHRvIHRyYW5zZm9ybSBiZXR3ZWVuIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucyk7XG4gIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihkZXN0aW5hdGlvbikge1xuICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIGFueSBwcm9qZWN0aW9uXG4gKiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczEgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczIgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBmb3J3YXJkVHJhbnNmb3JtIFRyYW5zZm9ybWF0aW9uIGZyb20gYW55XG4gKiAgIHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBpbnZlcnNlVHJhbnNmb3JtIFRyYW5zZm9ybSBmcm9tIGFueSBwcm9qZWN0aW9uXG4gKiAgIGluIHByb2plY3Rpb24yIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xLi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKHByb2plY3Rpb25zMSwgcHJvamVjdGlvbnMyLCBmb3J3YXJkVHJhbnNmb3JtLCBpbnZlcnNlVHJhbnNmb3JtKSB7XG4gIHByb2plY3Rpb25zMS5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3Rpb24xKSB7XG4gICAgcHJvamVjdGlvbnMyLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdGlvbjIpIHtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBDbGVhciBhbGwgY2FjaGVkIHByb2plY3Rpb25zIGFuZCB0cmFuc2Zvcm1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxQcm9qZWN0aW9ucygpIHtcbiAgcHJvamVjdGlvbnMuY2xlYXIoKTtcbiAgY2xlYXJUcmFuc2Zvcm1GdW5jcygpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvamVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZ2V0KHByb2plY3Rpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uKVxuICAgICk7XG4gIH1cbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+VHJhbnNmb3JtRnVuY3Rpb259IGZyb20gYSBzaW1wbGUgMkQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1cbiAqIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZFRyYW5zZm9ybSBDb29yZGluYXRlXG4gKiAgICAgdHJhbnNmb3JtLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGNvb3JkVHJhbnNmb3JtKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfb3V0cHV0IE91dHB1dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kaW1lbnNpb24gRGltZW5zaW9uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQgPyBvcHRfb3V0cHV0IDogbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgdmFyIHBvaW50ID0gY29vcmRUcmFuc2Zvcm0oW2lucHV0W2ldLCBpbnB1dFtpICsgMV1dKTtcbiAgICAgICAgb3V0cHV0W2ldID0gcG9pbnRbMF07XG4gICAgICAgIG91dHB1dFtpICsgMV0gPSBwb2ludFsxXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDE7IGogPj0gMjsgLS1qKSB7XG4gICAgICAgICAgb3V0cHV0W2kgKyBqXSA9IGlucHV0W2kgKyBqXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIFJlZ2lzdGVycyBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBiZXR3ZWVuIHRoZVxuICogc291cmNlIHByb2plY3Rpb24gYW5kIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhlIGZvcndhcmQgYW5kIGludmVyc2UgZnVuY3Rpb25zIGNvbnZlcnQgY29vcmRpbmF0ZSBwYWlyczsgdGhpcyBmdW5jdGlvblxuICogY29udmVydHMgdGhlc2UgaW50byB0aGUgZnVuY3Rpb25zIHVzZWQgaW50ZXJuYWxseSB3aGljaCBhbHNvIGhhbmRsZVxuICogZXh0ZW50cyBhbmQgY29vcmRpbmF0ZSBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZm9yd2FyZCBUaGUgZm9yd2FyZCB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGludmVyc2UgVGhlIGludmVyc2UgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gdG8gdGhlIHNvdXJjZVxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXMoc291cmNlLCBkZXN0aW5hdGlvbiwgZm9yd2FyZCwgaW52ZXJzZSkge1xuICB2YXIgc291cmNlUHJvaiA9IGdldChzb3VyY2UpO1xuICB2YXIgZGVzdFByb2ogPSBnZXQoZGVzdGluYXRpb24pO1xuICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZVByb2osIGRlc3RQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKSk7XG4gIGFkZFRyYW5zZm9ybUZ1bmMoZGVzdFByb2osIHNvdXJjZVByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGludmVyc2UpKTtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gbG9uZ2l0dWRlL2xhdGl0dWRlIHRvIGEgZGlmZmVyZW50IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLlxuICogICAgIGFuIGFycmF5IHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlPX0gb3B0X3Byb2plY3Rpb24gVGFyZ2V0IHByb2plY3Rpb24uIFRoZVxuICogICAgIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgcHJvamVjdGVkIHRvIHRoZSB0YXJnZXQgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCAnRVBTRzo0MzI2JyxcbiAgICBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3Jyk7XG59XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSB0byBsb25naXR1ZGUvbGF0aXR1ZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFByb2plY3RlZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZT19IG9wdF9wcm9qZWN0aW9uIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICB2YXIgbG9uTGF0ID0gdHJhbnNmb3JtKGNvb3JkaW5hdGUsXG4gICAgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgdmFyIGxvbiA9IGxvbkxhdFswXTtcbiAgaWYgKGxvbiA8IC0xODAgfHwgbG9uID4gMTgwKSB7XG4gICAgbG9uTGF0WzBdID0gbW9kdWxvKGxvbiArIDE4MCwgMzYwKSAtIDE4MDtcbiAgfVxuICByZXR1cm4gbG9uTGF0O1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBwcm9qZWN0aW9ucyBhcmUgdGhlIHNhbWUsIHRoYXQgaXMgZXZlcnkgY29vcmRpbmF0ZSBpbiBvbmVcbiAqIHByb2plY3Rpb24gZG9lcyByZXByZXNlbnQgdGhlIHNhbWUgZ2VvZ3JhcGhpYyBwb2ludCBhcyB0aGUgc2FtZSBjb29yZGluYXRlIGluXG4gKiB0aGUgb3RoZXIgcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24xIFByb2plY3Rpb24gMS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjIgUHJvamVjdGlvbiAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gRXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWl2YWxlbnQocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKSB7XG4gIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgZXF1YWxVbml0cyA9IHByb2plY3Rpb24xLmdldFVuaXRzKCkgPT09IHByb2plY3Rpb24yLmdldFVuaXRzKCk7XG4gIGlmIChwcm9qZWN0aW9uMS5nZXRDb2RlKCkgPT09IHByb2plY3Rpb24yLmdldENvZGUoKSkge1xuICAgIHJldHVybiBlcXVhbFVuaXRzO1xuICB9IGVsc2Uge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMik7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMgPT09IGNsb25lVHJhbnNmb3JtICYmIGVxdWFsVW5pdHM7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb25Qcm9qZWN0aW9uLmdldENvZGUoKTtcbiAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1GdW5jKHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSk7XG4gIGlmICghdHJhbnNmb3JtRnVuYykge1xuICAgIHRyYW5zZm9ybUZ1bmMgPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtRnVuYztcbn1cblxuXG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gZ2V0KHNvdXJjZSk7XG4gIHZhciBkZXN0aW5hdGlvblByb2plY3Rpb24gPSBnZXQoZGVzdGluYXRpb24pO1xuICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG5cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGlzIHJldHVybnMgYSBuZXcgY29vcmRpbmF0ZSAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+dHJhbnNmb3JtRXh0ZW50fSBmb3IgZXh0ZW50IHRyYW5zZm9ybWF0aW9uLlxuICogU2VlIHRoZSB0cmFuc2Zvcm0gbWV0aG9kIG9mIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeX5HZW9tZXRyeX0gYW5kIGl0c1xuICogc3ViY2xhc3NlcyBmb3IgZ2VvbWV0cnkgdHJhbnNmb3Jtcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleHRlbnQgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpc1xuICogcmV0dXJucyBhIG5ldyBleHRlbnQgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSB0cmFuc2Zvcm1lZCBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GdW5jKTtcbn1cblxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHBvaW50IHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0aW5hdGlvblByb2plY3Rpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBQb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVdpdGhQcm9qZWN0aW9ucyhwb2ludCwgc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKSB7XG4gIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cblxuLyoqXG4gKiBBZGQgdHJhbnNmb3JtcyB0byBhbmQgZnJvbSBFUFNHOjQzMjYgYW5kIEVQU0c6Mzg1Ny4gIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiBieSB3aGVuIHRoaXMgbW9kdWxlIGlzIGV4ZWN1dGVkIGFuZCBzaG91bGQgb25seSBuZWVkIHRvIGJlIGNhbGxlZCBhZ2FpbiBhZnRlclxuICogYGNsZWFyQWxsUHJvamVjdGlvbnMoKWAgaXMgY2FsbGVkIChlLmcuIGluIHRlc3RzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1vbigpIHtcbiAgLy8gQWRkIHRyYW5zZm9ybWF0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzIHRvIGNvbnZlcnQgd2l0aGluIHNldCBvZlxuICAvLyBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHMzg1N19QUk9KRUNUSU9OUyk7XG4gIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHNDMyNl9QUk9KRUNUSU9OUyk7XG4gIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdG8gY29udmVydCBFUFNHOjQzMjYgbGlrZSBjb29yZGluYXRlcyB0byBFUFNHOjM4NTcgbGlrZVxuICAvLyBjb29yZGluYXRlcyBhbmQgYmFjay5cbiAgYWRkRXF1aXZhbGVudFRyYW5zZm9ybXMoRVBTRzQzMjZfUFJPSkVDVElPTlMsIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYpO1xufVxuXG5hZGRDb21tb24oKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvai5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuXG5cbi8qKlxuICogQW4gYXJyYXkgcmVwcmVzZW50aW5nIGFuIGFmZmluZSAyZCB0cmFuc2Zvcm1hdGlvbiBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvdHJhbnNmb3JtfSBmdW5jdGlvbnMuIFRoZSBhcnJheSBoYXMgNiBlbGVtZW50cy5cbiAqIEB0eXBlZGVmIHshQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtXG4gKi9cblxuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtUcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBfID0gbmV3IEFycmF5KDYpO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IElkZW50aXR5IHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cblxuXG4vKipcbiAqIFJlc2V0cyB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHRvIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHRyYW5zZm9ybSkge1xuICByZXR1cm4gc2V0KHRyYW5zZm9ybSwgMSwgMCwgMCwgMSwgMCwgMCk7XG59XG5cblxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICB2YXIgYTEgPSB0cmFuc2Zvcm0xWzBdO1xuICB2YXIgYjEgPSB0cmFuc2Zvcm0xWzFdO1xuICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICB2YXIgZDEgPSB0cmFuc2Zvcm0xWzNdO1xuICB2YXIgZTEgPSB0cmFuc2Zvcm0xWzRdO1xuICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICB2YXIgYTIgPSB0cmFuc2Zvcm0yWzBdO1xuICB2YXIgYjIgPSB0cmFuc2Zvcm0yWzFdO1xuICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICB2YXIgZDIgPSB0cmFuc2Zvcm0yWzNdO1xuICB2YXIgZTIgPSB0cmFuc2Zvcm0yWzRdO1xuICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuXG4gIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgdHJhbnNmb3JtMVsxXSA9IGIxICogYTIgKyBkMSAqIGIyO1xuICB0cmFuc2Zvcm0xWzJdID0gYTEgKiBjMiArIGMxICogZDI7XG4gIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgdHJhbnNmb3JtMVs0XSA9IGExICogZTIgKyBjMSAqIGYyICsgZTE7XG4gIHRyYW5zZm9ybTFbNV0gPSBiMSAqIGUyICsgZDEgKiBmMiArIGYxO1xuXG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG4vKipcbiAqIFNldCB0aGUgdHJhbnNmb3JtIGNvbXBvbmVudHMgYS1mIG9uIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIGEgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgYiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjIFRoZSBjIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGQgVGhlIGQgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZSBUaGUgZSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmIFRoZSBmIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gTWF0cml4IHdpdGggdHJhbnNmb3JtIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodHJhbnNmb3JtLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHRyYW5zZm9ybVswXSA9IGE7XG4gIHRyYW5zZm9ybVsxXSA9IGI7XG4gIHRyYW5zZm9ybVsyXSA9IGM7XG4gIHRyYW5zZm9ybVszXSA9IGQ7XG4gIHRyYW5zZm9ybVs0XSA9IGU7XG4gIHRyYW5zZm9ybVs1XSA9IGY7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cblxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gIHRyYW5zZm9ybTFbMF0gPSB0cmFuc2Zvcm0yWzBdO1xuICB0cmFuc2Zvcm0xWzFdID0gdHJhbnNmb3JtMlsxXTtcbiAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gIHRyYW5zZm9ybTFbM10gPSB0cmFuc2Zvcm0yWzNdO1xuICB0cmFuc2Zvcm0xWzRdID0gdHJhbnNmb3JtMls0XTtcbiAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gY29vcmRpbmF0ZSB3aXRoIHRoZSBnaXZlbiB0cmFuc2Zvcm0gcmV0dXJuaW5nIHRoZVxuICogcmVzdWx0aW5nLCB0cmFuc2Zvcm1lZCBjb29yZGluYXRlLiBUaGUgY29vcmRpbmF0ZSB3aWxsIGJlIG1vZGlmaWVkIGluLXBsYWNlLlxuICpcbiAqIEBwYXJhbSB7VHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybWF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHJldHVybiBjb29yZGluYXRlIHNvIHRoYXQgb3BlcmF0aW9ucyBjYW4gYmVcbiAqICAgICBjaGFpbmVkIHRvZ2V0aGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHkodHJhbnNmb3JtLCBjb29yZGluYXRlKSB7XG4gIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICBjb29yZGluYXRlWzBdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHJvdGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSByb3RhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh0cmFuc2Zvcm0sIGFuZ2xlKSB7XG4gIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCBjb3MsIHNpbiwgLXNpbiwgY29zLCAwLCAwKSk7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCB4LCAwLCAwLCB5LCAwLCAwKSk7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIHRyYW5zbGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZHggVHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeSBUcmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHRyYW5zbGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zZm9ybSwgZHgsIGR5KSB7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCAxLCAwLCAwLCAxLCBkeCwgZHkpKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgdHJhbnNmb3JtWzFdID0gc3kgKiBzaW47XG4gIHRyYW5zZm9ybVsyXSA9IC1zeCAqIHNpbjtcbiAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gIHRyYW5zZm9ybVs0XSA9IGR4MiAqIHN4ICogY29zIC0gZHkyICogc3ggKiBzaW4gKyBkeDE7XG4gIHRyYW5zZm9ybVs1XSA9IGR4MiAqIHN5ICogc2luICsgZHkyICogc3kgKiBjb3MgKyBkeTE7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cblxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IEludmVyc2Ugb2YgdGhlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydCh0cmFuc2Zvcm0pIHtcbiAgdmFyIGRldCA9IGRldGVybWluYW50KHRyYW5zZm9ybSk7XG4gIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuXG4gIHZhciBhID0gdHJhbnNmb3JtWzBdO1xuICB2YXIgYiA9IHRyYW5zZm9ybVsxXTtcbiAgdmFyIGMgPSB0cmFuc2Zvcm1bMl07XG4gIHZhciBkID0gdHJhbnNmb3JtWzNdO1xuICB2YXIgZSA9IHRyYW5zZm9ybVs0XTtcbiAgdmFyIGYgPSB0cmFuc2Zvcm1bNV07XG5cbiAgdHJhbnNmb3JtWzBdID0gZCAvIGRldDtcbiAgdHJhbnNmb3JtWzFdID0gLWIgLyBkZXQ7XG4gIHRyYW5zZm9ybVsyXSA9IC1jIC8gZGV0O1xuICB0cmFuc2Zvcm1bM10gPSBhIC8gZGV0O1xuICB0cmFuc2Zvcm1bNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gIHRyYW5zZm9ybVs1XSA9IC0oYSAqIGYgLSBiICogZSkgLyBkZXQ7XG5cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRldGVybWluYW50IG9mIHRoZSBnaXZlbiBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IG1hdCBNYXRyaXguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERldGVybWluYW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQobWF0KSB7XG4gIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2NyZWF0ZUVtcHR5LCBnZXRIZWlnaHQsIHJldHVybk9yVXBkYXRlfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm0yRH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4uL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3IgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIGNoYW5nZXMgdG8gdGhlIGdlb21ldHJ5LCByZWdpc3RlciBhIGxpc3RlbmVyIGZvciB0aGVcbiAqIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgb24geW91ciBnZW9tZXRyeSBpbnN0YW5jZS5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIEdlb21ldHJ5ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBHZW9tZXRyeSgpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBHZW9tZXRyeT59XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlDYWNoZSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBHZW9tZXRyeS5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBHZW9tZXRyeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIEdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlb21ldHJ5O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHshR2VvbWV0cnl9IENsb25lLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiBjb250YWluc1hZICh4LCB5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNsb3Nlc3QgcG9pbnQgb2YgdGhlIGdlb21ldHJ5IHRvIHRoZSBwYXNzZWQgcG9pbnQgYXNcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludC5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldENsb3Nlc3RQb2ludCA9IGZ1bmN0aW9uIGdldENsb3Nlc3RQb2ludCAocG9pbnQsIG9wdF9jbG9zZXN0UG9pbnQpIHtcbiAgICB2YXIgY2xvc2VzdFBvaW50ID0gb3B0X2Nsb3Nlc3RQb2ludCA/IG9wdF9jbG9zZXN0UG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIHRoaXMuY2xvc2VzdFBvaW50WFkocG9pbnRbMF0sIHBvaW50WzFdLCBjbG9zZXN0UG9pbnQsIEluZmluaXR5KTtcbiAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBnZW9tZXRyeSBpbmNsdWRlcyB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGUuIElmIHRoZVxuICAgKiBjb29yZGluYXRlIGlzIG9uIHRoZSBib3VuZGFyeSBvZiB0aGUgZ2VvbWV0cnksIHJldHVybnMgZmFsc2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGludGVyc2VjdHNDb29yZGluYXRlIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWShjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiBjb21wdXRlRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBleHRlbnQgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAob3B0X2V4dGVudCkge1xuICAgIGlmICh0aGlzLmV4dGVudFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMuZXh0ZW50XyA9IHRoaXMuY29tcHV0ZUV4dGVudCh0aGlzLmV4dGVudF8pO1xuICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5PclVwZGF0ZSh0aGlzLmV4dGVudF8sIG9wdF9leHRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICogQGFwaVxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSAoYW5nbGUsIGFuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfc3kgVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG9cbiAgICogICAgIHN4KS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiBzY2FsZSAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5LiAgRm9yIGxpbmVzdHJpbmdzLCB0aGlzIHVzZXNcbiAgICogdGhlIHRoZSB7QGxpbmtcbiAgICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobVxuICAgKiBEb3VnbGFzIFBldWNrZXJ9IGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICogc2ltcGxpZmljYXRpb24gaXMgdXNlZCB0byBwcmVzZXJ2ZSB0b3BvbG9neS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUaGUgdG9sZXJhbmNlIGRpc3RhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiBzaW1wbGlmeSAodG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHRvbGVyYW5jZSAqIHRvbGVyYW5jZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXJcbiAgICogYWxnb3JpdGhtLlxuICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgKi9cbiAgR2VvbWV0cnkucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gZWFjaCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0uXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUuYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiBhcHBseVRyYW5zZm9ybSAodHJhbnNmb3JtRm4pIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gaW50ZXJzZWN0c0V4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAqIEBhcGlcbiAgICovXG4gIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiB0cmFuc2xhdGUgKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNmb3JtIGVhY2ggY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkgZnJvbSBvbmUgY29vcmRpbmF0ZSByZWZlcmVuY2VcbiAgICogc3lzdGVtIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogRm9yIGV4YW1wbGUsIGEgbGluZSB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIGEgbGluZSBhbmQgYSBjaXJjbGUgdG8gYSBjaXJjbGUuXG4gICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gc291cmNlIFRoZSBjdXJyZW50IHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gVGhlIGRlc2lyZWQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IFRoaXMgZ2VvbWV0cnkuICBOb3RlIHRoYXQgb3JpZ2luYWwgZ2VvbWV0cnkgaXNcbiAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBAYXBpXG4gICAqL1xuICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtIChzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi9cbiAgICB2YXIgc291cmNlUHJvaiA9IGdldFByb2plY3Rpb24oc291cmNlKTtcbiAgICB2YXIgdHJhbnNmb3JtRm4gPSBzb3VyY2VQcm9qLmdldFVuaXRzKCkgPT0gVW5pdHMuVElMRV9QSVhFTFMgP1xuICAgICAgZnVuY3Rpb24oaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICB2YXIgcGl4ZWxFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICB2YXIgc2NhbGUgPSBnZXRIZWlnaHQocHJvamVjdGVkRXh0ZW50KSAvIGdldEhlaWdodChwaXhlbEV4dGVudCk7XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLFxuICAgICAgICAgIHByb2plY3RlZEV4dGVudFswXSwgcHJvamVjdGVkRXh0ZW50WzNdLFxuICAgICAgICAgIHNjYWxlLCAtc2NhbGUsIDAsXG4gICAgICAgICAgMCwgMCk7XG4gICAgICAgIHRyYW5zZm9ybTJEKGluQ29vcmRpbmF0ZXMsIDAsIGluQ29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsXG4gICAgICAgICAgdG1wVHJhbnNmb3JtLCBvdXRDb29yZGluYXRlcyk7XG4gICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgfSA6XG4gICAgICBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pO1xuICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtRm4pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBHZW9tZXRyeTtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzLCBnZXRDZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgc2NhbGUsIHRyYW5zbGF0ZSwgdHJhbnNmb3JtMkR9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXM7IGRvIG5vdCBpbnN0YW50aWF0ZVxuICogaW4gYXBwcywgYXMgY2Fubm90IGJlIHJlbmRlcmVkLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU2ltcGxlR2VvbWV0cnkgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBTaW1wbGVHZW9tZXRyeSgpIHtcblxuICAgIEdlb21ldHJ5LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0dlb21ldHJ5TGF5b3V0fVxuICAgICAqL1xuICAgIHRoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnN0cmlkZSA9IDI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuXG4gIH1cblxuICBpZiAoIEdlb21ldHJ5ICkgU2ltcGxlR2VvbWV0cnkuX19wcm90b19fID0gR2VvbWV0cnk7XG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEdlb21ldHJ5ICYmIEdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTaW1wbGVHZW9tZXRyeTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gY29tcHV0ZUV4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtBcnJheX0gQ29vcmRpbmF0ZXMuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gRmlyc3QgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGdldEZpcnN0Q29vcmRpbmF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKDAsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRmxhdCBjb29yZGluYXRlcy5cbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRGbGF0Q29vcmRpbmF0ZXMgKCkge1xuICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGdldExhc3RDb29yZGluYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UodGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeUxheW91dCBsYXlvdXR9IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7R2VvbWV0cnlMYXlvdXR9IExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uIGdldExheW91dCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeSAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY2xlYXIodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlDYWNoZSk7XG4gICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgLy8gSWYgc3F1YXJlZFRvbGVyYW5jZSBpcyBuZWdhdGl2ZSBvciBpZiB3ZSBrbm93IHRoYXQgc2ltcGxpZmljYXRpb24gd2lsbCBub3RcbiAgICAvLyBoYXZlIGFueSBlZmZlY3QgdGhlbiBqdXN0IHJldHVybiB0aGlzLlxuICAgIGlmIChzcXVhcmVkVG9sZXJhbmNlIDwgMCB8fFxuICAgICAgICAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlICE9PSAwICYmXG4gICAgICAgICBzcXVhcmVkVG9sZXJhbmNlIDw9IHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB2YXIga2V5ID0gc3F1YXJlZFRvbGVyYW5jZS50b1N0cmluZygpO1xuICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzaW1wbGlmaWVkR2VvbWV0cnkgPVxuICAgICAgICAgIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeUNhY2hlW2tleV0gPSBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTaW1wbGlmaWNhdGlvbiBkaWQgbm90IGFjdHVhbGx5IHJlbW92ZSBhbnkgY29vcmRpbmF0ZXMuICBXZSBub3cga25vd1xuICAgICAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgICAgICAvLyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjdXJyZW50IHNxdWFyZWRUb2xlcmFuY2Ugd2lsbCBhbHNvIG5vdCBoYXZlIGFueVxuICAgICAgICAvLyBlZmZlY3QuICBUaGlzIGFsbG93cyB1cyB0byBzaG9ydCBjaXJjdWl0IHNpbXBsaWZpY2F0aW9uIChzYXZpbmcgQ1BVXG4gICAgICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgICAgIC8vIHVwIHdpdGggdXNlbGVzcyBpZGVudGljYWwgY29waWVzIG9mIHRoaXMgZ2VvbWV0cnkgKHNhdmluZyBtZW1vcnkpLlxuICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSBzcXVhcmVkVG9sZXJhbmNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U3RyaWRlID0gZnVuY3Rpb24gZ2V0U3RyaWRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXR9IGxheW91dCBMYXlvdXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gc2V0RmxhdENvb3JkaW5hdGVzIChsYXlvdXQsIGZsYXRDb29yZGluYXRlcykge1xuICAgIHRoaXMuc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRpbmF0ZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0geyFBcnJheX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXR8dW5kZWZpbmVkfSBsYXlvdXQgTGF5b3V0LlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG5lc3RpbmcgTmVzdGluZy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldExheW91dCA9IGZ1bmN0aW9uIHNldExheW91dCAobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHZhciBzdHJpZGU7XG4gICAgaWYgKGxheW91dCkge1xuICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVzdGluZzsgKytpKSB7XG4gICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAgIHRoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdHJpZGUgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICBsYXlvdXQgPSBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uIGFwcGx5VHJhbnNmb3JtICh0cmFuc2Zvcm1Gbikge1xuICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiByb3RhdGUkMSAoYW5nbGUsIGFuY2hvcikge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgcm90YXRlKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gc2NhbGUkMSAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgIHZhciBzeSA9IG9wdF9zeTtcbiAgICBpZiAoc3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgc3kgPSBzeDtcbiAgICB9XG4gICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3I7XG4gICAgaWYgKCFhbmNob3IpIHtcbiAgICAgIGFuY2hvciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICB9XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICBzY2FsZShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gdHJhbnNsYXRlJDEgKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICB0cmFuc2xhdGUoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLFxuICAgICAgICBkZWx0YVgsIGRlbHRhWSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gU2ltcGxlR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0dlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gIHZhciBsYXlvdXQ7XG4gIGlmIChzdHJpZGUgPT0gMikge1xuICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICB9IGVsc2UgaWYgKHN0cmlkZSA9PSAzKSB7XG4gICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaO1xuICB9IGVsc2UgaWYgKHN0cmlkZSA9PSA0KSB7XG4gICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaTTtcbiAgfVxuICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7R2VvbWV0cnlMYXlvdXR9ICovIChsYXlvdXQpXG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0dlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KSB7XG4gIHZhciBzdHJpZGU7XG4gIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFkpIHtcbiAgICBzdHJpZGUgPSAyO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVogfHwgbGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZTSkge1xuICAgIHN0cmlkZSA9IDM7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHtcbiAgICBzdHJpZGUgPSA0O1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1NpbXBsZUdlb21ldHJ5fSBzaW1wbGVHZW9tZXRyeSBTaW1wbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HZW9tMkQoc2ltcGxlR2VvbWV0cnksIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpZGUgPSBzaW1wbGVHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSxcbiAgICAgIHRyYW5zZm9ybSwgb3B0X2Rlc3QpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNpbXBsZUdlb21ldHJ5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVHZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2FyZWFcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciB0d2ljZUFyZWEgPSAwO1xuICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSkge1xuICB2YXIgYXJlYSA9IDA7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIGFyZWEgKz0gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgdmFyIGFyZWEgPSAwO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJlYS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHtsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi8uLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldDEsIG9mZnNldDIsIHN0cmlkZSwgeCwgeSwgY2xvc2VzdFBvaW50KSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyAxXTtcbiAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgdmFyIG9mZnNldDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIGlmICh0ID4gMSkge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0MjtcbiAgICB9IGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGxlcnAoZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyBpXSxcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHN0cmlkZTsgKytpJDEpIHtcbiAgICBjbG9zZXN0UG9pbnRbaSQxXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpJDFdO1xuICB9XG4gIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgaWYgKHNxdWFyZWREZWx0YSA+IG1heCkge1xuICAgICAgbWF4ID0gc3F1YXJlZERlbHRhO1xuICAgIH1cbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtYXggPSBtYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBtYXg7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgbWF4ID0gYXJyYXlNYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cbiAgdmFyIGksIHNxdWFyZWREaXN0YW5jZTtcbiAgaWYgKG1heERlbHRhID09PSAwKSB7XG4gICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgIHgsIHksIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICBhc3NpZ25DbG9zZXN0KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBpbmRleCAtIHN0cmlkZSwgaW5kZXgsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgaW5kZXggKz0gc3RyaWRlICogTWF0aC5tYXgoXG4gICAgICAgICgoTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSkgLVxuICAgICAgICAgICAgTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC8gbWF4RGVsdGEpIHwgMCwgMSk7XG4gICAgfVxuICB9XG4gIGlmIChpc1JpbmcpIHtcbiAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgIGFzc2lnbkNsb3Nlc3QoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIGVuZCAtIHN0cmlkZSwgb2Zmc2V0LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCxcbiAgZW5kc3MsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZXN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgfVxuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlc3MgQ29vcmRpbmF0ZXNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZW5kcyBFbmRzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3MsIHN0cmlkZSwgb3B0X2VuZHMpIHtcbiAgdmFyIGVuZHMgPSBvcHRfZW5kcyA/IG9wdF9lbmRzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICB2YXIgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc1tqXSwgc3RyaWRlKTtcbiAgICBlbmRzW2krK10gPSBlbmQ7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGVuZHMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGVuZHM7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gY29vcmRpbmF0ZXNzcyBDb29yZGluYXRlc3NzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+PX0gb3B0X2VuZHNzIEVuZHNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IEVuZHNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzcywgc3RyaWRlLCBvcHRfZW5kc3MpIHtcbiAgdmFyIGVuZHNzID0gb3B0X2VuZHNzID8gb3B0X2VuZHNzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzW2pdLCBzdHJpZGUsIGVuZHNzW2ldKTtcbiAgICBlbmRzc1tpKytdID0gZW5kcztcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgZW5kc3MubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGVuZHNzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW5mbGF0ZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PX0gb3B0X2Nvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXMpIHtcbiAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gIH1cbiAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj49fSBvcHRfY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gIHZhciBjb29yZGluYXRlc3MgPSBvcHRfY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbal07XG4gICAgY29vcmRpbmF0ZXNzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+PX0gb3B0X2Nvb3JkaW5hdGVzc3NcbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tqXTtcbiAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBjb29yZGluYXRlc3NzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQge3NxdWFyZWRTZWdtZW50RGlzdGFuY2UsIHNxdWFyZWREaXN0YW5jZX0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhpZ2hRdWFsaXR5IEhpZ2hlc3QgcXVhbGl0eS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPj19IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2ltcGxpZmllZCBsaW5lIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5TGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIGhpZ2hRdWFsaXR5LCBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcykge1xuICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIDogW107XG4gIGlmICghaGlnaFF1YWxpdHkpIHtcbiAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICAgICAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbiAgICBvZmZzZXQgPSAwO1xuICAgIHN0cmlkZSA9IDI7XG4gIH1cbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcihcbiAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gIHJldHVybiBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCxcbiAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gIHZhciBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gIGlmIChuIDwgMykge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gIH1cbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICB2YXIgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgbWFya2Vyc1swXSA9IDE7XG4gIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICB2YXIgc3RhY2sgPSBbb2Zmc2V0LCBlbmQgLSBzdHJpZGVdO1xuICB2YXIgaW5kZXggPSAwO1xuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgIHZhciBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgdmFyIGZpcnN0ID0gc3RhY2sucG9wKCk7XG4gICAgdmFyIG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZmlyc3QgKyAxXTtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICBmb3IgKHZhciBpID0gZmlyc3QgKyBzdHJpZGU7IGkgPCBsYXN0OyBpICs9IHN0cmlkZSkge1xuICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICB2YXIgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZShcbiAgICAgICAgeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA+IG1heFNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIG1heFNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1heFNxdWFyZWREaXN0YW5jZSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgIG1hcmtlcnNbKGluZGV4IC0gb2Zmc2V0KSAvIHN0cmlkZV0gPSAxO1xuICAgICAgaWYgKGZpcnN0ICsgc3RyaWRlIDwgaW5kZXgpIHtcbiAgICAgICAgc3RhY2sucHVzaChmaXJzdCwgaW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4ICsgc3RyaWRlIDwgbGFzdCkge1xuICAgICAgICBzdGFjay5wdXNoKGluZGV4LCBsYXN0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgbjsgKytpJDEpIHtcbiAgICBpZiAobWFya2Vyc1tpJDFdKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpJDEgKiBzdHJpZGVdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSQxICogc3RyaWRlICsgMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LFxuICBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgIHNpbXBsaWZpZWRFbmRzcy5wdXNoKHNpbXBsaWZpZWRFbmRzKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLFxuICBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgaWYgKGVuZCA8PSBvZmZzZXQgKyBzdHJpZGUpIHtcbiAgICAvLyB6ZXJvIG9yIG9uZSBwb2ludCwgbm8gc2ltcGxpZmljYXRpb24gcG9zc2libGUsIHNvIGNvcHkgYW5kIHJldHVyblxuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIC8vIGNvcHkgZmlyc3QgcG9pbnRcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICB2YXIgeDIgPSB4MTtcbiAgdmFyIHkyID0geTE7XG4gIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgeDEgPSB4MjtcbiAgICAgIHkxID0geTI7XG4gICAgfVxuICB9XG4gIGlmICh4MiAhPSB4MSB8fCB5MiAhPSB5MSkge1xuICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJvdW5kZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbmFwKHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuXG5cbi8qKlxuICogU2ltcGxpZmllcyBhIGxpbmUgc3RyaW5nIHVzaW5nIGFuIGFsZ29yaXRobSBkZXNpZ25lZCBieSBUaW0gU2NoYXViLlxuICogQ29vcmRpbmF0ZXMgYXJlIHNuYXBwZWQgdG8gdGhlIG5lYXJlc3QgdmFsdWUgaW4gYSB2aXJ0dWFsIGdyaWQgYW5kXG4gKiBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29vcmRpbmF0ZXMgYXJlIGRpc2NhcmRlZC4gIFRoaXMgZWZmZWN0aXZlbHkgcHJlc2VydmVzXG4gKiB0b3BvbG9neSBhcyB0aGUgc2ltcGxpZmljYXRpb24gb2YgYW55IHN1YnNlY3Rpb24gb2YgYSBsaW5lIHN0cmluZyBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgc3RyaW5nLiAgVGhpcyBtZWFucyB0aGF0LCBmb3IgZXhhbXBsZXMsXG4gKiB0aGUgY29tbW9uIGVkZ2UgYmV0d2VlbiB0d28gcG9seWdvbnMgd2lsbCBiZSBzaW1wbGlmaWVkIHRvIHRoZSBzYW1lIGxpbmVcbiAqIHN0cmluZyBpbmRlcGVuZGVudGx5IGluIGJvdGggcG9seWdvbnMuICBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgYSBzaW5nbGVcbiAqIHBhc3Mgb3ZlciB0aGUgY29vcmRpbmF0ZXMgYW5kIGVsaW1pbmF0ZXMgaW50ZXJtZWRpYXRlIGNvbGxpbmVhciBwb2ludHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAvLyBkbyBub3RoaW5nIGlmIHRoZSBsaW5lIGlzIGVtcHR5XG4gIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gIH1cbiAgLy8gc25hcCB0aGUgZmlyc3QgY29vcmRpbmF0ZSAoUDEpXG4gIHZhciB4MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gIHZhciB5MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICBvZmZzZXQgKz0gc3RyaWRlO1xuICAvLyBhZGQgdGhlIGZpcnN0IGNvb3JkaW5hdGUgdG8gdGhlIG91dHB1dFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gIC8vIGZpbmQgdGhlIG5leHQgY29vcmRpbmF0ZSB0aGF0IGRvZXMgbm90IHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUgYXMgdGhlIGZpcnN0XG4gIC8vIGNvb3JkaW5hdGUgKFAyKVxuICB2YXIgeDIsIHkyO1xuICBkbyB7XG4gICAgeDIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHkyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgLy8gYWxsIGNvb3JkaW5hdGVzIHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUsIHRoZSBsaW5lIGNvbGxhcHNlcyB0byBhIHBvaW50XG4gICAgICAvLyBwdXNoIHRoZSBsYXN0IHNuYXBwZWQgdmFsdWUgYW55d2F5IHRvIGVuc3VyZSB0aGF0IHRoZSBvdXRwdXQgY29udGFpbnNcbiAgICAgIC8vIGF0IGxlYXN0IHR3byBwb2ludHNcbiAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSByZWFsbHkgcmV0dXJuIGF0IGxlYXN0IHR3byBwb2ludHMgYW55d2F5P1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgfSB3aGlsZSAoeDIgPT0geDEgJiYgeTIgPT0geTEpO1xuICB3aGlsZSAob2Zmc2V0IDwgZW5kKSB7XG4gICAgLy8gc25hcCB0aGUgbmV4dCBjb29yZGluYXRlIChQMylcbiAgICB2YXIgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHZhciB5MyA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgIGlmICh4MyA9PSB4MiAmJiB5MyA9PSB5Mikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICB2YXIgZHgxID0geDIgLSB4MTtcbiAgICB2YXIgZHkxID0geTIgLSB5MTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgdmFyIGR4MiA9IHgzIC0geDE7XG4gICAgdmFyIGR5MiA9IHkzIC0geTE7XG4gICAgLy8gaWYgUDEsIFAyLCBhbmQgUDMgYXJlIGNvbGluZWFyIGFuZCBQMyBpcyBmdXJ0aGVyIGZyb20gUDEgdGhhbiBQMiBpcyBmcm9tXG4gICAgLy8gUDEgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIHRoZW4gUDIgaXMgb24gdGhlIHN0cmFpZ2h0IGxpbmUgYmV0d2VlbiBQMSBhbmRcbiAgICAvLyBQM1xuICAgIGlmICgoZHgxICogZHkyID09IGR5MSAqIGR4MikgJiZcbiAgICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpKSB7XG4gICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgeDIgPSB4MztcbiAgICAgIHkyID0geTM7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgIC8vIGFuZCBjb250aW51ZSB3aXRoIFAxID0gUDIgYW5kIFAyID0gUDNcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gICAgeDIgPSB4MztcbiAgICB5MiA9IHkzO1xuICB9XG4gIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLFxuICAgICAgdG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTXVsdGlBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsXG4gIHRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZUFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSxcbiAgICAgIHRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1wbGlmeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9MaW5lYXJSaW5nXG4gKi9cbmltcG9ydCB7Y2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGF9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge2luZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHtkb3VnbGFzUGV1Y2tlcn0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMaW5lYXIgcmluZyBnZW9tZXRyeS4gT25seSB1c2VkIGFzIHBhcnQgb2YgcG9seWdvbjsgY2Fubm90IGJlIHJlbmRlcmVkXG4gKiBvbiBpdHMgb3duLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExpbmVhclJpbmcgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTaW1wbGVHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBMaW5lYXJSaW5nKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBMaW5lYXJSaW5nLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFNpbXBsZUdlb21ldHJ5ICYmIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpbmVhclJpbmc7XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gY2xvc2VzdFBvaW50WFkgKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChtYXhTcXVhcmVkRGVsdGEoXG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gYXNzaWduQ2xvc2VzdFBvaW50KFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIGxpbmVhciByaW5nIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gZ2V0QXJlYSAoKSB7XG4gICAgcmV0dXJuIGxpbmVhclJpbmdBcmVhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlcyhcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgIHJldHVybiBuZXcgTGluZWFyUmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIGludGVyc2VjdHNFeHRlbnQgKGV4dGVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAqIEBwYXJhbSB7IUFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge0dlb21ldHJ5TGF5b3V0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAxKTtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gTGluZWFyUmluZztcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBMaW5lYXJSaW5nO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaW5lYXJSaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvaW50XG4gKi9cbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSwgY29udGFpbnNYWX0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtkZWZsYXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2ludCBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIFBvaW50KGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgU2ltcGxlR2VvbWV0cnkuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KTtcbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBQb2ludC5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgUG9pbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU2ltcGxlR2VvbWV0cnkgJiYgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlICk7XG4gIFBvaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBvaW50O1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4geyFQb2ludH0gQ2xvbmUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgdmFyIHBvaW50ID0gbmV3IFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICByZXR1cm4gcG9pbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuc3RyaWRlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBQb2ludC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gY29tcHV0ZUV4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gZ2V0VHlwZSAoKSB7XG4gICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0lOVDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgUG9pbnQucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIHRoaXMuZmxhdENvb3JkaW5hdGVzWzBdLCB0aGlzLmZsYXRDb29yZGluYXRlc1sxXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAwKTtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIHJldHVybiBQb2ludDtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBQb2ludDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jb250YWluc1xuICovXG5pbXBvcnQge2ZvckVhY2hDb3JuZXJ9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIHZhciBvdXRzaWRlID0gZm9yRWFjaENvcm5lcihleHRlbnQsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICAgICAgcmV0dXJuICFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH0pO1xuICByZXR1cm4gIW91dHNpZGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHgsIHkpIHtcbiAgLy8gaHR0cDovL2dlb21hbGdvcml0aG1zLmNvbS9hMDMtX2luY2x1c2lvbi5odG1sXG4gIC8vIENvcHlyaWdodCAyMDAwIHNvZnRTdXJmZXIsIDIwMTIgRGFuIFN1bmRheVxuICAvLyBUaGlzIGNvZGUgbWF5IGJlIGZyZWVseSB1c2VkIGFuZCBtb2RpZmllZCBmb3IgYW55IHB1cnBvc2VcbiAgLy8gcHJvdmlkaW5nIHRoYXQgdGhpcyBjb3B5cmlnaHQgbm90aWNlIGlzIGluY2x1ZGVkIHdpdGggaXQuXG4gIC8vIFNvZnRTdXJmZXIgbWFrZXMgbm8gd2FycmFudHkgZm9yIHRoaXMgY29kZSwgYW5kIGNhbm5vdCBiZSBoZWxkXG4gIC8vIGxpYWJsZSBmb3IgYW55IHJlYWwgb3IgaW1hZ2luZWQgZGFtYWdlIHJlc3VsdGluZyBmcm9tIGl0cyB1c2UuXG4gIC8vIFVzZXJzIG9mIHRoaXMgY29kZSBtdXN0IHZlcmlmeSBjb3JyZWN0bmVzcyBmb3IgdGhlaXIgYXBwbGljYXRpb24uXG4gIHZhciB3biA9IDA7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgIGlmICh5MiA+IHkgJiYgKCh4MiAtIHgxKSAqICh5IC0geTEpKSAtICgoeCAtIHgxKSAqICh5MiAtIHkxKSkgPiAwKSB7XG4gICAgICAgIHduKys7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh5MiA8PSB5ICYmICgoeDIgLSB4MSkgKiAoeSAtIHkxKSkgLSAoKHggLSB4MSkgKiAoeTIgLSB5MSkpIDwgMCkge1xuICAgICAgd24tLTtcbiAgICB9XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiB3biAhPT0gMDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSB7XG4gIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgeCwgeSkge1xuICBpZiAoZW5kc3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250YWlucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnRcbiAqL1xuaW1wb3J0IHtudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9ufSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQ29udGFpbnNYWX0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcG9pbnQgdGhhdCBpcyBsaWtlbHkgdG8gbGllIGluIHRoZSBpbnRlcmlvciBvZiB0aGUgbGluZWFyIHJpbmdzLlxuICogSW5zcGlyZWQgYnkgSlRTJ3MgY29tLnZpdmlkc29sdXRpb25zLmp0cy5nZW9tLkdlb21ldHJ5I2dldEludGVyaW9yUG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhdENlbnRlcnNPZmZzZXQgRmxhdCBjZW50ZXIgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+PX0gb3B0X2Rlc3QgRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEZXN0aW5hdGlvbiBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LFxuICBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCBmbGF0Q2VudGVyc09mZnNldCwgb3B0X2Rlc3QpIHtcbiAgdmFyIGksIGlpLCB4LCB4MSwgeDIsIHkxLCB5MjtcbiAgdmFyIHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIHZhciBpbnRlcnNlY3Rpb25zID0gW107XG4gIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb25zIHdpdGggdGhlIGhvcml6b250YWwgbGluZVxuICBmb3IgKHZhciByID0gMCwgcnIgPSBlbmRzLmxlbmd0aDsgciA8IHJyOyArK3IpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tyXTtcbiAgICB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgaWYgKCh5IDw9IHkxICYmIHkyIDw9IHkpIHx8ICh5MSA8PSB5ICYmIHkgPD0geTIpKSB7XG4gICAgICAgIHggPSAoeSAtIHkxKSAvICh5MiAtIHkxKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICB9XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9XG4gIH1cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICB2YXIgcG9pbnRYID0gTmFOO1xuICB2YXIgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgaW50ZXJzZWN0aW9ucy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICB4MSA9IGludGVyc2VjdGlvbnNbMF07XG4gIGZvciAoaSA9IDEsIGlpID0gaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgeDIgPSBpbnRlcnNlY3Rpb25zW2ldO1xuICAgIHZhciBzZWdtZW50TGVuZ3RoID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gICAgaWYgKHNlZ21lbnRMZW5ndGggPiBtYXhTZWdtZW50TGVuZ3RoKSB7XG4gICAgICB4ID0gKHgxICsgeDIpIC8gMjtcbiAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgcG9pbnRYID0geDtcbiAgICAgICAgbWF4U2VnbWVudExlbmd0aCA9IHNlZ21lbnRMZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHgxID0geDI7XG4gIH1cbiAgaWYgKGlzTmFOKHBvaW50WCkpIHtcbiAgICAvLyBUaGVyZSBpcyBubyBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludCBpbnNpZGUgdGhlIGxpbmVhclxuICAgIC8vIHJpbmcuICBVc2UgdGhlIGNlbnRlciBvZiB0aGUgdGhlIGxpbmVhciByaW5nJ3MgZXh0ZW50LlxuICAgIHBvaW50WCA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0XTtcbiAgfVxuICBpZiAob3B0X2Rlc3QpIHtcbiAgICBvcHRfZGVzdC5wdXNoKHBvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aCk7XG4gICAgcmV0dXJuIG9wdF9kZXN0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbcG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBmbGF0Q2VudGVycykge1xuICB2YXIgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgaW50ZXJpb3JQb2ludHMgPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIDIgKiBpLCBpbnRlcmlvclBvaW50cyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJpb3Jwb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyc2VjdHNleHRlbnRcbiAqL1xuaW1wb3J0IHtjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZEZsYXRDb29yZGluYXRlcywgaW50ZXJzZWN0cywgaW50ZXJzZWN0c1NlZ21lbnR9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdDb250YWluc1hZLCBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnR9IGZyb20gJy4vY29udGFpbnMuanMnO1xuaW1wb3J0IHtmb3JFYWNoIGFzIGZvckVhY2hTZWdtZW50fSBmcm9tICcuL3NlZ21lbnRzLmpzJztcblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICB2YXIgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgY3JlYXRlRW1wdHkoKSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiZcbiAgICAgIGNvb3JkaW5hdGVzRXh0ZW50WzJdIDw9IGV4dGVudFsyXSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFsxXSA+PSBleHRlbnRbMV0gJiZcbiAgICAgIGNvb3JkaW5hdGVzRXh0ZW50WzNdIDw9IGV4dGVudFszXSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmb3JFYWNoU2VnbWVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MSBTdGFydCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQyIEVuZCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHNlZ21lbnQgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbihwb2ludDEsIHBvaW50Mikge1xuICAgICAgcmV0dXJuIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgcG9pbnQxLCBwb2ludDIpO1xuICAgIH0pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2ldO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoXG4gICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbMV0pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbM10pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbMV0pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbM10pKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGlmICghaW50ZXJzZWN0c0xpbmVhclJpbmcoXG4gICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoZW5kcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgaWYgKCFpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ011bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGV4dGVudCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpZiAoaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnNlY3RzZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIHNlZ21lbnQgb2YgdGhlIGZsYXQgY29vcmRpbmF0ZXNcbiAqIGFycmF5LiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0XG4gKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFR9IGNhbGxiYWNrIEZ1bmN0aW9uXG4gKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIGJlIHVzZWQgYXMgdGhlIHZhbHVlIG9mICd0aGlzJ1xuICogICAgIHdpdGhpbiBjYWxsYmFjay5cbiAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgVCxTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2ssIG9wdF90aGlzKSB7XG4gIHZhciBwb2ludDEgPSBbZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXV07XG4gIHZhciBwb2ludDIgPSBbXTtcbiAgdmFyIHJldDtcbiAgZm9yICg7IChvZmZzZXQgKyBzdHJpZGUpIDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgcG9pbnQyWzBdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZV07XG4gICAgcG9pbnQyWzFdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZSArIDFdO1xuICAgIHJldCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHBvaW50MSwgcG9pbnQyKTtcbiAgICBpZiAocmV0KSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBwb2ludDFbMF0gPSBwb2ludDJbMF07XG4gICAgcG9pbnQxWzFdID0gcG9pbnQyWzFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VnbWVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9yZXZlcnNlXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgIHZhciB0bXAgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV0gPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV07XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV0gPSB0bXA7XG4gICAgfVxuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgZW5kIC09IHN0cmlkZTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXZlcnNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvb3JpZW50XG4gKi9cbmltcG9ydCB7Y29vcmRpbmF0ZXMgYXMgcmV2ZXJzZUNvb3JkaW5hdGVzfSBmcm9tICcuL3JldmVyc2UuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGNsb2Nrd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgLy8gaHR0cDovL3Rpbnl1cmwuY29tL2Nsb2Nrd2lzZS1tZXRob2RcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09TR2VvL2dkYWwvYmxvYi90cnVuay9nZGFsL29nci9vZ3JsaW5lYXJyaW5nLmNwcFxuICB2YXIgZWRnZSA9IDA7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZWRnZSArPSAoeDIgLSB4MSkgKiAoeTIgKyB5MSk7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiBlZGdlID4gMDtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIGlmICgocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmICghbGluZWFyUmluZ0lzT3JpZW50ZWQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgb3B0X3JpZ2h0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIHZhciByZXZlcnNlID0gaSA9PT0gMCA/XG4gICAgICAocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSA6XG4gICAgICAocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKTtcbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG5cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3JpZ2h0IEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3NBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBvZmZzZXQgPSBvcmllbnRMaW5lYXJSaW5ncyhcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBvcHRfcmlnaHQpO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZWFyUmluZyBmcm9tICcuL0xpbmVhclJpbmcuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0fSBmcm9tICcuLi9zcGhlcmUuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5ncyBhcyBsaW5lYXJSaW5nc0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdEFycmF5UG9pbnQsIGFycmF5TWF4U3F1YXJlZERlbHRhfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQ29udGFpbnNYWX0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludE9mQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheX0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nSXNPcmllbnRlZCwgb3JpZW50TGluZWFyUmluZ3N9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHtxdWFudGl6ZUFycmF5fSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvbHlnb24gZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9seWdvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIFBvbHlnb24oY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzKSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVuZHNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gbnVsbDtcblxuICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLmVuZHNfID0gb3B0X2VuZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgUG9seWdvbi5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgUG9seWdvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBTaW1wbGVHZW9tZXRyeSAmJiBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUgKTtcbiAgUG9seWdvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2x5Z29uO1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuYXBwZW5kTGluZWFyUmluZyA9IGZ1bmN0aW9uIGFwcGVuZExpbmVhclJpbmcgKGxpbmVhclJpbmcpIHtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0ZW5kKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICB9XG4gICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0LCB0aGlzLmVuZHNfLnNsaWNlKCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKFxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSxcbiAgICAgIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgeCwgeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEgKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0FyZWEodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29vcmRpbmF0ZSBhcnJheSBmb3IgdGhpcyBnZW9tZXRyeS4gIFRoaXMgYXJyYXkgaGFzIHRoZSBzdHJ1Y3R1cmVcbiAgICogb2YgYSBHZW9KU09OIGNvb3JkaW5hdGUgYXJyYXkgZm9yIHBvbHlnb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgT3JpZW50IGNvb3JkaW5hdGVzIGFjY29yZGluZyB0byB0aGUgcmlnaHQtaGFuZFxuICAgKiAgICAgcnVsZSAoY291bnRlci1jbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgKiAgICAgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAqICAgICBCeSBkZWZhdWx0LCBjb29yZGluYXRlIG9yaWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIGhvdyB0aGUgZ2VvbWV0cnkgd2FzXG4gICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAob3B0X3JpZ2h0KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcztcbiAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uIGdldEVuZHMgKCkge1xuICAgIHJldHVybiB0aGlzLmVuZHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldEZsYXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gZ2V0RmxhdEludGVyaW9yUG9pbnQgKCkge1xuICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgdmFyIGZsYXRDZW50ZXIgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KFxuICAgICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLFxuICAgICAgICBmbGF0Q2VudGVyLCAwKTtcbiAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnQgKCkge1xuICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludCgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiByaW5ncyBvZiB0aGUgcG9seWdvbiwgIHRoaXMgaW5jbHVkZXMgdGhlIGV4dGVyaW9yXG4gICAqIHJpbmcgYW5kIGFueSBpbnRlcmlvciByaW5ncy5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdDb3VudCA9IGZ1bmN0aW9uIGdldExpbmVhclJpbmdDb3VudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kc18ubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgKiBAYXBpXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZyAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKFxuICAgICAgaW5kZXggPT09IDAgPyAwIDogdGhpcy5lbmRzX1tpbmRleCAtIDFdLCB0aGlzLmVuZHNfW2luZGV4XSksIHRoaXMubGF5b3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdzID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZ3MgKCkge1xuICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWVudGVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzICgpIHtcbiAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgIGlmIChsaW5lYXJSaW5nSXNPcmllbnRlZChcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPVxuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgICB9XG4gICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPTFlHT047XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtHZW9tZXRyeUxheW91dD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUsIHRoaXMuZW5kc18pO1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFuIGFwcHJveGltYXRpb24gb2YgYSBjaXJjbGUgb24gdGhlIHN1cmZhY2Ugb2YgYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0b1xuICogICAgIHRoZSBwb2x5Z29uIHZlcnRpY2VzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbiBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zcGhlcmVSYWRpdXMgT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG9wdF9uLCBvcHRfc3BoZXJlUmFkaXVzKSB7XG4gIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsIDIgKiBNYXRoLlBJICogaSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgfVxuICBmbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcG9seWdvbiBmcm9tIGFuIGV4dGVudC4gVGhlIGxheW91dCB1c2VkIGlzIGBYWWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXh0ZW50KGV4dGVudCkge1xuICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9XG4gICAgICBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWSwgbWluWCwgbWluWV07XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIHNpZGVzID0gb3B0X3NpZGVzID8gb3B0X3NpZGVzIDogMzI7XG4gIHZhciBzdHJpZGUgPSBjaXJjbGUuZ2V0U3RyaWRlKCk7XG4gIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gIHZhciBhcnJheUxlbmd0aCA9IHN0cmlkZSAqIChzaWRlcyArIDEpO1xuICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSArPSBzdHJpZGUpIHtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgIGZsYXRDb29yZGluYXRlc1tpICsgMV0gPSAwO1xuICAgIGZvciAodmFyIGogPSAyOyBqIDwgc3RyaWRlOyBqKyspIHtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgal0gPSBjZW50ZXJbal07XG4gICAgfVxuICB9XG4gIHZhciBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCBjaXJjbGUuZ2V0UmFkaXVzKCksIG9wdF9hbmdsZSk7XG4gIHJldHVybiBwb2x5Z29uO1xufVxuXG5cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gIHZhciBzdHJpZGUgPSBwb2x5Z29uLmdldFN0cmlkZSgpO1xuICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkgLyBzaWRlcyk7XG4gICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF0gPSBjZW50ZXJbMF0gKyAocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpKTtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKTtcbiAgfVxuICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1xuICovXG5pbXBvcnQge0RFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7Vk9JRH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtjcmVhdGVFeHRlbnQsIG5vbmUgYXMgY2VudGVyTm9uZX0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIGNyZWF0ZVNuYXBUb1Bvd2VyfSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7Y3JlYXRlU25hcFRvWmVybywgY3JlYXRlU25hcFRvTiwgbm9uZSBhcyByb3RhdGlvbk5vbmUsIGRpc2FibGV9IGZyb20gJy4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7YWRkIGFzIGFkZENvb3JkaW5hdGUsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7aW5BbmRPdXR9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7Z2V0Rm9yVmlld0FuZFNpemUsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgaXNFbXB0eX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7ZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHtjbGFtcCwgbW9kdWxvfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7Y3JlYXRlUHJvamVjdGlvbiwgTUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhbmltYXRpb24gY29uZmlndXJhdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3NvdXJjZUNlbnRlcl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFt0YXJnZXRDZW50ZXJdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJvdGF0aW9uXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvblxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gZWFzaW5nXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pfSBjYWxsYmFja1xuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb25zdHJhaW50c1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gY2VudGVyXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvblxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249dHJ1ZV0gQ29uc3RyYWluIHRoZSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbmVhcmVzdD1mYWxzZV0gSWYgYGNvbnN0cmFpblJlc29sdXRpb25gIGlzIGB0cnVlYCwgZ2V0XG4gKiB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbil9IFtjYWxsYmFja10gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgaW5cbiAqIGl0cyBmaW5hbCBwb3NpdGlvbi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb25cbiAqIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgaW5pdGlhbCBjZW50ZXIgZm9yXG4gKiB0aGUgdmlldy4gVGhlIGNvb3JkaW5hdGUgc3lzdGVtIGZvciB0aGUgY2VudGVyIGlzIHNwZWNpZmllZCB3aXRoIHRoZVxuICogYHByb2plY3Rpb25gIG9wdGlvbi4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZSBmZXRjaGVkIGlmIHRoaXMgaXMgbm90IHNldCxcbiAqIGJ1dCB0aGUgY2VudGVyIGNhbiBiZSBzZXQgbGF0ZXIgd2l0aCB7QGxpbmsgI3NldENlbnRlcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW58bnVtYmVyfSBbY29uc3RyYWluUm90YXRpb249dHJ1ZV0gUm90YXRpb24gY29uc3RyYWludC5cbiAqIGBmYWxzZWAgbWVhbnMgbm8gY29uc3RyYWludC4gYHRydWVgIG1lYW5zIG5vIGNvbnN0cmFpbnQsIGJ1dCBzbmFwIHRvIHplcm9cbiAqIG5lYXIgemVyby4gQSBudW1iZXIgY29uc3RyYWlucyB0aGUgcm90YXRpb24gdG8gdGhhdCBudW1iZXIgb2YgdmFsdWVzLiBGb3JcbiAqIGV4YW1wbGUsIGA0YCB3aWxsIGNvbnN0cmFpbiB0aGUgcm90YXRpb24gdG8gMCwgOTAsIDE4MCwgYW5kIDI3MCBkZWdyZWVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlUm90YXRpb249dHJ1ZV0gRW5hYmxlIHJvdGF0aW9uLlxuICogSWYgYGZhbHNlYCwgYSByb3RhdGlvbiBjb25zdHJhaW50IHRoYXQgYWx3YXlzIHNldHMgdGhlIHJvdGF0aW9uIHRvIHplcm8gaXNcbiAqIHVzZWQuIFRoZSBgY29uc3RyYWluUm90YXRpb25gIG9wdGlvbiBoYXMgbm8gZWZmZWN0IGlmIGBlbmFibGVSb3RhdGlvbmAgaXNcbiAqIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGV4dGVudCB0aGF0IGNvbnN0cmFpbnMgdGhlXG4gKiBjZW50ZXIsIGluIG90aGVyIHdvcmRzLCBjZW50ZXIgY2Fubm90IGJlIHNldCBvdXRzaWRlIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCwgYG1pblJlc29sdXRpb25gLFxuICogYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy4gVGhlIGluaXRpYWxcbiAqIHJlc29sdXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyB0aGUge0BsaW5rICNjb25zdHJhaW5SZXNvbHV0aW9ufSBtZXRob2QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW5lZCBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpvb21cbiAqL1xuXG5cbi8qKlxuICogRGVmYXVsdCBtaW4gem9vbSBsZXZlbCBmb3IgdGhlIG1hcCB2aWV3LlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRkFVTFRfTUlOX1pPT00gPSAwO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBWaWV3IG9iamVjdCByZXByZXNlbnRzIGEgc2ltcGxlIDJEIHZpZXcgb2YgdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBvYmplY3QgdG8gYWN0IHVwb24gdG8gY2hhbmdlIHRoZSBjZW50ZXIsIHJlc29sdXRpb24sXG4gKiBhbmQgcm90YXRpb24gb2YgdGhlIG1hcC5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQW4gVmlldyBpcyBkZXRlcm1pbmVkIGJ5IHRocmVlIHN0YXRlczogYGNlbnRlcmAsIGByZXNvbHV0aW9uYCxcbiAqIGFuZCBgcm90YXRpb25gLiBFYWNoIHN0YXRlIGhhcyBhIGNvcnJlc3BvbmRpbmcgZ2V0dGVyIGFuZCBzZXR0ZXIsIGUuZy5cbiAqIGBnZXRDZW50ZXJgIGFuZCBgc2V0Q2VudGVyYCBmb3IgdGhlIGBjZW50ZXJgIHN0YXRlLlxuICpcbiAqIEFuIFZpZXcgaGFzIGEgYHByb2plY3Rpb25gLiBUaGUgcHJvamVjdGlvbiBkZXRlcm1pbmVzIHRoZVxuICogY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhlIGNlbnRlciwgYW5kIGl0cyB1bml0cyBkZXRlcm1pbmUgdGhlIHVuaXRzIG9mIHRoZVxuICogcmVzb2x1dGlvbiAocHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwpLiBUaGUgZGVmYXVsdCBwcm9qZWN0aW9uIGlzXG4gKiBTcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKlxuICogIyMjIFRoZSBjb25zdHJhaW50c1xuICpcbiAqIGBzZXRDZW50ZXJgLCBgc2V0UmVzb2x1dGlvbmAgYW5kIGBzZXRSb3RhdGlvbmAgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZVxuICogc3RhdGVzIG9mIHRoZSB2aWV3LiBBbnkgdmFsdWUgY2FuIGJlIHBhc3NlZCB0byB0aGUgc2V0dGVycy4gQW5kIHRoZSB2YWx1ZVxuICogdGhhdCBpcyBwYXNzZWQgdG8gYSBzZXR0ZXIgd2lsbCBlZmZlY3RpdmVseSBiZSB0aGUgdmFsdWUgc2V0IGluIHRoZSB2aWV3LFxuICogYW5kIHJldHVybmVkIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGdldHRlci5cbiAqXG4gKiBCdXQgYSBWaWV3IG9iamVjdCBhbHNvIGhhcyBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhXG4gKiAqcm90YXRpb24gY29uc3RyYWludCogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBBcyBzYWlkIGFib3ZlLCBubyBjb25zdHJhaW50cyBhcmUgYXBwbGllZCB3aGVuIHRoZSBzZXR0ZXJzIGFyZSB1c2VkIHRvIHNldFxuICogbmV3IHN0YXRlcyBmb3IgdGhlIHZpZXcuIEFwcGx5aW5nIGNvbnN0cmFpbnRzIGlzIGRvbmUgZXhwbGljaXRseSB0aHJvdWdoXG4gKiB0aGUgdXNlIG9mIHRoZSBgY29uc3RyYWluKmAgZnVuY3Rpb25zIChgY29uc3RyYWluUmVzb2x1dGlvbmAgYW5kXG4gKiBgY29uc3RyYWluUm90YXRpb25gIGFuZCBgY29uc3RyYWluQ2VudGVyYCkuXG4gKlxuICogVGhlIG1haW4gdXNlcnMgb2YgdGhlIGNvbnN0cmFpbnRzIGFyZSB0aGUgaW50ZXJhY3Rpb25zIGFuZCB0aGVcbiAqIGNvbnRyb2xzLiBGb3IgZXhhbXBsZSwgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAgY2hhbmdlcyB0aGUgdmlldyB0b1xuICogdGhlIFwibmV4dFwiIHJlc29sdXRpb24uIEFuZCByZWxlYXNpbmcgdGhlIGZpbmdlcnMgYWZ0ZXIgcGluY2gtem9vbWluZ1xuICogc25hcHMgdG8gdGhlIGNsb3Nlc3QgcmVzb2x1dGlvbiAod2l0aCBhbiBhbmltYXRpb24pLlxuICpcbiAqIFRoZSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyByZXNvbHV0aW9ucy4gSXQgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgcmVzb2x1dGlvbnNgLCBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAuIElmIGByZXNvbHV0aW9uc2AgaXMgc2V0LCB0aGUgb3RoZXIgdGhyZWVcbiAqIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZSBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9wdGlvbiBmb3IgbW9yZVxuICogaW5mb3JtYXRpb24uXG4gKlxuICogVGhlICpyb3RhdGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyBhbmdsZXMuIEl0IGlzIGRldGVybWluZWRcbiAqIGJ5IHRoZSBmb2xsb3dpbmcgb3B0aW9uczogYGVuYWJsZVJvdGF0aW9uYCBhbmQgYGNvbnN0cmFpblJvdGF0aW9uYC5cbiAqIEJ5IGRlZmF1bHQgdGhlIHJvdGF0aW9uIHZhbHVlIGlzIHNuYXBwZWQgdG8gemVybyB3aGVuIGFwcHJvYWNoaW5nIHRoZVxuICogaG9yaXpvbnRhbC5cbiAqXG4gKiBUaGUgKmNlbnRlciBjb25zdHJhaW50KiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBgZXh0ZW50YCBvcHRpb24uIEJ5XG4gKiBkZWZhdWx0IHRoZSBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gICogQGFwaVxuICovXG52YXIgVmlldyA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gVmlldyhvcHRfb3B0aW9ucykge1xuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRfb3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMuaGludHNfID0gWzAsIDBdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8QW5pbWF0aW9uPj59XG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV87XG5cbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfID0gdGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcblxuICAgIHRoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIFZpZXcuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgVmlldy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmlldztcblxuICAvKipcbiAgICogU2V0IHVwIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYXBwbHlPcHRpb25zXyA9IGZ1bmN0aW9uIGFwcGx5T3B0aW9uc18gKG9wdGlvbnMpIHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgcHJvcGVydGllcyA9IHt9O1xuICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LkNFTlRFUl0gPSBvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuY2VudGVyIDogbnVsbDtcblxuICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblpvb21fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblpvb207XG5cbiAgICB2YXIgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50ID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLmNvbnN0cmFpbnQ7XG4gICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NvbnN0cmFpbnRzfVxuICAgICAqL1xuICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50XG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUkVTT0xVVElPTl0gPSB0aGlzLmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8pO1xuXG4gICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHsgLy8gaW4gY2FzZSBtYXAgem9vbSBpcyBvdXQgb2YgbWluL21heCB6b29tIHJhbmdlXG4gICAgICAgIHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dID0gY2xhbXAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMuZ2V0UmVzb2x1dGlvbigpIHx8IHByb3BlcnRpZXNbVmlld1Byb3BlcnR5LlJFU09MVVRJT05dKSxcbiAgICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fLCB0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvcGVydGllc1tWaWV3UHJvcGVydHkuUk9UQVRJT05dID0gb3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDA7XG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Vmlld09wdGlvbnN9XG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG5cbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgdmlldyBvcHRpb25zIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2aWV3LiAgVGhlXG4gICAqIGN1cnJlbnQgcmVzb2x1dGlvbiAob3Igem9vbSksIGNlbnRlciwgYW5kIHJvdGF0aW9uIGFyZSBhcHBsaWVkIHRvIGFueSBzdG9yZWRcbiAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICogcmVzb2x1dGlvbiBsaW1pdHMuXG4gICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG5ld09wdGlvbnMgTmV3IG9wdGlvbnMgdG8gYmUgYXBwbGllZC5cbiAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0VXBkYXRlZE9wdGlvbnNfID0gZnVuY3Rpb24gZ2V0VXBkYXRlZE9wdGlvbnNfIChuZXdPcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMub3B0aW9uc18pO1xuXG4gICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICB9XG5cbiAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG5cbiAgICAvLyBwcmVzZXJ2ZSByb3RhdGlvblxuICAgIG9wdGlvbnMucm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG5cbiAgICByZXR1cm4gYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgfTtcblxuICAvKipcbiAgICogQW5pbWF0ZSB0aGUgdmlldy4gIFRoZSB2aWV3J3MgY2VudGVyLCB6b29tIChvciByZXNvbHV0aW9uKSwgYW5kIHJvdGF0aW9uXG4gICAqIGNhbiBiZSBhbmltYXRlZCBmb3Igc21vb3RoIHRyYW5zaXRpb25zIGJldHdlZW4gdmlldyBzdGF0ZXMuICBGb3IgZXhhbXBsZSxcbiAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiB2aWV3LmdldFpvb20oKSArIDF9KTtcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGFuaW1hdGlvbiBsYXN0cyBvbmUgc2Vjb25kIGFuZCB1c2VzIGluLWFuZC1vdXQgZWFzaW5nLiAgWW91XG4gICAqIGNhbiBjdXN0b21pemUgdGhpcyBiZWhhdmlvciBieSBpbmNsdWRpbmcgYGR1cmF0aW9uYCAoaW4gbWlsbGlzZWNvbmRzKSBhbmRcbiAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAqXG4gICAqIFRvIGNoYWluIHRvZ2V0aGVyIG11bHRpcGxlIGFuaW1hdGlvbnMsIGNhbGwgdGhlIG1ldGhvZCB3aXRoIG11bHRpcGxlXG4gICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgKlxuICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiAxMH0sIHtjZW50ZXI6IFswLCAwXX0pO1xuICAgKlxuICAgKiBJZiB5b3UgcHJvdmlkZSBhIGZ1bmN0aW9uIGFzIHRoZSBsYXN0IGFyZ3VtZW50IHRvIHRoZSBhbmltYXRlIG1ldGhvZCwgaXRcbiAgICogd2lsbCBnZXQgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uIHNlcmllcy4gIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAqIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gICAqXG4gICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgKiBjYWxsaW5nIGB2aWV3LnNldENlbnRlcigpYCwgYHZpZXcuc2V0UmVzb2x1dGlvbigpYCwgb3IgYHZpZXcuc2V0Um90YXRpb24oKWBcbiAgICogKG9yIGFub3RoZXIgbWV0aG9kIHRoYXQgY2FsbHMgb25lIG9mIHRoZXNlKS5cbiAgICpcbiAgICogQHBhcmFtIHsuLi4oQW5pbWF0aW9uT3B0aW9uc3xmdW5jdGlvbihib29sZWFuKSl9IHZhcl9hcmdzIEFuaW1hdGlvblxuICAgKiAgICAgb3B0aW9ucy4gIE11bHRpcGxlIGFuaW1hdGlvbnMgY2FuIGJlIHJ1biBpbiBzZXJpZXMgYnkgcGFzc2luZyBtdWx0aXBsZVxuICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMuICBBbiBvcHRpb25hbCBjYWxsYmFjayBjYW4gYmUgcHJvdmlkZWQgYXMgYSBmaW5hbFxuICAgKiAgICAgYXJndW1lbnQuICBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyXG4gICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIGFuaW1hdGUgKHZhcl9hcmdzKSB7XG4gICAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgY2FsbGJhY2s7XG4gICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAtLWFuaW1hdGlvbkNvdW50O1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoc3RhdGUuY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihzdGF0ZS5yb3RhdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpLnNsaWNlKCk7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIHNlcmllcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge0FuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHMkMVtpXSk7XG5cbiAgICAgIHZhciBhbmltYXRpb24gPSAvKiogQHR5cGUge0FuaW1hdGlvbn0gKi8gKHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlQ2VudGVyID0gY2VudGVyO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXI7XG4gICAgICAgIGNlbnRlciA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8sIG9wdGlvbnMuem9vbSAtIHRoaXMubWluWm9vbV8sIDApO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xuICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgIHZhciBkZWx0YSA9IG1vZHVsbyhvcHRpb25zLnJvdGF0aW9uIC0gcm90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLSBNYXRoLlBJO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gPSByb3RhdGlvbiArIGRlbHRhO1xuICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgIH1cblxuICAgICAgYW5pbWF0aW9uLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgcHVzaCBpdCBvbnRvIHRoZSBzZXJpZXMgZm9yIGNhbGxiYWNrIGhhbmRsaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydCArPSBhbmltYXRpb24uZHVyYXRpb247XG4gICAgICB9XG4gICAgICBzZXJpZXMucHVzaChhbmltYXRpb24pO1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAxKTtcbiAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldEFuaW1hdGluZyA9IGZ1bmN0aW9uIGdldEFuaW1hdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10gPiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0SW50ZXJhY3RpbmcgPSBmdW5jdGlvbiBnZXRJbnRlcmFjdGluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jYW5jZWxBbmltYXRpb25zID0gZnVuY3Rpb24gY2FuY2VsQW5pbWF0aW9ucyAoKSB7XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICBpZiAoc2VyaWVzWzBdLmNhbGxiYWNrKSB7XG4gICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgYW5pbWF0aW9ucy5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gdXBkYXRlQW5pbWF0aW9uc18gKCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25LZXlfKTtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgdmFyIHNlcmllc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xuICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgZnJhY3Rpb24gPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XG4gICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xuICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICB2YXIgeCA9IHgwICsgcHJvZ3Jlc3MgKiAoeDEgLSB4MCk7XG4gICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIsIFt4LCB5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBwcm9ncmVzcyA9PT0gMSA/XG4gICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA6XG4gICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiArIHByb2dyZXNzICogKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLFxuICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20ocmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDEgP1xuICAgICAgICAgICAgbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEkgOlxuICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICsgcHJvZ3Jlc3MgKiAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LkNFTlRFUixcbiAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBzZXJpZXNbMF0uY2FsbGJhY2s7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChtb3JlICYmIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25zXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlclJvdGF0ZSAocm90YXRpb24sIGFuY2hvcikge1xuICAgIHZhciBjZW50ZXI7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlcigpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBab29tIGFuY2hvci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJlc29sdXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclpvb20gPSBmdW5jdGlvbiBjYWxjdWxhdGVDZW50ZXJab29tIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICB2YXIgY2VudGVyO1xuICAgIHZhciBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC0gcmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgdmFyIHkgPSBhbmNob3JbMV0gLSByZXNvbHV0aW9uICogKGFuY2hvclsxXSAtIGN1cnJlbnRDZW50ZXJbMV0pIC8gY3VycmVudFJlc29sdXRpb247XG4gICAgICBjZW50ZXIgPSBbeCwgeV07XG4gICAgfVxuICAgIHJldHVybiBjZW50ZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U2l6ZUZyb21WaWV3cG9ydF8gPSBmdW5jdGlvbiBnZXRTaXplRnJvbVZpZXdwb3J0XyAoKSB7XG4gICAgdmFyIHNpemUgPSBbMTAwLCAxMDBdO1xuICAgIHZhciBzZWxlY3RvciA9ICcub2wtdmlld3BvcnRbZGF0YS12aWV3PVwiJyArIGdldFVpZCh0aGlzKSArICdcIl0nO1xuICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHZhciBtZXRyaWNzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgIHNpemVbMF0gPSBwYXJzZUludChtZXRyaWNzLndpZHRoLCAxMCk7XG4gICAgICBzaXplWzFdID0gcGFyc2VJbnQobWV0cmljcy5oZWlnaHQsIDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uc3RyYWluZWQgY2VudGVyIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBDZW50ZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ29uc3RyYWluZWQgY2VudGVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5jb25zdHJhaW5DZW50ZXIgPSBmdW5jdGlvbiBjb25zdHJhaW5DZW50ZXIgKGNlbnRlcikge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoY2VudGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb25zdHJhaW5lZCByZXNvbHV0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2RlbHRhIERlbHRhLiBEZWZhdWx0IGlzIGAwYC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIERpcmVjdGlvbi4gRGVmYXVsdCBpcyBgMGAuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IENvbnN0cmFpbmVkIHJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmNvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5SZXNvbHV0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGVsdGEsIG9wdF9kaXJlY3Rpb24pIHtcbiAgICB2YXIgZGVsdGEgPSBvcHRfZGVsdGEgfHwgMDtcbiAgICB2YXIgZGlyZWN0aW9uID0gb3B0X2RpcmVjdGlvbiB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHJlc29sdXRpb24sIGRlbHRhLCBkaXJlY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbnN0cmFpbmVkIHJvdGF0aW9uIG9mIHRoaXMgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGVsdGEgRGVsdGEuIERlZmF1bHQgaXMgYDBgLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBDb25zdHJhaW5lZCByb3RhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY29uc3RyYWluUm90YXRpb24gPSBmdW5jdGlvbiBjb25zdHJhaW5Sb3RhdGlvbiAocm90YXRpb24sIG9wdF9kZWx0YSkge1xuICAgIHZhciBkZWx0YSA9IG9wdF9kZWx0YSB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbihyb3RhdGlvbiwgZGVsdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Q29uc3RyYWludHN9IENvbnN0cmFpbnRzLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWludHMgPSBmdW5jdGlvbiBnZXRDb25zdHJhaW50cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfaGludHMgRGVzdGluYXRpb24gYXJyYXkuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIGdldEhpbnRzIChvcHRfaGludHMpIHtcbiAgICBpZiAob3B0X2hpbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdF9oaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgb3B0X2hpbnRzWzFdID0gdGhpcy5oaW50c19bMV07XG4gICAgICByZXR1cm4gb3B0X2hpbnRzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5oaW50c18uc2xpY2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgZXh0ZW50IGZvciB0aGUgY3VycmVudCB2aWV3IHN0YXRlIGFuZCB0aGUgcGFzc2VkIHNpemUuXG4gICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICogc2hvdWxkIGZpdC4gSW4gbW9zdCBjYXNlcyB5b3Ugd2FudCB0byBnZXQgdGhlIGV4dGVudCBvZiB0aGUgZW50aXJlIG1hcCxcbiAgICogdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfc2l6ZSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgc2l6ZSBvZiB0aGVcbiAgICogZmlyc3QgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50ID0gZnVuY3Rpb24gY2FsY3VsYXRlRXh0ZW50IChvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVyKCkpO1xuICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgYXNzZXJ0KHJvdGF0aW9uICE9PSB1bmRlZmluZWQsIDMpOyAvLyBUaGUgdmlldyByb3RhdGlvbiBpcyBub3QgZGVmaW5lZFxuXG4gICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0TWF4UmVzb2x1dGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRNaW5SZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiBnZXRNYXhab29tICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgbmV3IG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiBzZXRNYXhab29tICh6b29tKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHttYXhab29tOiB6b29tfSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uIGdldE1pblpvb20gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uIHNldE1pblpvb20gKHpvb20pIHtcbiAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oe21pblpvb206IHpvb219KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFByb2plY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZT19IG9wdF9zaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbkZvckV4dGVudCAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRTaXplRnJvbVZpZXdwb3J0XygpO1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICByZXR1cm4gTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcG93ZXIgUG93ZXIuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICB2YXIgcG93ZXIgPSBvcHRfcG93ZXIgfHwgMjtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgdmFsdWUgKiBtYXgpO1xuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gZ2V0Um90YXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXNvbHV0aW9uIGZvciBhIHZhbHVlIGJldHdlZW5cbiAgICogMCBhbmQgMS4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9wb3dlciBQb3dlci5cbiAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBWYWx1ZSBmb3IgcmVzb2x1dGlvbiBmdW5jdGlvbi5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLmdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgdmFyIG1heCA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHBvd2VyKTtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24ocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgdmFsdWUgPSAoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpKSAvIG1heDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvIGZvciBjZW50ZXIgcm91bmRpbmcuXG4gICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSAocGl4ZWxSYXRpbykge1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXIoKSk7XG4gICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgIHZhciBwaXhlbFJlc29sdXRpb24gPSByZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbztcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7U3RhdGV9ICovICh7XG4gICAgICAgIGNlbnRlcjogW1xuICAgICAgICAgIE1hdGgucm91bmQoY2VudGVyWzBdIC8gcGl4ZWxSZXNvbHV0aW9uKSAqIHBpeGVsUmVzb2x1dGlvbixcbiAgICAgICAgICBNYXRoLnJvdW5kKGNlbnRlclsxXSAvIHBpeGVsUmVzb2x1dGlvbikgKiBwaXhlbFJlc29sdXRpb25cbiAgICAgICAgXSxcbiAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgem9vbTogdGhpcy5nZXRab29tKClcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuICBJZiB5b3UgY29uZmlndXJlZCB5b3VyIHZpZXcgd2l0aCBhIHJlc29sdXRpb25zXG4gICAqIGFycmF5ICh0aGlzIGlzIHJhcmUpLCB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzIChzb1xuICAgKiB0aGUgem9vbSBsZXZlbCBpcyBub3Qgc2FmZSB0byB1c2UgYXMgYW4gaW5kZXggaW50byBhIHJlc29sdXRpb25zIGFycmF5KS5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gWm9vbS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbSA9IGZ1bmN0aW9uIGdldFpvb20gKCkge1xuICAgIHZhciB6b29tO1xuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgem9vbSA9IHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgfVxuICAgIHJldHVybiB6b29tO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRab29tRm9yUmVzb2x1dGlvbiAocmVzb2x1dGlvbikge1xuICAgIHZhciBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgdmFyIG1heCwgem9vbUZhY3RvcjtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgIHZhciBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB2aWV3IHJlc29sdXRpb24gZm9yIHRoZSBwcm92aWRlZCB6b29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yWm9vbSA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25Gb3Jab29tICh6b29tKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxuICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgem9vbSAtIHRoaXMubWluWm9vbV8sIDApKTtcbiAgfTtcblxuICAvKipcbiAgICogRml0IHRoZSBnaXZlbiBnZW9tZXRyeSBvciBleHRlbnQgYmFzZWQgb24gdGhlIGdpdmVuIG1hcCBzaXplIGFuZCBib3JkZXIuXG4gICAqIFRoZSBzaXplIGlzIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCB0byBmaXQgdGhlIGV4dGVudCBpbnRvLlxuICAgKiBJbiBtb3N0IGNhc2VzIHlvdSB3aWxsIHdhbnQgdG8gdXNlIHRoZSBtYXAgc2l6ZSwgdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAqIFRha2VzIGNhcmUgb2YgdGhlIG1hcCBhbmdsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGdlb21ldHJ5T3JFeHRlbnQgVGhlIGdlb21ldHJ5IG9yXG4gICAqICAgICBleHRlbnQgdG8gZml0IHRoZSB2aWV3IHRvLlxuICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBWaWV3LnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiBmaXQgKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHNpemUgPSB0aGlzLmdldFNpemVGcm9tVmlld3BvcnRfKCk7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgdmFyIGdlb21ldHJ5O1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8IHR5cGVvZiAvKiogQHR5cGUgez99ICovIChnZW9tZXRyeU9yRXh0ZW50KS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPT09ICdmdW5jdGlvbicsXG4gICAgICAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSkge1xuICAgICAgYXNzZXJ0KCFpc0VtcHR5KGdlb21ldHJ5T3JFeHRlbnQpLFxuICAgICAgICAyNSk7IC8vIENhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZ2VvbWV0cnlPckV4dGVudCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSkge1xuICAgICAgZ2VvbWV0cnlPckV4dGVudCA9IGdlb21ldHJ5T3JFeHRlbnQuZ2V0RXh0ZW50KCk7XG4gICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGdlb21ldHJ5T3JFeHRlbnQpO1xuICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGdlb21ldHJ5T3JFeHRlbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU9yRXh0ZW50O1xuICAgIH1cblxuICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgdmFyIGNvbnN0cmFpblJlc29sdXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gOiB0cnVlO1xuICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICBpZiAob3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgb3B0aW9ucy5tYXhab29tIC0gdGhpcy5taW5ab29tXywgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgIH1cbiAgICB2YXIgY29vcmRzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG5cbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIHZhciBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgIHZhciBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgIHZhciBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgIHZhciBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgIHZhciBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgcm90WCA9IGNvb3Jkc1tpXSAqIGNvc0FuZ2xlIC0gY29vcmRzW2kgKyAxXSAqIHNpbkFuZ2xlO1xuICAgICAgdmFyIHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgcmVzb2x1dGlvblxuICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KFxuICAgICAgW21pblJvdFgsIG1pblJvdFksIG1heFJvdFgsIG1heFJvdFldLFxuICAgICAgW3NpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSwgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdXSk7XG4gICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pID8gbWluUmVzb2x1dGlvbiA6XG4gICAgICBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICBpZiAoY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgdmFyIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCAwKTtcbiAgICAgIGlmICghbmVhcmVzdCAmJiBjb25zdHJhaW5lZFJlc29sdXRpb24gPCByZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcbiAgICAgICAgICBjb25zdHJhaW5lZFJlc29sdXRpb24sIC0xLCAwKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdXRpb24gPSBjb25zdHJhaW5lZFJlc29sdXRpb247XG4gICAgfVxuXG4gICAgLy8gY2FsY3VsYXRlIGNlbnRlclxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclJvdFggPSAobWluUm90WCArIG1heFJvdFgpIC8gMjtcbiAgICB2YXIgY2VudGVyUm90WSA9IChtaW5Sb3RZICsgbWF4Um90WSkgLyAyO1xuICAgIGNlbnRlclJvdFggKz0gKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIGNlbnRlclJvdFkgKz0gKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIgKiByZXNvbHV0aW9uO1xuICAgIHZhciBjZW50ZXJYID0gY2VudGVyUm90WCAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WSAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WCAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXIgPSBbY2VudGVyWCwgY2VudGVyWV07XG4gICAgdmFyIGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRlKHtcbiAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nXG4gICAgICB9LCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgIHRoaXMuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuY2VudGVyT24gPSBmdW5jdGlvbiBjZW50ZXJPbiAoY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgdmFyIHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuXG4gICAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gICAgdmFyIGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG5cbiAgICB0aGlzLnNldENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBkZWZpbmVkLlxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuaXNEZWYgPSBmdW5jdGlvbiBpc0RlZiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXIoKSAmJiB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIHZpZXcgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIE5ldyByb3RhdGlvbiB2YWx1ZSBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIHJvdGF0ZSAocm90YXRpb24sIG9wdF9hbmNob3IpIHtcbiAgICBpZiAob3B0X2FuY2hvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgY2VudGVyID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgdGhpcy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICB9XG4gICAgdGhpcy5zZXRSb3RhdGlvbihyb3RhdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gc2V0Q2VudGVyIChjZW50ZXIpIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBjZW50ZXIpO1xuICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Vmlld0hpbnR9IGhpbnQgSGludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldEhpbnQgPSBmdW5jdGlvbiBzZXRIaW50IChoaW50LCBkZWx0YSkge1xuICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgVmlldy5wcm90b3R5cGUuc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldFJlc29sdXRpb24gKHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24gc2V0Um90YXRpb24gKHJvdGF0aW9uKSB7XG4gICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZpZXcucHJvdG90eXBlLnNldFpvb20gPSBmdW5jdGlvbiBzZXRab29tICh6b29tKSB7XG4gICAgdGhpcy5zZXRSZXNvbHV0aW9uKHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkpO1xuICB9O1xuXG4gIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gIH0sIDApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2VudGVyTm9uZTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHt7Y29uc3RyYWludDogaW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlLCBtYXhSZXNvbHV0aW9uOiBudW1iZXIsXG4gKiAgICAgbWluUmVzb2x1dGlvbjogbnVtYmVyLCBtaW5ab29tOiBudW1iZXIsIHpvb21GYWN0b3I6IG51bWJlcn19IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gIHZhciBtYXhSZXNvbHV0aW9uO1xuICB2YXIgbWluUmVzb2x1dGlvbjtcblxuICAvLyBUT0RPOiBtb3ZlIHRoZXNlIHRvIGJlIG9sIGNvbnN0YW50c1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICB2YXIgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgdmFyIGRlZmF1bHRab29tRmFjdG9yID0gMjtcblxuICB2YXIgbWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuXG4gIHZhciBtYXhab29tID0gb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuXG4gIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuem9vbUZhY3RvciA6IGRlZmF1bHRab29tRmFjdG9yO1xuXG4gIGlmIChvcHRpb25zLnJlc29sdXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICBtaW5SZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWF4Wm9vbV0gIT09IHVuZGVmaW5lZCA/XG4gICAgICByZXNvbHV0aW9uc1ttYXhab29tXSA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMoXG4gICAgICByZXNvbHV0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHNpemUgPSAhZXh0ZW50ID9cbiAgICAgIC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gL1xuICAgICAgICAgICAgcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCkgOlxuICAgICAgTWF0aC5tYXgoZ2V0V2lkdGgoZXh0ZW50KSwgZ2V0SGVpZ2h0KGV4dGVudCkpO1xuXG4gICAgdmFyIGRlZmF1bHRNYXhSZXNvbHV0aW9uID0gc2l6ZSAvIERFRkFVTFRfVElMRV9TSVpFIC8gTWF0aC5wb3coXG4gICAgICBkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICB2YXIgZGVmYXVsdE1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KFxuICAgICAgZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICAvLyB1c2VyIHByb3ZpZGVkIG1heFJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgaWYgKG1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluWm9vbSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heFJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1pblpvb20pO1xuICAgIH1cblxuICAgIC8vIHVzZXIgcHJvdmlkZWQgbWluUmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICBpZiAobWluUmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNaW5SZXNvbHV0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdpdmVuIGRpc2NyZXRlIHpvb20gbGV2ZWxzLCBtaW5SZXNvbHV0aW9uIG1heSBiZSBkaWZmZXJlbnQgdGhhbiBwcm92aWRlZFxuICAgIG1heFpvb20gPSBtaW5ab29tICsgTWF0aC5mbG9vcihcbiAgICAgIE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpKTtcbiAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20gLSBtaW5ab29tKTtcblxuICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUG93ZXIoXG4gICAgICB6b29tRmFjdG9yLCBtYXhSZXNvbHV0aW9uLCBtYXhab29tIC0gbWluWm9vbSk7XG4gIH1cbiAgcmV0dXJuIHtjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCwgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICBtaW5SZXNvbHV0aW9uOiBtaW5SZXNvbHV0aW9uLCBtaW5ab29tOiBtaW5ab29tLCB6b29tRmFjdG9yOiB6b29tRmFjdG9yfTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0aW9ucy5lbmFibGVSb3RhdGlvbiA6IHRydWU7XG4gIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgIHZhciBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgfSBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkaXNhYmxlO1xuICB9XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgJiYgYW5pbWF0aW9uLnRhcmdldENlbnRlcikge1xuICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlldy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuL21hdGguanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgbnVtYmVyLCBudW1iZXIpOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhyZXNvbHV0aW9ucykge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKHJlc29sdXRpb24sIGRlbHRhLCBkaXJlY3Rpb24pIHtcbiAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHogPSBsaW5lYXJGaW5kTmVhcmVzdChyZXNvbHV0aW9ucywgcmVzb2x1dGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgeiA9IGNsYW1wKHogKyBkZWx0YSwgMCwgcmVzb2x1dGlvbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhciBpbmRleCA9IE1hdGguZmxvb3Ioeik7XG4gICAgICAgIGlmICh6ICE9IGluZGV4ICYmIGluZGV4IDwgcmVzb2x1dGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHZhciBwb3dlciA9IHJlc29sdXRpb25zW2luZGV4XSAvIHJlc29sdXRpb25zW2luZGV4ICsgMV07XG4gICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW2luZGV4XSAvIE1hdGgucG93KHBvd2VyLCB6IC0gaW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvd2VyIFBvd2VyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4TGV2ZWwgTWF4aW11bSBsZXZlbC5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9Qb3dlcihwb3dlciwgbWF4UmVzb2x1dGlvbiwgb3B0X21heExldmVsKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24ocmVzb2x1dGlvbiwgZGVsdGEsIGRpcmVjdGlvbikge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gLWRpcmVjdGlvbiAvIDIgKyAwLjU7XG4gICAgICAgIHZhciBvbGRMZXZlbCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpICsgb2Zmc2V0KTtcbiAgICAgICAgdmFyIG5ld0xldmVsID0gTWF0aC5tYXgob2xkTGV2ZWwgKyBkZWx0YSwgMCk7XG4gICAgICAgIGlmIChvcHRfbWF4TGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG5ld0xldmVsID0gTWF0aC5taW4obmV3TGV2ZWwsIG9wdF9tYXhMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgbmV3TGV2ZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x1dGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2RvbVxuICovXG5cblxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3dpZHRoIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2hlaWdodCBDYW52YXMgaGVpZ2h0LlxuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRChvcHRfd2lkdGgsIG9wdF9oZWlnaHQpIHtcbiAgdmFyIGNhbnZhcyA9IC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9ICovIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSk7XG4gIGlmIChvcHRfd2lkdGgpIHtcbiAgICBjYW52YXMud2lkdGggPSBvcHRfd2lkdGg7XG4gIH1cbiAgaWYgKG9wdF9oZWlnaHQpIHtcbiAgICBjYW52YXMuaGVpZ2h0ID0gb3B0X2hlaWdodDtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9ICovIChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgd2lkdGggZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlcldpZHRoKHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWxlbWVudCkge1xuICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuXG4gIHJldHVybiB3aWR0aDtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCBoZWlnaHQgZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlckhlaWdodCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaGVpZ2h0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWxlbWVudCkge1xuICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuXG4gIHJldHVybiBoZWlnaHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gIHZhciBwYXJlbnQgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtOb2RlfSBUaGUgbm9kZSB0aGF0IHdhcyByZW1vdmVkIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIE9QQUNJVFk6ICdvcGFjaXR5JyxcbiAgVklTSUJMRTogJ3Zpc2libGUnLFxuICBFWFRFTlQ6ICdleHRlbnQnLFxuICBaX0lOREVYOiAnekluZGV4JyxcbiAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgU09VUkNFOiAnc291cmNlJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VcbiAqL1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE5vdGUgdGhhdCB3aXRoIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0gYW5kIGFsbCBpdHMgc3ViY2xhc3NlcywgYW55IHByb3BlcnR5IHNldCBpblxuICogdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R9IHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3QsIHNvXG4gKiBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VMYXllciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gQmFzZUxheWVyKG9wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgcHJvcGVydGllcyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID1cbiAgICAgICBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlZJU0lCTEVdID1cbiAgICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OXSA9XG4gICAgICAgb3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFJlc29sdXRpb24gOiBJbmZpbml0eTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT05dID1cbiAgICAgICBvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluUmVzb2x1dGlvbiA6IDA7XG5cbiAgICB0aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBsYXllciB0eXBlLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9MYXllclR5cGUuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJvdGVjdGVkO1xuICAgICAqL1xuICAgIHRoaXMudHlwZTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgQmFzZUxheWVyLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIEJhc2VMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIEJhc2VMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYXNlTGF5ZXI7XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXIgdHlwZSAodXNlZCB3aGVuIGNyZWF0aW5nIGEgbGF5ZXIgcmVuZGVyZXIpLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9MYXllclR5cGUuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHR5cGUuXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSBMYXllciBzdGF0ZS5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGUgKCkge1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gKi9cbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlXyB8fCAvKiogQHR5cGUgez99ICovICh7XG4gICAgICBsYXllcjogdGhpcyxcbiAgICAgIG1hbmFnZWQ6IHRydWVcbiAgICB9KTtcbiAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAodGhpcy5nZXRPcGFjaXR5KCksIDAsIDEpO1xuICAgIHN0YXRlLnNvdXJjZVN0YXRlID0gdGhpcy5nZXRTb3VyY2VTdGF0ZSgpO1xuICAgIHN0YXRlLnZpc2libGUgPSB0aGlzLmdldFZpc2libGUoKTtcbiAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgIHN0YXRlLnpJbmRleCA9IHRoaXMuZ2V0WkluZGV4KCkgfHwgMDtcbiAgICBzdGF0ZS5tYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRNYXhSZXNvbHV0aW9uKCk7XG4gICAgc3RhdGUubWluUmVzb2x1dGlvbiA9IE1hdGgubWF4KHRoaXMuZ2V0TWluUmVzb2x1dGlvbigpLCAwKTtcbiAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuXG4gICAgcmV0dXJuIHN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+PX0gb3B0X2FycmF5IEFycmF5IG9mIGxheWVycyAodG8gYmVcbiAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyc0FycmF5IChvcHRfYXJyYXkpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT49fSBvcHRfc3RhdGVzIE9wdGlvbmFsIGxpc3Qgb2YgbGF5ZXJcbiAgICogICAgIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiBnZXRMYXllclN0YXRlc0FycmF5IChvcHRfc3RhdGVzKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50IGV4dGVudH0gb2YgdGhlIGxheWVyIG9yIGB1bmRlZmluZWRgIGlmIGl0XG4gICAqIHdpbGwgYmUgdmlzaWJsZSByZWdhcmRsZXNzIG9mIGV4dGVudC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9IFRoZSBsYXllciBleHRlbnQuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gZ2V0RXh0ZW50ICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuRVhURU5UKSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIGdldE1heFJlc29sdXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRNaW5SZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIgKGJldHdlZW4gMCBhbmQgMSkuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiBnZXRPcGFjaXR5ICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk9QQUNJVFkpKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gZ2V0U291cmNlU3RhdGUgKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRWaXNpYmxlID0gZnVuY3Rpb24gZ2V0VmlzaWJsZSAoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuVklTSUJMRSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmVcbiAgICogcmVuZGVyaW5nLiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIFotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFpJbmRleCA9IGZ1bmN0aW9uIGdldFpJbmRleCAoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXh0ZW50IGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLiAgSWYgYHVuZGVmaW5lZGAsIHRoZSBsYXllclxuICAgKiB3aWxsIGJlIHZpc2libGUgYXQgYWxsIGV4dGVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9IGV4dGVudCBUaGUgZXh0ZW50IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiBzZXRFeHRlbnQgKGV4dGVudCkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuRVhURU5ULCBleHRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldE1heFJlc29sdXRpb24gKG1heFJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OLCBtYXhSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBtaW5pbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiBzZXRNaW5SZXNvbHV0aW9uIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uIHNldE9wYWNpdHkgKG9wYWNpdHkpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk9QQUNJVFksIG9wYWNpdHkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIHNldFZpc2libGUgKHZpc2libGUpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlZJU0lCTEUsIHZpc2libGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZSByZW5kZXJpbmcuXG4gICAqIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHppbmRleCBUaGUgei1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0WkluZGV4ID0gZnVuY3Rpb24gc2V0WkluZGV4ICh6aW5kZXgpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlpfSU5ERVgsIHppbmRleCk7XG4gIH07XG5cbiAgcmV0dXJuIEJhc2VMYXllcjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VMYXllcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1N0YXRlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogU3RhdGUgb2YgdGhlIHNvdXJjZSwgb25lIG9mICd1bmRlZmluZWQnLCAnbG9hZGluZycsICdyZWFkeScgb3IgJ2Vycm9yJy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBVTkRFRklORUQ6ICd1bmRlZmluZWQnLFxuICBMT0FESU5HOiAnbG9hZGluZycsXG4gIFJFQURZOiAncmVhZHknLFxuICBFUlJPUjogJ2Vycm9yJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0dyb3VwXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2dldENoYW5nZUV2ZW50VHlwZX0gZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJzZWN0aW9ufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IHthc3NpZ24sIGNsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IFtsYXllcnNdIENoaWxkIGxheWVycy5cbiAqL1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgTEFZRVJTOiAnbGF5ZXJzJ1xufTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IG9mIGxheWVycyB0aGF0IGFyZSBoYW5kbGVkIHRvZ2V0aGVyLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgZ3JvdXAvQ29sbGVjdGlvbiBjaGFuZ2VzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExheWVyR3JvdXAgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCYXNlTGF5ZXIpIHtcbiAgZnVuY3Rpb24gTGF5ZXJHcm91cChvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgYmFzZU9wdGlvbnMgPSAvKiogQHR5cGUge09wdGlvbnN9ICovIChhc3NpZ24oe30sIG9wdGlvbnMpKTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMubGF5ZXJzO1xuXG4gICAgdmFyIGxheWVycyA9IG9wdGlvbnMubGF5ZXJzO1xuXG4gICAgQmFzZUxheWVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0ge307XG5cbiAgICBsaXN0ZW4odGhpcyxcbiAgICAgIGdldENoYW5nZUV2ZW50VHlwZShQcm9wZXJ0eS5MQVlFUlMpLFxuICAgICAgdGhpcy5oYW5kbGVMYXllcnNDaGFuZ2VkXywgdGhpcyk7XG5cbiAgICBpZiAobGF5ZXJzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKGxheWVycy5zbGljZSgpLCB7dW5pcXVlOiB0cnVlfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NlcnQodHlwZW9mIC8qKiBAdHlwZSB7P30gKi8gKGxheWVycykuZ2V0QXJyYXkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgICAgNDMpOyAvLyBFeHBlY3RlZCBgbGF5ZXJzYCB0byBiZSBhbiBhcnJheSBvciBhIGBDb2xsZWN0aW9uYFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbih1bmRlZmluZWQsIHt1bmlxdWU6IHRydWV9KTtcbiAgICB9XG5cbiAgICB0aGlzLnNldExheWVycyhsYXllcnMpO1xuXG4gIH1cblxuICBpZiAoIEJhc2VMYXllciApIExheWVyR3JvdXAuX19wcm90b19fID0gQmFzZUxheWVyO1xuICBMYXllckdyb3VwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VMYXllciAmJiBCYXNlTGF5ZXIucHJvdG90eXBlICk7XG4gIExheWVyR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF5ZXJHcm91cDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUxheWVyQ2hhbmdlXyAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUxheWVyc0NoYW5nZWRfICgpIHtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcblxuICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVycygpO1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKFxuICAgICAgbGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuaGFuZGxlTGF5ZXJzQWRkXywgdGhpcyksXG4gICAgICBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKVxuICAgICk7XG5cbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmxpc3RlbmVyS2V5c18pIHtcbiAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tpZF0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB9XG4gICAgY2xlYXIodGhpcy5saXN0ZW5lcktleXNfKTtcblxuICAgIHZhciBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBsYXllciA9IGxheWVyc0FycmF5W2ldO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gW1xuICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKVxuICAgICAgXTtcbiAgICB9XG5cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0FkZF8gPSBmdW5jdGlvbiBoYW5kbGVMYXllcnNBZGRfIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKVxuICAgIF07XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNSZW1vdmVfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJzUmVtb3ZlXyAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gKi8gKGNvbGxlY3Rpb25FdmVudC5lbGVtZW50KTtcbiAgICB2YXIga2V5ID0gZ2V0VWlkKGxheWVyKTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gQ29sbGVjdGlvbiBvZlxuICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gZ2V0TGF5ZXJzICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkxBWUVSUykpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAqIGluIHRoaXMgZ3JvdXAuXG4gICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5zZXRMYXllcnMgPSBmdW5jdGlvbiBzZXRMYXllcnMgKGxheWVycykge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LkxBWUVSUywgbGF5ZXJzKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJzQXJyYXkgKG9wdF9hcnJheSkge1xuICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSAhPT0gdW5kZWZpbmVkID8gb3B0X2FycmF5IDogW107XG4gICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3N0YXRlcyA6IFtdO1xuXG4gICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG5cbiAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICB9KTtcblxuICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgZm9yICh2YXIgaSA9IHBvcywgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIGxheWVyU3RhdGUgPSBzdGF0ZXNbaV07XG4gICAgICBsYXllclN0YXRlLm9wYWNpdHkgKj0gb3duTGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgbGF5ZXJTdGF0ZS52aXNpYmxlID0gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIG93bkxheWVyU3RhdGUudmlzaWJsZTtcbiAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiA9IE1hdGgubWluKFxuICAgICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWF4UmVzb2x1dGlvbik7XG4gICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChcbiAgICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1pblJlc29sdXRpb24pO1xuICAgICAgaWYgKG93bkxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IGdldEludGVyc2VjdGlvbihsYXllclN0YXRlLmV4dGVudCwgb3duTGF5ZXJTdGF0ZS5leHRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gb3duTGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICB9O1xuXG4gIHJldHVybiBMYXllckdyb3VwO1xufShCYXNlTGF5ZXIpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBMYXllckdyb3VwO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Hcm91cC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc2l6ZVxuICovXG5cblxuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhIHNpemU6IGBbd2lkdGgsIGhlaWdodF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IFNpemVcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogUmV0dXJucyBhIGJ1ZmZlcmVkIHNpemUuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gVGhlIGFtb3VudCBieSB3aGljaCB0byBidWZmZXIuXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIGJ1ZmZlcmVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoc2l6ZSwgbnVtLCBvcHRfc2l6ZSkge1xuICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICB9XG4gIG9wdF9zaXplWzBdID0gc2l6ZVswXSArIDIgKiBudW07XG4gIG9wdF9zaXplWzFdID0gc2l6ZVsxXSArIDIgKiBudW07XG4gIHJldHVybiBvcHRfc2l6ZTtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgVGhlIHNpemUgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBcmVhKHNpemUpIHtcbiAgcmV0dXJuIHNpemVbMF0gPiAwICYmIHNpemVbMV0gPiAwO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNpemUgc2NhbGVkIGJ5IGEgcmF0aW8uIFRoZSByZXN1bHQgd2lsbCBiZSBhbiBhcnJheSBvZiBpbnRlZ2Vycy5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFJhdGlvLlxuICogQHBhcmFtIHtTaXplPX0gb3B0X3NpemUgT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBzY2FsZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHNpemUsIHJhdGlvLCBvcHRfc2l6ZSkge1xuICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdF9zaXplID0gWzAsIDBdO1xuICB9XG4gIG9wdF9zaXplWzBdID0gKHNpemVbMF0gKiByYXRpbyArIDAuNSkgfCAwO1xuICBvcHRfc2l6ZVsxXSA9IChzaXplWzFdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgcmV0dXJuIG9wdF9zaXplO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhbiBgU2l6ZWAgYXJyYXkgZm9yIHRoZSBwYXNzZWQgaW4gbnVtYmVyIChtZWFuaW5nOiBzcXVhcmUpIG9yXG4gKiBgU2l6ZWAgYXJyYXkuXG4gKiAobWVhbmluZzogbm9uLXNxdWFyZSksXG4gKiBAcGFyYW0ge251bWJlcnxTaXplfSBzaXplIFdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0ge1NpemU9fSBvcHRfc2l6ZSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gU2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZShzaXplLCBvcHRfc2l6ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgIHJldHVybiBzaXplO1xuICB9IGVsc2Uge1xuICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvcHRfc2l6ZSA9IFtzaXplLCBzaXplXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0X3NpemVbMF0gPSBvcHRfc2l6ZVsxXSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoc2l6ZSk7XG4gICAgfVxuICAgIHJldHVybiBvcHRfc2l6ZTtcbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaXplLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9QbHVnZ2FibGVNYXBcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnQgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnQuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBQcm9wZXJ0eSBmcm9tICcuL01hcFByb3BlcnR5LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0LCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlUXVldWUgZnJvbSAnLi9UaWxlUXVldWUuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtyZW1vdmVOb2RlfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleSwgdW5saXN0ZW59IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCB7c3RvcFByb3BhZ2F0aW9ufSBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUVtcHR5LCBjbG9uZSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZXF1YWxzLCBnZXRGb3JWaWV3QW5kU2l6ZSwgaXNFbXB0eX0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtUUlVFfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge0RFVklDRV9QSVhFTF9SQVRJTywgVE9VQ0h9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCBMYXllckdyb3VwIGZyb20gJy4vbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IHtoYXNBcmVhfSBmcm9tICcuL3NpemUuanMnO1xuaW1wb3J0IHtEUk9QfSBmcm9tICcuL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtfSBmcm9tICcuL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBTdGF0ZSBvZiB0aGUgY3VycmVudCBmcmFtZS4gT25seSBgcGl4ZWxSYXRpb2AsIGB0aW1lYCBhbmQgYHZpZXdTdGF0ZWAgc2hvdWxkXG4gKiBiZSB1c2VkIGluIGFwcGxpY2F0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZyYW1lU3RhdGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpbyBvZiB0aGUgZnJhbWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZSBUaGUgdGltZSB3aGVuIHJlbmRlcmluZyBvZiB0aGUgZnJhbWUgd2FzIHJlcXVlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybVxuICogQHByb3BlcnR5IHtudWxsfGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBmb2N1c1xuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4XG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGU+fSBsYXllclN0YXRlc1xuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlPn0gbGF5ZXJTdGF0ZXNBcnJheVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXG4gKiBAcHJvcGVydHkge0FycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59IHBvc3RSZW5kZXJGdW5jdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemVcbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSBza2lwcGVkRmVhdHVyZVVpZHNcbiAqIEBwcm9wZXJ0eSB7VGlsZVF1ZXVlfSB0aWxlUXVldWVcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD4+fSB1c2VkVGlsZXNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gdmlld0hpbnRzXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHdhbnRlZFRpbGVzXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihQbHVnZ2FibGVNYXAsID9GcmFtZVN0YXRlKTogYm9vbGVhbn0gUG9zdFJlbmRlckZ1bmN0aW9uXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0UGl4ZWxPcHRpb25zXG4gKiBAcHJvcGVydHkge3VuZGVmaW5lZHxmdW5jdGlvbihpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAqIGZ1bmN0aW9uLiBUaGUgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBvbmUgYXJndW1lbnQsIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllci1jYW5kaWRhdGV9IGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbiAqIE9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYFxuICogd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hpdFRvbGVyYW5jZT0wXSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZSBpbiBwaXhlbHMuIFBpeGVsc1xuICogaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLiBUaGlzIG9ubHlcbiAqIHdvcmtzIGZvciB0aGUgY2FudmFzIHJlbmRlcmVyIGFuZCBub3QgZm9yIFdlYkdMLlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zSW50ZXJuYWxcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXVxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fSBrZXlib2FyZEV2ZW50VGFyZ2V0XG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBvdmVybGF5c1xuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzXG4gKi9cblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sfmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb25+ZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbG9hZFRpbGVzV2hpbGVBbmltYXRpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGlsZXNcbiAqIHdpbGwgYmUgbG9hZGVkIGR1cmluZyBhbmltYXRpb25zLiBUaGlzIG1heSBpbXByb3ZlIHRoZSB1c2VyIGV4cGVyaWVuY2UsIGJ1dFxuICogY2FuIGFsc28gbWFrZSBhbmltYXRpb25zIHN0dXR0ZXIgb24gZGV2aWNlcyB3aXRoIHNsb3cgbWVtb3J5LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZz1mYWxzZV0gV2hlbiBzZXQgdG8gYHRydWVgLFxuICogdGlsZXMgd2lsbCBiZSBsb2FkZWQgd2hpbGUgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgbWFwLiBUaGlzIG1heSBpbXByb3ZlIHRoZVxuICogdXNlciBleHBlcmllbmNlLCBidXQgY2FuIGFsc28gbWFrZSBtYXAgcGFubmluZyBhbmQgem9vbWluZyBjaG9wcHkgb24gZGV2aWNlc1xuICogd2l0aCBzbG93IG1lbW9yeS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbW92ZVRvbGVyYW5jZT0xXSBUaGUgbWluaW11bSBkaXN0YW5jZSBpbiBwaXhlbHMgdGhlXG4gKiBjdXJzb3IgbXVzdCBtb3ZlIHRvIGJlIGRldGVjdGVkIGFzIGEgbWFwIG1vdmUgZXZlbnQgaW5zdGVhZCBvZiBhIGNsaWNrLlxuICogSW5jcmVhc2luZyB0aGlzIHZhbHVlIGNhbiBtYWtlIGl0IGVhc2llciB0byBjbGljayBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IFtvdmVybGF5c11cbiAqIE92ZXJsYXlzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBCeSBkZWZhdWx0LCBubyBvdmVybGF5cyBhcmUgYWRkZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIGNvbnRhaW5lciBmb3IgdGhlIG1hcCwgZWl0aGVyIHRoZVxuICogZWxlbWVudCBpdHNlbGYgb3IgdGhlIGBpZGAgb2YgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uXG4gKiB0aW1lLCB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0VGFyZ2V0fSBtdXN0IGJlIGNhbGxlZCBmb3IgdGhlIG1hcCB0byBiZVxuICogcmVuZGVyZWQuXG4gKiBAcHJvcGVydHkge1ZpZXd9IFt2aWV3XSBUaGUgbWFwJ3Mgdmlldy4gIE5vIGxheWVyIHNvdXJjZXMgd2lsbCBiZVxuICogZmV0Y2hlZCB1bmxlc3MgdGhpcyBpcyBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uIHRpbWUgb3IgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI3NldFZpZXd9LlxuICovXG5cblxuLyoqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAqIEBmaXJlcyBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gKiBAYXBpXG4gKi9cbnZhciBQbHVnZ2FibGVNYXAgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCYXNlT2JqZWN0KSB7XG4gIGZ1bmN0aW9uIFBsdWdnYWJsZU1hcChvcHRpb25zKSB7XG5cbiAgICBCYXNlT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICB2YXIgb3B0aW9uc0ludGVybmFsID0gY3JlYXRlT3B0aW9uc0ludGVybmFsKG9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubWF4VGlsZXNMb2FkaW5nXyA9IG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFRpbGVzTG9hZGluZyA6IDE2O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nXyA9XG4gICAgICAgIG9wdGlvbnMubG9hZFRpbGVzV2hpbGVBbmltYXRpbmcgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgb3B0aW9ucy5sb2FkVGlsZXNXaGlsZUFuaW1hdGluZyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxvYWRUaWxlc1doaWxlSW50ZXJhY3RpbmdfID1cbiAgICAgICAgb3B0aW9ucy5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIG9wdGlvbnMubG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpb18gPSBvcHRpb25zLnBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnBpeGVsUmF0aW8gOiBERVZJQ0VfUElYRUxfUkFUSU87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmFuaW1hdGlvbkRlbGF5XyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnJlbmRlckZyYW1lXy5jYWxsKHRoaXMsIERhdGUubm93KCkpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5mcmFtZUluZGV4XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/RnJhbWVTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBleHRlbnQgYXQgdGhlIHByZXZpb3VzICdtb3ZlZW5kJyBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5jbGFzc05hbWUgPSAnb2wtdmlld3BvcnQnICsgKFRPVUNIID8gJyBvbC10b3VjaCcgOiAnJyk7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIHRoaXMudmlld3BvcnRfLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIC8vIHByZXZlbnQgcGFnZSB6b29tIG9uIElFID49IDEwIGJyb3dzZXJzXG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUubXNUb3VjaEFjdGlvbiA9ICdub25lJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS50b3VjaEFjdGlvbiA9ICdub25lJztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgdGhpcy52aWV3cG9ydF8uYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5Q29udGFpbmVyXyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JztcbiAgICB2YXIgb3ZlcmxheUV2ZW50cyA9IFtcbiAgICAgIEV2ZW50VHlwZS5DTElDSyxcbiAgICAgIEV2ZW50VHlwZS5EQkxDTElDSyxcbiAgICAgIEV2ZW50VHlwZS5NT1VTRURPV04sXG4gICAgICBFdmVudFR5cGUuVE9VQ0hTVEFSVCxcbiAgICAgIEV2ZW50VHlwZS5NU1BPSU5URVJET1dOLFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTixcbiAgICAgIEV2ZW50VHlwZS5NT1VTRVdIRUVMLFxuICAgICAgRXZlbnRUeXBlLldIRUVMXG4gICAgXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBvdmVybGF5RXZlbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGxpc3Rlbih0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLCBvdmVybGF5RXZlbnRzW2ldLCBzdG9wUHJvcGFnYXRpb24pO1xuICAgIH1cbiAgICB0aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZCh0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01hcEJyb3dzZXJFdmVudEhhbmRsZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG5ldyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKHRoaXMsIG9wdGlvbnMubW92ZVRvbGVyYW5jZSk7XG4gICAgZm9yICh2YXIga2V5IGluIE1hcEJyb3dzZXJFdmVudFR5cGUpIHtcbiAgICAgIGxpc3Rlbih0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLCBNYXBCcm93c2VyRXZlbnRUeXBlW2tleV0sXG4gICAgICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50LCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gbnVsbDtcblxuICAgIGxpc3Rlbih0aGlzLnZpZXdwb3J0XywgRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyk7XG4gICAgbGlzdGVuKHRoaXMudmlld3BvcnRfLCBFdmVudFR5cGUuV0hFRUwsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcy52aWV3cG9ydF8sIEV2ZW50VHlwZS5NT1VTRVdIRUVMLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5jb250cm9scyA9IG9wdGlvbnNJbnRlcm5hbC5jb250cm9scyB8fCBuZXcgQ29sbGVjdGlvbigpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMgPSBvcHRpb25zSW50ZXJuYWwuaW50ZXJhY3Rpb25zIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlzXyA9IG9wdGlvbnNJbnRlcm5hbC5vdmVybGF5cztcblxuICAgIC8qKlxuICAgICAqIEEgbG9va3VwIG9mIG92ZXJsYXlzIGJ5IGlkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVyXyA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihFdmVudCl8dW5kZWZpbmVkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5oYW5kbGVSZXNpemVfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5mb2N1c18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59XG4gICAgICovXG4gICAgdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7VGlsZVF1ZXVlfVxuICAgICAqL1xuICAgIHRoaXMudGlsZVF1ZXVlXyA9IG5ldyBUaWxlUXVldWUoXG4gICAgICB0aGlzLmdldFRpbGVQcmlvcml0eS5iaW5kKHRoaXMpLFxuICAgICAgdGhpcy5oYW5kbGVUaWxlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcblxuICAgIC8qKlxuICAgICAqIFVpZHMgb2YgZmVhdHVyZXMgdG8gc2tpcCBhdCByZW5kZXJpbmcgdGltZS5cbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNraXBwZWRGZWF0dXJlVWlkc18gPSB7fTtcblxuICAgIGxpc3RlbihcbiAgICAgIHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZShNYXBQcm9wZXJ0eS5MQVlFUkdST1VQKSxcbiAgICAgIHRoaXMuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfLCB0aGlzKTtcbiAgICBsaXN0ZW4odGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKE1hcFByb3BlcnR5LlZJRVcpLFxuICAgICAgdGhpcy5oYW5kbGVWaWV3Q2hhbmdlZF8sIHRoaXMpO1xuICAgIGxpc3Rlbih0aGlzLCBnZXRDaGFuZ2VFdmVudFR5cGUoTWFwUHJvcGVydHkuU0laRSksXG4gICAgICB0aGlzLmhhbmRsZVNpemVDaGFuZ2VkXywgdGhpcyk7XG4gICAgbGlzdGVuKHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZShNYXBQcm9wZXJ0eS5UQVJHRVQpLFxuICAgICAgdGhpcy5oYW5kbGVUYXJnZXRDaGFuZ2VkXywgdGhpcyk7XG5cbiAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgIC8vIGlzIFwiZGVmaW5lZFwiIGFscmVhZHkuXG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuXG4gICAgdGhpcy5jb250cm9scy5mb3JFYWNoKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgKi9cbiAgICAgIChmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICAgIGNvbnRyb2wuc2V0TWFwKHRoaXMpO1xuICAgICAgfSkuYmluZCh0aGlzKSk7XG5cbiAgICBsaXN0ZW4odGhpcy5jb250cm9scywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgbGlzdGVuKHRoaXMuY29udHJvbHMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICB9LCB0aGlzKTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zLmZvckVhY2goXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbi5cbiAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgKi9cbiAgICAgIChmdW5jdGlvbihpbnRlcmFjdGlvbikge1xuICAgICAgICBpbnRlcmFjdGlvbi5zZXRNYXAodGhpcyk7XG4gICAgICB9KS5iaW5kKHRoaXMpKTtcblxuICAgIGxpc3Rlbih0aGlzLmludGVyYWN0aW9ucywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgbGlzdGVuKHRoaXMuaW50ZXJhY3Rpb25zLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLm92ZXJsYXlzXy5mb3JFYWNoKHRoaXMuYWRkT3ZlcmxheUludGVybmFsXy5iaW5kKHRoaXMpKTtcblxuICAgIGxpc3Rlbih0aGlzLm92ZXJsYXlzXywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB0aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8oLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpKTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgbGlzdGVuKHRoaXMub3ZlcmxheXNfLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciBvdmVybGF5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB2YXIgaWQgPSBvdmVybGF5LmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIFBsdWdnYWJsZU1hcC5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZU9iamVjdCAmJiBCYXNlT2JqZWN0LnByb3RvdHlwZSApO1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGx1Z2dhYmxlTWFwO1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gVGhlIG1hcCByZW5kZXJlclxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBhIG1hcCB0eXBlIHRoYXQgaGFzIGEgY3JlYXRlUmVuZGVyZXIgbWV0aG9kJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgZ2l2ZW4gY29udHJvbCB0byB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRDb250cm9sID0gZnVuY3Rpb24gYWRkQ29udHJvbCAoY29udHJvbCkge1xuICAgIHRoaXMuZ2V0Q29udHJvbHMoKS5wdXNoKGNvbnRyb2wpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIGludGVyYWN0aW9uIHRvIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byBhZGQuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiBhZGRJbnRlcmFjdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICB0aGlzLmdldEludGVyYWN0aW9ucygpLnB1c2goaW50ZXJhY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBnaXZlbiBsYXllciB0byB0aGUgdG9wIG9mIHRoaXMgbWFwLiBJZiB5b3Ugd2FudCB0byBhZGQgYSBsYXllclxuICAgKiBlbHNld2hlcmUgaW4gdGhlIHN0YWNrLCB1c2UgYGdldExheWVycygpYCBhbmQgdGhlIG1ldGhvZHMgYXZhaWxhYmxlIG9uXG4gICAqIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiBhZGRMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXkgPSBmdW5jdGlvbiBhZGRPdmVybGF5IChvdmVybGF5KSB7XG4gICAgdGhpcy5nZXRPdmVybGF5cygpLnB1c2gob3ZlcmxheSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgZGVhbHMgd2l0aCBtYXAncyBvdmVybGF5IGNvbGxlY3Rpb24gY2hhbmdlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5SW50ZXJuYWxfID0gZnVuY3Rpb24gYWRkT3ZlcmxheUludGVybmFsXyAob3ZlcmxheSkge1xuICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV0gPSBvdmVybGF5O1xuICAgIH1cbiAgICBvdmVybGF5LnNldE1hcCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICpcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmRpc3Bvc2UoKTtcbiAgICB1bmxpc3Rlbih0aGlzLnZpZXdwb3J0XywgRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyk7XG4gICAgdW5saXN0ZW4odGhpcy52aWV3cG9ydF8sIEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpO1xuICAgIHVubGlzdGVuKHRoaXMudmlld3BvcnRfLCBFdmVudFR5cGUuTU9VU0VXSEVFTCwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpO1xuICAgIGlmICh0aGlzLmhhbmRsZVJlc2l6ZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgIHRoaXMuaGFuZGxlUmVzaXplXyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy5zZXRUYXJnZXQobnVsbCk7XG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVjdCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kIGV4ZWN1dGUgYVxuICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgKiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGBsYXllckZpbHRlcmAgb3B0aW9uIGluIGBvcHRfb3B0aW9uc2AuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLFxuICAgKiAgICAgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICogICAgIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHMuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyBvbmVcbiAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZSBmZWF0dXJlfSBvclxuICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZSByZW5kZXIgZmVhdHVyZX0gYXQgdGhlIHBpeGVsLCB0aGUgc2Vjb25kIGlzXG4gICAqICAgICB0aGUge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllcn0gb2YgdGhlIGZlYXR1cmUgYW5kIHdpbGwgYmUgbnVsbCBmb3JcbiAgICogICAgIHVubWFuYWdlZCBsYXllcnMuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFjayBmdW5jdGlvbnMgY2FuIHJldHVybiBhXG4gICAqICAgICB0cnV0aHkgdmFsdWUuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LCBpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgbGFzdFxuICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgKiBAdGVtcGxhdGUgUyxUXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdFBpeGVsID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdFBpeGVsIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHBpeGVsKTtcbiAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6XG4gICAgICAvKiogQHR5cGUge0F0UGl4ZWxPcHRpb25zfSAqLyAoe30pO1xuICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgKiB0aGlzLmZyYW1lU3RhdGVfLnBpeGVsUmF0aW8gOiAwO1xuICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIG51bGwsXG4gICAgICBsYXllckZpbHRlciwgbnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBUaGUgZGV0ZWN0ZWQgZmVhdHVyZXMgb3JcbiAgICogYG51bGxgIGlmIG5vbmUgd2VyZSBmb3VuZC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRGZWF0dXJlc0F0UGl4ZWwgPSBmdW5jdGlvbiBnZXRGZWF0dXJlc0F0UGl4ZWwgKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBmZWF0dXJlcyA9IG51bGw7XG4gICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgIGlmICghZmVhdHVyZXMpIHtcbiAgICAgICAgZmVhdHVyZXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgfSwgb3B0X29wdGlvbnMpO1xuICAgIHJldHVybiBmZWF0dXJlcztcbiAgfTtcblxuICAvKipcbiAgICogRGV0ZWN0IGxheWVycyB0aGF0IGhhdmUgYSBjb2xvciB2YWx1ZSBhdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kXG4gICAqIGV4ZWN1dGUgYSBjYWxsYmFjayB3aXRoIGVhY2ggbWF0Y2hpbmcgbGF5ZXIuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFja1xuICAgKiAgICAgTGF5ZXIgY2FsbGJhY2suIFRoaXMgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHR3byBhcmd1bWVudHM6IGZpcnN0IGlzIHRoZVxuICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllcn0sIHNlY29uZCBhcmd1bWVudCBpcyBhbiBhcnJheSByZXByZXNlbnRpbmdcbiAgICogICAgIFtSLCBHLCBCLCBBXSBwaXhlbCB2YWx1ZXMgKDAgLSAyNTUpIGFuZCB3aWxsIGJlIGBudWxsYCBmb3IgbGF5ZXIgdHlwZXNcbiAgICogICAgIHRoYXQgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgYXJndW1lbnQuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFja1xuICAgKiAgICAgZnVuY3Rpb25zIGNhbiByZXR1cm4gYSB0cnV0aHkgdmFsdWUuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnM9fSBvcHRfb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gZm9yRWFjaExheWVyQXRQaXhlbCAocGl4ZWwsIGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IC8qKiBAdHlwZSB7QXRQaXhlbE9wdGlvbnN9ICovICh7fSk7XG4gICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICogdGhpcy5mcmFtZVN0YXRlXy5waXhlbFJhdGlvIDogMDtcbiAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRpb25zLmxheWVyRmlsdGVyIHx8IFRSVUU7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hMYXllckF0UGl4ZWwoXG4gICAgICBwaXhlbCwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbnVsbCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlY3QgaWYgZmVhdHVyZXMgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAqIGRldGVjdGlvbiBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGBvcHRfbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBwaXhlbD9cbiAgICogQHRlbXBsYXRlIFVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIGhhc0ZlYXR1cmVBdFBpeGVsIChwaXhlbCwgb3B0X29wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDpcbiAgICAgIC8qKiBAdHlwZSB7QXRQaXhlbE9wdGlvbnN9ICovICh7fSk7XG4gICAgdmFyIGxheWVyRmlsdGVyID0gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyIDogVFJVRTtcbiAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICogdGhpcy5mcmFtZVN0YXRlXy5waXhlbFJhdGlvIDogMDtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHZpZXcgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBFdmVudC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRDb29yZGluYXRlID0gZnVuY3Rpb24gZ2V0RXZlbnRDb29yZGluYXRlIChldmVudCkge1xuICAgIHJldHVybiB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwodGhpcy5nZXRFdmVudFBpeGVsKGV2ZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtFdmVudHxUb3VjaEV2ZW50fSBldmVudCBFdmVudC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gUGl4ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRQaXhlbCA9IGZ1bmN0aW9uIGdldEV2ZW50UGl4ZWwgKGV2ZW50KSB7XG4gICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSB0aGlzLnZpZXdwb3J0Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgZXZlbnRQb3NpdGlvbiA9ICdjaGFuZ2VkVG91Y2hlcycgaW4gZXZlbnQgP1xuICAgICAgLyoqIEB0eXBlIHtUb3VjaEV2ZW50fSAqLyAoZXZlbnQpLmNoYW5nZWRUb3VjaGVzWzBdIDpcbiAgICAgIC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKGV2ZW50KTtcblxuICAgIHJldHVybiBbXG4gICAgICBldmVudFBvc2l0aW9uLmNsaWVudFggLSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQsXG4gICAgICBldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcFxuICAgIF07XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGFyZ2V0IGluIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLlxuICAgKiBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIHdoYXQgaXMgZW50ZXJlZCBhcyBhbiBvcHRpb24gb3IgaW4gc2V0VGFyZ2V0OlxuICAgKiBpZiB0aGF0IHdhcyBhbiBlbGVtZW50LCBpdCByZXR1cm5zIGFuIGVsZW1lbnQ7IGlmIGEgc3RyaW5nLCBpdCByZXR1cm5zIHRoYXQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50IHRoYXQgdGhlXG4gICAqICAgICBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVEFSR0VUKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC4gSW4gY29udHJhc3QgdG9cbiAgICogYGdldFRhcmdldGAgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybiBhbiBgRWxlbWVudGAsIG9yIGBudWxsYCBpZiB0aGVcbiAgICogbWFwIGhhcyBubyB0YXJnZXQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgZWxlbWVudCB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIGdldFRhcmdldEVsZW1lbnQgKCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLmdldFRhcmdldCgpO1xuICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgKiBtYXAgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlRnJvbVBpeGVsIChwaXhlbCkge1xuICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBjb250cm9scy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBjb250cm9sc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29udHJvbHMgPSBmdW5jdGlvbiBnZXRDb250cm9scyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIG92ZXJsYXlzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIG92ZXJsYXlzXG4gICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheXMgPSBmdW5jdGlvbiBnZXRPdmVybGF5cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheXNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYW4gb3ZlcmxheSBieSBpdHMgaWRlbnRpZmllciAodGhlIHZhbHVlIHJldHVybmVkIGJ5IG92ZXJsYXkuZ2V0SWQoKSkuXG4gICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBPdmVybGF5IGlkZW50aWZpZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlCeUlkID0gZnVuY3Rpb24gZ2V0T3ZlcmxheUJ5SWQgKGlkKSB7XG4gICAgdmFyIG92ZXJsYXkgPSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIGludGVyYWN0aW9ucy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBpbnRlcmFjdGlvbnNcbiAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAqXG4gICAqIEludGVyYWN0aW9ucyBhcmUgdXNlZCBmb3IgZS5nLiBwYW4sIHpvb20gYW5kIHJvdGF0ZS5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBJbnRlcmFjdGlvbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0SW50ZXJhY3Rpb25zID0gZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXJncm91cCBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAqIEByZXR1cm4ge0xheWVyR3JvdXB9IEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExheWVyR3JvdXAgPSBmdW5jdGlvbiBnZXRMYXllckdyb3VwICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExheWVycyA9IGZ1bmN0aW9uIGdldExheWVycyAoKSB7XG4gICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgIHJldHVybiBsYXllcnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSBtYXAgdmlld1xuICAgKiBwcm9qZWN0aW9uIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBpeGVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRQaXhlbEZyb21Db29yZGluYXRlID0gZnVuY3Rpb24gZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSAoY29vcmRpbmF0ZSkge1xuICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgY29vcmRpbmF0ZS5zbGljZSgwLCAyKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCByZW5kZXJlci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiBnZXRSZW5kZXJlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuU0laRSkpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC4gQSB2aWV3IG1hbmFnZXMgcHJvcGVydGllcyBzdWNoIGFzXG4gICAqIGNlbnRlciBhbmQgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7Vmlld30gVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3ID0gZnVuY3Rpb24gZ2V0VmlldyAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7Vmlld30gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlZJRVcpKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVmlld3BvcnQuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Vmlld3BvcnQgPSBmdW5jdGlvbiBnZXRWaWV3cG9ydCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnRfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMuICBFbGVtZW50cyBhZGRlZCB0b1xuICAgKiB0aGlzIGNvbnRhaW5lciB3aWxsIGxldCBtb3VzZWRvd24gYW5kIHRvdWNoc3RhcnQgZXZlbnRzIHRocm91Z2ggdG8gdGhlIG1hcCxcbiAgICogc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5IHdpbGwgdHJpZ2dlciB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9XG4gICAqIGV2ZW50cy5cbiAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fSBUaGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXIgPSBmdW5jdGlvbiBnZXRPdmVybGF5Q29udGFpbmVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAqIGV2ZW50IHByb3BhZ2F0aW9uLiBFbGVtZW50cyBhZGRlZCB0byB0aGlzIGNvbnRhaW5lciB3b24ndCBsZXQgbW91c2Vkb3duIGFuZFxuICAgKiB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheVxuICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lciB0aGF0IHN0b3BzIGV2ZW50cy5cbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCA9IGZ1bmN0aW9uIGdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQgKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVSZXNvbHV0aW9uIFRpbGUgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUaWxlUHJpb3JpdHkgPSBmdW5jdGlvbiBnZXRUaWxlUHJpb3JpdHkgKHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKSB7XG4gICAgLy8gRmlsdGVyIG91dCB0aWxlcyBhdCBoaWdoZXIgem9vbSBsZXZlbHMgdGhhbiB0aGUgY3VycmVudCB6b29tIGxldmVsLCBvciB0aGF0XG4gICAgLy8gYXJlIG91dHNpZGUgdGhlIHZpc2libGUgZXh0ZW50LlxuICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUgfHwgISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldKSB7XG4gICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgLy8gUHJpb3JpdGl6ZSB0aGUgaGlnaGVzdCB6b29tIGxldmVsIHRpbGVzIGNsb3Nlc3QgdG8gdGhlIGZvY3VzLlxuICAgIC8vIFRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyBhcmUgcHJpb3JpdGl6ZWQgdXNpbmcgTWF0aC5sb2codGlsZVJlc29sdXRpb24pLlxuICAgIC8vIFdpdGhpbiBhIHpvb20gbGV2ZWwsIHRpbGVzIGFyZSBwcmlvcml0aXplZCBieSB0aGUgZGlzdGFuY2UgaW4gcGl4ZWxzXG4gICAgLy8gYmV0d2VlbiB0aGUgY2VudGVyIG9mIHRoZSB0aWxlIGFuZCB0aGUgZm9jdXMuICBUaGUgZmFjdG9yIG9mIDY1NTM2IG1lYW5zXG4gICAgLy8gdGhhdCB0aGUgcHJpb3JpdGl6YXRpb24gc2hvdWxkIGJlaGF2ZSBhcyBkZXNpcmVkIGZvciB0aWxlcyB1cCB0b1xuICAgIC8vIDY1NTM2ICogTWF0aC5sb2coMikgPSA0NTQyNiBwaXhlbHMgZnJvbSB0aGUgZm9jdXMuXG4gICAgdmFyIGRlbHRhWCA9IHRpbGVDZW50ZXJbMF0gLSBmcmFtZVN0YXRlLmZvY3VzWzBdO1xuICAgIHZhciBkZWx0YVkgPSB0aWxlQ2VudGVyWzFdIC0gZnJhbWVTdGF0ZS5mb2N1c1sxXTtcbiAgICByZXR1cm4gNjU1MzYgKiBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikgK1xuICAgICAgICBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKSAvIHRpbGVSZXNvbHV0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBicm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZSBUeXBlLlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVCcm93c2VyRXZlbnQgKGJyb3dzZXJFdmVudCwgb3B0X3R5cGUpIHtcbiAgICB2YXIgdHlwZSA9IG9wdF90eXBlIHx8IGJyb3dzZXJFdmVudC50eXBlO1xuICAgIHZhciBtYXBCcm93c2VyRXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KHR5cGUsIHRoaXMsIGJyb3dzZXJFdmVudCk7XG4gICAgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtNYXBCcm93c2VyRXZlbnR9IG1hcEJyb3dzZXJFdmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlLlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVNYXBCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVNYXBCcm93c2VyRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZm9jdXNfID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgbWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIHZhciBpbnRlcmFjdGlvbnNBcnJheSA9IHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkuZ2V0QXJyYXkoKTtcbiAgICBpZiAodGhpcy5kaXNwYXRjaEV2ZW50KG1hcEJyb3dzZXJFdmVudCkgIT09IGZhbHNlKSB7XG4gICAgICBmb3IgKHZhciBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGludGVyYWN0aW9uID0gaW50ZXJhY3Rpb25zQXJyYXlbaV07XG4gICAgICAgIGlmICghaW50ZXJhY3Rpb24uZ2V0QWN0aXZlKCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udCA9IGludGVyYWN0aW9uLmhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIGlmICghY29udCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVBvc3RSZW5kZXIgPSBmdW5jdGlvbiBoYW5kbGVQb3N0UmVuZGVyICgpIHtcblxuICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcblxuICAgIC8vIE1hbmFnZSB0aGUgdGlsZSBxdWV1ZVxuICAgIC8vIEltYWdlIGxvYWRzIGFyZSBleHBlbnNpdmUgYW5kIGEgbGltaXRlZCByZXNvdXJjZSwgc28gdHJ5IHRvIHVzZSB0aGVtXG4gICAgLy8gZWZmaWNpZW50bHk6XG4gICAgLy8gKiBXaGVuIHRoZSB2aWV3IGlzIHN0YXRpYyB3ZSBhbGxvdyBhIGxhcmdlIG51bWJlciBvZiBwYXJhbGxlbCB0aWxlIGxvYWRzXG4gICAgLy8gICB0byBjb21wbGV0ZSB0aGUgZnJhbWUgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS5cbiAgICAvLyAqIFdoZW4gYW5pbWF0aW5nIG9yIGludGVyYWN0aW5nLCBpbWFnZSBsb2FkcyBjYW4gY2F1c2UgamFua3MsIHNvIHdlIHJlZHVjZVxuICAgIC8vICAgdGhlIG1heGltdW0gbnVtYmVyIG9mIGxvYWRzIHBlciBmcmFtZSBhbmQgbGltaXQgdGhlIG51bWJlciBvZiBwYXJhbGxlbFxuICAgIC8vICAgdGlsZSBsb2FkcyB0byByZW1haW4gcmVhY3RpdmUgdG8gdmlldyBjaGFuZ2VzIGFuZCB0byByZWR1Y2UgdGhlIGNoYW5jZSBvZlxuICAgIC8vICAgbG9hZGluZyB0aWxlcyB0aGF0IHdpbGwgcXVpY2tseSBkaXNhcHBlYXIgZnJvbSB2aWV3LlxuICAgIHZhciB0aWxlUXVldWUgPSB0aGlzLnRpbGVRdWV1ZV87XG4gICAgaWYgKCF0aWxlUXVldWUuaXNFbXB0eSgpKSB7XG4gICAgICB2YXIgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5tYXhUaWxlc0xvYWRpbmdfO1xuICAgICAgdmFyIG1heE5ld0xvYWRzID0gbWF4VG90YWxMb2FkaW5nO1xuICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIGhpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgICAgIGlmIChoaW50c1tWaWV3SGludC5BTklNQVRJTkddKSB7XG4gICAgICAgICAgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5sb2FkVGlsZXNXaGlsZUFuaW1hdGluZ18gPyA4IDogMDtcbiAgICAgICAgICBtYXhOZXdMb2FkcyA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSkge1xuICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IHRoaXMubG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZ18gPyA4IDogMDtcbiAgICAgICAgICBtYXhOZXdMb2FkcyA9IDI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aWxlUXVldWUuZ2V0VGlsZXNMb2FkaW5nKCkgPCBtYXhUb3RhbExvYWRpbmcpIHtcbiAgICAgICAgdGlsZVF1ZXVlLnJlcHJpb3JpdGl6ZSgpOyAvLyBGSVhNRSBvbmx5IGNhbGwgaWYgdmlldyBoYXMgY2hhbmdlZFxuICAgICAgICB0aWxlUXVldWUubG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZyYW1lU3RhdGUgJiYgdGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpICYmICFmcmFtZVN0YXRlLmFuaW1hdGUgJiZcbiAgICAgICAgIXRoaXMudGlsZVF1ZXVlXy5nZXRUaWxlc0xvYWRpbmcoKSAmJiAhZ2V0TG9hZGluZyh0aGlzLmdldExheWVycygpLmdldEFycmF5KCkpKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSwgZnJhbWVTdGF0ZSk7XG4gICAgfVxuXG4gICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbnMgPSB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uc1tpXSh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICB9XG4gICAgcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVTaXplQ2hhbmdlZF8gPSBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlZF8gKCkge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRhcmdldENoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlVGFyZ2V0Q2hhbmdlZF8gKCkge1xuICAgIC8vIHRhcmdldCBtYXkgYmUgdW5kZWZpbmVkLCBudWxsLCBhIHN0cmluZyBvciBhbiBFbGVtZW50LlxuICAgIC8vIElmIGl0J3MgYSBzdHJpbmcgd2UgY29udmVydCBpdCB0byBhbiBFbGVtZW50IGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgIC8vIElmIGl0J3Mgbm90IG5vdyBhbiBFbGVtZW50IHdlIHJlbW92ZSB0aGUgdmlld3BvcnQgZnJvbSB0aGUgRE9NLlxuICAgIC8vIElmIGl0J3MgYW4gRWxlbWVudCB3ZSBhcHBlbmQgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gaXQuXG5cbiAgICB2YXIgdGFyZ2V0RWxlbWVudDtcbiAgICBpZiAodGhpcy5nZXRUYXJnZXQoKSkge1xuICAgICAgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmtleUhhbmRsZXJLZXlzXykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5rZXlIYW5kbGVyS2V5c18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMua2V5SGFuZGxlcktleXNfW2ldKTtcbiAgICAgIH1cbiAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldEVsZW1lbnQpIHtcbiAgICAgIHRoaXMucmVuZGVyZXJfLnJlbW92ZUxheWVyUmVuZGVyZXJzKCk7XG4gICAgICByZW1vdmVOb2RlKHRoaXMudmlld3BvcnRfKTtcbiAgICAgIGlmICh0aGlzLmhhbmRsZVJlc2l6ZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydF8pO1xuXG4gICAgICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9ICF0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID9cbiAgICAgICAgdGFyZ2V0RWxlbWVudCA6IHRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF87XG4gICAgICB0aGlzLmtleUhhbmRsZXJLZXlzXyA9IFtcbiAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlET1dOLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyksXG4gICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZUFJFU1MsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKVxuICAgICAgXTtcblxuICAgICAgaWYgKCF0aGlzLmhhbmRsZVJlc2l6ZV8pIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVfID0gdGhpcy51cGRhdGVTaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgIC8vIHVwZGF0ZVNpemUgY2FsbHMgc2V0U2l6ZSwgc28gbm8gbmVlZCB0byBjYWxsIHRoaXMucmVuZGVyXG4gICAgLy8gb3Vyc2VsdmVzIGhlcmUuXG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVGlsZUNoYW5nZV8gKCkge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8gKCkge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZVZpZXdDaGFuZ2VkXyAoKSB7XG4gICAgaWYgKHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICBpZiAodmlldykge1xuICAgICAgdGhpcy52aWV3cG9ydF8uc2V0QXR0cmlidXRlKCdkYXRhLXZpZXcnLCBnZXRVaWQodmlldykpO1xuICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICAgIHZpZXcsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSxcbiAgICAgICAgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXywgdGhpcyk7XG4gICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICAgIHZpZXcsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8gPSBmdW5jdGlvbiBoYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8gKCkge1xuICAgIGlmICh0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18pIHtcbiAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGxheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICBpZiAobGF5ZXJHcm91cCkge1xuICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICBsaXN0ZW4oXG4gICAgICAgICAgbGF5ZXJHcm91cCwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLFxuICAgICAgICAgIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKFxuICAgICAgICAgIGxheWVyR3JvdXAsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgICAgdGhpcy5yZW5kZXIsIHRoaXMpXG4gICAgICBdO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyByZW5kZXJlZC5cbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaXNSZW5kZXJlZCA9IGZ1bmN0aW9uIGlzUmVuZGVyZWQgKCkge1xuICAgIHJldHVybiAhIXRoaXMuZnJhbWVTdGF0ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcXVlc3RzIGFuIGltbWVkaWF0ZSByZW5kZXIgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyU3luYyA9IGZ1bmN0aW9uIHJlbmRlclN5bmMgKCkge1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xykge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbkRlbGF5XygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IGEgbWFwIHJlbmRlcmluZyAoYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5Xyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNvbnRyb2wgZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGNvbnRyb2wgKG9yIHVuZGVmaW5lZFxuICAgKiAgICAgaWYgdGhlIGNvbnRyb2wgd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlQ29udHJvbCA9IGZ1bmN0aW9uIHJlbW92ZUNvbnRyb2wgKGNvbnRyb2wpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb250cm9scygpLnJlbW92ZShjb250cm9sKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBpbnRlcmFjdGlvbiBmcm9tIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byByZW1vdmUuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGludGVyYWN0aW9uIChvclxuICAgKiAgICAgdW5kZWZpbmVkIGlmIHRoZSBpbnRlcmFjdGlvbiB3YXMgbm90IGZvdW5kKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIHJlbW92ZUludGVyYWN0aW9uIChpbnRlcmFjdGlvbikge1xuICAgIHJldHVybiB0aGlzLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGdpdmVuIGxheWVyIGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgbGF5ZXIgKG9yIHVuZGVmaW5lZCBpZiB0aGVcbiAgICogICAgIGxheWVyIHdhcyBub3QgZm91bmQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUxheWVyID0gZnVuY3Rpb24gcmVtb3ZlTGF5ZXIgKGxheWVyKSB7XG4gICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgIHJldHVybiBsYXllcnMucmVtb3ZlKGxheWVyKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBvdmVybGF5IGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIG92ZXJsYXkgKG9yIHVuZGVmaW5lZFxuICAgKiAgICAgaWYgdGhlIG92ZXJsYXkgd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlT3ZlcmxheSA9IGZ1bmN0aW9uIHJlbW92ZU92ZXJsYXkgKG92ZXJsYXkpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRPdmVybGF5cygpLnJlbW92ZShvdmVybGF5KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGltZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyRnJhbWVfID0gZnVuY3Rpb24gcmVuZGVyRnJhbWVfICh0aW1lKSB7XG4gICAgdmFyIHZpZXdTdGF0ZTtcblxuICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICB2YXIgcHJldmlvdXNGcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAvKiogQHR5cGUgez9GcmFtZVN0YXRlfSAqL1xuICAgIHZhciBmcmFtZVN0YXRlID0gbnVsbDtcbiAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGhhc0FyZWEoc2l6ZSkgJiYgdmlldyAmJiB2aWV3LmlzRGVmKCkpIHtcbiAgICAgIHZhciB2aWV3SGludHMgPSB2aWV3LmdldEhpbnRzKHRoaXMuZnJhbWVTdGF0ZV8gPyB0aGlzLmZyYW1lU3RhdGVfLnZpZXdIaW50cyA6IHVuZGVmaW5lZCk7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgIHZhciBsYXllclN0YXRlcyA9IHt9O1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxheWVyU3RhdGVzW2dldFVpZChsYXllclN0YXRlc0FycmF5W2ldLmxheWVyKV0gPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgfVxuICAgICAgdmlld1N0YXRlID0gdmlldy5nZXRTdGF0ZSh0aGlzLnBpeGVsUmF0aW9fKTtcbiAgICAgIGZyYW1lU3RhdGUgPSAvKiogQHR5cGUge0ZyYW1lU3RhdGV9ICovICh7XG4gICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTogdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8sXG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICBmb2N1czogdGhpcy5mb2N1c18gPyB0aGlzLmZvY3VzXyA6IHZpZXdTdGF0ZS5jZW50ZXIsXG4gICAgICAgIGluZGV4OiB0aGlzLmZyYW1lSW5kZXhfKyssXG4gICAgICAgIGxheWVyU3RhdGVzOiBsYXllclN0YXRlcyxcbiAgICAgICAgbGF5ZXJTdGF0ZXNBcnJheTogbGF5ZXJTdGF0ZXNBcnJheSxcbiAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06IHRoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fLFxuICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgc2tpcHBlZEZlYXR1cmVVaWRzOiB0aGlzLnNraXBwZWRGZWF0dXJlVWlkc18sXG4gICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxuICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICB1c2VkVGlsZXM6IHt9LFxuICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcbiAgICAgICAgdmlld0hpbnRzOiB2aWV3SGludHMsXG4gICAgICAgIHdhbnRlZFRpbGVzOiB7fVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgIGZyYW1lU3RhdGUuZXh0ZW50ID0gZ2V0Rm9yVmlld0FuZFNpemUodmlld1N0YXRlLmNlbnRlcixcbiAgICAgICAgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgZnJhbWVTdGF0ZS5zaXplLCBleHRlbnQpO1xuICAgIH1cblxuICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBmcmFtZVN0YXRlO1xuICAgIHRoaXMucmVuZGVyZXJfLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUpO1xuXG4gICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgIGlmIChmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18sIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucyk7XG5cbiAgICAgIGlmIChwcmV2aW91c0ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIG1vdmVTdGFydCA9ICF0aGlzLnByZXZpb3VzRXh0ZW50XyB8fFxuICAgICAgICAgICAgICAgICAgICAoIWlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXG4gICAgICAgICAgICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKSk7XG4gICAgICAgIGlmIChtb3ZlU3RhcnQpIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICBuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLk1PVkVTVEFSVCwgdGhpcywgcHJldmlvdXNGcmFtZVN0YXRlKSk7XG4gICAgICAgICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSBjcmVhdGVPclVwZGF0ZUVtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgaWRsZSA9IHRoaXMucHJldmlvdXNFeHRlbnRfICYmXG4gICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiZcbiAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXG4gICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuXG4gICAgICBpZiAoaWRsZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgIGNsb25lKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuXG4gICAgc2V0VGltZW91dCh0aGlzLmhhbmRsZVBvc3RSZW5kZXIuYmluZCh0aGlzKSwgMCk7XG5cbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgbGF5ZXJncm91cCBvZiB0aGlzIG1hcC5cbiAgICogQHBhcmFtIHtMYXllckdyb3VwfSBsYXllckdyb3VwIEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldExheWVyR3JvdXAgPSBmdW5jdGlvbiBzZXRMYXllckdyb3VwIChsYXllckdyb3VwKSB7XG4gICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCwgbGF5ZXJHcm91cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IHNpemUgVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gc2V0U2l6ZSAoc2l6ZSkge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlNJWkUsIHNpemUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCBlbGVtZW50IHRvIHJlbmRlciB0aGlzIG1hcCBpbnRvLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IHRhcmdldCBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudFxuICAgKiAgICAgdGhhdCB0aGUgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uIHNldFRhcmdldCAodGFyZ2V0KSB7XG4gICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVEFSR0VULCB0YXJnZXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpZXcgZm9yIHRoaXMgbWFwLlxuICAgKiBAcGFyYW0ge1ZpZXd9IHZpZXcgVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRWaWV3ID0gZnVuY3Rpb24gc2V0VmlldyAodmlldykge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIHZpZXcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNraXBGZWF0dXJlID0gZnVuY3Rpb24gc2tpcEZlYXR1cmUgKGZlYXR1cmUpIHtcbiAgICB0aGlzLnNraXBwZWRGZWF0dXJlVWlkc19bZ2V0VWlkKGZlYXR1cmUpXSA9IHRydWU7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogRm9yY2UgYSByZWNhbGN1bGF0aW9uIG9mIHRoZSBtYXAgdmlld3BvcnQgc2l6ZS4gIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCB3aGVuXG4gICAqIHRoaXJkLXBhcnR5IGNvZGUgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAYXBpXG4gICAqL1xuICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnVwZGF0ZVNpemUgPSBmdW5jdGlvbiB1cGRhdGVTaXplICgpIHtcbiAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuXG4gICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICB0aGlzLnNldFNpemUodW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQpO1xuICAgICAgdGhpcy5zZXRTaXplKFtcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckxlZnRXaWR0aCddKSAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdMZWZ0J10pIC1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ1JpZ2h0J10pIC1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyUmlnaHRXaWR0aCddKSxcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQgLVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJUb3BXaWR0aCddKSAtXG4gICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdUb3AnXSkgLVxuICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nQm90dG9tJ10pIC1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyQm90dG9tV2lkdGgnXSlcbiAgICAgIF0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKi9cbiAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51bnNraXBGZWF0dXJlID0gZnVuY3Rpb24gdW5za2lwRmVhdHVyZSAoZmVhdHVyZSkge1xuICAgIGRlbGV0ZSB0aGlzLnNraXBwZWRGZWF0dXJlVWlkc19bZ2V0VWlkKGZlYXR1cmUpXTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9O1xuXG4gIHJldHVybiBQbHVnZ2FibGVNYXA7XG59KEJhc2VPYmplY3QpKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAqIEByZXR1cm4ge01hcE9wdGlvbnNJbnRlcm5hbH0gSW50ZXJuYWwgbWFwIG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICovXG4gIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gbnVsbDtcbiAgaWYgKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAga2V5Ym9hcmRFdmVudFRhcmdldCA9IHR5cGVvZiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgPT09ICdzdHJpbmcnID9cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCkgOlxuICAgICAgb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICovXG4gIHZhciB2YWx1ZXMgPSB7fTtcblxuICB2YXIgbGF5ZXJHcm91cCA9IG9wdGlvbnMubGF5ZXJzICYmIHR5cGVvZiAvKiogQHR5cGUgez99ICovIChvcHRpb25zLmxheWVycykuZ2V0TGF5ZXJzID09PSAnZnVuY3Rpb24nID9cbiAgICAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovIChvcHRpb25zLmxheWVycykgOiBuZXcgTGF5ZXJHcm91cCh7bGF5ZXJzOiAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmxheWVycyl9KTtcbiAgdmFsdWVzW01hcFByb3BlcnR5LkxBWUVSR1JPVVBdID0gbGF5ZXJHcm91cDtcblxuICB2YWx1ZXNbTWFwUHJvcGVydHkuVEFSR0VUXSA9IG9wdGlvbnMudGFyZ2V0O1xuXG4gIHZhbHVlc1tNYXBQcm9wZXJ0eS5WSUVXXSA9IG9wdGlvbnMudmlldyAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnZpZXcgOiBuZXcgVmlldygpO1xuXG4gIHZhciBjb250cm9scztcbiAgaWYgKG9wdGlvbnMuY29udHJvbHMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuY29udHJvbHMpKSB7XG4gICAgICBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuY29udHJvbHMuc2xpY2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydCh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5jb250cm9scykuZ2V0QXJyYXkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgIDQ3KTsgLy8gRXhwZWN0ZWQgYGNvbnRyb2xzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICBjb250cm9scyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuY29udHJvbHMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBpbnRlcmFjdGlvbnM7XG4gIGlmIChvcHRpb25zLmludGVyYWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5pbnRlcmFjdGlvbnMpKSB7XG4gICAgICBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmludGVyYWN0aW9ucy5zbGljZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KHR5cGVvZiAvKiogQHR5cGUgez99ICovIChvcHRpb25zLmludGVyYWN0aW9ucykuZ2V0QXJyYXkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgIDQ4KTsgLy8gRXhwZWN0ZWQgYGludGVyYWN0aW9uc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgaW50ZXJhY3Rpb25zID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5pbnRlcmFjdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdmVybGF5cztcbiAgaWYgKG9wdGlvbnMub3ZlcmxheXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMub3ZlcmxheXMpKSB7XG4gICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMub3ZlcmxheXMuc2xpY2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydCh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5vdmVybGF5cykuZ2V0QXJyYXkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgIDQ5KTsgLy8gRXhwZWN0ZWQgYG92ZXJsYXlzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICBvdmVybGF5cyA9IG9wdGlvbnMub3ZlcmxheXM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY29udHJvbHM6IGNvbnRyb2xzLFxuICAgIGludGVyYWN0aW9uczogaW50ZXJhY3Rpb25zLFxuICAgIGtleWJvYXJkRXZlbnRUYXJnZXQ6IGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgb3ZlcmxheXM6IG92ZXJsYXlzLFxuICAgIHZhbHVlczogdmFsdWVzXG4gIH07XG5cbn1cbmV4cG9ydCBkZWZhdWx0IFBsdWdnYWJsZU1hcDtcblxuLyoqXG4gKiBAcGFyYW0gIHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBMYXllcnMuXG4gKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gKi9cbmZ1bmN0aW9uIGdldExvYWRpbmcobGF5ZXJzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGxheWVyID0gbGF5ZXJzW2ldO1xuICAgIGlmICh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAobGF5ZXIpLmdldExheWVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGdldExvYWRpbmcoLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAobGF5ZXIpLmdldExheWVycygpLmdldEFycmF5KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgbGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbHVnZ2FibGVNYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQ29udHJvbFxuICovXG5pbXBvcnQge1ZPSUR9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4uL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHtyZW1vdmVOb2RlfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbZWxlbWVudF0gVGhlIGVsZW1lbnQgaXMgdGhlIGNvbnRyb2wnc1xuICogY29udGFpbmVyIGVsZW1lbnQuIFRoaXMgb25seSBuZWVkcyB0byBiZSBzcGVjaWZpZWQgaWYgeW91J3JlIGRldmVsb3BpbmdcbiAqIGEgY3VzdG9tIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50XG4gKiB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIGlzIGEgdmlzaWJsZSB3aWRnZXQgd2l0aCBhIERPTSBlbGVtZW50IGluIGEgZml4ZWQgcG9zaXRpb24gb24gdGhlXG4gKiBzY3JlZW4uIFRoZXkgY2FuIGludm9sdmUgdXNlciBpbnB1dCAoYnV0dG9ucyksIG9yIGJlIGluZm9ybWF0aW9uYWwgb25seTtcbiAqIHRoZSBwb3NpdGlvbiBpcyBkZXRlcm1pbmVkIHVzaW5nIENTUy4gQnkgZGVmYXVsdCB0aGVzZSBhcmUgcGxhY2VkIGluIHRoZVxuICogY29udGFpbmVyIHdpdGggQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCwgYnV0IGNhbiB1c2VcbiAqIGFueSBvdXRzaWRlIERPTSBlbGVtZW50LlxuICpcbiAqIFRoaXMgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGNvbnRyb2xzLiBZb3UgY2FuIHVzZSBpdCBmb3Igc2ltcGxlIGN1c3RvbVxuICogY29udHJvbHMgYnkgY3JlYXRpbmcgdGhlIGVsZW1lbnQgd2l0aCBsaXN0ZW5lcnMsIGNyZWF0aW5nIGFuIGluc3RhbmNlOlxuICogYGBganNcbiAqIHZhciBteUNvbnRyb2wgPSBuZXcgQ29udHJvbCh7ZWxlbWVudDogbXlFbGVtZW50fSk7XG4gKiBgYGBcbiAqIGFuZCB0aGVuIGFkZGluZyB0aGlzIHRvIHRoZSBtYXAuXG4gKlxuICogVGhlIG1haW4gYWR2YW50YWdlIG9mIGhhdmluZyB0aGlzIGFzIGEgY29udHJvbCByYXRoZXIgdGhhbiBhIHNpbXBsZSBzZXBhcmF0ZVxuICogRE9NIGVsZW1lbnQgaXMgdGhhdCBwcmV2ZW50aW5nIHByb3BhZ2F0aW9uIGlzIGhhbmRsZWQgZm9yIHlvdS4gQ29udHJvbHNcbiAqIHdpbGwgYWxzbyBiZSBvYmplY3RzIGluIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LCBzbyB5b3UgY2FuIHVzZSB0aGVpciBtZXRob2RzLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBleHRlbmQgdGhpcyBiYXNlIGZvciB5b3VyIG93biBjb250cm9sIGNsYXNzLiBTZWVcbiAqIGV4YW1wbGVzL2N1c3RvbS1jb250cm9scyBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gZG8gdGhpcy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBDb250cm9sID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBDb250cm9sKG9wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50ID8gb3B0aW9ucy5lbGVtZW50IDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcktleXMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KX1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyID8gb3B0aW9ucy5yZW5kZXIgOiBWT0lEO1xuXG4gICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICB0aGlzLnNldFRhcmdldChvcHRpb25zLnRhcmdldCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBDb250cm9sLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIENvbnRyb2wucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZU9iamVjdCAmJiBCYXNlT2JqZWN0LnByb3RvdHlwZSApO1xuICBDb250cm9sLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnRyb2w7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDb250cm9sLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29udHJvbC5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gZ2V0TWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAqIHRoZSBtYXAgaGVyZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwIChtYXApIHtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5saXN0ZW5lcktleXNbaV0pO1xuICAgIH1cbiAgICB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGggPSAwO1xuICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXRfID9cbiAgICAgICAgdGhpcy50YXJnZXRfIDogbWFwLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKTtcbiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgaWYgKHRoaXMucmVuZGVyICE9PSBWT0lEKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLnB1c2gobGlzdGVuKG1hcCxcbiAgICAgICAgICBNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcy5yZW5kZXIsIHRoaXMpKTtcbiAgICAgIH1cbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBzZXQgYSB0YXJnZXQgZWxlbWVudCBmb3IgdGhlIGNvbnRyb2wuIEl0IGhhcyBub1xuICAgKiBlZmZlY3QgaWYgaXQgaXMgY2FsbGVkIGFmdGVyIHRoZSBjb250cm9sIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBtYXAgKGkuZS5cbiAgICogYWZ0ZXIgYHNldE1hcGAgaXMgY2FsbGVkIG9uIHRoZSBjb250cm9sKS4gSWYgbm8gYHRhcmdldGAgaXMgc2V0IGluIHRoZVxuICAgKiBvcHRpb25zIHBhc3NlZCB0byB0aGUgY29udHJvbCBjb25zdHJ1Y3RvciBhbmQgaWYgYHNldFRhcmdldGAgaXMgbm90IGNhbGxlZFxuICAgKiB0aGVuIHRoZSBjb250cm9sIGlzIGFkZGVkIHRvIHRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd9IHRhcmdldCBUYXJnZXQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbnRyb2wucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uIHNldFRhcmdldCAodGFyZ2V0KSB7XG4gICAgdGhpcy50YXJnZXRfID0gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgP1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KSA6XG4gICAgICB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIENvbnRyb2w7XG59KEJhc2VPYmplY3QpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBDb250cm9sO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db250cm9sLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jc3NcbiAqL1xuXG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgaGlkZGVuIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0hJRERFTiA9ICdvbC1oaWRkZW4nO1xuXG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfU0VMRUNUQUJMRSA9ICdvbC1zZWxlY3RhYmxlJztcblxuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHVuc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TRUxFQ1RBQkxFID0gJ29sLXVuc2VsZWN0YWJsZSc7XG5cblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciB1bnN1cHBvcnRlZCBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNVUFBPUlRFRCA9ICdvbC11bnN1cHBvcnRlZCc7XG5cblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBjb250cm9scy5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09OVFJPTCA9ICdvbC1jb250cm9sJztcblxuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdGhhdCBhcmUgY29sbGFwc2VkLCBpLmUuXG4gKiB0byB0aG9zZSBlbGVtZW50cyB3aGljaCB1c3VhbGx5IGNhbiBiZSBleHBhbmRlZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09MTEFQU0VEID0gJ29sLWNvbGxhcHNlZCc7XG5cblxuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgZm9udCBmYW1pbGllcyBmcm9tIGEgZm9udCBzcGVjLiAgTm90ZSB0aGF0IHRoaXMgZG9lc24ndCB3b3JrXG4gKiBmb3IgZm9udCBmYW1pbGllcyB0aGF0IGhhdmUgY29tbWFzIGluIHRoZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gVGhlIENTUyBmb250IHByb3BlcnR5LlxuICogQHJldHVybiB7T2JqZWN0PHN0cmluZz59IFRoZSBmb250IGZhbWlsaWVzIChvciBudWxsIGlmIHRoZSBpbnB1dCBzcGVjIGlzIGludmFsaWQpLlxuICovXG5leHBvcnQgdmFyIGdldEZvbnRGYW1pbGllcyA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgY2FjaGUgPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGZvbnQpIHtcbiAgICBpZiAoIXN0eWxlKSB7XG4gICAgICBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuICAgIH1cbiAgICBpZiAoIShmb250IGluIGNhY2hlKSkge1xuICAgICAgc3R5bGUuZm9udCA9IGZvbnQ7XG4gICAgICB2YXIgZmFtaWx5ID0gc3R5bGUuZm9udEZhbWlseTtcbiAgICAgIHN0eWxlLmZvbnQgPSAnJztcbiAgICAgIGlmICghZmFtaWx5KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY2FjaGVbZm9udF0gPSBmYW1pbHkuc3BsaXQoLyxcXHM/Lyk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVtmb250XTtcbiAgfTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtnZXRDaGFuZ2VFdmVudFR5cGV9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcGFjaXR5XG4gKiBAcHJvcGVydHkge1NvdXJjZVN0YXRlfSBzb3VyY2VTdGF0ZVxuICogQHByb3BlcnR5IHtib29sZWFufSB2aXNpYmxlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IG1hbmFnZWRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluUmVzb2x1dGlvblxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgcmFzdGVyIG9yIHZlY3RvciBtYXAgZGF0YS5cbiAqIExheWVycyBncm91cCB0b2dldGhlciB0aG9zZSBwcm9wZXJ0aWVzIHRoYXQgcGVydGFpbiB0byBob3cgdGhlIGRhdGEgaXMgdG8gYmVcbiAqIGRpc3BsYXllZCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBzb3VyY2Ugb2YgdGhhdCBkYXRhLlxuICpcbiAqIExheWVycyBhcmUgdXN1YWxseSBhZGRlZCB0byBhIG1hcCB3aXRoIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfS4gQ29tcG9uZW50c1xuICogbGlrZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1NlbGVjdH5TZWxlY3R9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRNYXB9IGluc3RlYWQuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50XG4gKi9cbnZhciBMYXllciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VMYXllcikge1xuICBmdW5jdGlvbiBMYXllcihvcHRpb25zKSB7XG5cbiAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zb3VyY2U7XG5cbiAgICBCYXNlTGF5ZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuXG4gICAgaWYgKG9wdGlvbnMubWFwKSB7XG4gICAgICB0aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgfVxuXG4gICAgbGlzdGVuKHRoaXMsXG4gICAgICBnZXRDaGFuZ2VFdmVudFR5cGUoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpLFxuICAgICAgdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8sIHRoaXMpO1xuXG4gICAgdmFyIHNvdXJjZSA9IG9wdGlvbnMuc291cmNlID8gb3B0aW9ucy5zb3VyY2UgOiBudWxsO1xuICAgIHRoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gIH1cblxuICBpZiAoIEJhc2VMYXllciApIExheWVyLl9fcHJvdG9fXyA9IEJhc2VMYXllcjtcbiAgTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZUxheWVyICYmIEJhc2VMYXllci5wcm90b3R5cGUgKTtcbiAgTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF5ZXI7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiBnZXRMYXllcnNBcnJheSAob3B0X2FycmF5KSB7XG4gICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICBzdGF0ZXMucHVzaCh0aGlzLmdldExheWVyU3RhdGUoKSk7XG4gICAgcmV0dXJuIHN0YXRlcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHNvdXJjZSAob3IgYG51bGxgIGlmIG5vdCB5ZXQgc2V0KS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uIGdldFNvdXJjZSAoKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0KExheWVyUHJvcGVydHkuU09VUkNFKTtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9ICovIChzb3VyY2UpIHx8IG51bGxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgICogQGluaGVyaXREb2NcbiAgICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgcmV0dXJuICFzb3VyY2UgPyBTb3VyY2VTdGF0ZS5VTkRFRklORUQgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlQ2hhbmdlXyAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfICgpIHtcbiAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBsaXN0ZW4oc291cmNlLFxuICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVNvdXJjZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgbGF5ZXIgdG8gYmUgcmVuZGVyZWQgb24gdG9wIG9mIG90aGVyIGxheWVycyBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsXG4gICAqIG5vdCBtYW5hZ2UgdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgY2FsbGJhY2sgaW5cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgKiBpcyB1c2VmdWwgZm9yIHRlbXBvcmFyeSBsYXllcnMuIFRvIHJlbW92ZSBhbiB1bm1hbmFnZWQgbGF5ZXIgZnJvbSB0aGUgbWFwLFxuICAgKiB1c2UgYCNzZXRNYXAobnVsbClgLlxuICAgKlxuICAgKiBUbyBhZGQgdGhlIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCwgdXNlXG4gICAqIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfSBpbnN0ZWFkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwIChtYXApIHtcbiAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1hcFJlbmRlcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBSZW5kZXJLZXlfKTtcbiAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmIChtYXApIHtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIHZhciByZW5kZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgICAgICBsYXllclN0YXRlLm1hbmFnZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0WkluZGV4KCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxheWVyU3RhdGUuekluZGV4ID0gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5LnB1c2gobGF5ZXJTdGF0ZSk7XG4gICAgICAgIHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNbZ2V0VWlkKHRoaXMpXSA9IGxheWVyU3RhdGU7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IGxpc3Rlbih0aGlzLCBFdmVudFR5cGUuQ0hBTkdFLCBtYXAucmVuZGVyLCBtYXApO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaGUgbGF5ZXIgc291cmNlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gc2V0U291cmNlIChzb3VyY2UpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgfTtcblxuICByZXR1cm4gTGF5ZXI7XG59KEJhc2VMYXllcikpO1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbGF5ZXIgaXMgdmlzaWJsZSwgYW5kIGlmIHRoZSBwYXNzZWQgcmVzb2x1dGlvbiBpc1xuICogYmV0d2VlbiB0aGUgbGF5ZXIncyBtaW5SZXNvbHV0aW9uIGFuZCBtYXhSZXNvbHV0aW9uLiBUaGUgY29tcGFyaXNvbiBpc1xuICogaW5jbHVzaXZlIGZvciBgbWluUmVzb2x1dGlvbmAgYW5kIGV4Y2x1c2l2ZSBmb3IgYG1heFJlc29sdXRpb25gLlxuICogQHBhcmFtIHtTdGF0ZX0gbGF5ZXJTdGF0ZSBMYXllciBzdGF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gcmVzb2x1dGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZpc2libGVBdFJlc29sdXRpb24obGF5ZXJTdGF0ZSwgcmVzb2x1dGlvbikge1xuICByZXR1cm4gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIHJlc29sdXRpb24gPj0gbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uICYmXG4gICAgICByZXNvbHV0aW9uIDwgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9BdHRyaWJ1dGlvblxuICovXG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCB7Q0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFLCBDTEFTU19DT0xMQVBTRUR9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQge3JlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZX0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7dmlzaWJsZUF0UmVzb2x1dGlvbn0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWF0dHJpYnV0aW9uJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3VcbiAqIHdhbnQgdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3NcbiAqIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2libGVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIGNhblxuICogYmUgY29sbGFwc2VkLiBJZiBub3Qgc3BlY2lmaWVkLCBzb3VyY2VzIGNvbnRyb2wgdGhpcyBiZWhhdmlvciB3aXRoIHRoZWlyXG4gKiBgYXR0cmlidXRpb25zQ29sbGFwc2libGVgIHNldHRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzZWQ9dHJ1ZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgc2hvdWxkXG4gKiBiZSBjb2xsYXBzZWQgYXQgc3RhcnR1cC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J0F0dHJpYnV0aW9ucyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGFiZWw9J2knXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlXG4gKiBjb2xsYXBzZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtjb2xsYXBzZUxhYmVsPSfCuyddIFRleHQgbGFiZWwgdG8gdXNlXG4gKiBmb3IgdGhlIGV4cGFuZGVkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCl9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDb250cm9sIHRvIHNob3cgYWxsIHRoZSBhdHRyaWJ1dGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBsYXllciBzb3VyY2VzXG4gKiBpbiB0aGUgbWFwLiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMuXG4gKiBCeSBkZWZhdWx0IGl0IHdpbGwgc2hvdyBpbiB0aGUgYm90dG9tIHJpZ2h0IHBvcnRpb24gb2YgdGhlIG1hcCwgYnV0IHRoaXMgY2FuXG4gKiBiZSBjaGFuZ2VkIGJ5IHVzaW5nIGEgY3NzIHNlbGVjdG9yIGZvciBgLm9sLWF0dHJpYnV0aW9uYC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBBdHRyaWJ1dGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENvbnRyb2wpIHtcbiAgZnVuY3Rpb24gQXR0cmlidXRpb24ob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgQ29udHJvbC5jYWxsKHRoaXMsIHtcbiAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlciB8fCByZW5kZXIsXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLnVsRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbGxhcHNlZF8gPSBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZWQgOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfID0gb3B0aW9ucy5jb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbGxhcHNpYmxlXyA9IG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmNvbGxhcHNpYmxlIDogdHJ1ZTtcblxuICAgIGlmICghdGhpcy5jb2xsYXBzaWJsZV8pIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkXyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtYXR0cmlidXRpb24nO1xuXG4gICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aXBMYWJlbCA6ICdBdHRyaWJ1dGlvbnMnO1xuXG4gICAgdmFyIGNvbGxhcHNlTGFiZWwgPSBvcHRpb25zLmNvbGxhcHNlTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VMYWJlbCA6ICdcXHUwMEJCJztcblxuICAgIGlmICh0eXBlb2YgY29sbGFwc2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHRoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbGxhcHNlTGFiZWxfID0gY29sbGFwc2VMYWJlbDtcbiAgICB9XG5cbiAgICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ2knO1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgIH1cblxuXG4gICAgdmFyIGFjdGl2ZUxhYmVsID0gKHRoaXMuY29sbGFwc2libGVfICYmICF0aGlzLmNvbGxhcHNlZF8pID9cbiAgICAgIHRoaXMuY29sbGFwc2VMYWJlbF8gOiB0aGlzLmxhYmVsXztcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBidXR0b24udGl0bGUgPSB0aXBMYWJlbDtcbiAgICBidXR0b24uYXBwZW5kQ2hpbGQoYWN0aXZlTGFiZWwpO1xuXG4gICAgbGlzdGVuKGJ1dHRvbiwgRXZlbnRUeXBlLkNMSUNLLCB0aGlzLmhhbmRsZUNsaWNrXywgdGhpcyk7XG5cbiAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0wgK1xuICAgICAgICAodGhpcy5jb2xsYXBzZWRfICYmIHRoaXMuY29sbGFwc2libGVfID8gJyAnICsgQ0xBU1NfQ09MTEFQU0VEIDogJycpICtcbiAgICAgICAgKHRoaXMuY29sbGFwc2libGVfID8gJycgOiAnIG9sLXVuY29sbGFwc2libGUnKTtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVsRWxlbWVudF8pO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBjdXJyZW50bHkgcmVuZGVyZWQgcmVzb2x1dGlvbnMuXG4gICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuXG4gIH1cblxuICBpZiAoIENvbnRyb2wgKSBBdHRyaWJ1dGlvbi5fX3Byb3RvX18gPSBDb250cm9sO1xuICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDb250cm9sICYmIENvbnRyb2wucHJvdG90eXBlICk7XG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEF0dHJpYnV0aW9uO1xuXG4gIC8qKlxuICAgKiBDb2xsZWN0IGEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucyBhbmQgc2V0IHRoZSBjb2xsYXBzaWJsZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXR0cmlidXRpb25zLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfID0gZnVuY3Rpb24gY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18gKGZyYW1lU3RhdGUpIHtcbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiBhbiBhdHRyaWJ1dGlvbiBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAqL1xuICAgIHZhciBsb29rdXAgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucy5cbiAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgKi9cbiAgICB2YXIgdmlzaWJsZUF0dHJpYnV0aW9ucyA9IFtdO1xuXG4gICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgdmFyIHJlc29sdXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgaWYgKCF2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHJlc29sdXRpb24pKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXJTdGF0ZS5sYXllcikuZ2V0U291cmNlKCk7XG4gICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGF0dHJpYnV0aW9uR2V0dGVyID0gc291cmNlLmdldEF0dHJpYnV0aW9ucygpO1xuICAgICAgaWYgKCFhdHRyaWJ1dGlvbkdldHRlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IGF0dHJpYnV0aW9uR2V0dGVyKGZyYW1lU3RhdGUpO1xuICAgICAgaWYgKCFhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXyAmJiBzb3VyY2UuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5zZXRDb2xsYXBzaWJsZShmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGF0dHJpYnV0aW9ucykpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBpZiAoIShhdHRyaWJ1dGlvbnNbal0gaW4gbG9va3VwKSkge1xuICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9uc1tqXSk7XG4gICAgICAgICAgICBsb29rdXBbYXR0cmlidXRpb25zW2pdXSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShhdHRyaWJ1dGlvbnMgaW4gbG9va3VwKSkge1xuICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnMpO1xuICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmlzaWJsZUF0dHJpYnV0aW9ucztcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUudXBkYXRlRWxlbWVudF8gPSBmdW5jdGlvbiB1cGRhdGVFbGVtZW50XyAoZnJhbWVTdGF0ZSkge1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGF0dHJpYnV0aW9ucyA9IHRoaXMuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18oZnJhbWVTdGF0ZSk7XG5cbiAgICB2YXIgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgIH1cblxuICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuXG4gICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBhdHRyaWJ1dGlvbnNbaV07XG4gICAgICB0aGlzLnVsRWxlbWVudF8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBhdHRyaWJ1dGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrXyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLmhhbmRsZVRvZ2dsZV8gPSBmdW5jdGlvbiBoYW5kbGVUb2dnbGVfICgpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZF8pIHtcbiAgICAgIHJlcGxhY2VOb2RlKHRoaXMuY29sbGFwc2VMYWJlbF8sIHRoaXMubGFiZWxfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNlZF8gPSAhdGhpcy5jb2xsYXBzZWRfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGlvbiBpcyBjb2xsYXBzaWJsZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzaWJsZS5cbiAgICogQGFwaVxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNpYmxlID0gZnVuY3Rpb24gZ2V0Q29sbGFwc2libGUgKCkge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNpYmxlXztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgdGhlIGF0dHJpYnV0aW9uIHNob3VsZCBiZSBjb2xsYXBzaWJsZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAqIEBhcGlcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uIHNldENvbGxhcHNpYmxlIChjb2xsYXBzaWJsZSkge1xuICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlXyA9PT0gY29sbGFwc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jb2xsYXBzaWJsZV8gPSBjb2xsYXBzaWJsZTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgIGlmICghY29sbGFwc2libGUgJiYgdGhpcy5jb2xsYXBzZWRfKSB7XG4gICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbGxhcHNlIG9yIGV4cGFuZCB0aGUgYXR0cmlidXRpb24gYWNjb3JkaW5nIHRvIHRoZSBwYXNzZWQgcGFyYW1ldGVyLiBXaWxsXG4gICAqIG5vdCBkbyBhbnl0aGluZyBpZiB0aGUgYXR0cmlidXRpb24gaXNuJ3QgY29sbGFwc2libGUgb3IgaWYgdGhlIGN1cnJlbnRcbiAgICogY29sbGFwc2VkIHN0YXRlIGlzIGFscmVhZHkgdGhlIG9uZSByZXF1ZXN0ZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2VkIFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiBzZXRDb2xsYXBzZWQgKGNvbGxhcHNlZCkge1xuICAgIGlmICghdGhpcy5jb2xsYXBzaWJsZV8gfHwgdGhpcy5jb2xsYXBzZWRfID09PSBjb2xsYXBzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiBgdHJ1ZWAgd2hlbiB0aGUgYXR0cmlidXRpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCBvciBgZmFsc2VgXG4gICAqIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNlZCA9IGZ1bmN0aW9uIGdldENvbGxhcHNlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkXztcbiAgfTtcblxuICByZXR1cm4gQXR0cmlidXRpb247XG59KENvbnRyb2wpKTtcblxuXG4vKipcbiAqIFVwZGF0ZSB0aGUgYXR0cmlidXRpb24gZWxlbWVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICogQHRoaXMge0F0dHJpYnV0aW9ufVxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKG1hcEV2ZW50KSB7XG4gIHRoaXMudXBkYXRlRWxlbWVudF8obWFwRXZlbnQuZnJhbWVTdGF0ZSk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQXR0cmlidXRpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0dHJpYnV0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1JvdGF0ZVxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IHtDTEFTU19DT05UUk9MLCBDTEFTU19ISURERU4sIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1yb3RhdGUnXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbbGFiZWw9J+KHpyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgcm90YXRlIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nUmVzZXQgcm90YXRpb24nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSB0aXAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9IaWRlPXRydWVdIEhpZGUgdGhlIGNvbnRyb2wgd2hlbiByb3RhdGlvbiBpcyAwLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KX0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKX0gW3Jlc2V0Tm9ydGhdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIGlzIGNsaWNrZWQuXG4gKiBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYHJlc2V0Tm9ydGhgLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJ1dHRvbiBjb250cm9sIHRvIHJlc2V0IHJvdGF0aW9uIHRvIDAuXG4gKiBUbyBzdHlsZSB0aGlzIGNvbnRyb2wgdXNlIGNzcyBzZWxlY3RvciBgLm9sLXJvdGF0ZWAuIEEgYC5vbC1oaWRkZW5gIGNzc1xuICogc2VsZWN0b3IgaXMgYWRkZWQgdG8gdGhlIGJ1dHRvbiB3aGVuIHRoZSByb3RhdGlvbiBpcyAwLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFJvdGF0ZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENvbnRyb2wpIHtcbiAgZnVuY3Rpb24gUm90YXRlKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIENvbnRyb2wuY2FsbCh0aGlzLCB7XG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIgfHwgcmVuZGVyLFxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldFxuICAgIH0pO1xuXG4gICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1yb3RhdGUnO1xuXG4gICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdcXHUyMUU3JztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubGFiZWxfID0gbnVsbDtcblxuICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHRoaXMubGFiZWxfLmNsYXNzTmFtZSA9ICdvbC1jb21wYXNzJztcbiAgICAgIHRoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICB0aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKCdvbC1jb21wYXNzJyk7XG4gICAgfVxuXG4gICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnUmVzZXQgcm90YXRpb24nO1xuXG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLXJlc2V0JztcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi50aXRsZSA9IHRpcExhYmVsO1xuICAgIGJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsXyk7XG5cbiAgICBsaXN0ZW4oYnV0dG9uLCBFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlQ2xpY2tfLCB0aGlzKTtcblxuICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgdGhpcy5jYWxsUmVzZXROb3J0aF8gPSBvcHRpb25zLnJlc2V0Tm9ydGggPyBvcHRpb25zLnJlc2V0Tm9ydGggOiB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmF1dG9IaWRlXyA9IG9wdGlvbnMuYXV0b0hpZGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXV0b0hpZGUgOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0aGlzLmF1dG9IaWRlXykge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfSElEREVOKTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmICggQ29udHJvbCApIFJvdGF0ZS5fX3Byb3RvX18gPSBDb250cm9sO1xuICBSb3RhdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29udHJvbCAmJiBDb250cm9sLnByb3RvdHlwZSApO1xuICBSb3RhdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUm90YXRlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2tfIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMuY2FsbFJlc2V0Tm9ydGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzZXROb3J0aF8oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSb3RhdGUucHJvdG90eXBlLnJlc2V0Tm9ydGhfID0gZnVuY3Rpb24gcmVzZXROb3J0aF8gKCkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgLy8gdXBvbiBpdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmlldy5nZXRSb3RhdGlvbigpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDApIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgZWFzaW5nOiBlYXNlT3V0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRSb3RhdGlvbigwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFJvdGF0ZTtcbn0oQ29udHJvbCkpO1xuXG5cbi8qKlxuICogVXBkYXRlIHRoZSByb3RhdGUgY29udHJvbCBlbGVtZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gKiBAdGhpcyB7Um90YXRlfVxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKG1hcEV2ZW50KSB7XG4gIHZhciBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICBpZiAocm90YXRpb24gIT0gdGhpcy5yb3RhdGlvbl8pIHtcbiAgICB2YXIgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgaWYgKHRoaXMuYXV0b0hpZGVfKSB7XG4gICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICBpZiAoIWNvbnRhaW5zICYmIHJvdGF0aW9uID09PSAwKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zICYmIHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX0hJRERFTik7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGFiZWxfLnN0eWxlLm1zVHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIHRoaXMubGFiZWxfLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICB0aGlzLmxhYmVsXy5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gIH1cbiAgdGhpcy5yb3RhdGlvbl8gPSByb3RhdGlvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUm90YXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Sb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvWm9vbVxuICovXG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IHtDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEV9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW3pvb21JbkxhYmVsPScrJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLWluXG4gKiBidXR0b24uIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tT3V0TGFiZWw9Jy0nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5UaXBMYWJlbD0nWm9vbSBpbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dFRpcExhYmVsPSdab29tIG91dCddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGNsaWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgd2l0aCAyIGJ1dHRvbnMsIG9uZSBmb3Igem9vbSBpbiBhbmQgb25lIGZvciB6b29tIG91dC5cbiAqIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgb2YgYSBtYXAuIFRvIHN0eWxlIHRoaXMgY29udHJvbFxuICogdXNlIGNzcyBzZWxlY3RvcnMgYC5vbC16b29tLWluYCBhbmQgYC5vbC16b29tLW91dGAuXG4gKlxuICogQGFwaVxuICovXG52YXIgWm9vbSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENvbnRyb2wpIHtcbiAgZnVuY3Rpb24gWm9vbShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBDb250cm9sLmNhbGwodGhpcywge1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0XG4gICAgfSk7XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXpvb20nO1xuXG4gICAgdmFyIGRlbHRhID0gb3B0aW9ucy5kZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICB2YXIgem9vbUluTGFiZWwgPSBvcHRpb25zLnpvb21JbkxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JbkxhYmVsIDogJysnO1xuICAgIHZhciB6b29tT3V0TGFiZWwgPSBvcHRpb25zLnpvb21PdXRMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tT3V0TGFiZWwgOiAnXFx1MjIxMic7XG5cbiAgICB2YXIgem9vbUluVGlwTGFiZWwgPSBvcHRpb25zLnpvb21JblRpcExhYmVsICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy56b29tSW5UaXBMYWJlbCA6ICdab29tIGluJztcbiAgICB2YXIgem9vbU91dFRpcExhYmVsID0gb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnpvb21PdXRUaXBMYWJlbCA6ICdab29tIG91dCc7XG5cbiAgICB2YXIgaW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgaW5FbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctaW4nO1xuICAgIGluRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgaW5FbGVtZW50LnRpdGxlID0gem9vbUluVGlwTGFiZWw7XG4gICAgaW5FbGVtZW50LmFwcGVuZENoaWxkKFxuICAgICAgdHlwZW9mIHpvb21JbkxhYmVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21JbkxhYmVsKSA6IHpvb21JbkxhYmVsXG4gICAgKTtcblxuICAgIGxpc3RlbihpbkVsZW1lbnQsIEV2ZW50VHlwZS5DTElDSywgdGhpcy5oYW5kbGVDbGlja18uYmluZCh0aGlzLCBkZWx0YSkpO1xuXG4gICAgdmFyIG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBvdXRFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctb3V0JztcbiAgICBvdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBvdXRFbGVtZW50LnRpdGxlID0gem9vbU91dFRpcExhYmVsO1xuICAgIG91dEVsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICB0eXBlb2Ygem9vbU91dExhYmVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21PdXRMYWJlbCkgOiB6b29tT3V0TGFiZWxcbiAgICApO1xuXG4gICAgbGlzdGVuKG91dEVsZW1lbnQsIEV2ZW50VHlwZS5DTElDSywgdGhpcy5oYW5kbGVDbGlja18uYmluZCh0aGlzLCAtZGVsdGEpKTtcblxuICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbkVsZW1lbnQpO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3V0RWxlbWVudCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIENvbnRyb2wgKSBab29tLl9fcHJvdG9fXyA9IENvbnRyb2w7XG4gIFpvb20ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29udHJvbCAmJiBDb250cm9sLnByb3RvdHlwZSApO1xuICBab29tLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFpvb207XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFpvb20ucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrXyAoZGVsdGEsIGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnpvb21CeURlbHRhXyhkZWx0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgWm9vbS5wcm90b3R5cGUuem9vbUJ5RGVsdGFfID0gZnVuY3Rpb24gem9vbUJ5RGVsdGFfIChkZWx0YSkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgLy8gdXBvbiBpdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudFJlc29sdXRpb24pIHtcbiAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdmlldy5jb25zdHJhaW5SZXNvbHV0aW9uKGN1cnJlbnRSZXNvbHV0aW9uLCBkZWx0YSk7XG4gICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwKSB7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldFJlc29sdXRpb24obmV3UmVzb2x1dGlvbik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBab29tO1xufShDb250cm9sKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Wm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC91dGlsXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vQXR0cmlidXRpb24uanMnO1xuaW1wb3J0IFJvdGF0ZSBmcm9tICcuL1JvdGF0ZS5qcyc7XG5pbXBvcnQgWm9vbSBmcm9tICcuL1pvb20uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Sb3RhdGUuanNcIikuT3B0aW9uc30gW3JvdGF0ZU9wdGlvbnNdIE9wdGlvbnNcbiAqIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt6b29tXSBJbmNsdWRlIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zPX0gb3B0X29wdGlvbnNcbiAqIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAqIENvbnRyb2xzLlxuICogQGZ1bmN0aW9uIG1vZHVsZTpvbC9jb250cm9sLmRlZmF1bHRzXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gIHZhciBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgdmFyIHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICBpZiAoem9vbUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgfVxuXG4gIHZhciByb3RhdGVDb250cm9sID0gb3B0aW9ucy5yb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlIDogdHJ1ZTtcbiAgaWYgKHJvdGF0ZUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBSb3RhdGUob3B0aW9ucy5yb3RhdGVPcHRpb25zKSk7XG4gIH1cblxuICB2YXIgYXR0cmlidXRpb25Db250cm9sID0gb3B0aW9ucy5hdHRyaWJ1dGlvbiAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLmF0dHJpYnV0aW9uIDogdHJ1ZTtcbiAgaWYgKGF0dHJpYnV0aW9uQ29udHJvbCkge1xuICAgIGNvbnRyb2xzLnB1c2gobmV3IEF0dHJpYnV0aW9uKG9wdGlvbnMuYXR0cmlidXRpb25PcHRpb25zKSk7XG4gIH1cblxuICByZXR1cm4gY29udHJvbHM7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSBmdW5jdGlvbiBLaW5ldGljKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuZGVjYXlfID0gZGVjYXk7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5kZWxheV8gPSBkZWxheTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAqL1xuICB0aGlzLnBvaW50c18gPSBbXTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuYW5nbGVfID0gMDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG59O1xuXG4vKipcbiAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICovXG5LaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uIGJlZ2luICgpIHtcbiAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gIHRoaXMuYW5nbGVfID0gMDtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoeCwgeSkge1xuICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIGVuZCAoKSB7XG4gIGlmICh0aGlzLnBvaW50c18ubGVuZ3RoIDwgNikge1xuICAgIC8vIGF0IGxlYXN0IDIgcG9pbnRzIGFyZSByZXF1aXJlZCAoaS5lLiB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IDYgZWxlbWVudHNcbiAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBkZWxheSA9IERhdGUubm93KCkgLSB0aGlzLmRlbGF5XztcbiAgdmFyIGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICBpZiAodGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIDwgZGVsYXkpIHtcbiAgICAvLyB0aGUgbGFzdCB0cmFja2VkIHBvaW50IGlzIHRvbyBvbGQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHVzZXIgc3RvcHBlZFxuICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgIGZpcnN0SW5kZXggLT0gMztcbiAgfVxuXG4gIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgZGlzdGFuY2UgdHJhdmVsbGVkIChwaXhlbHMpLlxuICovXG5LaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uIGdldERpc3RhbmNlICgpIHtcbiAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5Xztcbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gZ2V0QW5nbGUgKCkge1xuICByZXR1cm4gdGhpcy5hbmdsZV87XG59O1xuXG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5ldGljLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBQ1RJVkU6ICdhY3RpdmUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7ZWFzZU91dCwgbGluZWFyfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIEludGVyYWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBJbnRlcmFjdGlvbihvcHRpb25zKSB7XG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBvcHRpb25zLmhhbmRsZUV2ZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIEludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIEludGVyYWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBpbnRlcmFjdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRBY3RpdmUgPSBmdW5jdGlvbiBnZXRBY3RpdmUgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uIGdldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBhY3RpdmUgQWN0aXZlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlIChhY3RpdmUpIHtcbiAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICogdGhlIG1hcCBoZXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcmFjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFuKHZpZXcsIGRlbHRhLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuICBpZiAoY3VycmVudENlbnRlcikge1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihcbiAgICAgIFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV0pO1xuICAgIGlmIChvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICBjZW50ZXI6IGNlbnRlclxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgcm90YXRpb24gPSB2aWV3LmNvbnN0cmFpblJvdGF0aW9uKHJvdGF0aW9uLCAwKTtcbiAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGN1cnJlbnRSb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRDZW50ZXIgJiYgb3B0X2R1cmF0aW9uID4gMCkge1xuICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICBhbmNob3I6IG9wdF9hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcucm90YXRlKHJvdGF0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIFpvb21pbmcgZGlyZWN0aW9uOyA+IDAgaW5kaWNhdGVzXG4gKiAgICAgem9vbWluZyBvdXQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdFxuICogICAgIHRoZSBsYXJnZXN0IG5lYXJlc3QgcmVzb2x1dGlvbjsgPCAwIGluZGljYXRlcyB6b29taW5nIGluLCBpblxuICogICAgIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdCB0aGUgc21hbGxlc3RcbiAqICAgICBuZWFyZXN0IHJlc29sdXRpb247ID09IDAgaW5kaWNhdGVzIHRoYXQgdGhlIHpvb21pbmcgZGlyZWN0aW9uXG4gKiAgICAgaXMgdW5rbm93bi9ub3QgcmVsZXZhbnQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbVxuICogICAgIHdpbGwgc2VsZWN0IHRoZSBuZWFyZXN0IHJlc29sdXRpb24uIElmIG5vdCBkZWZpbmVkIDAgaXNcbiAqICAgICBhc3N1bWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbSh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgcmVzb2x1dGlvbiA9IHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBvcHRfZGlyZWN0aW9uKTtcbiAgem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gIHZhciByZXNvbHV0aW9uID0gdmlldy5jb25zdHJhaW5SZXNvbHV0aW9uKGN1cnJlbnRSZXNvbHV0aW9uLCBkZWx0YSwgMCk7XG5cbiAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciByZXNvbHV0aW9ucyA9IHZpZXcuZ2V0UmVzb2x1dGlvbnMoKTtcbiAgICByZXNvbHV0aW9uID0gY2xhbXAoXG4gICAgICByZXNvbHV0aW9uLFxuICAgICAgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHwgcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV0sXG4gICAgICB2aWV3LmdldE1heFJlc29sdXRpb24oKSB8fCByZXNvbHV0aW9uc1swXSk7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIGEgY29uc3RyYWludCBvbiBjZW50ZXIsIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBhbmNob3Igc28gdGhhdCB0aGVcbiAgLy8gbmV3IGNlbnRlciBpcyB3aXRoaW4gdGhlIGV4dGVudC4gV2UgZmlyc3QgY2FsY3VsYXRlIHRoZSBuZXcgY2VudGVyLCBhcHBseVxuICAvLyB0aGUgY29uc3RyYWludCB0byBpdCwgYW5kIHRoZW4gY2FsY3VsYXRlIGJhY2sgdGhlIGFuY2hvclxuICBpZiAob3B0X2FuY2hvciAmJiByZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiAhPT0gY3VycmVudFJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuXG4gICAgb3B0X2FuY2hvciA9IFtcbiAgICAgIChyZXNvbHV0aW9uICogY3VycmVudENlbnRlclswXSAtIGN1cnJlbnRSZXNvbHV0aW9uICogY2VudGVyWzBdKSAvXG4gICAgICAgICAgKHJlc29sdXRpb24gLSBjdXJyZW50UmVzb2x1dGlvbiksXG4gICAgICAocmVzb2x1dGlvbiAqIGN1cnJlbnRDZW50ZXJbMV0gLSBjdXJyZW50UmVzb2x1dGlvbiAqIGNlbnRlclsxXSkgL1xuICAgICAgICAgIChyZXNvbHV0aW9uIC0gY3VycmVudFJlc29sdXRpb24pXG4gICAgXTtcbiAgfVxuXG4gIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgcmVzb2x1dGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgaWYgKHJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgY3VycmVudENlbnRlciAmJlxuICAgICAgICByZXNvbHV0aW9uICE9PSBjdXJyZW50UmVzb2x1dGlvbiAmJiBvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIHZpZXcuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEb3VibGVDbGlja1pvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEb3VibGVDbGlja1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICBJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIGhhbmRsZUV2ZW50OiBoYW5kbGVFdmVudFxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgRG91YmxlQ2xpY2tab29tLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBEb3VibGVDbGlja1pvb20ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEb3VibGVDbGlja1pvb207XG5cbiAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcblxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAqIGRvdWJsZWNsaWNrKSBhbmQgZXZlbnR1YWxseSB6b29tcyB0aGUgbWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICogQHRoaXMge0RvdWJsZUNsaWNrWm9vbX1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICB2YXIgYnJvd3NlckV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZGVsdGEgPSBicm93c2VyRXZlbnQuc2hpZnRLZXkgPyAtdGhpcy5kZWx0YV8gOiB0aGlzLmRlbHRhXztcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHN0b3BFdmVudCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG91YmxlQ2xpY2tab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvY29uZGl0aW9uXG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtUUlVFLCBGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7V0VCS0lULCBNQUN9IGZyb20gJy4uL2hhcy5qcyc7XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICBvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBhbmQgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdFNoaWZ0S2V5c09ubHkgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgIG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbihldmVudCkge1xuICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIHRydWUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHdheXMgPSBUUlVFO1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhcyBhbiBcImFjdGlvblwiLXByb2R1Y2luZyBtb3VzZSBidXR0b24uXG4gKlxuICogQnkgZGVmaW5pdGlvbiwgdGhpcyBpbmNsdWRlcyBsZWZ0LWNsaWNrIG9uIHdpbmRvd3MvbGludXgsIGFuZCBsZWZ0LWNsaWNrXG4gKiB3aXRob3V0IHRoZSBjdHJsIGtleSBvbiBNYWNzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VBY3Rpb25CdXR0b24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gIHJldHVybiBvcmlnaW5hbEV2ZW50LmJ1dHRvbiA9PSAwICYmXG4gICAgICAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEZhbHNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gRkFMU0U7XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudCwgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBvaW50ZXJNb3ZlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSAncG9pbnRlcm1vdmUnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBkb3VibGVDbGljayA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG5vIG1vZGlmaWVyIGtleSAoYWx0LSwgc2hpZnQtIG9yIHBsYXRmb3JtLW1vZGlmaWVyLWtleSkgaXNcbiAqIHByZXNzZWQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZXJlIG5vIG1vZGlmaWVyIGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbm9Nb2RpZmllcktleXMgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgIChNQUMgPyBvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgOiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZSwgaS5lLiBub3QgYSBgPGlucHV0PmAtLFxuICogYDxzZWxlY3Q+YC0gb3IgYDx0ZXh0YXJlYT5gLWVsZW1lbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRhcmdldE5vdEVkaXRhYmxlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciB0YXJnZXQgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gIHZhciB0YWdOYW1lID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGFyZ2V0KS50YWdOYW1lO1xuICByZXR1cm4gKFxuICAgIHRhZ05hbWUgIT09ICdJTlBVVCcgJiZcbiAgICAgIHRhZ05hbWUgIT09ICdTRUxFQ1QnICYmXG4gICAgICB0YWdOYW1lICE9PSAnVEVYVEFSRUEnKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG1vdXNlT25seSA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudDtcbiAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSAnbW91c2UnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5wb2ludGVyRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUG9pbnRlclxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7Z2V0VmFsdWVzfSBmcm9tICcuLi9vYmouanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVEb3duRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRvd25cIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCB0aGVuIGEgZHJhZ1xuICogc2VxdWVuY2UgaXMgc3RhcnRlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0KX0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCl9IFtoYW5kbGVNb3ZlRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcIm1vdmVcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50cyxcbiAqIGFsc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSAoc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSBib3RoIHRoZVxuICogYGhhbmRsZURyYWdFdmVudGAgZnVuY3Rpb24gYW5kIHRoaXMgZnVuY3Rpb24gYXJlIGNhbGxlZCkuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIHRoYXQgY2FsbHMgdXNlci1kZWZpbmVkIGZ1bmN0aW9ucyBvbiBgZG93bmAsIGBtb3ZlYCBhbmQgYHVwYFxuICogZXZlbnRzLiBUaGlzIGNsYXNzIGFsc28gbWFuYWdlcyBcImRyYWcgc2VxdWVuY2VzXCIuXG4gKlxuICogV2hlbiB0aGUgYGhhbmRsZURvd25FdmVudGAgdXNlciBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBhIGRyYWcgc2VxdWVuY2UgaXNcbiAqIHN0YXJ0ZWQuIER1cmluZyBhIGRyYWcgc2VxdWVuY2UgdGhlIGBoYW5kbGVEcmFnRXZlbnRgIHVzZXIgZnVuY3Rpb24gaXNcbiAqIGNhbGxlZCBvbiBgbW92ZWAgZXZlbnRzLiBUaGUgZHJhZyBzZXF1ZW5jZSBlbmRzIHdoZW4gdGhlIGBoYW5kbGVVcEV2ZW50YFxuICogdXNlciBmdW5jdGlvbiBpcyBjYWxsZWQgYW5kIHJldHVybnMgYGZhbHNlYC5cbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ZXJJbnRlcmFjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIFBvaW50ZXJJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHRoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgUG9pbnRlckludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2ludGVySW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgKiBkZXRlY3RlZC5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCEoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICBpZiAodGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRykge1xuICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICB2YXIgaGFuZGxlZFVwID0gdGhpcy5oYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy5oYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKGhhbmRsZWQpIHtcbiAgICAgICAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3ZlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVNb3ZlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5zdG9wRG93biA9IGZ1bmN0aW9uIHN0b3BEb3duIChoYW5kbGVkKSB7XG4gICAgcmV0dXJuIGhhbmRsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18gPSBmdW5jdGlvbiB1cGRhdGVUcmFja2VkUG9pbnRlcnNfIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgZXZlbnQgPSBtYXBCcm93c2VyRXZlbnQucG9pbnRlckV2ZW50O1xuXG4gICAgICB2YXIgaWQgPSBldmVudC5wb2ludGVySWQudG9TdHJpbmcoKTtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT1cbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudDtcbiAgICAgIH0gZWxzZSBpZiAoaWQgaW4gdGhpcy50cmFja2VkUG9pbnRlcnNfKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnQ7XG4gICAgICB9XG4gICAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gZ2V0VmFsdWVzKHRoaXMudHJhY2tlZFBvaW50ZXJzXyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb247XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQ+fSBwb2ludGVyRXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IENlbnRyb2lkIHBpeGVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2VudHJvaWQocG9pbnRlckV2ZW50cykge1xuICB2YXIgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gIHZhciBjbGllbnRYID0gMDtcbiAgdmFyIGNsaWVudFkgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gIH1cbiAgcmV0dXJuIFtjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZIC8gbGVuZ3RoXTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBldmVudCBpcyBhIHBvaW50ZXJkb3duLCBwb2ludGVyZHJhZ1xuICogICAgIG9yIHBvaW50ZXJ1cCBldmVudC5cbiAqL1xuZnVuY3Rpb24gaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgcmV0dXJuIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHIHx8XG4gICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVA7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZSwgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUsIGFkZCBhcyBhZGRDb29yZGluYXRlfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7bm9Nb2RpZmllcktleXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR9IFtraW5ldGljXSBLaW5ldGljIGluZXJ0aWEgdG8gYXBwbHkgdG8gdGhlIHBhbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUG9pbnRlckludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIHN0b3BEb3duOiBGQUxTRVxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICovXG4gICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBub01vZGlmaWVyS2V5cztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG5cbiAgfVxuXG4gIGlmICggUG9pbnRlckludGVyYWN0aW9uICkgRHJhZ1Bhbi5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIERyYWdQYW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUG9pbnRlckludGVyYWN0aW9uICYmIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgRHJhZ1Bhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnUGFuO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0V2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMucGFubmluZ18pIHtcbiAgICAgIHRoaXMucGFubmluZ18gPSB0cnVlO1xuICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgfVxuICAgIHZhciB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpO1xuICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF07XG4gICAgICAgIHZhciBkZWx0YVkgPSBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2YXIgY2VudGVyID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgc2NhbGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICByb3RhdGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgYWRkQ29vcmRpbmF0ZShjZW50ZXIsIHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuICAgICAgICB2aWV3LnNldENlbnRlcihjZW50ZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgIHZhciBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjZW50ZXIpO1xuICAgICAgICB2YXIgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKFtcbiAgICAgICAgICBjZW50ZXJweFswXSAtIGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgIGNlbnRlcnB4WzFdIC0gZGlzdGFuY2UgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgXSk7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgY2VudGVyOiB2aWV3LmNvbnN0cmFpbkNlbnRlcihkZXN0KSxcbiAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIobWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICB9XG4gICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnUGFuO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1BhbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1Bhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQge2Rpc2FibGV9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHRTaGlmdEtleXNPbmx5LCBtb3VzZU9ubHksIG1vdXNlQWN0aW9uQnV0dG9ufSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gRHJhZ1JvdGF0ZShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCB7XG4gICAgICBzdG9wRG93bjogRkFMU0VcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIERyYWdSb3RhdGUuX19wcm90b19fID0gUG9pbnRlckludGVyYWN0aW9uO1xuICBEcmFnUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1JvdGF0ZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcbiAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgIHZhciB0aGV0YSA9XG4gICAgICAgIE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IHRoZXRhIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uIC0gZGVsdGEpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICB2YXIgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChtb3VzZUFjdGlvbkJ1dHRvbihtYXBCcm93c2VyRXZlbnQpICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRHJhZ1JvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xuXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG5cbnZhciBSZW5kZXJCb3ggPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChEaXNwb3NhYmxlKSB7XG4gIGZ1bmN0aW9uIFJlbmRlckJveChjbGFzc05hbWUpIHtcbiAgICBEaXNwb3NhYmxlLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmdlb21ldHJ5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMuZW5kUGl4ZWxfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgUmVuZGVyQm94Ll9fcHJvdG9fXyA9IERpc3Bvc2FibGU7XG4gIFJlbmRlckJveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBEaXNwb3NhYmxlICYmIERpc3Bvc2FibGUucHJvdG90eXBlICk7XG4gIFJlbmRlckJveC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZW5kZXJCb3g7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgdGhpcy5zZXRNYXAobnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiByZW5kZXJfICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHB4ID0gJ3B4JztcbiAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS50b3AgPSBNYXRoLm1pbihzdGFydFBpeGVsWzFdLCBlbmRQaXhlbFsxXSkgKyBweDtcbiAgICBzdHlsZS53aWR0aCA9IE1hdGguYWJzKGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICBzdHlsZS5sZWZ0ID0gc3R5bGUudG9wID0gc3R5bGUud2lkdGggPSBzdHlsZS5oZWlnaHQgPSAnaW5oZXJpdCc7XG4gICAgfVxuICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRQaXhlbHMgPSBmdW5jdGlvbiBzZXRQaXhlbHMgKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5lbmRQaXhlbF8gPSBlbmRQaXhlbDtcbiAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHRoZSBjYWNoZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUdlb21ldHJ5ICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHBpeGVscyA9IFtcbiAgICAgIHN0YXJ0UGl4ZWwsXG4gICAgICBbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuICAgICAgZW5kUGl4ZWwsXG4gICAgICBbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dXG4gICAgXTtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBwaXhlbHMubWFwKHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsLCB0aGlzLm1hcF8pO1xuICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgY29vcmRpbmF0ZXNbNF0gPSBjb29yZGluYXRlc1swXS5zbGljZSgpO1xuICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gIH07XG5cbiAgcmV0dXJuIFJlbmRlckJveDtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IHthbHdheXMsIG1vdXNlT25seSwgbW91c2VBY3Rpb25CdXR0b259IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWdib3gnXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGUgYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBvbC9ldmVudHMvY29uZGl0aW9ufmFsd2F5c30uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCl9IG9uQm94RW5kIENvZGUgdG8gZXhlY3V0ZSBqdXN0XG4gKiBiZWZvcmUgYGJveGVuZGAgaXMgZmlyZWQuXG4gKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggc3RhcnQuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBvbiBkcmFnIHdoZW4gYm94IGlzIGFjdGl2ZS5cbiAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hkcmFnXG4gICAqIEBhcGlcbiAgICovXG4gIEJPWERSQUc6ICdib3hkcmFnJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBCT1hFTkQ6ICdib3hlbmQnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBEcmFnQm94RXZlbnQodHlwZSwgY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgRHJhZ0JveEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBEcmFnQm94RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIERyYWdCb3hFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnQm94RXZlbnQ7XG5cbiAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBkcmF3IGEgdmVjdG9yIGJveCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgc2hpZnQgb3Igb3RoZXIga2V5IGlzIGhlbGQgZG93bi4gVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSxcbiAqIGZvciB6b29taW5nIHRvIGEgc3BlY2lmaWMgYXJlYSBvZiB0aGUgbWFwXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbX0pLlxuICpcbiAqIFRoaXMgaW50ZXJhY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgZm9yIG1vdXNlIGRldmljZXMuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG52YXIgRHJhZ0JveCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBvaW50ZXJJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEcmFnQm94KG9wdF9vcHRpb25zKSB7XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIHRoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcblxuICAgIC8qKlxuICAgICogQHR5cGUge251bWJlcn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEB0eXBlIHtmdW5jdGlvbih0aGlzOkRyYWdCb3gsIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25Cb3hFbmRfID0gb3B0aW9ucy5vbkJveEVuZCA/IG9wdGlvbnMub25Cb3hFbmQgOiBWT0lEO1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgKi9cbiAgICB0aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx3YXlzO1xuXG4gICAgLyoqXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUge0VuZENvbmRpdGlvbn1cbiAgICAqL1xuICAgIHRoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uID9cbiAgICAgIG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uIDogdGhpcy5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uO1xuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBEcmFnQm94Ll9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgRHJhZ0JveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBEcmFnQm94LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERyYWdCb3g7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGNvbmRpdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgYm94ZW5kIGV2ZW50XG4gICAqIHNob3VsZCBmaXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgVGhlIG9yaWdpbmF0aW5nIE1hcEJyb3dzZXJFdmVudFxuICAgKiAgICAgbGVhZGluZyB0byB0aGUgYm94IGVuZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgVGhlIGVuZCBwaXhlbCBvZiB0aGUgYm94LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgYm94ZW5kIGNvbmRpdGlvbiBzaG91bGQgYmUgZmlyZWQuXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uID0gZnVuY3Rpb24gZGVmYXVsdEJveEVuZENvbmRpdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgIHZhciB3aWR0aCA9IGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXTtcbiAgICB2YXIgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gIH07XG5cbiAgLyoqXG4gICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICogQGFwaVxuICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWERSQUcsXG4gICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcblxuICAgIGlmICh0aGlzLmJveEVuZENvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50LCB0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpKSB7XG4gICAgICB0aGlzLm9uQm94RW5kXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRG93bkV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YU1RBUlQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnQm94O1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQge3NoaWZ0S2V5T25seX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2NyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzLCBnZXRCb3R0b21MZWZ0LCBnZXRDZW50ZXIsIGdldFRvcFJpZ2h0LCBzY2FsZUZyb21DZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWd6b29tJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlXG4gKiBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdXQ9ZmFsc2VdIFVzZSBpbnRlcmFjdGlvbiBmb3Igem9vbWluZyBvdXQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gYSBrZXksIHNoaWZ0IGJ5IGRlZmF1bHQsIGlzIGhlbGQgZG93bi5cbiAqXG4gKiBUbyBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBib3gsIHVzZSBDU1MgYW5kIHRoZSBgLm9sLWRyYWd6b29tYCBzZWxlY3Rvciwgb3JcbiAqIHlvdXIgY3VzdG9tIG9uZSBjb25maWd1cmVkIHdpdGggYGNsYXNzTmFtZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnWm9vbSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERyYWdCb3gpIHtcbiAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuXG4gICAgRHJhZ0JveC5jYWxsKHRoaXMsIHtcbiAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgb25Cb3hFbmQ6IG9uQm94RW5kXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgfVxuXG4gIGlmICggRHJhZ0JveCApIERyYWdab29tLl9fcHJvdG9fXyA9IERyYWdCb3g7XG4gIERyYWdab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIERyYWdCb3ggJiYgRHJhZ0JveC5wcm90b3R5cGUgKTtcbiAgRHJhZ1pvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1pvb207XG5cbiAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5cblxuLyoqXG4gKiBAdGhpcyB7RHJhZ1pvb219XG4gKi9cbmZ1bmN0aW9uIG9uQm94RW5kKCkge1xuICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgdmFyIHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgdmFyIHNpemUgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9ICovIChtYXAuZ2V0U2l6ZSgpKTtcbiAgdmFyIGV4dGVudCA9IHRoaXMuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcblxuICBpZiAodGhpcy5vdXRfKSB7XG4gICAgdmFyIG1hcEV4dGVudCA9IHZpZXcuY2FsY3VsYXRlRXh0ZW50KHNpemUpO1xuICAgIHZhciBib3hQaXhlbEV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKFtcbiAgICAgIG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGdldEJvdHRvbUxlZnQoZXh0ZW50KSksXG4gICAgICBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShnZXRUb3BSaWdodChleHRlbnQpKV0pO1xuICAgIHZhciBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnQoYm94UGl4ZWxFeHRlbnQsIHNpemUpO1xuXG4gICAgc2NhbGVGcm9tQ2VudGVyKG1hcEV4dGVudCwgMSAvIGZhY3Rvcik7XG4gICAgZXh0ZW50ID0gbWFwRXh0ZW50O1xuICB9XG5cbiAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KGV4dGVudCwgc2l6ZSkpO1xuXG4gIHZhciBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgY2VudGVyID0gdmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKTtcblxuICB2aWV3LmFuaW1hdGUoe1xuICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgIGVhc2luZzogZWFzZU91dFxuICB9KTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1pvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEVGVDogMzcsXG4gIFVQOiAzOCxcbiAgUklHSFQ6IDM5LFxuICBET1dOOiA0MFxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Q29kZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IHtyb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vZXZlbnRzL0tleUNvZGUuanMnO1xuaW1wb3J0IHtub01vZGlmaWVyS2V5cywgdGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7cGFufSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5vTW9kaWZpZXJLZXlzfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxEZWx0YT0xMjhdIFRoZSBhbW91bnQgb2YgcGl4ZWxzIHRvIHBhbiBvbiBlYWNoIGtleVxuICogcHJlc3MuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCB1c2luZyBrZXlib2FyZCBhcnJvd3MuXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgIHJldHVybiBub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5jb25kaXRpb24gOiB0aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsRGVsdGFfID0gb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgS2V5Ym9hcmRQYW4uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkUGFuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBLZXlib2FyZFBhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBLZXlib2FyZFBhbjtcblxuICByZXR1cm4gS2V5Ym9hcmRQYW47XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gKiBwcmVzc2VkKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBrZXlDb2RlID0ga2V5RXZlbnQua2V5Q29kZTtcbiAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04pIHtcbiAgICAgICAgZGVsdGFZID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUKSB7XG4gICAgICAgIGRlbHRhWCA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuUklHSFQpIHtcbiAgICAgICAgZGVsdGFYID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbHRhWSA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICB9XG4gICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgbWFwQnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gIXN0b3BFdmVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkUGFuLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7dGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7em9vbUJ5RGVsdGF9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBLZXlib2FyZFpvb20ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG5cbiAgfVxuXG4gIGlmICggSW50ZXJhY3Rpb24gKSBLZXlib2FyZFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcmFjdGlvbiAmJiBJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgS2V5Ym9hcmRab29tLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEtleWJvYXJkWm9vbTtcblxuICByZXR1cm4gS2V5Ym9hcmRab29tO1xufShJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAqIGtleSBwcmVzc2VkIHdhcyAnKycgb3IgJy0nKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFpvb219XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAoY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgfHwgY2hhckNvZGUgPT0gJy0nLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciBkZWx0YSA9IChjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSkgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHdheXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtlYXNlT3V0fSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YLCBTQUZBUkl9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX0RFTFRBID0gMTtcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgTW9kZSA9IHtcbiAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gIFdIRUVMOiAnd2hlZWwnXG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIFdoZW4gdXNpbmcgYSB0cmFja3BhZCBvclxuICogbWFnaWMgbW91c2UsIHpvb20gdG8gdGhlIGNsb3Nlc3QgaW50ZWdlciB6b29tIGxldmVsIGFmdGVyIHRoZSBzY3JvbGwgZ2VzdHVyZVxuICogZW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG52YXIgTW91c2VXaGVlbFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy51c2VBbmNob3JfID0gb3B0aW9ucy51c2VBbmNob3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlQW5jaG9yIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiB8fCBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dElkXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZERlbHRhUGVyWm9vbV8gPSAzMDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgem9vbSBmYWN0b3IgYnkgd2hpY2ggc2Nyb2xsIHpvb21pbmcgaXMgYWxsb3dlZCB0byBleGNlZWQgdGhlIGxpbWl0cy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZFpvb21CdWZmZXJfID0gMS41O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgTW91c2VXaGVlbFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3VzZVdoZWVsWm9vbTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5kZWNyZW1lbnRJbnRlcmFjdGluZ0hpbnRfID0gZnVuY3Rpb24gZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyAoKSB7XG4gICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgKiB6b29tcyB0aGUgbWFwLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMICYmIHR5cGUgIT09IEV2ZW50VHlwZS5NT1VTRVdIRUVMKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB3aGVlbEV2ZW50ID0gLyoqIEB0eXBlIHtXaGVlbEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuXG4gICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgIH1cblxuICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iLzAwMWM3YjkvanMvdWkvaGFuZGxlci9zY3JvbGxfem9vbS5qc1xuICAgIHZhciBkZWx0YTtcbiAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgaWYgKEZJUkVGT1ggJiZcbiAgICAgICAgICB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgfVxuICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLk1PVVNFV0hFRUwpIHtcbiAgICAgIGRlbHRhID0gLXdoZWVsRXZlbnQud2hlZWxEZWx0YVk7XG4gICAgICBpZiAoU0FGQVJJKSB7XG4gICAgICAgIGRlbHRhIC89IDM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgP1xuICAgICAgICBNb2RlLlRSQUNLUEFEIDpcbiAgICAgICAgTW9kZS5XSEVFTDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCkge1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYWNrcGFkVGltZW91dElkXyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50Xy5iaW5kKHRoaXMpLCB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKTtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiBNYXRoLnBvdygyLCBkZWx0YSAvIHRoaXMudHJhY2twYWREZWx0YVBlclpvb21fKTtcbiAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdmlldy5nZXRNaW5SZXNvbHV0aW9uKCk7XG4gICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgdmFyIHJlYm91bmQgPSAwO1xuICAgICAgaWYgKHJlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uIC8gdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHJlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uICogdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IC0xO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGFzdEFuY2hvcl8pIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIodmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKSk7XG4gICAgICB9XG4gICAgICB2aWV3LnNldFJlc29sdXRpb24ocmVzb2x1dGlvbik7XG5cbiAgICAgIGlmIChyZWJvdW5kID09PSAwICYmIHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICByZXNvbHV0aW9uOiB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVsdGEgPiAwID8gLTEgOiAxKSxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uX1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlYm91bmQgPiAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHJlYm91bmQgPCAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5kZWx0YV8gKz0gZGVsdGE7XG5cbiAgICB2YXIgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVdoZWVsWm9vbV8uYmluZCh0aGlzLCBtYXApLCB0aW1lTGVmdCk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlV2hlZWxab29tXyA9IGZ1bmN0aW9uIGhhbmRsZVdoZWVsWm9vbV8gKG1hcCkge1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZhciBtYXhEZWx0YSA9IE1BWF9ERUxUQTtcbiAgICB2YXIgZGVsdGEgPSBjbGFtcCh0aGlzLmRlbHRhXywgLW1heERlbHRhLCBtYXhEZWx0YSk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgLWRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlbHRhXyA9IDA7XG4gICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAqIEBhcGlcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uIHNldE1vdXNlQW5jaG9yICh1c2VBbmNob3IpIHtcbiAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTW91c2VXaGVlbFpvb207XG59KEludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVdoZWVsWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGVcbiAqL1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7ZGlzYWJsZX0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aHJlc2hvbGQ9MC4zXSBNaW5pbWFsIGFuZ2xlIGluIHJhZGlhbnMgdG8gc3RhcnQgYSByb3RhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hSb3RhdGUob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuXG4gICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICB9XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5hbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBQaW5jaFJvdGF0ZS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBpbmNoUm90YXRlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHJvdGF0aW9uRGVsdGEgPSAwLjA7XG5cbiAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcblxuICAgIC8vIGFuZ2xlIGJldHdlZW4gdG91Y2hlc1xuICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoXG4gICAgICB0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLFxuICAgICAgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WCk7XG5cbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiZcbiAgICAgICAgICBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICB9XG4gICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgfVxuICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb3RhdGUgYW5jaG9yIHBvaW50LlxuICAgIC8vIEZJWE1FOiBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBsaW5lczpcbiAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChjZW50cm9pZCk7XG5cbiAgICAvLyByb3RhdGVcbiAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiArIHJvdGF0aW9uRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVVcEV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZpZXcuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB0aGlzLmFuY2hvcl8sIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQaW5jaFJvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFJvdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt6b29tLCB6b29tV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249NDAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gWm9vbSB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyXG4gKiB6b29tIGxldmVsIGFmdGVyIHRoZSBwaW5jaCBnZXN0dXJlIGVuZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgcGluY2hpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBQaW5jaFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hab29tKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID0gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uIHx8IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIFBpbmNoWm9vbS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBQaW5jaFpvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGluY2hab29tO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuXG4gICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgdmFyIGR4ID0gdG91Y2gwLmNsaWVudFggLSB0b3VjaDEuY2xpZW50WDtcbiAgICB2YXIgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuXG4gICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgIH1cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcblxuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSB2aWV3LmdldE1heFJlc29sdXRpb24oKTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWluUmVzb2x1dGlvbigpO1xuICAgIHZhciBuZXdSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHNjYWxlRGVsdGE7XG4gICAgaWYgKG5ld1Jlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbjtcbiAgICB9IGVsc2UgaWYgKG5ld1Jlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWluUmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWluUmVzb2x1dGlvbjtcbiAgICB9XG5cbiAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICB9XG5cbiAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoY2VudHJvaWQpO1xuXG4gICAgLy8gc2NhbGUsIGJ5cGFzcyB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50XG4gICAgbWFwLnJlbmRlcigpO1xuICAgIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgbmV3UmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgaWYgKHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8gfHxcbiAgICAgICAgICByZXNvbHV0aW9uIDwgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHxcbiAgICAgICAgICByZXNvbHV0aW9uID4gdmlldy5nZXRNYXhSZXNvbHV0aW9uKCkpIHtcbiAgICAgICAgLy8gWm9vbSB0byBmaW5hbCByZXNvbHV0aW9uLCB3aXRoIGFuIGFuaW1hdGlvbiwgYW5kIHByb3ZpZGUgYVxuICAgICAgICAvLyBkaXJlY3Rpb24gbm90IHRvIHpvb20gb3V0L2luIGlmIHVzZXIgd2FzIHBpbmNoaW5nIGluL291dC5cbiAgICAgICAgLy8gRGlyZWN0aW9uIGlzID4gMCBpZiBwaW5jaGluZyBvdXQsIGFuZCA8IDAgaWYgcGluY2hpbmcgaW4uXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyAtIDE7XG4gICAgICAgIHpvb20odmlldywgcmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfLCB0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEb3duRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICBtYXAuZ2V0VmlldygpLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBpbmNoWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gYWxsb3dlZCB0aHJlc2hvbGQgIChpbiBwaXhlbHMpIGZvciByZXByb2plY3Rpb25cbiAqIHRyaWFuZ3VsYXRpb24uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEVSUk9SX1RIUkVTSE9MRCA9IDAuNTtcblxuLyoqXG4gKiBFbmFibGUgYXV0b21hdGljIHJlcHJvamVjdGlvbiBvZiByYXN0ZXIgc291cmNlcy4gRGVmYXVsdCBpcyBgdHJ1ZWAuXG4gKiBUT0RPOiBkZWNpZGUgaWYgd2Ugd2FudCB0byBleHBvc2UgdGhpcyBhcyBhIGJ1aWxkIGZsYWcgb3IgcmVtb3ZlIGl0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiA9IHRydWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VTdGF0ZVxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJRExFOiAwLFxuICBMT0FESU5HOiAxLFxuICBMT0FERUQ6IDIsXG4gIEVSUk9SOiAzXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVN0YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZUNhbnZhc1xuICovXG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHRvIHRyaWdnZXIgYXN5bmNocm9ub3VzIGNhbnZhcyBkcmF3aW5nLiAgSXQgaXNcbiAqIGNhbGxlZCB3aXRoIGEgXCJkb25lXCIgY2FsbGJhY2sgdGhhdCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gZHJhd2luZyBpcyBkb25lLlxuICogSWYgYW55IGVycm9yIG9jY3VycyBkdXJpbmcgZHJhd2luZywgdGhlIFwiZG9uZVwiIGNhbGxiYWNrIHNob3VsZCBiZSBjYWxsZWQgd2l0aFxuICogdGhhdCBlcnJvci5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oZnVuY3Rpb24oRXJyb3I9KSl9IExvYWRlclxuICovXG5cblxudmFyIEltYWdlQ2FudmFzID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW1hZ2VCYXNlKSB7XG4gIGZ1bmN0aW9uIEltYWdlQ2FudmFzKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgY2FudmFzLCBvcHRfbG9hZGVyKSB7XG5cbiAgICB2YXIgc3RhdGUgPSBvcHRfbG9hZGVyICE9PSB1bmRlZmluZWQgPyBJbWFnZVN0YXRlLklETEUgOiBJbWFnZVN0YXRlLkxPQURFRDtcblxuICAgIEltYWdlQmFzZS5jYWxsKHRoaXMsIGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3RhdGUpO1xuXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgY2FudmFzIGxvYWRlciBmdW5jdGlvbi5cbiAgICAgKiBAdHlwZSB7P0xvYWRlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9hZGVyXyA9IG9wdF9sb2FkZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9sb2FkZXIgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jYW52YXNfID0gY2FudmFzO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7RXJyb3J9XG4gICAgICovXG4gICAgdGhpcy5lcnJvcl8gPSBudWxsO1xuXG4gIH1cblxuICBpZiAoIEltYWdlQmFzZSApIEltYWdlQ2FudmFzLl9fcHJvdG9fXyA9IEltYWdlQmFzZTtcbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW1hZ2VCYXNlICYmIEltYWdlQmFzZS5wcm90b3R5cGUgKTtcbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW1hZ2VDYW52YXM7XG5cbiAgLyoqXG4gICAqIEdldCBhbnkgZXJyb3IgYXNzb2NpYXRlZCB3aXRoIGFzeW5jaHJvbm91cyByZW5kZXJpbmcuXG4gICAqIEByZXR1cm4ge0Vycm9yfSBBbnkgZXJyb3IgdGhhdCBvY2N1cnJlZCBkdXJpbmcgcmVuZGVyaW5nLlxuICAgKi9cbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmdldEVycm9yID0gZnVuY3Rpb24gZ2V0RXJyb3IgKCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yXztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGFzeW5jIGRyYXdpbmcgY29tcGxldGUuXG4gICAqIEBwYXJhbSB7RXJyb3I9fSBlcnIgQW55IGVycm9yIGR1cmluZyBkcmF3aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSW1hZ2VDYW52YXMucHJvdG90eXBlLmhhbmRsZUxvYWRfID0gZnVuY3Rpb24gaGFuZGxlTG9hZF8gKGVycikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHRoaXMuZXJyb3JfID0gZXJyO1xuICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBJbWFnZUNhbnZhcy5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQgKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgdGhpcy5sb2FkZXJfKHRoaXMuaGFuZGxlTG9hZF8uYmluZCh0aGlzKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzIGVsZW1lbnQuXG4gICAqL1xuICBJbWFnZUNhbnZhcy5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzXztcbiAgfTtcblxuICByZXR1cm4gSW1hZ2VDYW52YXM7XG59KEltYWdlQmFzZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEltYWdlQ2FudmFzO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUNhbnZhcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VCYXNlXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIEltYWdlQmFzZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50VGFyZ2V0KSB7XG4gIGZ1bmN0aW9uIEltYWdlQmFzZShleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHN0YXRlKSB7XG5cbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnQgPSBleHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50VGFyZ2V0ICkgSW1hZ2VCYXNlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBJbWFnZUJhc2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIEltYWdlQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbWFnZUJhc2U7XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uIGNoYW5nZWQgKCkge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWxSYXRpby5cbiAgICovXG4gIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIGdldFBpeGVsUmF0aW8gKCkge1xuICAgIHJldHVybiB0aGlzLnBpeGVsUmF0aW9fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnJlc29sdXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBJbWFnZUJhc2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkICgpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIHJldHVybiBJbWFnZUJhc2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VCYXNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0xheWVyVHlwZVxuICovXG5cbi8qKlxuICogQSBsYXllciB0eXBlIHVzZWQgd2hlbiBjcmVhdGluZyBsYXllciByZW5kZXJlcnMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElNQUdFOiAnSU1BR0UnLFxuICBUSUxFOiAnVElMRScsXG4gIFZFQ1RPUl9USUxFOiAnVkVDVE9SX1RJTEUnLFxuICBWRUNUT1I6ICdWRUNUT1InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllclR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclJlbmRlclR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBSZW5kZXIgbW9kZSBmb3IgdmVjdG9yIGxheWVyczpcbiAqICAqIGAnaW1hZ2UnYDogVmVjdG9yIGxheWVycyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZ1xuICogICAgZXZlbiBkdXJpbmcgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJTUFHRTogJ2ltYWdlJyxcbiAgVkVDVE9SOiAndmVjdG9yJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yUmVuZGVyVHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50XG4gKi9cblxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5cbnZhciBSZW5kZXJFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIFJlbmRlckV2ZW50KHR5cGUsIG9wdF92ZWN0b3JDb250ZXh0LCBvcHRfZnJhbWVTdGF0ZSwgb3B0X2NvbnRleHQsIG9wdF9nbENvbnRleHQpIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBGb3IgY2FudmFzLCB0aGlzIGlzIGFuIGluc3RhbmNlIG9mIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL2NhbnZhcy9JbW1lZGlhdGV9LlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckNvbnRleHQuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMudmVjdG9yQ29udGV4dCA9IG9wdF92ZWN0b3JDb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByZW5kZXIgZnJhbWUgc3RhdGUuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBDYW52YXMgY29udGV4dC4gT25seSBhdmFpbGFibGUgd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8bnVsbHx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dCA9IG9wdF9jb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogV2ViR0wgY29udGV4dC4gT25seSBhdmFpbGFibGUgd2hlbiBhIFdlYkdMIHJlbmRlcmVyIGlzIHVzZWQsIG51bGxcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3dlYmdsL0NvbnRleHQuanNcIikuZGVmYXVsdHxudWxsfHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5nbENvbnRleHQgPSBvcHRfZ2xDb250ZXh0O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgUmVuZGVyRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIFJlbmRlckV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBSZW5kZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZW5kZXJFdmVudDtcblxuICByZXR1cm4gUmVuZGVyRXZlbnQ7XG59KEV2ZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckV2ZW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFbnRyeVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleV9cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlclxuICogQHByb3BlcnR5IHtPYmplY3R9IG9sZGVyXG4gKiBAcHJvcGVydHkgeyp9IHZhbHVlX1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRzIGEgTGVhc3QtUmVjZW50bHktVXNlZCBjYWNoZSB3aGVyZSB0aGUga2V5cyBkbyBub3QgY29uZmxpY3Qgd2l0aFxuICogT2JqZWN0J3MgcHJvcGVydGllcyAoZS5nLiAnaGFzT3duUHJvcGVydHknIGlzIG5vdCBhbGxvd2VkIGFzIGEga2V5KS4gRXhwaXJpbmdcbiAqIGl0ZW1zIGZyb20gdGhlIGNhY2hlIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgdXNlci5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLkV2ZW50XG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgTFJVQ2FjaGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBMUlVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuXG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gb3B0X2hpZ2hXYXRlck1hcmsgIT09IHVuZGVmaW5lZCA/IG9wdF9oaWdoV2F0ZXJNYXJrIDogMjA0ODtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNvdW50XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAqL1xuICAgIHRoaXMuZW50cmllc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAqL1xuICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBMUlVDYWNoZS5fX3Byb3RvX18gPSBFdmVudFRhcmdldDtcbiAgTFJVQ2FjaGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIExSVUNhY2hlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExSVUNhY2hlO1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBjYW5FeHBpcmVDYWNoZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q291bnQoKSA+IHRoaXMuaGlnaFdhdGVyTWFyaztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNMRUFSKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gY29udGFpbnNLZXkgKGtleSkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNfLmhhc093blByb3BlcnR5KGtleSk7XG4gIH07XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBULCBzdHJpbmcsIExSVUNhY2hlKTogP30gZiBUaGUgZnVuY3Rpb25cbiAgICogICAgIHRvIGNhbGwgZm9yIGV2ZXJ5IGVudHJ5IGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbmV3ZXIuIFRoaXMgZnVuY3Rpb24gdGFrZXNcbiAgICogICAgIDMgYXJndW1lbnRzICh0aGUgZW50cnkgdmFsdWUsIHRoZSBlbnRyeSBrZXkgYW5kIHRoZSBMUlVDYWNoZSBvYmplY3QpLlxuICAgKiAgICAgVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIHVzZSBhcyBgdGhpc2AgaW4gYGZgLlxuICAgKiBAdGVtcGxhdGUgU1xuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoIChmLCBvcHRfdGhpcykge1xuICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGYuY2FsbChvcHRfdGhpcywgZW50cnkudmFsdWVfLCBlbnRyeS5rZXlfLCB0aGlzKTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKGtleSkge1xuICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCxcbiAgICAgIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfSBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAodGhpcy5vbGRlc3RfLm5ld2VyKTtcbiAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgZW50cnkub2xkZXIgPSB0aGlzLm5ld2VzdF87XG4gICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGVudHJ5IGtleS5cbiAgICogQHJldHVybiB7VH0gVGhlIHJlbW92ZWQgZW50cnkuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgIHRoaXMubmV3ZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5vbGRlcik7XG4gICAgICBpZiAodGhpcy5uZXdlc3RfKSB7XG4gICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgaWYgKHRoaXMub2xkZXN0Xykge1xuICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAtLXRoaXMuY291bnRfO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH07XG5cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uIGdldENvdW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gIH07XG5cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gS2V5cy5cbiAgICovXG4gIExSVUNhY2hlLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gZ2V0S2V5cyAoKSB7XG4gICAgdmFyIGtleXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgZW50cnk7XG4gICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgIGtleXNbaSsrXSA9IGVudHJ5LmtleV87XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0VmFsdWVzID0gZnVuY3Rpb24gZ2V0VmFsdWVzICgpIHtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGVudHJ5O1xuICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICB2YWx1ZXNbaSsrXSA9IGVudHJ5LnZhbHVlXztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtUfSBMYXN0IHZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0ID0gZnVuY3Rpb24gcGVla0xhc3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9sZGVzdF8udmFsdWVfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTGFzdCBrZXkuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3RLZXkgPSBmdW5jdGlvbiBwZWVrTGFzdEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkZXN0Xy5rZXlfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUga2V5IG9mIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgY2FjaGUuICBUaHJvd3MgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtGaXJzdEtleSA9IGZ1bmN0aW9uIHBlZWtGaXJzdEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3ZXN0Xy5rZXlfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uIHBvcCAoKSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2VudHJ5LmtleV9dO1xuICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH1cbiAgICAtLXRoaXMuY291bnRfO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH07XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UgKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmdldChrZXkpOyAvLyB1cGRhdGUgYG5ld2VzdF9gXG4gICAgdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXyA9IHZhbHVlO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAoa2V5LCB2YWx1ZSkge1xuICAgIGFzc2VydCghKGtleSBpbiB0aGlzLmVudHJpZXNfKSxcbiAgICAgIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgdmFyIGVudHJ5ID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKHtcbiAgICAgIGtleV86IGtleSxcbiAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XyxcbiAgICAgIHZhbHVlXzogdmFsdWVcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMubmV3ZXN0Xykge1xuICAgICAgdGhpcy5vbGRlc3RfID0gZW50cnk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICB0aGlzLmVudHJpZXNfW2tleV0gPSBlbnRyeTtcbiAgICArK3RoaXMuY291bnRfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFNldCBhIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgZm9yIHRoZSBjYWNoZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQ2FjaGUgc2l6ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgTFJVQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplIChzaXplKSB7XG4gICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gc2l6ZTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBQcnVuZSB0aGUgY2FjaGUuXG4gICAqL1xuICBMUlVDYWNoZS5wcm90b3R5cGUucHJ1bmUgPSBmdW5jdGlvbiBwcnVuZSAoKSB7XG4gICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgdGhpcy5wb3AoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIExSVUNhY2hlO1xufShFdmVudFRhcmdldCkpO1xuXG5leHBvcnQgZGVmYXVsdCBMUlVDYWNoZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TFJVQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXNcbiAqL1xuaW1wb3J0IHtnZXRGb250RmFtaWxpZXN9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7Y2xlYXJ9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi4vc3RydWN0cy9MUlVDYWNoZS5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm19IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gZmlsbFN0eWxlXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudEZpbGxTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRTdHJva2VTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY3VycmVudExpbmVDYXBdXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGN1cnJlbnRMaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZURhc2hPZmZzZXRdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2N1cnJlbnRMaW5lSm9pbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVXaWR0aF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudE1pdGVyTGltaXRdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xhc3RTdHJva2VdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtmaWxsU3R5bGVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtzdHJva2VTdHlsZV1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGluZUNhcF1cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2hcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXRdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xpbmVKb2luXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lV2lkdGhdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXRdXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUNhcFxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVEYXNoT2Zmc2V0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUpvaW5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRTdGF0ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGV4dEFsaWduXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHRCYXNlbGluZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZW1lbnRdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heEFuZ2xlXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmZsb3ddXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRGaWxsXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRTdHJva2VdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NjYWxlXVxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcGFkZGluZ11cbiAqL1xuXG5cbi8qKlxuICogQ29udGFpbmVyIGZvciBkZWNsdXR0ZXJlZCByZXBsYXkgaW5zdHJ1Y3Rpb25zIHRoYXQgbmVlZCB0byBiZSByZW5kZXJlZCBvclxuICogb21pdHRlZCB0b2dldGhlciwgaS5lLiB3aGVuIHN0eWxlcyByZW5kZXIgYm90aCBhbiBpbWFnZSBhbmQgdGV4dCwgb3IgZm9yIHRoZVxuICogY2hhcmFjdGVycyB0aGF0IGZvcm0gdGV4dCBhbG9uZyBsaW5lcy4gVGhlIGJhc2ljIGVsZW1lbnRzIG9mIHRoaXMgYXJyYXkgYXJlXG4gKiBgW21pblgsIG1pblksIG1heFgsIG1heFksIGNvdW50XWAsIHdoZXJlIHRoZSBmaXJzdCBmb3VyIGVudHJpZXMgYXJlIHRoZVxuICogcmVuZGVyZWQgZXh0ZW50IG9mIHRoZSBncm91cCBpbiBwaXhlbCBzcGFjZS4gYGNvdW50YCBpcyB0aGUgbnVtYmVyIG9mIHN0eWxlc1xuICogaW4gdGhlIGdyb3VwLCBpLmUuIDIgd2hlbiBhbiBpbWFnZSBhbmQgYSB0ZXh0IGFyZSBncm91cGVkLCBvciAxIG90aGVyd2lzZS5cbiAqIEluIGFkZGl0aW9uIHRvIHRoZXNlIGZvdXIgZWxlbWVudHMsIGRlY2x1dHRlciBpbnN0cnVjdGlvbiBhcnJheXMgKGkuZS4gdGhlXG4gKiBhcmd1bWVudHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvY2FudmFzfmRyYXdJbWFnZX0gYXJlIGFwcGVuZGVkIHRvIHRoZSBhcnJheS5cbiAqIEB0eXBlZGVmIHtBcnJheTwqPn0gRGVjbHV0dGVyR3JvdXBcbiAqL1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0RmlsbFN0eWxlID0gWzAsIDAsIDAsIDFdO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lQ2FwID0gJ3JvdW5kJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoT2Zmc2V0ID0gMDtcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRNaXRlckxpbWl0ID0gMTA7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSBbMCwgMCwgMCwgMV07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVXaWR0aCA9IDE7XG5cblxuLyoqXG4gKiBUaGUgbGFiZWwgY2FjaGUgZm9yIHRleHQgcmVuZGVyaW5nLiBUbyBjaGFuZ2UgdGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBvZiAyMDQ4XG4gKiBlbnRyaWVzLCB1c2Uge0BsaW5rIG1vZHVsZTpvbC9zdHJ1Y3RzL0xSVUNhY2hlI3NldFNpemV9LlxuICogQHR5cGUge0xSVUNhY2hlPEhUTUxDYW52YXNFbGVtZW50Pn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IExSVUNhY2hlKCk7XG5cblxuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0ge307XG5cblxuLyoqXG4gKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICovXG52YXIgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuXG5cbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIHRleHRIZWlnaHRzID0ge307XG5cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGxhYmVsIGNhY2hlIHdoZW4gYSBmb250IGJlY29tZXMgYXZhaWxhYmxlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIENTUyBmb250IHNwZWMuXG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tGb250ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgcmV0cmllcyA9IDYwO1xuICB2YXIgY2hlY2tlZCA9IGNoZWNrZWRGb250cztcbiAgdmFyIHNpemUgPSAnMzJweCAnO1xuICB2YXIgcmVmZXJlbmNlRm9udHMgPSBbJ21vbm9zcGFjZScsICdzZXJpZiddO1xuICB2YXIgbGVuID0gcmVmZXJlbmNlRm9udHMubGVuZ3RoO1xuICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICB2YXIgaW50ZXJ2YWwsIHJlZmVyZW5jZVdpZHRoO1xuXG4gIGZ1bmN0aW9uIGlzQXZhaWxhYmxlKGZvbnQpIHtcbiAgICB2YXIgY29udGV4dCA9IGdldE1lYXN1cmVDb250ZXh0KCk7XG4gICAgLy8gQ2hlY2sgd2VpZ2h0IHJhbmdlcyBhY2NvcmRpbmcgdG9cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQjRmFsbGJhY2tfd2VpZ2h0c1xuICAgIGZvciAodmFyIHdlaWdodCA9IDEwMDsgd2VpZ2h0IDw9IDcwMDsgd2VpZ2h0ICs9IDMwMCkge1xuICAgICAgdmFyIGZvbnRXZWlnaHQgPSB3ZWlnaHQgKyAnICc7XG4gICAgICB2YXIgYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHJlZmVyZW5jZUZvbnQgPSByZWZlcmVuY2VGb250c1tpXTtcbiAgICAgICAgY29udGV4dC5mb250ID0gZm9udFdlaWdodCArIHNpemUgKyByZWZlcmVuY2VGb250O1xuICAgICAgICByZWZlcmVuY2VXaWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XG4gICAgICAgIGlmIChmb250ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICBjb250ZXh0LmZvbnQgPSBmb250V2VpZ2h0ICsgc2l6ZSArIGZvbnQgKyAnLCcgKyByZWZlcmVuY2VGb250O1xuICAgICAgICAgIHZhciB3aWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XG4gICAgICAgICAgLy8gSWYgd2lkdGggYW5kIHJlZmVyZW5jZVdpZHRoIGFyZSB0aGUgc2FtZSwgdGhlbiB0aGUgZmFsbGJhY2sgd2FzIHVzZWRcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIHRoZSBmb250IHdlIHdhbnRlZCwgc28gdGhlIGZvbnQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgICBhdmFpbGFibGUgPSBhdmFpbGFibGUgJiYgd2lkdGggIT0gcmVmZXJlbmNlV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgLy8gQ29uc2lkZXIgZm9udCBhdmFpbGFibGUgd2hlbiBpdCBpcyBhdmFpbGFibGUgaW4gb25lIHdlaWdodCByYW5nZS5cbiAgICAgICAgLy9GSVhNRSBXaXRoIHRoaXMgd2UgbWlzcyByYXJlIGNvcm5lciBjYXNlcywgc28gd2Ugc2hvdWxkIGNvbnNpZGVyXG4gICAgICAgIC8vRklYTUUgY2hlY2tpbmcgYXZhaWxhYmlsaXR5IGZvciBlYWNoIHJlcXVlc3RlZCB3ZWlnaHQgcmFuZ2UuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICB2YXIgZG9uZSA9IHRydWU7XG4gICAgZm9yICh2YXIgZm9udCBpbiBjaGVja2VkKSB7XG4gICAgICBpZiAoY2hlY2tlZFtmb250XSA8IHJldHJpZXMpIHtcbiAgICAgICAgaWYgKGlzQXZhaWxhYmxlKGZvbnQpKSB7XG4gICAgICAgICAgY2hlY2tlZFtmb250XSA9IHJldHJpZXM7XG4gICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGxvYWRlZCBmb250cyBhcmUgcGlja2VkIHVwIGJ5IFNhZmFyaVxuICAgICAgICAgIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICBsYWJlbENhY2hlLmNsZWFyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKytjaGVja2VkW2ZvbnRdO1xuICAgICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZG9uZSkge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICBpbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oZm9udFNwZWMpIHtcbiAgICB2YXIgZm9udEZhbWlsaWVzID0gZ2V0Rm9udEZhbWlsaWVzKGZvbnRTcGVjKTtcbiAgICBpZiAoIWZvbnRGYW1pbGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250RmFtaWxpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGZvbnRGYW1pbHkgPSBmb250RmFtaWxpZXNbaV07XG4gICAgICBpZiAoIShmb250RmFtaWx5IGluIGNoZWNrZWQpKSB7XG4gICAgICAgIGNoZWNrZWRbZm9udEZhbWlseV0gPSByZXRyaWVzO1xuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKGZvbnRGYW1pbHkpKSB7XG4gICAgICAgICAgY2hlY2tlZFtmb250RmFtaWx5XSA9IDA7XG4gICAgICAgICAgaWYgKGludGVydmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2hlY2ssIDMyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59KSgpO1xuXG5cbi8qKlxuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBNZWFzdXJlIGNvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIGdldE1lYXN1cmVDb250ZXh0KCkge1xuICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gTWVhc3VyZW1lbnQuXG4gKi9cbmV4cG9ydCB2YXIgbWVhc3VyZVRleHRIZWlnaHQgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBzcGFuO1xuICB2YXIgaGVpZ2h0cyA9IHRleHRIZWlnaHRzO1xuICByZXR1cm4gZnVuY3Rpb24oZm9udCkge1xuICAgIHZhciBoZWlnaHQgPSBoZWlnaHRzW2ZvbnRdO1xuICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXNwYW4pIHtcbiAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9ICdNJztcbiAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW4gPSBzcGFuLnN0eWxlLnBhZGRpbmcgPSAnMCAhaW1wb3J0YW50JztcbiAgICAgICAgc3Bhbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSAhaW1wb3J0YW50JztcbiAgICAgICAgc3Bhbi5zdHlsZS5sZWZ0ID0gJy05OTk5OXB4ICFpbXBvcnRhbnQnO1xuICAgICAgfVxuICAgICAgc3Bhbi5zdHlsZS5mb250ID0gZm9udDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICBoZWlnaHQgPSBoZWlnaHRzW2ZvbnRdID0gc3Bhbi5vZmZzZXRIZWlnaHQ7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNwYW4pO1xuICAgIH1cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9O1xufSkoKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICB2YXIgbWVhc3VyZUNvbnRleHQgPSBnZXRNZWFzdXJlQ29udGV4dCgpO1xuICBpZiAoZm9udCAhPSBtZWFzdXJlQ29udGV4dC5mb250KSB7XG4gICAgbWVhc3VyZUNvbnRleHQuZm9udCA9IGZvbnQ7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIFggb2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFkgWSBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xuICBpZiAocm90YXRpb24gIT09IDApIHtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgY29udGV4dC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgfVxufVxuXG5cbmV4cG9ydCB2YXIgcmVzZXRUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18bnVsbH0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZShjb250ZXh0LFxuICB0cmFuc2Zvcm0sIG9wYWNpdHksIGltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCBzY2FsZSkge1xuICB2YXIgYWxwaGE7XG4gIGlmIChvcGFjaXR5ICE9IDEpIHtcbiAgICBhbHBoYSA9IGNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhICogb3BhY2l0eTtcbiAgfVxuICBpZiAodHJhbnNmb3JtKSB7XG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgfVxuXG4gIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCB3ICogc2NhbGUsIGggKiBzY2FsZSk7XG5cbiAgaWYgKGFscGhhKSB7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICB9XG4gIGlmICh0cmFuc2Zvcm0pIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCByZXNldFRyYW5zZm9ybSk7XG4gIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FudmFzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb2xvclxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBBIGNvbG9yIHJlcHJlc2VudGVkIGFzIGEgc2hvcnQgYXJyYXkgW3JlZCwgZ3JlZW4sIGJsdWUsIGFscGhhXS5cbiAqIHJlZCwgZ3JlZW4sIGFuZCBibHVlIHNob3VsZCBiZSBpbnRlZ2VycyBpbiB0aGUgcmFuZ2UgMC4uMjU1IGluY2x1c2l2ZS5cbiAqIGFscGhhIHNob3VsZCBiZSBhIGZsb2F0IGluIHRoZSByYW5nZSAwLi4xIGluY2x1c2l2ZS4gSWYgbm8gYWxwaGEgdmFsdWUgaXNcbiAqIGdpdmVuIHRoZW4gYDFgIHdpbGwgYmUgdXNlZC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb2xvclxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIEhFWF9DT0xPUl9SRV8gPSAvXiMoW2EtZjAtOV17M318W2EtZjAtOV17NH0oPzpbYS1mMC05XXsyfSl7MCwyfSkkL2k7XG5cblxuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX0NPTE9SX1JFXyA9IC9eKFthLXpdKikkL2k7XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gbmFtZWQgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3IgTmFtZWQgY29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZyb21OYW1lZChjb2xvcikge1xuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgaWYgKGVsLnN0eWxlLmNvbG9yICE9PSAnJykge1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIHZhciByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgICByZXR1cm4gcmdiO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5leHBvcnQgdmFyIGZyb21TdHJpbmcgPSAoXG4gIGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAgIC8vIGFyYml0cmFyeSAyNSUgb2YgdGhlIGVudHJpZXMuXG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHZhciBNQVhfQ0FDSEVfU0laRSA9IDEwMjQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQ29sb3I+fVxuICAgICAqL1xuICAgIHZhciBjYWNoZSA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGVTaXplID0gMDtcblxuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgICAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24ocykge1xuICAgICAgICB2YXIgY29sb3I7XG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShzKSkge1xuICAgICAgICAgIGNvbG9yID0gY2FjaGVbc107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAtLWNhY2hlU2l6ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb2xvciA9IGZyb21TdHJpbmdJbnRlcm5hbF8ocyk7XG4gICAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgICArK2NhY2hlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgICB9XG4gICAgKTtcblxuICB9KSgpO1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gYXJyYXkuIFRoaXMgZnVuY3Rpb24gbWFpbnRhaW5zIGEgY2FjaGUgb2YgY2FsY3VsYXRlZFxuICogYXJyYXlzIHdoaWNoIG1lYW5zIHRoZSByZXN1bHQgc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXkoY29sb3IpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKGNvbG9yKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICB2YXIgciwgZywgYiwgYSwgY29sb3I7XG5cbiAgaWYgKE5BTUVEX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgcyA9IGZyb21OYW1lZChzKTtcbiAgfVxuXG4gIGlmIChIRVhfQ09MT1JfUkVfLmV4ZWMocykpIHsgLy8gaGV4XG4gICAgdmFyIG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgdmFyIGQ7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICBpZiAobiA8PSA0KSB7XG4gICAgICBkID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZCA9IDI7XG4gICAgfVxuICAgIHZhciBoYXNBbHBoYSA9IG4gPT09IDQgfHwgbiA9PT0gODtcbiAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgYiA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAyICogZCwgZCksIDE2KTtcbiAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEgPSAyNTU7XG4gICAgfVxuICAgIGlmIChkID09IDEpIHtcbiAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICBhID0gKGEgPDwgNCkgKyBhO1xuICAgICAgfVxuICAgIH1cbiAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgfSBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYmEoJykgPT0gMCkgeyAvLyByZ2JhKClcbiAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYignKSA9PSAwKSB7IC8vIHJnYigpXG4gICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgIGNvbG9yLnB1c2goMSk7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuXG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMV0gPSBjbGFtcCgoY29sb3JbMV0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gIHJldHVybiBjb2xvcjtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhjb2xvcikge1xuICB2YXIgciA9IGNvbG9yWzBdO1xuICBpZiAociAhPSAociB8IDApKSB7XG4gICAgciA9IChyICsgMC41KSB8IDA7XG4gIH1cbiAgdmFyIGcgPSBjb2xvclsxXTtcbiAgaWYgKGcgIT0gKGcgfCAwKSkge1xuICAgIGcgPSAoZyArIDAuNSkgfCAwO1xuICB9XG4gIHZhciBiID0gY29sb3JbMl07XG4gIGlmIChiICE9IChiIHwgMCkpIHtcbiAgICBiID0gKGIgKyAwLjUpIHwgMDtcbiAgfVxuICB2YXIgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogY29sb3JbM107XG4gIHJldHVybiAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sb3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbG9ybGlrZVxuICovXG5pbXBvcnQge3RvU3RyaW5nfSBmcm9tICcuL2NvbG9yLmpzJztcblxuXG4vKipcbiAqIEEgdHlwZSBhY2NlcHRlZCBieSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuZmlsbFN0eWxlXG4gKiBvciBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuc3Ryb2tlU3R5bGUuXG4gKiBSZXByZXNlbnRzIGEgY29sb3IsIHBhdHRlcm4sIG9yIGdyYWRpZW50LiBUaGUgb3JpZ2luIGZvciBwYXR0ZXJucyBhbmRcbiAqIGdyYWRpZW50cyBhcyBmaWxsIHN0eWxlIGlzIGFuIGluY3JlbWVudCBvZiA1MTIgY3NzIHBpeGVscyBmcm9tIG1hcCBjb29yZGluYXRlXG4gKiBgWzAsIDBdYC4gRm9yIHNlYW1sZXNzIHJlcGVhdCBwYXR0ZXJucywgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgcGF0dGVybiBpbWFnZVxuICogbXVzdCBiZSBhIGZhY3RvciBvZiB0d28gKDIsIDQsIDgsIC4uLiwgNTEyKS5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfENhbnZhc1BhdHRlcm58Q2FudmFzR3JhZGllbnR9IENvbG9yTGlrZVxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29sb3IuanNcIikuQ29sb3J8Q29sb3JMaWtlfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yTGlrZX0gVGhlIGNvbG9yIGFzIGFuIHtAbGluayBvbC9jb2xvcmxpa2V+Q29sb3JMaWtlfS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQ29sb3JMaWtlKGNvbG9yKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9ybGlrZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL1ZlY3RvckNvbnRleHRcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRleHQgZm9yIGRyYXdpbmcgZ2VvbWV0cmllcy4gIEEgdmVjdG9yIGNvbnRleHQgaXMgYXZhaWxhYmxlIG9uIHJlbmRlclxuICogZXZlbnRzIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LlxuICogQGFwaVxuICovXG52YXIgVmVjdG9yQ29udGV4dCA9IGZ1bmN0aW9uIFZlY3RvckNvbnRleHQgKCkge307XG5cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdDdXN0b20gPSBmdW5jdGlvbiBkcmF3Q3VzdG9tIChnZW9tZXRyeSwgZmVhdHVyZSwgcmVuZGVyZXIpIHt9O1xuXG4vKipcbiAqIFJlbmRlciBhIGdlb21ldHJ5LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkgdG8gcmVuZGVyLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3R2VvbWV0cnkgPSBmdW5jdGlvbiBkcmF3R2VvbWV0cnkgKGdlb21ldHJ5KSB7fTtcblxuLyoqXG4gKiBTZXQgdGhlIHJlbmRlcmluZyBzdHlsZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFRoZSByZW5kZXJpbmcgc3R5bGUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUgKHN0eWxlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZUdlb21ldHJ5IENpcmNsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiBkcmF3Q2lyY2xlIChjaXJjbGVHZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdGZWF0dXJlID0gZnVuY3Rpb24gZHJhd0ZlYXR1cmUgKGZlYXR1cmUsIHN0eWxlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5IEdlb21ldHJ5IGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3R2VvbWV0cnlDb2xsZWN0aW9uID0gZnVuY3Rpb24gZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiAoZ2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGxpbmVTdHJpbmdHZW9tZXRyeSBMaW5lIHN0cmluZyBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd0xpbmVTdHJpbmcgKGxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAobXVsdGlMaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9pbnRHZW9tZXRyeSBNdWx0aVBvaW50IGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2ludCAobXVsdGlQb2ludEdlb21ldHJ5LCBmZWF0dXJlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IG11bHRpUG9seWdvbkdlb21ldHJ5IE11bHRpUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cblZlY3RvckNvbnRleHQucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2x5Z29uIChtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvaW50R2VvbWV0cnkgUG9pbnQgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiBkcmF3UG9pbnQgKHBvaW50R2VvbWV0cnksIGZlYXR1cmUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IHBvbHlnb25HZW9tZXRyeSBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5kcmF3VGV4dCA9IGZ1bmN0aW9uIGRyYXdUZXh0IChnZW9tZXRyeSwgZmVhdHVyZSkge307XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IGZpbGxTdHlsZSBGaWxsIHN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlU3R5bGUgU3Ryb2tlIHN0eWxlLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvSW1hZ2UuanNcIikuZGVmYXVsdH0gaW1hZ2VTdHlsZSBJbWFnZSBzdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXA9fSBvcHRfZGVjbHV0dGVyR3JvdXAgRGVjbHV0dGVyLlxuICovXG5WZWN0b3JDb250ZXh0LnByb3RvdHlwZS5zZXRJbWFnZVN0eWxlID0gZnVuY3Rpb24gc2V0SW1hZ2VTdHlsZSAoaW1hZ2VTdHlsZSwgb3B0X2RlY2x1dHRlckdyb3VwKSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1RleHQuanNcIikuZGVmYXVsdH0gdGV4dFN0eWxlIFRleHQgc3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPX0gb3B0X2RlY2x1dHRlckdyb3VwIERlY2x1dHRlci5cbiAqL1xuVmVjdG9yQ29udGV4dC5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gc2V0VGV4dFN0eWxlICh0ZXh0U3R5bGUsIG9wdF9kZWNsdXR0ZXJHcm91cCkge307XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvckNvbnRleHQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckNvbnRleHQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1tZWRpYXRlXG4gKi9cbi8vIEZJWE1FIHRlc3QsIGVzcGVjaWFsbHkgcG9seWdvbnMgd2l0aCBob2xlcyBhbmQgbXVsdGlwb2x5Z29uc1xuLy8gRklYTUUgbmVlZCB0byBoYW5kbGUgbGFyZ2UgdGhpY2sgZmVhdHVyZXMgKHdoZXJlIHBpeGVsIHNpemUgbWF0dGVycylcbi8vIEZJWE1FIGFkZCBvZmZzZXQgYW5kIGVuZCB0byBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtfnRyYW5zZm9ybTJEP1xuXG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHthc0NvbG9yTGlrZX0gZnJvbSAnLi4vLi4vY29sb3JsaWtlLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi4vLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm1HZW9tMkR9IGZyb20gJy4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm0yRH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge0NBTlZBU19MSU5FX0RBU0h9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQgVmVjdG9yQ29udGV4dCBmcm9tICcuLi9WZWN0b3JDb250ZXh0LmpzJztcbmltcG9ydCB7ZGVmYXVsdFRleHRBbGlnbiwgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVEYXNoT2Zmc2V0LCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QmFzZWxpbmUsIGRlZmF1bHRGb250fSBmcm9tICcuLi9jYW52YXMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb25jcmV0ZSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9WZWN0b3JDb250ZXh0fSB0aGF0IGltcGxlbWVudHNcbiAqIGRpcmVjdCByZW5kZXJpbmcgb2YgZmVhdHVyZXMgYW5kIGdlb21ldHJpZXMgdG8gYW4gSFRNTDUgQ2FudmFzIGNvbnRleHQuXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCBpbnRlcm5hbGx5IGJ5IHRoZSBsaWJyYXJ5IGFuZFxuICogcHJvdmlkZWQgdG8gYXBwbGljYXRpb24gY29kZSBhcyB2ZWN0b3JDb250ZXh0IG1lbWJlciBvZiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50fSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHBvc3Rjb21wb3NlLCBwcmVjb21wb3NlIGFuZFxuICogcmVuZGVyIGV2ZW50cyBlbWl0dGVkIGJ5IGxheWVycyBhbmQgbWFwcy5cbiAqL1xudmFyIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVmVjdG9yQ29udGV4dCkge1xuICBmdW5jdGlvbiBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcihjb250ZXh0LCBwaXhlbFJhdGlvLCBleHRlbnQsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uKSB7XG4gICAgVmVjdG9yQ29udGV4dC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dF8gPSBjb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBleHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNmb3JtXyA9IHRyYW5zZm9ybTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRGaWxsU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dFRleHRTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlQW5jaG9yWF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VBbmNob3JZXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZUhlaWdodF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VPcGFjaXR5XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZU9yaWdpblhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlT3JpZ2luWV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVJvdGF0aW9uXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVNjYWxlXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVdpZHRoXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50ZXh0XyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dE9mZnNldFhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRPZmZzZXRZXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0aW9uXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50ZXh0U2NhbGVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMudGV4dEZpbGxTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGV9XG4gICAgICovXG4gICAgdGhpcy50ZXh0U3RhdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcExvY2FsVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gIH1cblxuICBpZiAoIFZlY3RvckNvbnRleHQgKSBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5fX3Byb3RvX18gPSBWZWN0b3JDb250ZXh0O1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBWZWN0b3JDb250ZXh0ICYmIFZlY3RvckNvbnRleHQucHJvdG90eXBlICk7XG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdJbWFnZXNfID0gZnVuY3Rpb24gZHJhd0ltYWdlc18gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm0yRChcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIDIsIHRoaXMudHJhbnNmb3JtXyxcbiAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLnRtcExvY2FsVHJhbnNmb3JtXztcbiAgICB2YXIgYWxwaGEgPSBjb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhICogdGhpcy5pbWFnZU9wYWNpdHlfO1xuICAgIH1cbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLmltYWdlUm90YXRpb25fO1xuICAgIGlmICh0aGlzLmltYWdlUm90YXRlV2l0aFZpZXdfKSB7XG4gICAgICByb3RhdGlvbiArPSB0aGlzLnZpZXdSb3RhdGlvbl87XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBpeGVsQ29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgdmFyIHggPSBwaXhlbENvb3JkaW5hdGVzW2ldIC0gdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgdmFyIHkgPSBwaXhlbENvb3JkaW5hdGVzW2kgKyAxXSAtIHRoaXMuaW1hZ2VBbmNob3JZXztcbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCB8fCB0aGlzLmltYWdlU2NhbGVfICE9IDEpIHtcbiAgICAgICAgdmFyIGNlbnRlclggPSB4ICsgdGhpcy5pbWFnZUFuY2hvclhfO1xuICAgICAgICB2YXIgY2VudGVyWSA9IHkgKyB0aGlzLmltYWdlQW5jaG9yWV87XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0obG9jYWxUcmFuc2Zvcm0sXG4gICAgICAgICAgY2VudGVyWCwgY2VudGVyWSxcbiAgICAgICAgICB0aGlzLmltYWdlU2NhbGVfLCB0aGlzLmltYWdlU2NhbGVfLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIC1jZW50ZXJYLCAtY2VudGVyWSk7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmltYWdlT3JpZ2luWF8sIHRoaXMuaW1hZ2VPcmlnaW5ZXyxcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoXywgdGhpcy5pbWFnZUhlaWdodF8sIHgsIHksXG4gICAgICAgIHRoaXMuaW1hZ2VXaWR0aF8sIHRoaXMuaW1hZ2VIZWlnaHRfKTtcbiAgICB9XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8IHRoaXMuaW1hZ2VTY2FsZV8gIT0gMSkge1xuICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmltYWdlT3BhY2l0eV8gIT0gMSkge1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3VGV4dF8gPSBmdW5jdGlvbiBkcmF3VGV4dF8gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGlmICghdGhpcy50ZXh0U3RhdGVfIHx8IHRoaXMudGV4dF8gPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnRleHRGaWxsU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMudGV4dEZpbGxTdGF0ZV8pO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0U3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy50ZXh0U3Ryb2tlU3RhdGVfKTtcbiAgICB9XG4gICAgdGhpcy5zZXRDb250ZXh0VGV4dFN0YXRlXyh0aGlzLnRleHRTdGF0ZV8pO1xuICAgIHZhciBwaXhlbENvb3JkaW5hdGVzID0gdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRoaXMudHJhbnNmb3JtXyxcbiAgICAgIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLnRleHRSb3RhdGlvbl87XG4gICAgaWYgKHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3Xykge1xuICAgICAgcm90YXRpb24gKz0gdGhpcy52aWV3Um90YXRpb25fO1xuICAgIH1cbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgeCA9IHBpeGVsQ29vcmRpbmF0ZXNbb2Zmc2V0XSArIHRoaXMudGV4dE9mZnNldFhfO1xuICAgICAgdmFyIHkgPSBwaXhlbENvb3JkaW5hdGVzW29mZnNldCArIDFdICsgdGhpcy50ZXh0T2Zmc2V0WV87XG4gICAgICBpZiAocm90YXRpb24gIT09IDAgfHwgdGhpcy50ZXh0U2NhbGVfICE9IDEpIHtcbiAgICAgICAgdmFyIGxvY2FsVHJhbnNmb3JtID0gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRtcExvY2FsVHJhbnNmb3JtXyxcbiAgICAgICAgICB4LCB5LFxuICAgICAgICAgIHRoaXMudGV4dFNjYWxlXywgdGhpcy50ZXh0U2NhbGVfLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIC14LCAteSk7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnRleHRTdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KHRoaXMudGV4dF8sIHgsIHkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudGV4dEZpbGxTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5maWxsVGV4dCh0aGlzLnRleHRfLCB4LCB5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwIHx8IHRoaXMudGV4dFNjYWxlXyAhPSAxKSB7XG4gICAgICBjb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2UgQ2xvc2UuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn0gZW5kIEVuZC5cbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5tb3ZlVG9MaW5lVG9fID0gZnVuY3Rpb24gbW92ZVRvTGluZVRvXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjbG9zZSkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybTJEKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0aGlzLnRyYW5zZm9ybV8sXG4gICAgICB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICBjb250ZXh0Lm1vdmVUbyhwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdKTtcbiAgICB2YXIgbGVuZ3RoID0gcGl4ZWxDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgaWYgKGNsb3NlKSB7XG4gICAgICBsZW5ndGggLT0gMjtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBsZW5ndGg7IGkgKz0gMikge1xuICAgICAgY29udGV4dC5saW5lVG8ocGl4ZWxDb29yZGluYXRlc1tpXSwgcGl4ZWxDb29yZGluYXRlc1tpICsgMV0pO1xuICAgIH1cbiAgICBpZiAoY2xvc2UpIHtcbiAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgfVxuICAgIHJldHVybiBlbmQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdSaW5nc18gPSBmdW5jdGlvbiBkcmF3UmluZ3NfIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvZmZzZXQgPSB0aGlzLm1vdmVUb0xpbmVUb18oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgdHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGNpcmNsZSBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IGZpbGwgYW5kIHN0cm9rZSBzdHlsZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQ2lyY2xlIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiBkcmF3Q2lyY2xlIChnZW9tZXRyeSkge1xuICAgIGlmICghaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWxsU3RhdGVfIHx8IHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICBpZiAodGhpcy5maWxsU3RhdGVfKSB7XG4gICAgICAgIHRoaXMuc2V0Q29udGV4dEZpbGxTdGF0ZV8odGhpcy5maWxsU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgfVxuICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZXMgPSB0cmFuc2Zvcm1HZW9tMkQoXG4gICAgICAgIGdlb21ldHJ5LCB0aGlzLnRyYW5zZm9ybV8sIHRoaXMucGl4ZWxDb29yZGluYXRlc18pO1xuICAgICAgdmFyIGR4ID0gcGl4ZWxDb29yZGluYXRlc1syXSAtIHBpeGVsQ29vcmRpbmF0ZXNbMF07XG4gICAgICB2YXIgZHkgPSBwaXhlbENvb3JkaW5hdGVzWzNdIC0gcGl4ZWxDb29yZGluYXRlc1sxXTtcbiAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGNvbnRleHQuYXJjKFxuICAgICAgICBwaXhlbENvb3JkaW5hdGVzWzBdLCBwaXhlbENvb3JkaW5hdGVzWzFdLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgIGlmICh0aGlzLmZpbGxTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhnZW9tZXRyeS5nZXRDZW50ZXIoKSwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJlbmRlcmluZyBzdHlsZS4gIE5vdGUgdGhhdCBzaW5jZSB0aGlzIGlzIGFuIGltbWVkaWF0ZSByZW5kZXJpbmcgQVBJLFxuICAgKiBhbnkgYHpJbmRleGAgb24gdGhlIHByb3ZpZGVkIHN0eWxlIHdpbGwgYmUgaWdub3JlZC5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBUaGUgcmVuZGVyaW5nIHN0eWxlLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUgKHN0eWxlKSB7XG4gICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGUoc3R5bGUuZ2V0RmlsbCgpLCBzdHlsZS5nZXRTdHJva2UoKSk7XG4gICAgdGhpcy5zZXRJbWFnZVN0eWxlKHN0eWxlLmdldEltYWdlKCkpO1xuICAgIHRoaXMuc2V0VGV4dFN0eWxlKHN0eWxlLmdldFRleHQoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIENhbGxcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZSNzZXRTdHlsZX0gZmlyc3QgdG8gc2V0IHRoZSByZW5kZXJpbmcgc3R5bGUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5IHRvIHJlbmRlci5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3R2VvbWV0cnkgPSBmdW5jdGlvbiBkcmF3R2VvbWV0cnkgKGdlb21ldHJ5KSB7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgdGhpcy5kcmF3UG9pbnQoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICB0aGlzLmRyYXdMaW5lU3RyaW5nKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046XG4gICAgICAgIHRoaXMuZHJhd1BvbHlnb24oLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIHRoaXMuZHJhd011bHRpUG9pbnQoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpUG9pbnQuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgIHRoaXMuZHJhd011bHRpTGluZVN0cmluZygvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlMaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046XG4gICAgICAgIHRoaXMuZHJhd011bHRpUG9seWdvbigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046XG4gICAgICAgIHRoaXMuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIGZlYXR1cmUgaW50byB0aGUgY2FudmFzLiAgTm90ZSB0aGF0IGFueSBgekluZGV4YCBvbiB0aGUgcHJvdmlkZWRcbiAgICogc3R5bGUgd2lsbCBiZSBpZ25vcmVkIC0gZmVhdHVyZXMgYXJlIHJlbmRlcmVkIGltbWVkaWF0ZWx5IGluIHRoZSBvcmRlciB0aGF0XG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZC4gIElmIHlvdSBuZWVkIGB6SW5kZXhgIHN1cHBvcnQsIHlvdSBzaG91bGQgYmUgdXNpbmcgYW5cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9WZWN0b3J+VmVjdG9yTGF5ZXJ9IGluc3RlYWQuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0ZlYXR1cmUgPSBmdW5jdGlvbiBkcmF3RmVhdHVyZSAoZmVhdHVyZSwgc3R5bGUpIHtcbiAgICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gICAgaWYgKCFnZW9tZXRyeSB8fCAhaW50ZXJzZWN0cyh0aGlzLmV4dGVudF8sIGdlb21ldHJ5LmdldEV4dGVudCgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0eWxlKHN0eWxlKTtcbiAgICB0aGlzLmRyYXdHZW9tZXRyeShnZW9tZXRyeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIEdlb21ldHJ5Q29sbGVjdGlvbiB0byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmRcbiAgICogdXNlcyB0aGUgY3VycmVudCBzdHlsZXMgYXBwcm9wcmlhdGUgZm9yIGVhY2ggZ2VvbWV0cnkgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkgY29sbGVjdGlvbi5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0dlb21ldHJ5Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIGRyYXdHZW9tZXRyeUNvbGxlY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSBnZW9tZXRyeS5nZXRHZW9tZXRyaWVzQXJyYXkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHRoaXMuZHJhd0dlb21ldHJ5KGdlb21ldHJpZXNbaV0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgUG9pbnQgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZSBhbmQgdXNlc1xuICAgKiB0aGUgY3VycmVudCBzdHlsZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBQb2ludCBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvaW50ID0gZnVuY3Rpb24gZHJhd1BvaW50IChnZW9tZXRyeSkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgaWYgKHRoaXMuaW1hZ2VfKSB7XG4gICAgICB0aGlzLmRyYXdJbWFnZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGV4dF8gIT09ICcnKSB7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBNdWx0aVBvaW50IGdlb21ldHJ5ICBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZFxuICAgKiB1c2VzIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlQb2ludCBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd011bHRpUG9pbnQgPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2ludCAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIGlmICh0aGlzLmltYWdlXykge1xuICAgICAgdGhpcy5kcmF3SW1hZ2VzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnRleHRfICE9PSAnJykge1xuICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgTGluZVN0cmluZyBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTGluZVN0cmluZyBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiBkcmF3TGluZVN0cmluZyAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgIGdlb21ldHJ5LmdldFN0cmlkZSgpLCBmYWxzZSk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0TWlkcG9pbnQgPSBnZW9tZXRyeS5nZXRGbGF0TWlkcG9pbnQoKTtcbiAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRNaWRwb2ludCwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBNdWx0aUxpbmVTdHJpbmcgZ2VvbWV0cnkgaW50byB0aGUgY2FudmFzLiAgUmVuZGVyaW5nIGlzIGltbWVkaWF0ZVxuICAgKiBhbmQgdXNlcyB0aGUgY3VycmVudCBzdHlsZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlMaW5lU3RyaW5nIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgZ2VvbWV0cnlFeHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeUV4dGVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfKSB7XG4gICAgICB0aGlzLnNldENvbnRleHRTdHJva2VTdGF0ZV8odGhpcy5zdHJva2VTdGF0ZV8pO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICB2YXIgZW5kcyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGdlb21ldHJ5LmdldEVuZHMoKSk7XG4gICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG9mZnNldCA9IHRoaXMubW92ZVRvTGluZVRvXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0TWlkcG9pbnRzID0gZ2VvbWV0cnkuZ2V0RmxhdE1pZHBvaW50cygpO1xuICAgICAgdGhpcy5kcmF3VGV4dF8oZmxhdE1pZHBvaW50cywgMCwgZmxhdE1pZHBvaW50cy5sZW5ndGgsIDIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgUG9seWdvbiBnZW9tZXRyeSBpbnRvIHRoZSBjYW52YXMuICBSZW5kZXJpbmcgaXMgaW1tZWRpYXRlIGFuZCB1c2VzXG4gICAqIHRoZSBjdXJyZW50IHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgUG9seWdvbiBnZW9tZXRyeS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfIHx8IHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMuZmlsbFN0YXRlXyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICB0aGlzLmRyYXdSaW5nc18oZ2VvbWV0cnkuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSxcbiAgICAgICAgMCwgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoZ2VvbWV0cnkuZ2V0RW5kcygpKSwgZ2VvbWV0cnkuZ2V0U3RyaWRlKCkpO1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0SW50ZXJpb3JQb2ludCA9IGdlb21ldHJ5LmdldEZsYXRJbnRlcmlvclBvaW50KCk7XG4gICAgICB0aGlzLmRyYXdUZXh0XyhmbGF0SW50ZXJpb3JQb2ludCwgMCwgMiwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgTXVsdGlQb2x5Z29uIGdlb21ldHJ5IGludG8gdGhlIGNhbnZhcy4gIFJlbmRlcmluZyBpcyBpbW1lZGlhdGUgYW5kXG4gICAqIHVzZXMgdGhlIGN1cnJlbnQgc3R5bGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgTXVsdGlQb2x5Z29uIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3TXVsdGlQb2x5Z29uID0gZnVuY3Rpb24gZHJhd011bHRpUG9seWdvbiAoZ2VvbWV0cnkpIHtcbiAgICBpZiAoIWludGVyc2VjdHModGhpcy5leHRlbnRfLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Ryb2tlU3RhdGVfIHx8IHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICB0aGlzLnNldENvbnRleHRGaWxsU3RhdGVfKHRoaXMuZmlsbFN0YXRlXyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdHJva2VTdGF0ZV8pIHtcbiAgICAgICAgdGhpcy5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfKHRoaXMuc3Ryb2tlU3RhdGVfKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICB2YXIgZW5kc3MgPSBnZW9tZXRyeS5nZXRFbmRzcygpO1xuICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3UmluZ3NfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZmlsbFN0YXRlXykge1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0cm9rZVN0YXRlXykge1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50ZXh0XyAhPT0gJycpIHtcbiAgICAgIHZhciBmbGF0SW50ZXJpb3JQb2ludHMgPSBnZW9tZXRyeS5nZXRGbGF0SW50ZXJpb3JQb2ludHMoKTtcbiAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRJbnRlcmlvclBvaW50cywgMCwgZmxhdEludGVyaW9yUG9pbnRzLmxlbmd0aCwgMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9IGZpbGxTdGF0ZSBGaWxsIHN0YXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldENvbnRleHRGaWxsU3RhdGVfID0gZnVuY3Rpb24gc2V0Q29udGV4dEZpbGxTdGF0ZV8gKGZpbGxTdGF0ZSkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0XztcbiAgICB2YXIgY29udGV4dEZpbGxTdGF0ZSA9IHRoaXMuY29udGV4dEZpbGxTdGF0ZV87XG4gICAgaWYgKCFjb250ZXh0RmlsbFN0YXRlKSB7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICB0aGlzLmNvbnRleHRGaWxsU3RhdGVfID0ge1xuICAgICAgICBmaWxsU3R5bGU6IGZpbGxTdGF0ZS5maWxsU3R5bGVcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb250ZXh0RmlsbFN0YXRlLmZpbGxTdHlsZSAhPSBmaWxsU3RhdGUuZmlsbFN0eWxlKSB7XG4gICAgICAgIGNvbnRleHRGaWxsU3RhdGUuZmlsbFN0eWxlID0gY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZmlsbFN0eWxlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGV9IHN0cm9rZVN0YXRlIFN0cm9rZSBzdGF0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRDb250ZXh0U3Ryb2tlU3RhdGVfID0gZnVuY3Rpb24gc2V0Q29udGV4dFN0cm9rZVN0YXRlXyAoc3Ryb2tlU3RhdGUpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dF87XG4gICAgdmFyIGNvbnRleHRTdHJva2VTdGF0ZSA9IHRoaXMuY29udGV4dFN0cm9rZVN0YXRlXztcbiAgICBpZiAoIWNvbnRleHRTdHJva2VTdGF0ZSkge1xuICAgICAgY29udGV4dC5saW5lQ2FwID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfSAqLyAoc3Ryb2tlU3RhdGUubGluZUNhcCk7XG4gICAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHN0cm9rZVN0YXRlLmxpbmVEYXNoKTtcbiAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgfVxuICAgICAgY29udGV4dC5saW5lSm9pbiA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59ICovIChzdHJva2VTdGF0ZS5saW5lSm9pbik7XG4gICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVN0YXRlLmxpbmVXaWR0aDtcbiAgICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQ7XG4gICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICB0aGlzLmNvbnRleHRTdHJva2VTdGF0ZV8gPSB7XG4gICAgICAgIGxpbmVDYXA6IHN0cm9rZVN0YXRlLmxpbmVDYXAsXG4gICAgICAgIGxpbmVEYXNoOiBzdHJva2VTdGF0ZS5saW5lRGFzaCxcbiAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0LFxuICAgICAgICBsaW5lSm9pbjogc3Ryb2tlU3RhdGUubGluZUpvaW4sXG4gICAgICAgIGxpbmVXaWR0aDogc3Ryb2tlU3RhdGUubGluZVdpZHRoLFxuICAgICAgICBtaXRlckxpbWl0OiBzdHJva2VTdGF0ZS5taXRlckxpbWl0LFxuICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGVcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZUNhcCAhPSBzdHJva2VTdGF0ZS5saW5lQ2FwKSB7XG4gICAgICAgIGNvbnRleHRTdHJva2VTdGF0ZS5saW5lQ2FwID0gY29udGV4dC5saW5lQ2FwID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfSAqLyAoc3Ryb2tlU3RhdGUubGluZUNhcCk7XG4gICAgICB9XG4gICAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgICBpZiAoIWVxdWFscyhjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2gsIHN0cm9rZVN0YXRlLmxpbmVEYXNoKSkge1xuICAgICAgICAgIGNvbnRleHQuc2V0TGluZURhc2goY29udGV4dFN0cm9rZVN0YXRlLmxpbmVEYXNoID0gc3Ryb2tlU3RhdGUubGluZURhc2gpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgIT0gc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQpIHtcbiAgICAgICAgICBjb250ZXh0U3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPSBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID1cbiAgICAgICAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUubGluZUpvaW4gIT0gc3Ryb2tlU3RhdGUubGluZUpvaW4pIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLmxpbmVKb2luID0gY29udGV4dC5saW5lSm9pbiA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59ICovIChzdHJva2VTdGF0ZS5saW5lSm9pbik7XG4gICAgICB9XG4gICAgICBpZiAoY29udGV4dFN0cm9rZVN0YXRlLmxpbmVXaWR0aCAhPSBzdHJva2VTdGF0ZS5saW5lV2lkdGgpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLmxpbmVXaWR0aCA9IGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlU3RhdGUubGluZVdpZHRoO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnRleHRTdHJva2VTdGF0ZS5taXRlckxpbWl0ICE9IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLm1pdGVyTGltaXQgPSBjb250ZXh0Lm1pdGVyTGltaXQgPVxuICAgICAgICAgICAgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0U3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgY29udGV4dFN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlID0gY29udGV4dC5zdHJva2VTdHlsZSA9XG4gICAgICAgICAgICBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gdGV4dFN0YXRlIFRleHQgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0Q29udGV4dFRleHRTdGF0ZV8gPSBmdW5jdGlvbiBzZXRDb250ZXh0VGV4dFN0YXRlXyAodGV4dFN0YXRlKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIHZhciBjb250ZXh0VGV4dFN0YXRlID0gdGhpcy5jb250ZXh0VGV4dFN0YXRlXztcbiAgICB2YXIgdGV4dEFsaWduID0gdGV4dFN0YXRlLnRleHRBbGlnbiA/XG4gICAgICB0ZXh0U3RhdGUudGV4dEFsaWduIDogZGVmYXVsdFRleHRBbGlnbjtcbiAgICBpZiAoIWNvbnRleHRUZXh0U3RhdGUpIHtcbiAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAvKiogQHR5cGUge0NhbnZhc1RleHRBbGlnbn0gKi8gKHRleHRBbGlnbik7XG4gICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEJhc2VsaW5lfSAqLyAodGV4dFN0YXRlLnRleHRCYXNlbGluZSk7XG4gICAgICB0aGlzLmNvbnRleHRUZXh0U3RhdGVfID0ge1xuICAgICAgICBmb250OiB0ZXh0U3RhdGUuZm9udCxcbiAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgIHRleHRCYXNlbGluZTogdGV4dFN0YXRlLnRleHRCYXNlbGluZVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRleHRUZXh0U3RhdGUuZm9udCAhPSB0ZXh0U3RhdGUuZm9udCkge1xuICAgICAgICBjb250ZXh0VGV4dFN0YXRlLmZvbnQgPSBjb250ZXh0LmZvbnQgPSB0ZXh0U3RhdGUuZm9udDtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRBbGlnbiAhPSB0ZXh0QWxpZ24pIHtcbiAgICAgICAgY29udGV4dFRleHRTdGF0ZS50ZXh0QWxpZ24gPSBjb250ZXh0LnRleHRBbGlnbiA9IC8qKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufSAqLyAodGV4dEFsaWduKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0VGV4dFN0YXRlLnRleHRCYXNlbGluZSAhPSB0ZXh0U3RhdGUudGV4dEJhc2VsaW5lKSB7XG4gICAgICAgIGNvbnRleHRUZXh0U3RhdGUudGV4dEJhc2VsaW5lID0gY29udGV4dC50ZXh0QmFzZWxpbmUgPVxuICAgICAgICAgIC8qKiBAdHlwZSB7Q2FudmFzVGV4dEJhc2VsaW5lfSAqLyAodGV4dFN0YXRlLnRleHRCYXNlbGluZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGZpbGwgYW5kIHN0cm9rZSBzdHlsZSBmb3Igc3Vic2VxdWVudCBkcmF3IG9wZXJhdGlvbnMuICBUbyBjbGVhclxuICAgKiBlaXRoZXIgZmlsbCBvciBzdHJva2Ugc3R5bGVzLCBwYXNzIG51bGwgZm9yIHRoZSBhcHByb3ByaWF0ZSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBmaWxsU3R5bGUgRmlsbCBzdHlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gc3Ryb2tlU3R5bGUgU3Ryb2tlIHN0eWxlLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyLnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHtcbiAgICBpZiAoIWZpbGxTdHlsZSkge1xuICAgICAgdGhpcy5maWxsU3RhdGVfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZpbGxTdHlsZUNvbG9yID0gZmlsbFN0eWxlLmdldENvbG9yKCk7XG4gICAgICB0aGlzLmZpbGxTdGF0ZV8gPSB7XG4gICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UoZmlsbFN0eWxlQ29sb3IgP1xuICAgICAgICAgIGZpbGxTdHlsZUNvbG9yIDogZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghc3Ryb2tlU3R5bGUpIHtcbiAgICAgIHRoaXMuc3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0cm9rZVN0eWxlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUNhcCA9IHN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVEYXNoID0gc3Ryb2tlU3R5bGUuZ2V0TGluZURhc2goKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0ID0gc3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZUxpbmVKb2luID0gc3Ryb2tlU3R5bGUuZ2V0TGluZUpvaW4oKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZVdpZHRoID0gc3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcbiAgICAgIHZhciBzdHJva2VTdHlsZU1pdGVyTGltaXQgPSBzdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICB0aGlzLnN0cm9rZVN0YXRlXyA9IHtcbiAgICAgICAgbGluZUNhcDogc3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUNhcCA6IGRlZmF1bHRMaW5lQ2FwLFxuICAgICAgICBsaW5lRGFzaDogc3Ryb2tlU3R5bGVMaW5lRGFzaCA/XG4gICAgICAgICAgc3Ryb2tlU3R5bGVMaW5lRGFzaCA6IGRlZmF1bHRMaW5lRGFzaCxcbiAgICAgICAgbGluZURhc2hPZmZzZXQ6IHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gICAgICAgIGxpbmVKb2luOiBzdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTGluZUpvaW4gOiBkZWZhdWx0TGluZUpvaW4sXG4gICAgICAgIGxpbmVXaWR0aDogdGhpcy5waXhlbFJhdGlvXyAqIChzdHJva2VTdHlsZVdpZHRoICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlV2lkdGggOiBkZWZhdWx0TGluZVdpZHRoKSxcbiAgICAgICAgbWl0ZXJMaW1pdDogc3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgIHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICBzdHJva2VTdHlsZTogYXNDb2xvckxpa2Uoc3Ryb2tlU3R5bGVDb2xvciA/XG4gICAgICAgICAgc3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSlcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGltYWdlIHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0byByZW1vdmVcbiAgICogdGhlIGltYWdlIHN0eWxlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3N0eWxlL0ltYWdlLmpzXCIpLmRlZmF1bHR9IGltYWdlU3R5bGUgSW1hZ2Ugc3R5bGUuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiBzZXRJbWFnZVN0eWxlIChpbWFnZVN0eWxlKSB7XG4gICAgaWYgKCFpbWFnZVN0eWxlKSB7XG4gICAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpbWFnZUFuY2hvciA9IGltYWdlU3R5bGUuZ2V0QW5jaG9yKCk7XG4gICAgICAvLyBGSVhNRSBwaXhlbCByYXRpb1xuICAgICAgdmFyIGltYWdlSW1hZ2UgPSBpbWFnZVN0eWxlLmdldEltYWdlKDEpO1xuICAgICAgdmFyIGltYWdlT3JpZ2luID0gaW1hZ2VTdHlsZS5nZXRPcmlnaW4oKTtcbiAgICAgIHZhciBpbWFnZVNpemUgPSBpbWFnZVN0eWxlLmdldFNpemUoKTtcbiAgICAgIHRoaXMuaW1hZ2VBbmNob3JYXyA9IGltYWdlQW5jaG9yWzBdO1xuICAgICAgdGhpcy5pbWFnZUFuY2hvcllfID0gaW1hZ2VBbmNob3JbMV07XG4gICAgICB0aGlzLmltYWdlSGVpZ2h0XyA9IGltYWdlU2l6ZVsxXTtcbiAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2VJbWFnZTtcbiAgICAgIHRoaXMuaW1hZ2VPcGFjaXR5XyA9IGltYWdlU3R5bGUuZ2V0T3BhY2l0eSgpO1xuICAgICAgdGhpcy5pbWFnZU9yaWdpblhfID0gaW1hZ2VPcmlnaW5bMF07XG4gICAgICB0aGlzLmltYWdlT3JpZ2luWV8gPSBpbWFnZU9yaWdpblsxXTtcbiAgICAgIHRoaXMuaW1hZ2VSb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgICB0aGlzLmltYWdlUm90YXRpb25fID0gaW1hZ2VTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgdGhpcy5pbWFnZVNjYWxlXyA9IGltYWdlU3R5bGUuZ2V0U2NhbGUoKSAqIHRoaXMucGl4ZWxSYXRpb187XG4gICAgICB0aGlzLmltYWdlV2lkdGhfID0gaW1hZ2VTaXplWzBdO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB0ZXh0IHN0eWxlIGZvciBzdWJzZXF1ZW50IGRyYXcgb3BlcmF0aW9ucy4gIFBhc3MgbnVsbCB0b1xuICAgKiByZW1vdmUgdGhlIHRleHQgc3R5bGUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc3R5bGUvVGV4dC5qc1wiKS5kZWZhdWx0fSB0ZXh0U3R5bGUgVGV4dCBzdHlsZS5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBDYW52YXNJbW1lZGlhdGVSZW5kZXJlci5wcm90b3R5cGUuc2V0VGV4dFN0eWxlID0gZnVuY3Rpb24gc2V0VGV4dFN0eWxlICh0ZXh0U3R5bGUpIHtcbiAgICBpZiAoIXRleHRTdHlsZSkge1xuICAgICAgdGhpcy50ZXh0XyA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGV4dEZpbGxTdHlsZSA9IHRleHRTdHlsZS5nZXRGaWxsKCk7XG4gICAgICBpZiAoIXRleHRGaWxsU3R5bGUpIHtcbiAgICAgICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGV4dEZpbGxTdHlsZUNvbG9yID0gdGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICB0aGlzLnRleHRGaWxsU3RhdGVfID0ge1xuICAgICAgICAgIGZpbGxTdHlsZTogYXNDb2xvckxpa2UodGV4dEZpbGxTdHlsZUNvbG9yID9cbiAgICAgICAgICAgIHRleHRGaWxsU3R5bGVDb2xvciA6IGRlZmF1bHRGaWxsU3R5bGUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlID0gdGV4dFN0eWxlLmdldFN0cm9rZSgpO1xuICAgICAgaWYgKCF0ZXh0U3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgdGhpcy50ZXh0U3Ryb2tlU3RhdGVfID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA9IHRleHRTdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZUNhcCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lQ2FwKCk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgdmFyIHRleHRTdHJva2VTdHlsZUxpbmVKb2luID0gdGV4dFN0cm9rZVN0eWxlLmdldExpbmVKb2luKCk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlU3R5bGVXaWR0aCA9IHRleHRTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgIHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IHtcbiAgICAgICAgICBsaW5lQ2FwOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lQ2FwICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZUNhcCA6IGRlZmF1bHRMaW5lQ2FwLFxuICAgICAgICAgIGxpbmVEYXNoOiB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA/XG4gICAgICAgICAgICB0ZXh0U3Ryb2tlU3R5bGVMaW5lRGFzaCA6IGRlZmF1bHRMaW5lRGFzaCxcbiAgICAgICAgICBsaW5lRGFzaE9mZnNldDogdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgOiBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgbGluZUpvaW46IHRleHRTdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTGluZUpvaW4gOiBkZWZhdWx0TGluZUpvaW4sXG4gICAgICAgICAgbGluZVdpZHRoOiB0ZXh0U3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHRleHRTdHJva2VTdHlsZVdpZHRoIDogZGVmYXVsdExpbmVXaWR0aCxcbiAgICAgICAgICBtaXRlckxpbWl0OiB0ZXh0U3Ryb2tlU3R5bGVNaXRlckxpbWl0ICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgdGV4dFN0cm9rZVN0eWxlTWl0ZXJMaW1pdCA6IGRlZmF1bHRNaXRlckxpbWl0LFxuICAgICAgICAgIHN0cm9rZVN0eWxlOiBhc0NvbG9yTGlrZSh0ZXh0U3Ryb2tlU3R5bGVDb2xvciA/XG4gICAgICAgICAgICB0ZXh0U3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZXh0Rm9udCA9IHRleHRTdHlsZS5nZXRGb250KCk7XG4gICAgICB2YXIgdGV4dE9mZnNldFggPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WCgpO1xuICAgICAgdmFyIHRleHRPZmZzZXRZID0gdGV4dFN0eWxlLmdldE9mZnNldFkoKTtcbiAgICAgIHZhciB0ZXh0Um90YXRlV2l0aFZpZXcgPSB0ZXh0U3R5bGUuZ2V0Um90YXRlV2l0aFZpZXcoKTtcbiAgICAgIHZhciB0ZXh0Um90YXRpb24gPSB0ZXh0U3R5bGUuZ2V0Um90YXRpb24oKTtcbiAgICAgIHZhciB0ZXh0U2NhbGUgPSB0ZXh0U3R5bGUuZ2V0U2NhbGUoKTtcbiAgICAgIHZhciB0ZXh0VGV4dCA9IHRleHRTdHlsZS5nZXRUZXh0KCk7XG4gICAgICB2YXIgdGV4dFRleHRBbGlnbiA9IHRleHRTdHlsZS5nZXRUZXh0QWxpZ24oKTtcbiAgICAgIHZhciB0ZXh0VGV4dEJhc2VsaW5lID0gdGV4dFN0eWxlLmdldFRleHRCYXNlbGluZSgpO1xuICAgICAgdGhpcy50ZXh0U3RhdGVfID0ge1xuICAgICAgICBmb250OiB0ZXh0Rm9udCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICB0ZXh0Rm9udCA6IGRlZmF1bHRGb250LFxuICAgICAgICB0ZXh0QWxpZ246IHRleHRUZXh0QWxpZ24gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgdGV4dFRleHRBbGlnbiA6IGRlZmF1bHRUZXh0QWxpZ24sXG4gICAgICAgIHRleHRCYXNlbGluZTogdGV4dFRleHRCYXNlbGluZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICB0ZXh0VGV4dEJhc2VsaW5lIDogZGVmYXVsdFRleHRCYXNlbGluZVxuICAgICAgfTtcbiAgICAgIHRoaXMudGV4dF8gPSB0ZXh0VGV4dCAhPT0gdW5kZWZpbmVkID8gdGV4dFRleHQgOiAnJztcbiAgICAgIHRoaXMudGV4dE9mZnNldFhfID1cbiAgICAgICAgICB0ZXh0T2Zmc2V0WCAhPT0gdW5kZWZpbmVkID8gKHRoaXMucGl4ZWxSYXRpb18gKiB0ZXh0T2Zmc2V0WCkgOiAwO1xuICAgICAgdGhpcy50ZXh0T2Zmc2V0WV8gPVxuICAgICAgICAgIHRleHRPZmZzZXRZICE9PSB1bmRlZmluZWQgPyAodGhpcy5waXhlbFJhdGlvXyAqIHRleHRPZmZzZXRZKSA6IDA7XG4gICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPSB0ZXh0Um90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/IHRleHRSb3RhdGVXaXRoVmlldyA6IGZhbHNlO1xuICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyB0ZXh0Um90YXRpb24gOiAwO1xuICAgICAgdGhpcy50ZXh0U2NhbGVfID0gdGhpcy5waXhlbFJhdGlvXyAqICh0ZXh0U2NhbGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIHRleHRTY2FsZSA6IDEpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXI7XG59KFZlY3RvckNvbnRleHQpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1tZWRpYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZVxuICovXG5pbXBvcnQge2FzU3RyaW5nfSBmcm9tICcuLi9jb2xvci5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2luZ2xldG9uIGNsYXNzLiBBdmFpbGFibGUgdGhyb3VnaCB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlfnNoYXJlZH0uXG4gKi9cbnZhciBJY29uSW1hZ2VDYWNoZSA9IGZ1bmN0aW9uIEljb25JbWFnZUNhY2hlKCkge1xuXG4gIC8qKlxuICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdD59XG4gICogQHByaXZhdGVcbiAgKi9cbiAgdGhpcy5jYWNoZV8gPSB7fTtcblxuICAvKipcbiAgKiBAdHlwZSB7bnVtYmVyfVxuICAqIEBwcml2YXRlXG4gICovXG4gIHRoaXMuY2FjaGVTaXplXyA9IDA7XG5cbiAgLyoqXG4gICogQHR5cGUge251bWJlcn1cbiAgKiBAcHJpdmF0ZVxuICAqL1xuICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbn07XG5cbi8qKlxuKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiovXG5JY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhciAoKSB7XG4gIHRoaXMuY2FjaGVfID0ge307XG4gIHRoaXMuY2FjaGVTaXplXyA9IDA7XG59O1xuXG4vKipcbiogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4qL1xuSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmV4cGlyZSA9IGZ1bmN0aW9uIGV4cGlyZSAoKSB7XG4gIGlmICh0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV8pIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGVfKSB7XG4gICAgICB2YXIgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgIGlmICgoaSsrICYgMykgPT09IDAgJiYgIWljb25JbWFnZS5oYXNMaXN0ZW5lcigpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4qIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuKi9cbkljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGVfID8gdGhpcy5jYWNoZV9ba2V5XSA6IG51bGw7XG59O1xuXG4vKipcbiogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4qIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiovXG5JY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0IChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICArK3RoaXMuY2FjaGVTaXplXztcbn07XG5cbi8qKlxuKiBTZXQgdGhlIGNhY2hlIHNpemUgb2YgdGhlIGljb24gY2FjaGUuIERlZmF1bHQgaXMgYDMyYC4gQ2hhbmdlIHRoaXMgdmFsdWUgd2hlblxuKiB5b3VyIG1hcCB1c2VzIG1vcmUgdGhhbiAzMiBkaWZmZXJlbnQgaWNvbiBpbWFnZXMgYW5kIHlvdSBhcmUgbm90IGNhY2hpbmcgaWNvblxuKiBzdHlsZXMgb24gdGhlIGFwcGxpY2F0aW9uIGxldmVsLlxuKiBAcGFyYW0ge251bWJlcn0gbWF4Q2FjaGVTaXplIENhY2hlIG1heCBzaXplLlxuKiBAYXBpXG4qL1xuSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiBzZXRTaXplIChtYXhDYWNoZVNpemUpIHtcbiAgdGhpcy5tYXhDYWNoZVNpemVfID0gbWF4Q2FjaGVTaXplO1xuICB0aGlzLmV4cGlyZSgpO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgdmFyIGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gIHJldHVybiBjcm9zc09yaWdpbiArICc6JyArIHNyYyArICc6JyArIGNvbG9yU3RyaW5nO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuXG5cbi8qKlxuICogVGhlIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+SWNvbkltYWdlQ2FjaGV9IGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259IGltYWdlcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkltYWdlQ2FjaGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL01hcFxuICovXG5pbXBvcnQge2Fic3RyYWN0LCBnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2dldFdpZHRofSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtUUlVFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt2aXNpYmxlQXRSZXNvbHV0aW9ufSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQge3NoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZX0gZnJvbSAnLi4vc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHtjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGludmVydCBhcyBpbnZlcnRUcmFuc2Zvcm0sIHNldEZyb21BcnJheSBhcyB0cmFuc2Zvcm1TZXRGcm9tQXJyYXl9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBNYXBSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERpc3Bvc2FibGUpIHtcbiAgZnVuY3Rpb24gTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgRGlzcG9zYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5sYXllclJlbmRlcmVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckxpc3RlbmVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PHR5cGVvZiBpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9yc18gPSBbXTtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgTWFwUmVuZGVyZXIuX19wcm90b19fID0gRGlzcG9zYWJsZTtcbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRGlzcG9zYWJsZSAmJiBEaXNwb3NhYmxlLnByb3RvdHlwZSApO1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVuZGVyRXZlbnQgKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBsYXllciByZW5kZXJlciBjb25zdHJ1Y3RvcnMuXG4gICAqIEBwYXJhbSB7QXJyYXk8dHlwZW9mIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IGNvbnN0cnVjdG9ycyBMYXllciByZW5kZXJlcnMuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVnaXN0ZXJMYXllclJlbmRlcmVycyA9IGZ1bmN0aW9uIHJlZ2lzdGVyTGF5ZXJSZW5kZXJlcnMgKGNvbnN0cnVjdG9ycykge1xuICAgIHRoaXMubGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9yc18ucHVzaC5hcHBseSh0aGlzLmxheWVyUmVuZGVyZXJDb25zdHJ1Y3RvcnNfLCBjb25zdHJ1Y3RvcnMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5jYWxjdWxhdGVNYXRyaWNlczJEID0gZnVuY3Rpb24gY2FsY3VsYXRlTWF0cmljZXMyRCAoZnJhbWVTdGF0ZSkge1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xuICAgIHZhciBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSA9IGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07XG5cbiAgICBjb21wb3NlVHJhbnNmb3JtKGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLFxuICAgICAgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMixcbiAgICAgIDEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLTEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbixcbiAgICAgIC12aWV3U3RhdGUucm90YXRpb24sXG4gICAgICAtdmlld1N0YXRlLmNlbnRlclswXSwgLXZpZXdTdGF0ZS5jZW50ZXJbMV0pO1xuXG4gICAgaW52ZXJ0VHJhbnNmb3JtKFxuICAgICAgdHJhbnNmb3JtU2V0RnJvbUFycmF5KHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBsYXllciByZW5kZXJlcnMuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlTGF5ZXJSZW5kZXJlcnMgPSBmdW5jdGlvbiByZW1vdmVMYXllclJlbmRlcmVycyAoKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMubGF5ZXJSZW5kZXJlcnNfKSB7XG4gICAgICB0aGlzLnJlbW92ZUxheWVyUmVuZGVyZXJCeUtleV8oa2V5KS5kaXNwb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSxcbiAgICogICAgIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlIChcbiAgICBjb29yZGluYXRlLFxuICAgIGZyYW1lU3RhdGUsXG4gICAgaGl0VG9sZXJhbmNlLFxuICAgIGNhbGxiYWNrLFxuICAgIHRoaXNBcmcsXG4gICAgbGF5ZXJGaWx0ZXIsXG4gICAgdGhpc0FyZzJcbiAgKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShmZWF0dXJlLCBsYXllcikge1xuICAgICAgdmFyIG1hbmFnZWQgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzW2dldFVpZChsYXllcildLm1hbmFnZWQ7XG4gICAgICBpZiAoIShnZXRVaWQoZmVhdHVyZSkgaW4gZnJhbWVTdGF0ZS5za2lwcGVkRmVhdHVyZVVpZHMgJiYgIW1hbmFnZWQpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGZlYXR1cmUsIG1hbmFnZWQgPyBsYXllciA6IG51bGwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG5cbiAgICB2YXIgdHJhbnNsYXRlZENvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkpIHtcbiAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgICBpZiAoeCA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgeCA+IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSB4KSAvIHdvcmxkV2lkdGgpO1xuICAgICAgICB0cmFuc2xhdGVkQ29vcmRpbmF0ZSA9IFt4ICsgd29ybGRXaWR0aCAqIHdvcmxkc0F3YXksIGNvb3JkaW5hdGVbMV1dO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsYXllclN0YXRlcyA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgIGlmICh2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHZpZXdSZXNvbHV0aW9uKSAmJiBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSB0aGlzLmdldExheWVyUmVuZGVyZXIobGF5ZXIpO1xuICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgICAgICAgIHNvdXJjZS5nZXRXcmFwWCgpID8gdHJhbnNsYXRlZENvb3JkaW5hdGUgOiBjb29yZGluYXRlLFxuICAgICAgICAgICAgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICogICAgIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gZm9yRWFjaExheWVyQXRQaXhlbCAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIHRoaXNBcmcsIGxheWVyRmlsdGVyLCB0aGlzQXJnMikge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICogQHBhcmFtIHtVfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBjb29yZGluYXRlP1xuICAgKiBAdGVtcGxhdGUgVVxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBoYXNGZWF0dXJlQXRDb29yZGluYXRlIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGxheWVyRmlsdGVyLCB0aGlzQXJnKSB7XG4gICAgdmFyIGhhc0ZlYXR1cmUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgICAgY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBUUlVFLCB0aGlzLCBsYXllckZpbHRlciwgdGhpc0FyZyk7XG5cbiAgICByZXR1cm4gaGFzRmVhdHVyZSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllciByZW5kZXJlci5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllclJlbmRlcmVyID0gZnVuY3Rpb24gZ2V0TGF5ZXJSZW5kZXJlciAobGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJLZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgIGlmIChsYXllcktleSBpbiB0aGlzLmxheWVyUmVuZGVyZXJzXykge1xuICAgICAgcmV0dXJuIHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlbmRlcmVyO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sYXllclJlbmRlcmVyQ29uc3RydWN0b3JzXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjYW5kaWRhdGUgPSB0aGlzLmxheWVyUmVuZGVyZXJDb25zdHJ1Y3RvcnNfW2ldO1xuICAgICAgICBpZiAoY2FuZGlkYXRlWydoYW5kbGVzJ10obGF5ZXIpKSB7XG4gICAgICAgICAgcmVuZGVyZXIgPSBjYW5kaWRhdGVbJ2NyZWF0ZSddKHRoaXMsIGxheWVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XSA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmxheWVyUmVuZGVyZXJMaXN0ZW5lcnNfW2xheWVyS2V5XSA9IGxpc3RlbihyZW5kZXJlcixcbiAgICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyUmVuZGVyZXJDaGFuZ2VfLCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSByZW5kZXJlciBmb3IgbGF5ZXI6ICcgKyBsYXllci5nZXRUeXBlKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxheWVyS2V5IExheWVyIGtleS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyIHJlbmRlcmVyLlxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyUmVuZGVyZXJCeUtleSA9IGZ1bmN0aW9uIGdldExheWVyUmVuZGVyZXJCeUtleSAobGF5ZXJLZXkpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllclJlbmRlcmVyc19bbGF5ZXJLZXldO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IExheWVyIHJlbmRlcmVycy5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllclJlbmRlcmVycyA9IGZ1bmN0aW9uIGdldExheWVyUmVuZGVyZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllclJlbmRlcmVyc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gZ2V0TWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBhIGxheWVyIHJlbmRlcmVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUxheWVyUmVuZGVyZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJSZW5kZXJlckNoYW5nZV8gKCkge1xuICAgIHRoaXMubWFwXy5yZW5kZXIoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxheWVyS2V5IExheWVyIGtleS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllciByZW5kZXJlci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW1vdmVMYXllclJlbmRlcmVyQnlLZXlfID0gZnVuY3Rpb24gcmVtb3ZlTGF5ZXJSZW5kZXJlckJ5S2V5XyAobGF5ZXJLZXkpIHtcbiAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IHRoaXMubGF5ZXJSZW5kZXJlcnNfW2xheWVyS2V5XTtcbiAgICBkZWxldGUgdGhpcy5sYXllclJlbmRlcmVyc19bbGF5ZXJLZXldO1xuXG4gICAgdW5saXN0ZW5CeUtleSh0aGlzLmxheWVyUmVuZGVyZXJMaXN0ZW5lcnNfW2xheWVyS2V5XSk7XG4gICAgZGVsZXRlIHRoaXMubGF5ZXJSZW5kZXJlckxpc3RlbmVyc19bbGF5ZXJLZXldO1xuXG4gICAgcmV0dXJuIGxheWVyUmVuZGVyZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnNfID0gZnVuY3Rpb24gcmVtb3ZlVW51c2VkTGF5ZXJSZW5kZXJlcnNfIChtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICBmb3IgKHZhciBsYXllcktleSBpbiB0aGlzLmxheWVyUmVuZGVyZXJzXykge1xuICAgICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEobGF5ZXJLZXkgaW4gZnJhbWVTdGF0ZS5sYXllclN0YXRlcykpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXllclJlbmRlcmVyQnlLZXlfKGxheWVyS2V5KS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIHJlbmRlckZyYW1lIChmcmFtZVN0YXRlKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlID0gZnVuY3Rpb24gc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUgKGZyYW1lU3RhdGUpIHtcbiAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaCgvKiogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChleHBpcmVJY29uQ2FjaGUpKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZVJlbW92ZVVudXNlZExheWVyUmVuZGVyZXJzID0gZnVuY3Rpb24gc2NoZWR1bGVSZW1vdmVVbnVzZWRMYXllclJlbmRlcmVycyAoZnJhbWVTdGF0ZSkge1xuICAgIGZvciAodmFyIGxheWVyS2V5IGluIHRoaXMubGF5ZXJSZW5kZXJlcnNfKSB7XG4gICAgICBpZiAoIShsYXllcktleSBpbiBmcmFtZVN0YXRlLmxheWVyU3RhdGVzKSkge1xuICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovICh0aGlzLnJlbW92ZVVudXNlZExheWVyUmVuZGVyZXJzXy5iaW5kKHRoaXMpKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBNYXBSZW5kZXJlcjtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gKi9cbmZ1bmN0aW9uIGV4cGlyZUljb25DYWNoZShtYXAsIGZyYW1lU3RhdGUpIHtcbiAgaWNvbkltYWdlQ2FjaGUuZXhwaXJlKCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBzdGF0ZTEgRmlyc3QgbGF5ZXIgc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBzdGF0ZTIgU2Vjb25kIGxheWVyIHN0YXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgekluZGV4IGRpZmZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlaSW5kZXgoc3RhdGUxLCBzdGF0ZTIpIHtcbiAgcmV0dXJuIHN0YXRlMS56SW5kZXggLSBzdGF0ZTIuekluZGV4O1xufVxuZXhwb3J0IGRlZmF1bHQgTWFwUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL01hcFxuICovXG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2luY2x1ZGVzLCBzdGFibGVTb3J0fSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge0NMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vLi4vY3NzLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHt2aXNpYmxlQXRSZXNvbHV0aW9ufSBmcm9tICcuLi8uLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3JvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZS5qcyc7XG5pbXBvcnQgTWFwUmVuZGVyZXIsIHtzb3J0QnlaSW5kZXh9IGZyb20gJy4uL01hcC5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vLi4vc291cmNlL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlIHtBcnJheTx0eXBlb2YgaW1wb3J0KFwiLi4vTGF5ZXIuanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgbGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycyA9IFtdO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNNYXBSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE1hcFJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc01hcFJlbmRlcmVyKG1hcCkge1xuICAgIE1hcFJlbmRlcmVyLmNhbGwodGhpcywgbWFwKTtcblxuICAgIHZhciBjb250YWluZXIgPSBtYXAuZ2V0Vmlld3BvcnQoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc18gPSB0aGlzLmNvbnRleHRfLmNhbnZhcztcblxuICAgIHRoaXMuY2FudmFzXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB0aGlzLmNhbnZhc18uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHRoaXMuY2FudmFzXy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLmNhbnZhc18uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5jYW52YXNfLCBjb250YWluZXIuY2hpbGROb2Rlc1swXSB8fCBudWxsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgfVxuXG4gIGlmICggTWFwUmVuZGVyZXIgKSBDYW52YXNNYXBSZW5kZXJlci5fX3Byb3RvX18gPSBNYXBSZW5kZXJlcjtcbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTWFwUmVuZGVyZXIgJiYgTWFwUmVuZGVyZXIucHJvdG90eXBlICk7XG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc01hcFJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiBkaXNwYXRjaFJlbmRlckV2ZW50ICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIGlmIChtYXAuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuXG4gICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oZnJhbWVTdGF0ZSk7XG5cbiAgICAgIHZhciB2ZWN0b3JDb250ZXh0ID0gbmV3IENhbnZhc0ltbWVkaWF0ZVJlbmRlcmVyKGNvbnRleHQsIHBpeGVsUmF0aW8sXG4gICAgICAgIGV4dGVudCwgdHJhbnNmb3JtLCByb3RhdGlvbik7XG4gICAgICB2YXIgY29tcG9zZUV2ZW50ID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHZlY3RvckNvbnRleHQsXG4gICAgICAgIGZyYW1lU3RhdGUsIGNvbnRleHQsIG51bGwpO1xuICAgICAgbWFwLmRpc3BhdGNoRXZlbnQoY29tcG9zZUV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0gKGZyYW1lU3RhdGUpIHtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIGR4MSA9IHRoaXMuY2FudmFzXy53aWR0aCAvIDI7XG4gICAgdmFyIGR5MSA9IHRoaXMuY2FudmFzXy5oZWlnaHQgLyAyO1xuICAgIHZhciBzeCA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbyAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIHZhciBzeSA9IC1zeDtcbiAgICB2YXIgYW5nbGUgPSAtdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIHZhciBkeDIgPSAtdmlld1N0YXRlLmNlbnRlclswXTtcbiAgICB2YXIgZHkyID0gLXZpZXdTdGF0ZS5jZW50ZXJbMV07XG4gICAgcmV0dXJuIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1fLCBkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gcmVuZGVyRnJhbWUgKGZyYW1lU3RhdGUpIHtcblxuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICB0aGlzLmNhbnZhc18uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHRfO1xuICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbyk7XG4gICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbyk7XG4gICAgaWYgKHRoaXMuY2FudmFzXy53aWR0aCAhPSB3aWR0aCB8fCB0aGlzLmNhbnZhc18uaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgdGhpcy5jYW52YXNfLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNhbnZhc18uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcblxuICAgIHRoaXMuY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG5cbiAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICBzdGFibGVTb3J0KGxheWVyU3RhdGVzQXJyYXksIHNvcnRCeVpJbmRleCk7XG5cbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgfVxuXG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgaSwgaWk7XG4gICAgZm9yIChpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllclJlbmRlcmVyKGxheWVyKSk7XG4gICAgICBpZiAoIXZpc2libGVBdFJlc29sdXRpb24obGF5ZXJTdGF0ZSwgdmlld1Jlc29sdXRpb24pIHx8XG4gICAgICAgICAgbGF5ZXJTdGF0ZS5zb3VyY2VTdGF0ZSAhPSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChsYXllclJlbmRlcmVyLnByZXBhcmVGcmFtZShmcmFtZVN0YXRlLCBsYXllclN0YXRlKSkge1xuICAgICAgICBsYXllclJlbmRlcmVyLmNvbXBvc2VGcmFtZShmcmFtZVN0YXRlLCBsYXllclN0YXRlLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUE9TVENPTVBPU0UsIGZyYW1lU3RhdGUpO1xuXG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgIHRoaXMuY2FudmFzXy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuc2NoZWR1bGVSZW1vdmVVbnVzZWRMYXllclJlbmRlcmVycyhmcmFtZVN0YXRlKTtcbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiBmb3JFYWNoTGF5ZXJBdFBpeGVsIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcyKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG5cbiAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgdmFyIG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcblxuICAgIHZhciBjb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oXG4gICAgICBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcblxuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IG51bUxheWVycyAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2ldO1xuICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgIGlmICh2aXNpYmxlQXRSZXNvbHV0aW9uKGxheWVyU3RhdGUsIHZpZXdSZXNvbHV0aW9uKSAmJiBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXJSZW5kZXJlcihsYXllcikpO1xuICAgICAgICByZXN1bHQgPSBsYXllclJlbmRlcmVyLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZShcbiAgICAgICAgICBjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCB0aGlzQXJnKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc01hcFJlbmRlcmVyLnByb3RvdHlwZS5yZWdpc3RlckxheWVyUmVuZGVyZXJzID0gZnVuY3Rpb24gcmVnaXN0ZXJMYXllclJlbmRlcmVycyAoY29uc3RydWN0b3JzKSB7XG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlZ2lzdGVyTGF5ZXJSZW5kZXJlcnMuY2FsbCh0aGlzLCBjb25zdHJ1Y3RvcnMpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbnN0cnVjdG9ycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgY3RvciA9IGNvbnN0cnVjdG9yc1tpXTtcbiAgICAgIGlmICghaW5jbHVkZXMobGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycywgY3RvcikpIHtcbiAgICAgICAgbGF5ZXJSZW5kZXJlckNvbnN0cnVjdG9ycy5wdXNoKGN0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTWFwUmVuZGVyZXI7XG59KE1hcFJlbmRlcmVyKSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTWFwUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHtnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHR9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge1RSVUV9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3JvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbW1lZGlhdGVSZW5kZXJlciBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzL0ltbWVkaWF0ZS5qcyc7XG5pbXBvcnQgTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9MYXllci5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBDYW52YXNMYXllclJlbmRlcmVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTGF5ZXJSZW5kZXJlcikge1xuICBmdW5jdGlvbiBDYW52YXNMYXllclJlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBMYXllclJlbmRlcmVyLmNhbGwodGhpcywgbGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gIH1cblxuICBpZiAoIExheWVyUmVuZGVyZXIgKSBDYW52YXNMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IExheWVyUmVuZGVyZXI7XG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTGF5ZXJSZW5kZXJlciAmJiBMYXllclJlbmRlcmVyLnByb3RvdHlwZSApO1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0xheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IENsaXAgZXh0ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24gY2xpcCAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHdpZHRoID0gZnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbztcbiAgICB2YXIgaGVpZ2h0ID0gZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB2YXIgdG9wUmlnaHQgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIHZhciBib3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KGV4dGVudCk7XG4gICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG5cbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuXG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5tb3ZlVG8odG9wTGVmdFswXSAqIHBpeGVsUmF0aW8sIHRvcExlZnRbMV0gKiBwaXhlbFJhdGlvKTtcbiAgICBjb250ZXh0LmxpbmVUbyh0b3BSaWdodFswXSAqIHBpeGVsUmF0aW8sIHRvcFJpZ2h0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgY29udGV4dC5saW5lVG8oYm90dG9tUmlnaHRbMF0gKiBwaXhlbFJhdGlvLCBib3R0b21SaWdodFsxXSAqIHBpeGVsUmF0aW8pO1xuICAgIGNvbnRleHQubGluZVRvKGJvdHRvbUxlZnRbMF0gKiBwaXhlbFJhdGlvLCBib3R0b21MZWZ0WzFdICogcGl4ZWxSYXRpbyk7XG4gICAgY29udGV4dC5jbGlwKCk7XG4gICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT19IG9wdF90cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hDb21wb3NlRXZlbnRfID0gZnVuY3Rpb24gZGlzcGF0Y2hDb21wb3NlRXZlbnRfICh0eXBlLCBjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgdmFyIHdpZHRoID0gZnJhbWVTdGF0ZS5zaXplWzBdICogZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgICAgdmFyIGhlaWdodCA9IGZyYW1lU3RhdGUuc2l6ZVsxXSAqIGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IG9wdF90cmFuc2Zvcm0gIT09IHVuZGVmaW5lZCA/XG4gICAgICAgIG9wdF90cmFuc2Zvcm0gOiB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCAwKTtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgQ2FudmFzSW1tZWRpYXRlUmVuZGVyZXIoXG4gICAgICAgIGNvbnRleHQsIGZyYW1lU3RhdGUucGl4ZWxSYXRpbywgZnJhbWVTdGF0ZS5leHRlbnQsIHRyYW5zZm9ybSxcbiAgICAgICAgZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb24pO1xuICAgICAgdmFyIGNvbXBvc2VFdmVudCA9IG5ldyBSZW5kZXJFdmVudCh0eXBlLCByZW5kZXIsIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbnRleHQsIG51bGwpO1xuICAgICAgbGF5ZXIuZGlzcGF0Y2hFdmVudChjb21wb3NlRXZlbnQpO1xuICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICogICAgIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgUyxULFVcbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIHZhciBoYXNGZWF0dXJlID0gdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIFRSVUUpO1xuXG4gICAgaWYgKGhhc0ZlYXR1cmUpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMuZ2V0TGF5ZXIoKSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm09fSBvcHRfdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdENvbXBvc2UgPSBmdW5jdGlvbiBwb3N0Q29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHRoaXMuZGlzcGF0Y2hDb21wb3NlRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QT1NUQ09NUE9TRSwgY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybT19IG9wdF90cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVDb21wb3NlID0gZnVuY3Rpb24gcHJlQ29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgIHRoaXMuZGlzcGF0Y2hDb21wb3NlRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtPX0gb3B0X3RyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiBkaXNwYXRjaFJlbmRlckV2ZW50IChjb250ZXh0LCBmcmFtZVN0YXRlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgdGhpcy5kaXNwYXRjaENvbXBvc2VFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSwgb3B0X3RyYW5zZm9ybSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIE9mZnNldCBvbiB0aGUgeC1heGlzIGluIHZpZXcgY29vcmRpbmF0ZXMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uIGdldFRyYW5zZm9ybSAoZnJhbWVTdGF0ZSwgb2Zmc2V0WCkge1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgZHgxID0gcGl4ZWxSYXRpbyAqIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDI7XG4gICAgdmFyIGR5MSA9IHBpeGVsUmF0aW8gKiBmcmFtZVN0YXRlLnNpemVbMV0gLyAyO1xuICAgIHZhciBzeCA9IHBpeGVsUmF0aW8gLyB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgc3kgPSAtc3g7XG4gICAgdmFyIGFuZ2xlID0gLXZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICB2YXIgZHgyID0gLXZpZXdTdGF0ZS5jZW50ZXJbMF0gKyBvZmZzZXRYO1xuICAgIHZhciBkeTIgPSAtdmlld1N0YXRlLmNlbnRlclsxXTtcbiAgICByZXR1cm4gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRyYW5zZm9ybV8sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKi9cbiAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY29tcG9zZUZyYW1lID0gZnVuY3Rpb24gY29tcG9zZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlLCBjb250ZXh0KSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgY29tcG9zZUZyYW1lIHNob3VsZCBiZSBjYWxsZWQuXG4gICAqL1xuICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiBwcmVwYXJlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbn0oTGF5ZXJSZW5kZXJlcikpO1xuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuXG52YXIgTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE9ic2VydmFibGUpIHtcbiAgZnVuY3Rpb24gTGF5ZXJSZW5kZXJlcihsYXllcikge1xuXG4gICAgT2JzZXJ2YWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyXyA9IGxheWVyO1xuXG4gIH1cblxuICBpZiAoIE9ic2VydmFibGUgKSBMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IE9ic2VydmFibGU7XG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggT2JzZXJ2YWJsZSAmJiBPYnNlcnZhYmxlLnByb3RvdHlwZSApO1xuICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIG9mIHRoZSB0aWxlcy5cbiAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAqICAgICBjYWxsZWQgd2l0aCBhIHpvb20gbGV2ZWwgYW5kIGEgdGlsZSByYW5nZSB0byBhZGQgbG9hZGVkIHRpbGVzIHRvIHRoZSBsb29rdXAuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIgPSBmdW5jdGlvbiBjcmVhdGVMb2FkZWRUaWxlRmluZGVyIChzb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgbG9hZGVkLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbih6b29tLCB0aWxlUmFuZ2UpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayh0aWxlKSB7XG4gICAgICAgICAgaWYgKCF0aWxlc1t6b29tXSkge1xuICAgICAgICAgICAgdGlsZXNbem9vbV0gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGlsZXNbem9vbV1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2UuZm9yRWFjaExvYWRlZFRpbGUocHJvamVjdGlvbiwgem9vbSwgdGlsZVJhbmdlLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IFR9IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAqIEByZXR1cm4ge1R8dm9pZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaykge307XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyLlxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiBnZXRMYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5ZXJfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlSW1hZ2VDaGFuZ2VfIChldmVudCkge1xuICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgaWYgKGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGU/XG4gICAqL1xuICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZCB0aGUgaW1hZ2UgaWYgbm90IGFscmVhZHkgbG9hZGVkLCBhbmQgcmVnaXN0ZXIgdGhlIGltYWdlIGNoYW5nZVxuICAgKiBsaXN0ZW5lciBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2VCYXNlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZEltYWdlID0gZnVuY3Rpb24gbG9hZEltYWdlIChpbWFnZSkge1xuICAgIHZhciBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICBpZiAoaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkxPQURFRCAmJiBpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgIGxpc3RlbihpbWFnZSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVySWZSZWFkeUFuZFZpc2libGUgPSBmdW5jdGlvbiByZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSAoKSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBzY2hlZHVsZUV4cGlyZUNhY2hlIChmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAqL1xuICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uKHRpbGVTb3VyY2UsIG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24sXG4gICAgICAgICAgICBmcmFtZVN0YXRlLnVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZChudWxsLCB0aWxlU291cmNlKTtcblxuICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLlBvc3RSZW5kZXJGdW5jdGlvbn0gKi8gKHBvc3RSZW5kZXJGdW5jdGlvbilcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZVVzZWRUaWxlcyA9IGZ1bmN0aW9uIHVwZGF0ZVVzZWRUaWxlcyAodXNlZFRpbGVzLCB0aWxlU291cmNlLCB6LCB0aWxlUmFuZ2UpIHtcbiAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgdmFyIHpLZXkgPSB6LnRvU3RyaW5nKCk7XG4gICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gdXNlZFRpbGVzKSB7XG4gICAgICBpZiAoektleSBpbiB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0pIHtcbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3pLZXldLmV4dGVuZCh0aWxlUmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3pLZXldID0gdGlsZVJhbmdlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XVt6S2V5XSA9IHRpbGVSYW5nZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgKiBjdXJyZW50IHpvb20gYW5kIGxvd2VyIHpvb20gbGV2ZWxzOlxuICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICogLSBlbnF1ZXVlcyBtaXNzaW5nIHRpbGVzXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byAncHJlbG9hZCcgbGV2ZWxzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFQsIGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk9fSBvcHRfdGlsZUNhbGxiYWNrIFRpbGUgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7VD19IG9wdF90aGlzIE9iamVjdCB0byB1c2UgYXMgYHRoaXNgIGluIGBvcHRfdGlsZUNhbGxiYWNrYC5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubWFuYWdlVGlsZVB5cmFtaWQgPSBmdW5jdGlvbiBtYW5hZ2VUaWxlUHlyYW1pZCAoXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlU291cmNlLFxuICAgIHRpbGVHcmlkLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgcHJvamVjdGlvbixcbiAgICBleHRlbnQsXG4gICAgY3VycmVudFosXG4gICAgcHJlbG9hZCxcbiAgICBvcHRfdGlsZUNhbGxiYWNrLFxuICAgIG9wdF90aGlzXG4gICkge1xuICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgIGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICB9XG4gICAgdmFyIHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICB2YXIgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgdmFyIG1pblpvb20gPSB0aWxlR3JpZC5nZXRNaW5ab29tKCk7XG4gICAgdmFyIHRpbGUsIHRpbGVSYW5nZSwgdGlsZVJlc29sdXRpb24sIHgsIHksIHo7XG4gICAgZm9yICh6ID0gbWluWm9vbTsgeiA8PSBjdXJyZW50WjsgKyt6KSB7XG4gICAgICB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeiwgdGlsZVJhbmdlKTtcbiAgICAgIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgIGZvciAoeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgIGlmIChjdXJyZW50WiAtIHogPD0gcHJlbG9hZCkge1xuICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0tleVF1ZXVlZCh0aWxlLmdldEtleSgpKSkge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFt0aWxlLCB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSwgdGlsZVJlc29sdXRpb25dKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdF90aWxlQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBvcHRfdGlsZUNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWxlU291cmNlLnVzZVRpbGUoeiwgeCwgeSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBMYXllclJlbmRlcmVyO1xufShPYnNlcnZhYmxlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IExheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvSW50ZXJtZWRpYXRlQ2FudmFzXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHtzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGV9IGZyb20gJy4uLy4uL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQge2NvbnRhaW5zRXh0ZW50LCBpbnRlcnNlY3RzfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQge2NyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuXG4vKipcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDYW52YXNMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLmNhbGwodGhpcywgbGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdENhbnZhc0NvbnRleHRfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNMYXllclJlbmRlcmVyICkgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuX19wcm90b19fID0gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ2FudmFzTGF5ZXJSZW5kZXJlciAmJiBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZSApO1xuICBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jb21wb3NlRnJhbWUgPSBmdW5jdGlvbiBjb21wb3NlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIGNvbnRleHQpIHtcblxuICAgIHRoaXMucHJlQ29tcG9zZShjb250ZXh0LCBmcmFtZVN0YXRlKTtcblxuICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0SW1hZ2UoKTtcbiAgICBpZiAoaW1hZ2UpIHtcblxuICAgICAgLy8gY2xpcHBlZCByZW5kZXJpbmcgaWYgbGF5ZXIgZXh0ZW50IGlzIHNldFxuICAgICAgdmFyIGV4dGVudCA9IGxheWVyU3RhdGUuZXh0ZW50O1xuICAgICAgdmFyIGNsaXBwZWQgPSBleHRlbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICFjb250YWluc0V4dGVudChleHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSAmJlxuICAgICAgICAgIGludGVyc2VjdHMoZXh0ZW50LCBmcmFtZVN0YXRlLmV4dGVudCk7XG4gICAgICBpZiAoY2xpcHBlZCkge1xuICAgICAgICB0aGlzLmNsaXAoY29udGV4dCwgZnJhbWVTdGF0ZSwgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSAqLyAoZXh0ZW50KSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbWFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0SW1hZ2VUcmFuc2Zvcm0oKTtcbiAgICAgIC8vIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLCBjb250ZXh0LnNhdmUgLyBjb250ZXh0LnJlc3RvcmUgaXMgbm90IHVzZWRcbiAgICAgIC8vIHRvIHNhdmUgYW5kIHJlc3RvcmUgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBhbmQgdGhlIG9wYWNpdHkuXG4gICAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udGV4dC1zYXZlLXJlc3RvcmUtdmVyc3VzLXZhcmlhYmxlXG4gICAgICB2YXIgYWxwaGEgPSBjb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGxheWVyU3RhdGUub3BhY2l0eTtcblxuICAgICAgLy8gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGNvbnRleHQuc2V0VHJhbnNmb3JtIGlzIG9ubHkgdXNlZFxuICAgICAgLy8gd2hlbiB0aGUgdmlldyBpcyByb3RhdGVkLiBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FudmFzLXRyYW5zZm9ybVxuICAgICAgdmFyIGR4ID0gaW1hZ2VUcmFuc2Zvcm1bNF07XG4gICAgICB2YXIgZHkgPSBpbWFnZVRyYW5zZm9ybVs1XTtcbiAgICAgIHZhciBkdyA9IGltYWdlLndpZHRoICogaW1hZ2VUcmFuc2Zvcm1bMF07XG4gICAgICB2YXIgZGggPSBpbWFnZS5oZWlnaHQgKiBpbWFnZVRyYW5zZm9ybVszXTtcbiAgICAgIGlmIChkdyA+PSAwLjUgJiYgZGggPj0gMC41KSB7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCAraW1hZ2Uud2lkdGgsICtpbWFnZS5oZWlnaHQsXG4gICAgICAgICAgTWF0aC5yb3VuZChkeCksIE1hdGgucm91bmQoZHkpLCBNYXRoLnJvdW5kKGR3KSwgTWF0aC5yb3VuZChkaCkpO1xuICAgICAgfVxuICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuXG4gICAgICBpZiAoY2xpcHBlZCkge1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBvc3RDb21wb3NlKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTFZpZGVvRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBDYW52YXMuXG4gICAqL1xuICBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gSW1hZ2UgdHJhbnNmb3JtLlxuICAgKi9cbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGZvckVhY2hMYXllckF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGlmICghdGhpcy5nZXRJbWFnZSgpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBwaXhlbCA9IGFwcGx5VHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sIGNvb3JkaW5hdGUuc2xpY2UoKSk7XG4gICAgc2NhbGVDb29yZGluYXRlKHBpeGVsLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uIC8gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24pO1xuXG4gICAgaWYgKCF0aGlzLmhpdENhbnZhc0NvbnRleHRfKSB7XG4gICAgICB0aGlzLmhpdENhbnZhc0NvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIH1cblxuICAgIHRoaXMuaGl0Q2FudmFzQ29udGV4dF8uY2xlYXJSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHRoaXMuaGl0Q2FudmFzQ29udGV4dF8uZHJhd0ltYWdlKHRoaXMuZ2V0SW1hZ2UoKSwgcGl4ZWxbMF0sIHBpeGVsWzFdLCAxLCAxLCAwLCAwLCAxLCAxKTtcblxuICAgIHZhciBpbWFnZURhdGEgPSB0aGlzLmhpdENhbnZhc0NvbnRleHRfLmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgIGlmIChpbWFnZURhdGFbM10gPiAwKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLmdldExheWVyKCksIGltYWdlRGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcm1lZGlhdGVDYW52YXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9JbWFnZUxheWVyXG4gKi9cbmltcG9ydCB7RU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT059IGZyb20gJy4uLy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IEltYWdlQ2FudmFzIGZyb20gJy4uLy4uL0ltYWdlQ2FudmFzLmpzJztcbmltcG9ydCBMYXllclR5cGUgZnJvbSAnLi4vLi4vTGF5ZXJUeXBlLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi8uLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtnZXRIZWlnaHQsIGdldEludGVyc2VjdGlvbiwgZ2V0V2lkdGgsIGlzRW1wdHl9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgVmVjdG9yUmVuZGVyVHlwZSBmcm9tICcuLi8uLi9sYXllci9WZWN0b3JSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHtsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzfSBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgZnJvbSAnLi9JbnRlcm1lZGlhdGVDYW52YXMuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciBpbWFnZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcikge1xuICBmdW5jdGlvbiBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIoaW1hZ2VMYXllcikge1xuXG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuY2FsbCh0aGlzLCBpbWFnZUxheWVyKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUFycmF5PHN0cmluZz59XG4gICAgICovXG4gICAgdGhpcy5za2lwcGVkRmVhdHVyZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckxheWVyLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy52ZWN0b3JSZW5kZXJlcl8gPSBudWxsO1xuXG4gICAgaWYgKGltYWdlTGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuVkVDVE9SKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGN0b3IgPSBsYXllclJlbmRlcmVyQ29uc3RydWN0b3JzW2ldO1xuICAgICAgICBpZiAoY3RvciAhPT0gQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyICYmIGN0b3JbJ2hhbmRsZXMnXShpbWFnZUxheWVyKSkge1xuICAgICAgICAgIHRoaXMudmVjdG9yUmVuZGVyZXJfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1ZlY3RvckxheWVyLmpzXCIpLmRlZmF1bHR9ICovIChuZXcgY3RvcihpbWFnZUxheWVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIGlmICggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgKSBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIuX19wcm90b19fID0gSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXI7XG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlciAmJiBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcjtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICBpZiAodGhpcy52ZWN0b3JSZW5kZXJlcl8pIHtcbiAgICAgIHRoaXMudmVjdG9yUmVuZGVyZXJfLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaW1hZ2VfID8gbnVsbCA6IHRoaXMuaW1hZ2VfLmdldEltYWdlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlVHJhbnNmb3JtXztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gcHJlcGFyZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlKSB7XG5cbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcbiAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuXG4gICAgdmFyIGltYWdlO1xuICAgIHZhciBpbWFnZUxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgaW1hZ2VTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAoaW1hZ2VMYXllci5nZXRTb3VyY2UoKSk7XG5cbiAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcblxuICAgIHZhciB2ZWN0b3JSZW5kZXJlciA9IHRoaXMudmVjdG9yUmVuZGVyZXJfO1xuICAgIHZhciByZW5kZXJlZEV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgIGlmICghdmVjdG9yUmVuZGVyZXIgJiYgbGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVuZGVyZWRFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24ocmVuZGVyZWRFeHRlbnQsIGxheWVyU3RhdGUuZXh0ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIWhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiYgIWhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSAmJlxuICAgICAgICAhaXNFbXB0eShyZW5kZXJlZEV4dGVudCkpIHtcbiAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gaW1hZ2VTb3VyY2UuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoc291cmNlUHJvamVjdGlvbikge1xuICAgICAgICAgIHByb2plY3Rpb24gPSBzb3VyY2VQcm9qZWN0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc2tpcHBlZEZlYXR1cmVzID0gdGhpcy5za2lwcGVkRmVhdHVyZXNfO1xuICAgICAgaWYgKHZlY3RvclJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdmVjdG9yUmVuZGVyZXIuY29udGV4dDtcbiAgICAgICAgdmFyIGltYWdlRnJhbWVTdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9ICovIChhc3NpZ24oe30sIGZyYW1lU3RhdGUsIHtcbiAgICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICBnZXRXaWR0aChyZW5kZXJlZEV4dGVudCkgLyB2aWV3UmVzb2x1dGlvbixcbiAgICAgICAgICAgIGdldEhlaWdodChyZW5kZXJlZEV4dGVudCkgLyB2aWV3UmVzb2x1dGlvblxuICAgICAgICAgIF0sXG4gICAgICAgICAgdmlld1N0YXRlOiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZpZXcuanNcIikuU3RhdGV9ICovIChhc3NpZ24oe30sIGZyYW1lU3RhdGUudmlld1N0YXRlLCB7XG4gICAgICAgICAgICByb3RhdGlvbjogMFxuICAgICAgICAgIH0pKVxuICAgICAgICB9KSk7XG4gICAgICAgIHZhciBuZXdTa2lwcGVkRmVhdHVyZXMgPSBPYmplY3Qua2V5cyhpbWFnZUZyYW1lU3RhdGUuc2tpcHBlZEZlYXR1cmVVaWRzKS5zb3J0KCk7XG4gICAgICAgIGltYWdlID0gbmV3IEltYWdlQ2FudmFzKHJlbmRlcmVkRXh0ZW50LCB2aWV3UmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgY29udGV4dC5jYW52YXMsIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgaWYgKHZlY3RvclJlbmRlcmVyLnByZXBhcmVGcmFtZShpbWFnZUZyYW1lU3RhdGUsIGxheWVyU3RhdGUpICYmXG4gICAgICAgICAgICAgICh2ZWN0b3JSZW5kZXJlci5yZXBsYXlHcm91cENoYW5nZWQgfHxcbiAgICAgICAgICAgICAgIWVxdWFscyhza2lwcGVkRmVhdHVyZXMsIG5ld1NraXBwZWRGZWF0dXJlcykpKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGltYWdlRnJhbWVTdGF0ZS5zaXplWzBdICogcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IGltYWdlRnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIHZlY3RvclJlbmRlcmVyLmNvbXBvc2UoY29udGV4dCwgaW1hZ2VGcmFtZVN0YXRlLCBsYXllclN0YXRlKTtcbiAgICAgICAgICAgIHNraXBwZWRGZWF0dXJlcyA9IG5ld1NraXBwZWRGZWF0dXJlcztcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlID0gaW1hZ2VTb3VyY2UuZ2V0SW1hZ2UoXG4gICAgICAgICAgcmVuZGVyZWRFeHRlbnQsIHZpZXdSZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbWFnZSAmJiB0aGlzLmxvYWRJbWFnZShpbWFnZSkpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICAgICAgdGhpcy5za2lwcGVkRmVhdHVyZXNfID0gc2tpcHBlZEZlYXR1cmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmltYWdlXykge1xuICAgICAgaW1hZ2UgPSB0aGlzLmltYWdlXztcbiAgICAgIHZhciBpbWFnZUV4dGVudCA9IGltYWdlLmdldEV4dGVudCgpO1xuICAgICAgdmFyIGltYWdlUmVzb2x1dGlvbiA9IGltYWdlLmdldFJlc29sdXRpb24oKTtcbiAgICAgIHZhciBpbWFnZVBpeGVsUmF0aW8gPSBpbWFnZS5nZXRQaXhlbFJhdGlvKCk7XG4gICAgICB2YXIgc2NhbGUgPSBwaXhlbFJhdGlvICogaW1hZ2VSZXNvbHV0aW9uIC9cbiAgICAgICAgICAodmlld1Jlc29sdXRpb24gKiBpbWFnZVBpeGVsUmF0aW8pO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5pbWFnZVRyYW5zZm9ybV8sXG4gICAgICAgIHBpeGVsUmF0aW8gKiBzaXplWzBdIC8gMiwgcGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyLFxuICAgICAgICBzY2FsZSwgc2NhbGUsXG4gICAgICAgIDAsXG4gICAgICAgIGltYWdlUGl4ZWxSYXRpbyAqIChpbWFnZUV4dGVudFswXSAtIHZpZXdDZW50ZXJbMF0pIC8gaW1hZ2VSZXNvbHV0aW9uLFxuICAgICAgICBpbWFnZVBpeGVsUmF0aW8gKiAodmlld0NlbnRlclsxXSAtIGltYWdlRXh0ZW50WzNdKSAvIGltYWdlUmVzb2x1dGlvbik7XG4gICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICAgIHBpeGVsUmF0aW8gKiBzaXplWzBdIC8gMiAtIHRyYW5zZm9ybVs0XSwgcGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyIC0gdHJhbnNmb3JtWzVdLFxuICAgICAgICBwaXhlbFJhdGlvIC8gdmlld1Jlc29sdXRpb24sIC1waXhlbFJhdGlvIC8gdmlld1Jlc29sdXRpb24sXG4gICAgICAgIDAsXG4gICAgICAgIC12aWV3Q2VudGVyWzBdLCAtdmlld0NlbnRlclsxXSk7XG5cbiAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gaW1hZ2VSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyAvIGltYWdlUGl4ZWxSYXRpbztcbiAgICB9XG5cbiAgICByZXR1cm4gISF0aGlzLmltYWdlXztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnZlY3RvclJlbmRlcmVyXykge1xuICAgICAgcmV0dXJuIHRoaXMudmVjdG9yUmVuZGVyZXJfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlLmNhbGwodGhpcywgY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXI7XG59KEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhpcyByZW5kZXJlciBoYW5kbGVzIHRoZSBwcm92aWRlZCBsYXllci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGNhbmRpZGF0ZSBsYXllci5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZW5kZXJlciBjYW4gcmVuZGVyIHRoZSBsYXllci5cbiAqL1xuQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyWydoYW5kbGVzJ10gPSBmdW5jdGlvbihsYXllcikge1xuICByZXR1cm4gbGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuSU1BR0UgfHxcbiAgICBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5WRUNUT1IgJiZcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFJlbmRlck1vZGUoKSA9PT0gVmVjdG9yUmVuZGVyVHlwZS5JTUFHRTtcbn07XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBsYXllciByZW5kZXJlci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IG1hcFJlbmRlcmVyIFRoZSBtYXAgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBsYXllciB0byBiZSByZW5kZXJlcmQuXG4gKiBAcmV0dXJuIHtDYW52YXNJbWFnZUxheWVyUmVuZGVyZXJ9IFRoZSBsYXllciByZW5kZXJlci5cbiAqL1xuQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc0ltYWdlTGF5ZXJSZW5kZXJlcigvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlTGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVSYW5nZVxuICovXG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBUaWxlUmFuZ2UgPSBmdW5jdGlvbiBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSkge1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5taW5YID0gbWluWDtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMubWF4WCA9IG1heFg7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pblkgPSBtaW5ZO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5tYXhZID0gbWF4WTtcblxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIHRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zICh0aWxlQ29vcmQpIHtcbiAgcmV0dXJuIHRoaXMuY29udGFpbnNYWSh0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zVGlsZVJhbmdlID0gZnVuY3Rpb24gY29udGFpbnNUaWxlUmFuZ2UgKHRpbGVSYW5nZSkge1xuICByZXR1cm4gdGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmIHRpbGVSYW5nZS5tYXhYIDw9IHRoaXMubWF4WCAmJlxuICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1pblkgJiYgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWFscy5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKHRpbGVSYW5nZSkge1xuICByZXR1cm4gdGhpcy5taW5YID09IHRpbGVSYW5nZS5taW5YICYmIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICB0aGlzLm1heFggPT0gdGlsZVJhbmdlLm1heFggJiYgdGhpcy5tYXhZID09IHRpbGVSYW5nZS5tYXhZO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gKi9cblRpbGVSYW5nZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kICh0aWxlUmFuZ2UpIHtcbiAgaWYgKHRpbGVSYW5nZS5taW5YIDwgdGhpcy5taW5YKSB7XG4gICAgdGhpcy5taW5YID0gdGlsZVJhbmdlLm1pblg7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5tYXhYID4gdGhpcy5tYXhYKSB7XG4gICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5taW5ZIDwgdGhpcy5taW5ZKSB7XG4gICAgdGhpcy5taW5ZID0gdGlsZVJhbmdlLm1pblk7XG4gIH1cbiAgaWYgKHRpbGVSYW5nZS5tYXhZID4gdGhpcy5tYXhZKSB7XG4gICAgdGhpcy5tYXhZID0gdGlsZVJhbmdlLm1heFk7XG4gIH1cbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gKi9cblRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gZ2V0SGVpZ2h0ICgpIHtcbiAgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWSArIDE7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiBnZXRTaXplICgpIHtcbiAgcmV0dXJuIFt0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCldO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICovXG5UaWxlUmFuZ2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gZ2V0V2lkdGggKCkge1xuICByZXR1cm4gdGhpcy5tYXhYIC0gdGhpcy5taW5YICsgMTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAqL1xuVGlsZVJhbmdlLnByb3RvdHlwZS5pbnRlcnNlY3RzID0gZnVuY3Rpb24gaW50ZXJzZWN0cyAodGlsZVJhbmdlKSB7XG4gIHJldHVybiB0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgdGhpcy5tYXhYID49IHRpbGVSYW5nZS5taW5YICYmXG4gICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWF4WSAmJlxuICAgICB0aGlzLm1heFkgPj0gdGlsZVJhbmdlLm1pblk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtUaWxlUmFuZ2U9fSB0aWxlUmFuZ2UgVGlsZVJhbmdlLlxuICogQHJldHVybiB7VGlsZVJhbmdlfSBUaWxlIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgdGlsZVJhbmdlKSB7XG4gIGlmICh0aWxlUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHRpbGVSYW5nZS5taW5YID0gbWluWDtcbiAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgdGlsZVJhbmdlLm1pblkgPSBtaW5ZO1xuICAgIHRpbGVSYW5nZS5tYXhZID0gbWF4WTtcbiAgICByZXR1cm4gdGlsZVJhbmdlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUmFuZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi8uLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IFRpbGVSYW5nZSBmcm9tICcuLi8uLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi8uLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uLy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHtjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBpc0VtcHR5fSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyIGZyb20gJy4vSW50ZXJtZWRpYXRlQ2FudmFzLmpzJztcbmltcG9ydCB7Y3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRpbGVMYXllciwgb3B0X25vQ29udGV4dCkge1xuXG4gICAgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIuY2FsbCh0aGlzLCB0aWxlTGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0gb3B0X25vQ29udGV4dCA/IG51bGwgOiBjcmVhdGVDYW52YXNDb250ZXh0MkQoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJzYW1wbGluZ187XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFRpbGVzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy50bXBFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50bXBUaWxlUmFuZ2VfID0gbmV3IFRpbGVSYW5nZSgwLCAwLCAwLCAwKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5pbWFnZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuekRpcmVjdGlvbiA9IDA7XG5cbiAgfVxuXG4gIGlmICggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgKSBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5fX3Byb3RvX18gPSBJbnRlcm1lZGlhdGVDYW52YXNSZW5kZXJlcjtcbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIgJiYgSW50ZXJtZWRpYXRlQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlICk7XG4gIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGlzIGRyYXdhYmxlLlxuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlXyA9IGZ1bmN0aW9uIGlzRHJhd2FibGVUaWxlXyAodGlsZSkge1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICB2YXIgdXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCk7XG4gICAgcmV0dXJuIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkgfHxcbiAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICovXG4gIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gZ2V0VGlsZSAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlTGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICBpZiAoIXRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkpIHtcbiAgICAgICAgLy8gV2hlbiB1c2VJbnRlcmltVGlsZXNPbkVycm9yIGlzIGZhbHNlLCB3ZSBjb25zaWRlciB0aGUgZXJyb3IgdGlsZSBhcyBsb2FkZWQuXG4gICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkxPQURFRCk7XG4gICAgICB9IGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XG4gICAgICAgIC8vIFByZWxvYWRlZCB0aWxlcyBmb3IgbG93ZXIgcmVzb2x1dGlvbnMgbWlnaHQgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxuICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcbiAgICAgIHRpbGUgPSB0aWxlLmdldEludGVyaW1UaWxlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIHByZXBhcmVGcmFtZSAoZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuXG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHNpemUgPSBmcmFtZVN0YXRlLnNpemU7XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgdmFyIHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuXG4gICAgdmFyIHRpbGVMYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgdGlsZVNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVMYXllci5nZXRTb3VyY2UoKSk7XG4gICAgdmFyIHNvdXJjZVJldmlzaW9uID0gdGlsZVNvdXJjZS5nZXRSZXZpc2lvbigpO1xuICAgIHZhciB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1Jlc29sdXRpb24sIHRoaXMuekRpcmVjdGlvbik7XG4gICAgdmFyIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICB2YXIgb3ZlcnNhbXBsaW5nID0gTWF0aC5yb3VuZCh2aWV3UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uKSB8fCAxO1xuICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcblxuICAgIGlmIChsYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50LCBsYXllclN0YXRlLmV4dGVudCk7XG4gICAgfVxuICAgIGlmIChpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgIC8vIFJldHVybiBmYWxzZSB0byBwcmV2ZW50IHRoZSByZW5kZXJpbmcgb2YgdGhlIGxheWVyLlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgdmFyIGltYWdlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRXh0ZW50KHosIHRpbGVSYW5nZSk7XG5cbiAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAqL1xuICAgIHZhciB0aWxlc1RvRHJhd0J5WiA9IHt9O1xuICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XG5cbiAgICB2YXIgZmluZExvYWRlZFRpbGVzID0gdGhpcy5jcmVhdGVMb2FkZWRUaWxlRmluZGVyKFxuICAgICAgdGlsZVNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXNUb0RyYXdCeVopO1xuXG4gICAgdmFyIGhpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgdmFyIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcgPSBoaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXTtcblxuICAgIHZhciB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICB2YXIgdG1wVGlsZVJhbmdlID0gdGhpcy50bXBUaWxlUmFuZ2VfO1xuICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgdmFyIHRpbGUsIHgsIHk7XG4gICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDE2ICYmIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlID0gdGhpcy5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcbiAgICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRpbGUuaW5UcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMubmV3VGlsZXNfICYmIChpblRyYW5zaXRpb24gfHwgdGhpcy5yZW5kZXJlZFRpbGVzLmluZGV4T2YodGlsZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA9PT0gMSkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaGlsZFRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlKFxuICAgICAgICAgIHRpbGUudGlsZUNvb3JkLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XG4gICAgICAgIHZhciBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgIGNvdmVyZWQgPSBmaW5kTG9hZGVkVGlsZXMoeiArIDEsIGNoaWxkVGlsZVJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvdmVyZWQpIHtcbiAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKFxuICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgbnVsbCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb24gKiBwaXhlbFJhdGlvIC8gdGlsZVBpeGVsUmF0aW8gKiBvdmVyc2FtcGxpbmc7XG4gICAgaWYgKCEodGhpcy5yZW5kZXJlZFJlc29sdXRpb24gJiYgRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDE2ICYmIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcpICYmIChcbiAgICAgIHRoaXMubmV3VGlsZXNfIHx8XG4gICAgICAgICAgISh0aGlzLnJlbmRlcmVkRXh0ZW50XyAmJiBjb250YWluc0V4dGVudCh0aGlzLnJlbmRlcmVkRXh0ZW50XywgZXh0ZW50KSkgfHxcbiAgICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gIT0gc291cmNlUmV2aXNpb24gfHxcbiAgICAgICAgICBvdmVyc2FtcGxpbmcgIT0gdGhpcy5vdmVyc2FtcGxpbmdfIHx8XG4gICAgICAgICAgIWFuaW1hdGluZ09ySW50ZXJhY3RpbmcgJiYgcmVuZGVyZWRSZXNvbHV0aW9uICE9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXG4gICAgKSkge1xuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHZhciB0aWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRXaWR0aCgpICogdGlsZVBpeGVsU2l6ZVswXSAvIG92ZXJzYW1wbGluZyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRIZWlnaHQoKSAqIHRpbGVQaXhlbFNpemVbMV0gLyBvdmVyc2FtcGxpbmcpO1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIGlmIChjYW52YXMud2lkdGggIT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLm92ZXJzYW1wbGluZ18gPSBvdmVyc2FtcGxpbmc7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoKHRoaXMucmVuZGVyZWRFeHRlbnRfICYmICFlcXVhbHMoaW1hZ2VFeHRlbnQsIHRoaXMucmVuZGVyZWRFeHRlbnRfKSkgfHxcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uICE9IHNvdXJjZVJldmlzaW9uKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3ZlcnNhbXBsaW5nID0gdGhpcy5vdmVyc2FtcGxpbmdfO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xuICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGlsZXNUb0RyYXdCeVopLm1hcChOdW1iZXIpO1xuICAgICAgenMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgIGlmIChhID09PSB6KSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoYiA9PT0geikge1xuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uLCBjdXJyZW50U2NhbGUsIGN1cnJlbnRUaWxlUGl4ZWxTaXplLCBjdXJyZW50WiwgaSwgaWk7XG4gICAgICB2YXIgdGlsZUV4dGVudCwgdGlsZUd1dHRlciwgdGlsZXNUb0RyYXcsIHcsIGg7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgY3VycmVudFogPSB6c1tpXTtcbiAgICAgICAgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoY3VycmVudFosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBjdXJyZW50UmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oY3VycmVudFopO1xuICAgICAgICBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICB0aWxlR3V0dGVyID0gdGlsZVBpeGVsUmF0aW8gKiB0aWxlU291cmNlLmdldEd1dHRlckZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHRpbGVzVG9EcmF3ID0gdGlsZXNUb0RyYXdCeVpbY3VycmVudFpdO1xuICAgICAgICBmb3IgKHZhciB0aWxlQ29vcmRLZXkgaW4gdGlsZXNUb0RyYXcpIHtcbiAgICAgICAgICB0aWxlID0gdGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XTtcbiAgICAgICAgICB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUuZ2V0VGlsZUNvb3JkKCksIHRtcEV4dGVudCk7XG4gICAgICAgICAgeCA9ICh0aWxlRXh0ZW50WzBdIC0gaW1hZ2VFeHRlbnRbMF0pIC8gdGlsZVJlc29sdXRpb24gKiB0aWxlUGl4ZWxSYXRpbyAvIG92ZXJzYW1wbGluZztcbiAgICAgICAgICB5ID0gKGltYWdlRXh0ZW50WzNdIC0gdGlsZUV4dGVudFszXSkgLyB0aWxlUmVzb2x1dGlvbiAqIHRpbGVQaXhlbFJhdGlvIC8gb3ZlcnNhbXBsaW5nO1xuICAgICAgICAgIHcgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAvIG92ZXJzYW1wbGluZztcbiAgICAgICAgICBoID0gY3VycmVudFRpbGVQaXhlbFNpemVbMV0gKiBjdXJyZW50U2NhbGUgLyBvdmVyc2FtcGxpbmc7XG4gICAgICAgICAgdGhpcy5kcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIHgsIHksIHcsIGgsIHRpbGVHdXR0ZXIsIHogPT09IGN1cnJlbnRaKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcbiAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb24gKiBwaXhlbFJhdGlvIC8gdGlsZVBpeGVsUmF0aW8gKiBvdmVyc2FtcGxpbmc7XG4gICAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGltYWdlRXh0ZW50O1xuICAgIH1cblxuICAgIHZhciBzY2FsZSA9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb247XG4gICAgdmFyIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5pbWFnZVRyYW5zZm9ybV8sXG4gICAgICBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIsIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMixcbiAgICAgIHNjYWxlLCBzY2FsZSxcbiAgICAgIDAsXG4gICAgICAodGhpcy5yZW5kZXJlZEV4dGVudF9bMF0gLSB2aWV3Q2VudGVyWzBdKSAvIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyxcbiAgICAgICh2aWV3Q2VudGVyWzFdIC0gdGhpcy5yZW5kZXJlZEV4dGVudF9bM10pIC8gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gKiBwaXhlbFJhdGlvKTtcbiAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMuY29vcmRpbmF0ZVRvQ2FudmFzUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIgLSB0cmFuc2Zvcm1bNF0sIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMiAtIHRyYW5zZm9ybVs1XSxcbiAgICAgIHBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbiwgLXBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbixcbiAgICAgIDAsXG4gICAgICAtdmlld0NlbnRlclswXSwgLXZpZXdDZW50ZXJbMV0pO1xuXG5cbiAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgeiwgdGlsZVJhbmdlKTtcbiAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLFxuICAgICAgcHJvamVjdGlvbiwgZXh0ZW50LCB6LCB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpKTtcbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG5cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRvcCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBUaWxlIGd1dHRlci5cbiAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc2l0aW9uIEFwcGx5IGFuIGFscGhhIHRyYW5zaXRpb24uXG4gICAqL1xuICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uIGRyYXdUaWxlSW1hZ2UgKHRpbGUsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbikge1xuICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0VGlsZUltYWdlKHRpbGUpO1xuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICB2YXIgYWxwaGEgPSB0cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxO1xuICAgIHZhciB0aWxlTGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHRpbGVTb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlTGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIGlmIChhbHBoYSA9PT0gMSAmJiAhdGlsZVNvdXJjZS5nZXRPcGFxdWUoZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgfVxuICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsXG4gICAgICBpbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHgsIHksIHcsIGgpO1xuXG4gICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgaWYgKGFscGhhICE9PSAxKSB7XG4gICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHJhbnNpdGlvbikge1xuICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gZ2V0SW1hZ2UgKCkge1xuICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5jYW52YXMgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlVHJhbnNmb3JtID0gZnVuY3Rpb24gZ2V0SW1hZ2VUcmFuc2Zvcm0gKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlVHJhbnNmb3JtXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBpbWFnZSBmcm9tIGEgdGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGVJbWFnZSA9IGZ1bmN0aW9uIGdldFRpbGVJbWFnZSAodGlsZSkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSkuZ2V0SW1hZ2UoKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG59KEludGVybWVkaWF0ZUNhbnZhc1JlbmRlcmVyKSk7XG5cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhpcyByZW5kZXJlciBoYW5kbGVzIHRoZSBwcm92aWRlZCBsYXllci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGNhbmRpZGF0ZSBsYXllci5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZW5kZXJlciBjYW4gcmVuZGVyIHRoZSBsYXllci5cbiAqL1xuQ2FudmFzVGlsZUxheWVyUmVuZGVyZXJbJ2hhbmRsZXMnXSA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gIHJldHVybiBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5USUxFO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSBhIGxheWVyIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwUmVuZGVyZXIgVGhlIG1hcCByZW5kZXJlci5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgVGhlIGxheWVyIHRvIGJlIHJlbmRlcmVyZC5cbiAqIEByZXR1cm4ge0NhbnZhc1RpbGVMYXllclJlbmRlcmVyfSBUaGUgbGF5ZXIgcmVuZGVyZXIuXG4gKi9cbkNhbnZhc1RpbGVMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpKTtcbn07XG5cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gKi9cbkNhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllcjtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvUmVwbGF5R3JvdXBcbiAqL1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcmVwbGF5IGdyb3Vwcy5cbiAqL1xudmFyIFJlcGxheUdyb3VwID0gZnVuY3Rpb24gUmVwbGF5R3JvdXAgKCkge307XG5cblJlcGxheUdyb3VwLnByb3RvdHlwZS5nZXRSZXBsYXkgPSBmdW5jdGlvbiBnZXRSZXBsYXkgKHpJbmRleCwgcmVwbGF5VHlwZSkge1xuICByZXR1cm4gYWJzdHJhY3QoKTtcbn07XG5cbi8qKlxuICogQGFic3RyYWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqL1xuUmVwbGF5R3JvdXAucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5ICgpIHtcbiAgcmV0dXJuIGFic3RyYWN0KCk7XG59O1xuXG4vKipcbiAqIEBhYnN0cmFjdFxuICogQHBhcmFtIHtib29sZWFufSBncm91cCBHcm91cCB3aXRoIHByZXZpb3VzIHJlcGxheVxuICogQHJldHVybiB7QXJyYXk8Kj59IFRoZSByZXN1bHRpbmcgaW5zdHJ1Y3Rpb24gZ3JvdXBcbiAqL1xuUmVwbGF5R3JvdXAucHJvdG90eXBlLmFkZERlY2x1dHRlciA9IGZ1bmN0aW9uIGFkZERlY2x1dHRlciAoZ3JvdXApIHtcbiAgcmV0dXJuIGFic3RyYWN0KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZXBsYXlHcm91cDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5R3JvdXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9SZXBsYXlUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIENJUkNMRTogJ0NpcmNsZScsXG4gIERFRkFVTFQ6ICdEZWZhdWx0JyxcbiAgSU1BR0U6ICdJbWFnZScsXG4gIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgVEVYVDogJ1RleHQnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvbGVuZ3RoXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IExlbmd0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIHZhciBsZW5ndGggPSAwO1xuICBmb3IgKHZhciBpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgIGxlbmd0aCArPSBNYXRoLnNxcnQoKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBlcmltZXRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciBwZXJpbWV0ZXIgPSBsaW5lU3RyaW5nTGVuZ3RoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdIC0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXSAtIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgcGVyaW1ldGVyICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gIHJldHVybiBwZXJpbWV0ZXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxlbmd0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RleHRwYXRoXG4gKi9cbmltcG9ydCB7bGVycH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBQYXRoIHRvIHB1dCB0ZXh0IG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBTdGFydCBvZmZzZXQgb2YgdGhlIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgb2Zmc2V0IG9mIHRoZSBgZmxhdENvb3JkaW5hdGVzYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dCB0byBwbGFjZSBvbiB0aGUgcGF0aC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTpudW1iZXJ9IG1lYXN1cmUgTWVhc3VyZSBmdW5jdGlvbiByZXR1cm5pbmcgdGhlXG4gKiB3aWR0aCBvZiB0aGUgY2hhcmFjdGVyIHBhc3NlZCBhcyAxc3QgYXJndW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRNIG0gYWxvbmcgdGhlIHBhdGggd2hlcmUgdGhlIHRleHQgc3RhcnRzLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heEFuZ2xlIE1heCBhbmdsZSBiZXR3ZWVuIGFkamFjZW50IGNoYXJzIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTwqPj59IFRoZSByZXN1bHQgYXJyYXkgb2YgbnVsbCBpZiBgbWF4QW5nbGVgIHdhc1xuICogZXhjZWVkZWQuIEVudHJpZXMgb2YgdGhlIGFycmF5IGFyZSB4LCB5LCBhbmNob3JYLCBhbmdsZSwgY2h1bmsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dE9uUGF0aChcbiAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0ZXh0LCBtZWFzdXJlLCBzdGFydE0sIG1heEFuZ2xlKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICAvLyBLZWVwIHRleHQgdXByaWdodFxuICB2YXIgcmV2ZXJzZSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID4gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG5cbiAgdmFyIG51bUNoYXJzID0gdGV4dC5sZW5ndGg7XG5cbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgdmFyIHNlZ21lbnRNID0gMDtcbiAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4MSwgMikgKyBNYXRoLnBvdyh5MiAtIHkxLCAyKSk7XG5cbiAgdmFyIGNodW5rID0gJyc7XG4gIHZhciBjaHVua0xlbmd0aCA9IDA7XG4gIHZhciBkYXRhLCBpbmRleCwgcHJldmlvdXNBbmdsZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGFyczsgKytpKSB7XG4gICAgaW5kZXggPSByZXZlcnNlID8gbnVtQ2hhcnMgLSBpIC0gMSA6IGk7XG4gICAgdmFyIGNoYXIgPSB0ZXh0LmNoYXJBdChpbmRleCk7XG4gICAgY2h1bmsgPSByZXZlcnNlID8gY2hhciArIGNodW5rIDogY2h1bmsgKyBjaGFyO1xuICAgIHZhciBjaGFyTGVuZ3RoID0gbWVhc3VyZShjaHVuaykgLSBjaHVua0xlbmd0aDtcbiAgICBjaHVua0xlbmd0aCArPSBjaGFyTGVuZ3RoO1xuICAgIHZhciBjaGFyTSA9IHN0YXJ0TSArIGNoYXJMZW5ndGggLyAyO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUgJiYgc2VnbWVudE0gKyBzZWdtZW50TGVuZ3RoIDwgY2hhck0pIHtcbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgIHNlZ21lbnRNICs9IHNlZ21lbnRMZW5ndGg7XG4gICAgICBzZWdtZW50TGVuZ3RoID0gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIH1cbiAgICB2YXIgc2VnbWVudFBvcyA9IGNoYXJNIC0gc2VnbWVudE07XG4gICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih5MiAtIHkxLCB4MiAtIHgxKTtcbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgYW5nbGUgKz0gYW5nbGUgPiAwID8gLU1hdGguUEkgOiBNYXRoLlBJO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXNBbmdsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHByZXZpb3VzQW5nbGU7XG4gICAgICBkZWx0YSArPSAoZGVsdGEgPiBNYXRoLlBJKSA/IC0yICogTWF0aC5QSSA6IChkZWx0YSA8IC1NYXRoLlBJKSA/IDIgKiBNYXRoLlBJIDogMDtcbiAgICAgIGlmIChNYXRoLmFicyhkZWx0YSkgPiBtYXhBbmdsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVycG9sYXRlID0gc2VnbWVudFBvcyAvIHNlZ21lbnRMZW5ndGg7XG4gICAgdmFyIHggPSBsZXJwKHgxLCB4MiwgaW50ZXJwb2xhdGUpO1xuICAgIHZhciB5ID0gbGVycCh5MSwgeTIsIGludGVycG9sYXRlKTtcbiAgICBpZiAocHJldmlvdXNBbmdsZSA9PSBhbmdsZSkge1xuICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgZGF0YVswXSA9IHg7XG4gICAgICAgIGRhdGFbMV0gPSB5O1xuICAgICAgICBkYXRhWzJdID0gY2hhckxlbmd0aCAvIDI7XG4gICAgICB9XG4gICAgICBkYXRhWzRdID0gY2h1bms7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNodW5rID0gY2hhcjtcbiAgICAgIGNodW5rTGVuZ3RoID0gY2hhckxlbmd0aDtcbiAgICAgIGRhdGEgPSBbeCwgeSwgY2hhckxlbmd0aCAvIDIsIGFuZ2xlLCBjaHVua107XG4gICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICByZXN1bHQudW5zaGlmdChkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGRhdGEpO1xuICAgICAgfVxuICAgICAgcHJldmlvdXNBbmdsZSA9IGFuZ2xlO1xuICAgIH1cbiAgICBzdGFydE0gKz0gY2hhckxlbmd0aDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXh0cGF0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9JbnN0cnVjdGlvblxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xudmFyIEluc3RydWN0aW9uID0ge1xuICBCRUdJTl9HRU9NRVRSWTogMCxcbiAgQkVHSU5fUEFUSDogMSxcbiAgQ0lSQ0xFOiAyLFxuICBDTE9TRV9QQVRIOiAzLFxuICBDVVNUT006IDQsXG4gIERSQVdfQ0hBUlM6IDUsXG4gIERSQVdfSU1BR0U6IDYsXG4gIEVORF9HRU9NRVRSWTogNyxcbiAgRklMTDogOCxcbiAgTU9WRV9UT19MSU5FX1RPOiA5LFxuICBTRVRfRklMTF9TVFlMRTogMTAsXG4gIFNFVF9TVFJPS0VfU1RZTEU6IDExLFxuICBTVFJPS0U6IDEyXG59O1xuXG5cbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBmaWxsSW5zdHJ1Y3Rpb24gPSBbSW5zdHJ1Y3Rpb24uRklMTF07XG5cblxuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SW5zdHJ1Y3Rpb24+fVxuICovXG5leHBvcnQgdmFyIHN0cm9rZUluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLlNUUk9LRV07XG5cblxuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SW5zdHJ1Y3Rpb24+fVxuICovXG5leHBvcnQgdmFyIGJlZ2luUGF0aEluc3RydWN0aW9uID0gW0luc3RydWN0aW9uLkJFR0lOX1BBVEhdO1xuXG5cbi8qKlxuICogQHR5cGUge0FycmF5PEluc3RydWN0aW9uPn1cbiAqL1xuZXhwb3J0IHZhciBjbG9zZVBhdGhJbnN0cnVjdGlvbiA9IFtJbnN0cnVjdGlvbi5DTE9TRV9QQVRIXTtcblxuXG5leHBvcnQgZGVmYXVsdCBJbnN0cnVjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5zdHJ1Y3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9yZXBsYXlcbiAqL1xuaW1wb3J0IFJlcGxheVR5cGUgZnJvbSAnLi9SZXBsYXlUeXBlLmpzJztcblxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PFJlcGxheVR5cGU+fVxuICovXG5leHBvcnQgdmFyIE9SREVSID0gW1xuICBSZXBsYXlUeXBlLlBPTFlHT04sXG4gIFJlcGxheVR5cGUuQ0lSQ0xFLFxuICBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HLFxuICBSZXBsYXlUeXBlLklNQUdFLFxuICBSZXBsYXlUeXBlLlRFWFQsXG4gIFJlcGxheVR5cGUuREVGQVVMVFxuXTtcblxuLyoqXG4gKiBAY29uc3RcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgVEVYVF9BTElHTiA9IHt9O1xuVEVYVF9BTElHTlsnbGVmdCddID0gMDtcblRFWFRfQUxJR05bJ2VuZCddID0gMDtcblRFWFRfQUxJR05bJ2NlbnRlciddID0gMC41O1xuVEVYVF9BTElHTlsncmlnaHQnXSA9IDE7XG5URVhUX0FMSUdOWydzdGFydCddID0gMTtcblRFWFRfQUxJR05bJ3RvcCddID0gMDtcblRFWFRfQUxJR05bJ21pZGRsZSddID0gMC41O1xuVEVYVF9BTElHTlsnaGFuZ2luZyddID0gMC4yO1xuVEVYVF9BTElHTlsnYWxwaGFiZXRpYyddID0gMC44O1xuVEVYVF9BTElHTlsnaWRlb2dyYXBoaWMnXSA9IDAuODtcblRFWFRfQUxJR05bJ2JvdHRvbSddID0gMTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL1JlcGxheVxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQge2VxdWFscywgcmV2ZXJzZVN1YkFycmF5fSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2FzQ29sb3JMaWtlfSBmcm9tICcuLi8uLi9jb2xvcmxpa2UuanMnO1xuaW1wb3J0IHtidWZmZXIsIGNsb25lLCBjb29yZGluYXRlUmVsYXRpb25zaGlwLCBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGUsXG4gIGNyZWF0ZU9yVXBkYXRlRW1wdHksIGV4dGVuZCwgZXh0ZW5kQ29vcmRpbmF0ZSwgaW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi4vLi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uLy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzLCBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSwgaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheX0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHtsaW5lU3RyaW5nTGVuZ3RofSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvbGVuZ3RoLmpzJztcbmltcG9ydCB7ZHJhd1RleHRPblBhdGh9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90ZXh0cGF0aC5qcyc7XG5pbXBvcnQge3RyYW5zZm9ybTJEfSBmcm9tICcuLi8uLi9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7Q0FOVkFTX0xJTkVfREFTSH0gZnJvbSAnLi4vLi4vaGFzLmpzJztcbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vLi4vb2JqLmpzJztcbmltcG9ydCBWZWN0b3JDb250ZXh0IGZyb20gJy4uL1ZlY3RvckNvbnRleHQuanMnO1xuaW1wb3J0IHtkcmF3SW1hZ2UsIHJlc2V0VHJhbnNmb3JtLCBkZWZhdWx0UGFkZGluZywgZGVmYXVsdEZpbGxTdHlsZSwgZGVmYXVsdFN0cm9rZVN0eWxlLFxuICBkZWZhdWx0TWl0ZXJMaW1pdCwgZGVmYXVsdExpbmVXaWR0aCwgZGVmYXVsdExpbmVKb2luLCBkZWZhdWx0TGluZURhc2hPZmZzZXQsXG4gIGRlZmF1bHRMaW5lRGFzaCwgZGVmYXVsdExpbmVDYXB9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQge1RFWFRfQUxJR059IGZyb20gJy4uL3JlcGxheS5qcyc7XG5pbXBvcnQge1xuICBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLFxuICBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sXG4gIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLFxuICBzZXRGcm9tQXJyYXkgYXMgdHJhbnNmb3JtU2V0RnJvbUFycmF5XG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xudmFyIHRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG5cblxuLyoqXG4gKiBAdHlwZSB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuXG52YXIgQ2FudmFzUmVwbGF5ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVmVjdG9yQ29udGV4dCkge1xuICBmdW5jdGlvbiBDYW52YXNSZXBsYXkodG9sZXJhbmNlLCBtYXhFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIG92ZXJsYXBzLCBkZWNsdXR0ZXJUcmVlKSB7XG4gICAgVmVjdG9yQ29udGV4dC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez99XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJUcmVlID0gZGVjbHV0dGVyVHJlZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudG9sZXJhbmNlID0gdG9sZXJhbmNlO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMubWF4RXh0ZW50ID0gbWF4RXh0ZW50O1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxhcHMgPSBvdmVybGFwcztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heExpbmVXaWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmFsaWduRmlsbF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTwqPn1cbiAgICAgKi9cbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAqL1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PCo+fVxuICAgICAqL1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZUNhY2hlXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICovXG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gKi8gKHt9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSAwO1xuXG4gIH1cblxuICBpZiAoIFZlY3RvckNvbnRleHQgKSBDYW52YXNSZXBsYXkuX19wcm90b19fID0gVmVjdG9yQ29udGV4dDtcbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFZlY3RvckNvbnRleHQgJiYgVmVjdG9yQ29udGV4dC5wcm90b3R5cGUgKTtcbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1JlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHAxIDFzdCBwb2ludCBvZiB0aGUgYmFja2dyb3VuZCBib3guXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwMiAybmQgcG9pbnQgb2YgdGhlIGJhY2tncm91bmQgYm94LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcDMgM3JkIHBvaW50IG9mIHRoZSBiYWNrZ3JvdW5kIGJveC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHA0IDR0aCBwb2ludCBvZiB0aGUgYmFja2dyb3VuZCBib3guXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBzdHJva2VJbnN0cnVjdGlvbiBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheVRleHRCYWNrZ3JvdW5kXyA9IGZ1bmN0aW9uIHJlcGxheVRleHRCYWNrZ3JvdW5kXyAoY29udGV4dCwgcDEsIHAyLCBwMywgcDQsIGZpbGxJbnN0cnVjdGlvbiwgc3Ryb2tlSW5zdHJ1Y3Rpb24pIHtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQubW92ZVRvLmFwcGx5KGNvbnRleHQsIHAxKTtcbiAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwMik7XG4gICAgY29udGV4dC5saW5lVG8uYXBwbHkoY29udGV4dCwgcDMpO1xuICAgIGNvbnRleHQubGluZVRvLmFwcGx5KGNvbnRleHQsIHA0KTtcbiAgICBjb250ZXh0LmxpbmVUby5hcHBseShjb250ZXh0LCBwMSk7XG4gICAgaWYgKGZpbGxJbnN0cnVjdGlvbikge1xuICAgICAgdGhpcy5hbGlnbkZpbGxfID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoZmlsbEluc3RydWN0aW9uWzJdKTtcbiAgICAgIHRoaXMuZmlsbF8oY29udGV4dCk7XG4gICAgfVxuICAgIGlmIChzdHJva2VJbnN0cnVjdGlvbikge1xuICAgICAgdGhpcy5zZXRTdHJva2VTdHlsZV8oY29udGV4dCwgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKHN0cm9rZUluc3RydWN0aW9uKSk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yWCBBbmNob3IgWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuY2hvclkgQW5jaG9yIFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSBkZWNsdXR0ZXJHcm91cCBEZWNsdXR0ZXIgZ3JvdXAuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIFNjYWxlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgdG8gcGl4ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBwYWRkaW5nIFBhZGRpbmcuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGZpbGxJbnN0cnVjdGlvbiBGaWxsIGluc3RydWN0aW9uLlxuICAgKiBAcGFyYW0ge0FycmF5PCo+fSBzdHJva2VJbnN0cnVjdGlvbiBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheUltYWdlXyA9IGZ1bmN0aW9uIHJlcGxheUltYWdlXyAoXG4gICAgY29udGV4dCxcbiAgICB4LFxuICAgIHksXG4gICAgaW1hZ2UsXG4gICAgYW5jaG9yWCxcbiAgICBhbmNob3JZLFxuICAgIGRlY2x1dHRlckdyb3VwLFxuICAgIGhlaWdodCxcbiAgICBvcGFjaXR5LFxuICAgIG9yaWdpblgsXG4gICAgb3JpZ2luWSxcbiAgICByb3RhdGlvbixcbiAgICBzY2FsZSxcbiAgICBzbmFwVG9QaXhlbCxcbiAgICB3aWR0aCxcbiAgICBwYWRkaW5nLFxuICAgIGZpbGxJbnN0cnVjdGlvbixcbiAgICBzdHJva2VJbnN0cnVjdGlvblxuICApIHtcbiAgICB2YXIgZmlsbFN0cm9rZSA9IGZpbGxJbnN0cnVjdGlvbiB8fCBzdHJva2VJbnN0cnVjdGlvbjtcbiAgICBhbmNob3JYICo9IHNjYWxlO1xuICAgIGFuY2hvclkgKj0gc2NhbGU7XG4gICAgeCAtPSBhbmNob3JYO1xuICAgIHkgLT0gYW5jaG9yWTtcblxuICAgIHZhciB3ID0gKHdpZHRoICsgb3JpZ2luWCA+IGltYWdlLndpZHRoKSA/IGltYWdlLndpZHRoIC0gb3JpZ2luWCA6IHdpZHRoO1xuICAgIHZhciBoID0gKGhlaWdodCArIG9yaWdpblkgPiBpbWFnZS5oZWlnaHQpID8gaW1hZ2UuaGVpZ2h0IC0gb3JpZ2luWSA6IGhlaWdodDtcbiAgICB2YXIgYm94VyA9IHBhZGRpbmdbM10gKyB3ICogc2NhbGUgKyBwYWRkaW5nWzFdO1xuICAgIHZhciBib3hIID0gcGFkZGluZ1swXSArIGggKiBzY2FsZSArIHBhZGRpbmdbMl07XG4gICAgdmFyIGJveFggPSB4IC0gcGFkZGluZ1szXTtcbiAgICB2YXIgYm94WSA9IHkgLSBwYWRkaW5nWzBdO1xuXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG4gICAgdmFyIHAxO1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqL1xuICAgIHZhciBwMjtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi9cbiAgICB2YXIgcDM7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovXG4gICAgdmFyIHA0O1xuICAgIGlmIChmaWxsU3Ryb2tlIHx8IHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICBwMSA9IFtib3hYLCBib3hZXTtcbiAgICAgIHAyID0gW2JveFggKyBib3hXLCBib3hZXTtcbiAgICAgIHAzID0gW2JveFggKyBib3hXLCBib3hZICsgYm94SF07XG4gICAgICBwNCA9IFtib3hYLCBib3hZICsgYm94SF07XG4gICAgfVxuXG4gICAgdmFyIHRyYW5zZm9ybSA9IG51bGw7XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICB2YXIgY2VudGVyWCA9IHggKyBhbmNob3JYO1xuICAgICAgdmFyIGNlbnRlclkgPSB5ICsgYW5jaG9yWTtcbiAgICAgIHRyYW5zZm9ybSA9IGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBjZW50ZXJYLCBjZW50ZXJZLCAxLCAxLCByb3RhdGlvbiwgLWNlbnRlclgsIC1jZW50ZXJZKTtcblxuICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eSh0bXBFeHRlbnQpO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZSh0bXBFeHRlbnQsIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDEpKTtcbiAgICAgIGV4dGVuZENvb3JkaW5hdGUodG1wRXh0ZW50LCBhcHBseVRyYW5zZm9ybSh0bXBUcmFuc2Zvcm0sIHAyKSk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKHRtcEV4dGVudCwgYXBwbHlUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBwMykpO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZSh0bXBFeHRlbnQsIGFwcGx5VHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcDQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3JlYXRlT3JVcGRhdGUoYm94WCwgYm94WSwgYm94WCArIGJveFcsIGJveFkgKyBib3hILCB0bXBFeHRlbnQpO1xuICAgIH1cbiAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgdmFyIHN0cm9rZVBhZGRpbmcgPSBzdHJva2VJbnN0cnVjdGlvbiA/IChzdHJva2VJbnN0cnVjdGlvblsyXSAqIHNjYWxlIC8gMikgOiAwO1xuICAgIHZhciBpbnRlcnNlY3RzID1cbiAgICAgICAgdG1wRXh0ZW50WzBdIC0gc3Ryb2tlUGFkZGluZyA8PSBjYW52YXMud2lkdGggJiYgdG1wRXh0ZW50WzJdICsgc3Ryb2tlUGFkZGluZyA+PSAwICYmXG4gICAgICAgIHRtcEV4dGVudFsxXSAtIHN0cm9rZVBhZGRpbmcgPD0gY2FudmFzLmhlaWdodCAmJiB0bXBFeHRlbnRbM10gKyBzdHJva2VQYWRkaW5nID49IDA7XG5cbiAgICBpZiAoc25hcFRvUGl4ZWwpIHtcbiAgICAgIHggPSBNYXRoLnJvdW5kKHgpO1xuICAgICAgeSA9IE1hdGgucm91bmQoeSk7XG4gICAgfVxuXG4gICAgaWYgKGRlY2x1dHRlckdyb3VwKSB7XG4gICAgICBpZiAoIWludGVyc2VjdHMgJiYgZGVjbHV0dGVyR3JvdXBbNF0gPT0gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBleHRlbmQoZGVjbHV0dGVyR3JvdXAsIHRtcEV4dGVudCk7XG4gICAgICB2YXIgZGVjbHV0dGVyQXJncyA9IGludGVyc2VjdHMgP1xuICAgICAgICBbY29udGV4dCwgdHJhbnNmb3JtID8gdHJhbnNmb3JtLnNsaWNlKDApIDogbnVsbCwgb3BhY2l0eSwgaW1hZ2UsIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHNjYWxlXSA6XG4gICAgICAgIG51bGw7XG4gICAgICBpZiAoZGVjbHV0dGVyQXJncyAmJiBmaWxsU3Ryb2tlKSB7XG4gICAgICAgIGRlY2x1dHRlckFyZ3MucHVzaChmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCBwMSwgcDIsIHAzLCBwNCk7XG4gICAgICB9XG4gICAgICBkZWNsdXR0ZXJHcm91cC5wdXNoKGRlY2x1dHRlckFyZ3MpO1xuICAgIH0gZWxzZSBpZiAoaW50ZXJzZWN0cykge1xuICAgICAgaWYgKGZpbGxTdHJva2UpIHtcbiAgICAgICAgdGhpcy5yZXBsYXlUZXh0QmFja2dyb3VuZF8oY29udGV4dCwgcDEsIHAyLCBwMywgcDQsXG4gICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGZpbGxJbnN0cnVjdGlvbiksXG4gICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKHN0cm9rZUluc3RydWN0aW9uKSk7XG4gICAgICB9XG4gICAgICBkcmF3SW1hZ2UoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBpbWFnZSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgc2NhbGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGRhc2hBcnJheSBEYXNoIGFycmF5LlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEYXNoIGFycmF5IHdpdGggcGl4ZWwgcmF0aW8gYXBwbGllZFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBseVBpeGVsUmF0aW8gPSBmdW5jdGlvbiBhcHBseVBpeGVsUmF0aW8gKGRhc2hBcnJheSkge1xuICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5waXhlbFJhdGlvO1xuICAgIHJldHVybiBwaXhlbFJhdGlvID09IDEgPyBkYXNoQXJyYXkgOiBkYXNoQXJyYXkubWFwKGZ1bmN0aW9uKGRhc2gpIHtcbiAgICAgIHJldHVybiBkYXNoICogcGl4ZWxSYXRpbztcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjbG9zZWQgTGFzdCBpbnB1dCBjb29yZGluYXRlIGVxdWFscyBmaXJzdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBza2lwRmlyc3QgU2tpcCBmaXJzdCBjb29yZGluYXRlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge251bWJlcn0gTXkgZW5kLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBhcHBlbmRGbGF0Q29vcmRpbmF0ZXMgKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2xvc2VkLCBza2lwRmlyc3QpIHtcblxuICAgIHZhciBteUVuZCA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBleHRlbnQgPSB0aGlzLmdldEJ1ZmZlcmVkTWF4RXh0ZW50KCk7XG4gICAgaWYgKHNraXBGaXJzdCkge1xuICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICB9XG4gICAgdmFyIGxhc3RDb29yZCA9IFtmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXTtcbiAgICB2YXIgbmV4dENvb3JkID0gW05hTiwgTmFOXTtcbiAgICB2YXIgc2tpcHBlZCA9IHRydWU7XG5cbiAgICB2YXIgaSwgbGFzdFJlbCwgbmV4dFJlbDtcbiAgICBmb3IgKGkgPSBvZmZzZXQgKyBzdHJpZGU7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICBuZXh0Q29vcmRbMF0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICBuZXh0Q29vcmRbMV0gPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgbmV4dFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBuZXh0Q29vcmQpO1xuICAgICAgaWYgKG5leHRSZWwgIT09IGxhc3RSZWwpIHtcbiAgICAgICAgaWYgKHNraXBwZWQpIHtcbiAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdENvb3JkWzBdO1xuICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBsYXN0Q29vcmRbMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IG5leHRDb29yZFswXTtcbiAgICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IG5leHRDb29yZFsxXTtcbiAgICAgICAgc2tpcHBlZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChuZXh0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HKSB7XG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMF07XG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXNbbXlFbmQrK10gPSBuZXh0Q29vcmRbMV07XG4gICAgICAgIHNraXBwZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNraXBwZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgbGFzdENvb3JkWzBdID0gbmV4dENvb3JkWzBdO1xuICAgICAgbGFzdENvb3JkWzFdID0gbmV4dENvb3JkWzFdO1xuICAgICAgbGFzdFJlbCA9IG5leHRSZWw7XG4gICAgfVxuXG4gICAgLy8gTGFzdCBjb29yZGluYXRlIGVxdWFscyBmaXJzdCBvciBvbmx5IG9uZSBwb2ludCB0byBhcHBlbmQ6XG4gICAgaWYgKChjbG9zZWQgJiYgc2tpcHBlZCkgfHwgaSA9PT0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgICB0aGlzLmNvb3JkaW5hdGVzW215RW5kKytdID0gbGFzdENvb3JkWzBdO1xuICAgICAgdGhpcy5jb29yZGluYXRlc1tteUVuZCsrXSA9IGxhc3RDb29yZFsxXTtcbiAgICB9XG4gICAgcmV0dXJuIG15RW5kO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHJlcGxheUVuZHMgUmVwbGF5IGVuZHMuXG4gICAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5kcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfID0gZnVuY3Rpb24gZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgcmVwbGF5RW5kcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgcmVwbGF5RW5kID0gdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgcmVwbGF5RW5kcy5wdXNoKHJlcGxheUVuZCk7XG4gICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5kcmF3Q3VzdG9tID0gZnVuY3Rpb24gZHJhd0N1c3RvbSAoZ2VvbWV0cnksIGZlYXR1cmUsIHJlbmRlcmVyKSB7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIHJlcGxheUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcywgcmVwbGF5RW5kLCByZXBsYXlFbmRzLCByZXBsYXlFbmRzcztcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aVBvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KTtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICByZXBsYXlFbmRzcyA9IFtdO1xuICAgICAgdmFyIGVuZHNzID0gZ2VvbWV0cnkuZ2V0RW5kc3MoKTtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBteUVuZHMgPSBbXTtcbiAgICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3Q3VzdG9tQ29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBteUVuZHMpO1xuICAgICAgICByZXBsYXlFbmRzcy5wdXNoKG15RW5kcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmRzcywgZ2VvbWV0cnksIHJlbmRlcmVyLCBpbmZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5XSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5QT0xZR09OIHx8IHR5cGUgPT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgICByZXBsYXlFbmRzID0gW107XG4gICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAodHlwZSA9PSBHZW9tZXRyeVR5cGUuUE9MWUdPTikgP1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkgOlxuICAgICAgICBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0N1c3RvbUNvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRFbmRzKCksXG4gICAgICAgIHN0cmlkZSwgcmVwbGF5RW5kcyk7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmRzLCBnZW9tZXRyeSwgcmVuZGVyZXIsIGluZmxhdGVDb29yZGluYXRlc0FycmF5XSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fCB0eXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICByZXBsYXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmQsIGdlb21ldHJ5LCByZW5kZXJlciwgaW5mbGF0ZUNvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IEdlb21ldHJ5VHlwZS5QT0lOVCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgICAgcmVwbGF5RW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5DVVNUT00sXG4gICAgICAgIHJlcGxheUJlZ2luLCByZXBsYXlFbmQsIGdlb21ldHJ5LCByZW5kZXJlcl0pO1xuICAgIH1cbiAgICB0aGlzLmVuZEdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuYmVnaW5HZW9tZXRyeSA9IGZ1bmN0aW9uIGJlZ2luR2VvbWV0cnkgKGdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24xXyA9IFtDYW52YXNJbnN0cnVjdGlvbi5CRUdJTl9HRU9NRVRSWSwgZmVhdHVyZSwgMF07XG4gICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaCh0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfKTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjJfID0gW0NhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZLCBmZWF0dXJlLCAwXTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl8pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gZmluaXNoICgpIHt9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5maWxsXyA9IGZ1bmN0aW9uIGZpbGxfIChjb250ZXh0KSB7XG4gICAgaWYgKHRoaXMuYWxpZ25GaWxsXykge1xuICAgICAgdmFyIG9yaWdpbiA9IGFwcGx5VHJhbnNmb3JtKHRoaXMucmVuZGVyZWRUcmFuc2Zvcm1fLCBbMCwgMF0pO1xuICAgICAgdmFyIHJlcGVhdFNpemUgPSA1MTIgKiB0aGlzLnBpeGVsUmF0aW87XG4gICAgICBjb250ZXh0LnRyYW5zbGF0ZShvcmlnaW5bMF0gJSByZXBlYXRTaXplLCBvcmlnaW5bMV0gJSByZXBlYXRTaXplKTtcbiAgICAgIGNvbnRleHQucm90YXRlKHRoaXMudmlld1JvdGF0aW9uXyk7XG4gICAgfVxuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIGlmICh0aGlzLmFsaWduRmlsbF8pIHtcbiAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIHJlc2V0VHJhbnNmb3JtKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGluc3RydWN0aW9uIEluc3RydWN0aW9uLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5zZXRTdHJva2VTdHlsZV8gPSBmdW5jdGlvbiBzZXRTdHJva2VTdHlsZV8gKGNvbnRleHQsIGluc3RydWN0aW9uKSB7XG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgIGNvbnRleHQubGluZUNhcCA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUNhcH0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICBjb250ZXh0LmxpbmVKb2luID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzVdKTtcbiAgICBpZiAoQ0FOVkFTX0xJTkVfREFTSCkge1xuICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgY29udGV4dC5zZXRMaW5lRGFzaCgvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChpbnN0cnVjdGlvbls2XSkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9IGRlY2x1dHRlckdyb3VwIERlY2x1dHRlciBncm91cC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlbmRlckRlY2x1dHRlcl8gPSBmdW5jdGlvbiByZW5kZXJEZWNsdXR0ZXJfIChkZWNsdXR0ZXJHcm91cCwgZmVhdHVyZSkge1xuICAgIGlmIChkZWNsdXR0ZXJHcm91cCAmJiBkZWNsdXR0ZXJHcm91cC5sZW5ndGggPiA1KSB7XG4gICAgICB2YXIgZ3JvdXBDb3VudCA9IGRlY2x1dHRlckdyb3VwWzRdO1xuICAgICAgaWYgKGdyb3VwQ291bnQgPT0gMSB8fCBncm91cENvdW50ID09IGRlY2x1dHRlckdyb3VwLmxlbmd0aCAtIDUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zdHJ1Y3RzL1JCdXNoLmpzXCIpLkVudHJ5fSAqL1xuICAgICAgICB2YXIgYm94ID0ge1xuICAgICAgICAgIG1pblg6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMF0pLFxuICAgICAgICAgIG1pblk6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMV0pLFxuICAgICAgICAgIG1heFg6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMl0pLFxuICAgICAgICAgIG1heFk6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbM10pLFxuICAgICAgICAgIHZhbHVlOiBmZWF0dXJlXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5kZWNsdXR0ZXJUcmVlLmNvbGxpZGVzKGJveCkpIHtcbiAgICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWUuaW5zZXJ0KGJveCk7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDUsIGpqID0gZGVjbHV0dGVyR3JvdXAubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgdmFyIGRlY2x1dHRlckRhdGEgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoZGVjbHV0dGVyR3JvdXBbal0pO1xuICAgICAgICAgICAgaWYgKGRlY2x1dHRlckRhdGEpIHtcbiAgICAgICAgICAgICAgaWYgKGRlY2x1dHRlckRhdGEubGVuZ3RoID4gMTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxheVRleHRCYWNrZ3JvdW5kXyhkZWNsdXR0ZXJEYXRhWzBdLFxuICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyRGF0YVsxM10sIGRlY2x1dHRlckRhdGFbMTRdLCBkZWNsdXR0ZXJEYXRhWzE1XSwgZGVjbHV0dGVyRGF0YVsxNl0sXG4gICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJEYXRhWzExXSwgZGVjbHV0dGVyRGF0YVsxMl0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRyYXdJbWFnZS5hcHBseSh1bmRlZmluZWQsIGRlY2x1dHRlckRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWNsdXR0ZXJHcm91cC5sZW5ndGggPSA1O1xuICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGRlY2x1dHRlckdyb3VwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gc2tpcHBlZEZlYXR1cmVzSGFzaCBJZHMgb2YgZmVhdHVyZXNcbiAgICogICAgIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGluc3RydWN0aW9ucyBJbnN0cnVjdGlvbnMgYXJyYXkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc25hcFRvUGl4ZWwgU25hcCBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0IHRvIGludGVnZXIgcGl4ZWxzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKChpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KSk6IFR8dW5kZWZpbmVkfSBmZWF0dXJlQ2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2hpdEV4dGVudCBPbmx5IGNoZWNrIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IHRoaXNcbiAgICogICAgIGV4dGVudC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUucmVwbGF5XyA9IGZ1bmN0aW9uIHJlcGxheV8gKFxuICAgIGNvbnRleHQsXG4gICAgdHJhbnNmb3JtLFxuICAgIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgaW5zdHJ1Y3Rpb25zLFxuICAgIHNuYXBUb1BpeGVsLFxuICAgIGZlYXR1cmVDYWxsYmFjayxcbiAgICBvcHRfaGl0RXh0ZW50XG4gICkge1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgcGl4ZWxDb29yZGluYXRlcztcbiAgICBpZiAodGhpcy5waXhlbENvb3JkaW5hdGVzXyAmJiBlcXVhbHModHJhbnNmb3JtLCB0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXykpIHtcbiAgICAgIHBpeGVsQ29vcmRpbmF0ZXMgPSB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMucGl4ZWxDb29yZGluYXRlc18pIHtcbiAgICAgICAgdGhpcy5waXhlbENvb3JkaW5hdGVzXyA9IFtdO1xuICAgICAgfVxuICAgICAgcGl4ZWxDb29yZGluYXRlcyA9IHRyYW5zZm9ybTJEKFxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLCAwLCB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCwgMixcbiAgICAgICAgdHJhbnNmb3JtLCB0aGlzLnBpeGVsQ29vcmRpbmF0ZXNfKTtcbiAgICAgIHRyYW5zZm9ybVNldEZyb21BcnJheSh0aGlzLnJlbmRlcmVkVHJhbnNmb3JtXywgdHJhbnNmb3JtKTtcbiAgICB9XG4gICAgdmFyIHNraXBGZWF0dXJlcyA9ICFpc0VtcHR5KHNraXBwZWRGZWF0dXJlc0hhc2gpO1xuICAgIHZhciBpID0gMDsgLy8gaW5zdHJ1Y3Rpb24gaW5kZXhcbiAgICB2YXIgaWkgPSBpbnN0cnVjdGlvbnMubGVuZ3RoOyAvLyBlbmQgb2YgaW5zdHJ1Y3Rpb25zXG4gICAgdmFyIGQgPSAwOyAvLyBkYXRhIGluZGV4XG4gICAgdmFyIGRkOyAvLyBlbmQgb2YgcGVyLWluc3RydWN0aW9uIGRhdGFcbiAgICB2YXIgYW5jaG9yWCwgYW5jaG9yWSwgcHJldlgsIHByZXZZLCByb3VuZFgsIHJvdW5kWSwgZGVjbHV0dGVyR3JvdXAsIGltYWdlO1xuICAgIHZhciBwZW5kaW5nRmlsbCA9IDA7XG4gICAgdmFyIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgIHZhciBsYXN0RmlsbEluc3RydWN0aW9uID0gbnVsbDtcbiAgICB2YXIgbGFzdFN0cm9rZUluc3RydWN0aW9uID0gbnVsbDtcbiAgICB2YXIgY29vcmRpbmF0ZUNhY2hlID0gdGhpcy5jb29yZGluYXRlQ2FjaGVfO1xuICAgIHZhciB2aWV3Um90YXRpb24gPSB0aGlzLnZpZXdSb3RhdGlvbl87XG5cbiAgICB2YXIgc3RhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3JlbmRlci5qc1wiKS5TdGF0ZX0gKi8gKHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW8sXG4gICAgICByZXNvbHV0aW9uOiB0aGlzLnJlc29sdXRpb24sXG4gICAgICByb3RhdGlvbjogdmlld1JvdGF0aW9uXG4gICAgfSk7XG5cbiAgICAvLyBXaGVuIHRoZSBiYXRjaCBzaXplIGdldHMgdG9vIGJpZywgcGVyZm9ybWFuY2UgZGVjcmVhc2VzLiAyMDAgaXMgYSBnb29kXG4gICAgLy8gYmFsYW5jZSBiZXR3ZWVuIGJhdGNoIHNpemUgYW5kIG51bWJlciBvZiBmaWxsL3N0cm9rZSBpbnN0cnVjdGlvbnMuXG4gICAgdmFyIGJhdGNoU2l6ZSA9IHRoaXMuaW5zdHJ1Y3Rpb25zICE9IGluc3RydWN0aW9ucyB8fCB0aGlzLm92ZXJsYXBzID8gMCA6IDIwMDtcbiAgICB2YXIgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSAqLyBmZWF0dXJlO1xuICAgIHZhciB4LCB5O1xuICAgIHdoaWxlIChpIDwgaWkpIHtcbiAgICAgIHZhciBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcbiAgICAgIHZhciB0eXBlID0gLyoqIEB0eXBlIHtDYW52YXNJbnN0cnVjdGlvbn0gKi8gKGluc3RydWN0aW9uWzBdKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZOlxuICAgICAgICAgIGZlYXR1cmUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgaWYgKChza2lwRmVhdHVyZXMgJiYgc2tpcHBlZEZlYXR1cmVzSGFzaFtnZXRVaWQoZmVhdHVyZSldKSB8fCAhZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSB7XG4gICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRfaGl0RXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIWludGVyc2VjdHMoXG4gICAgICAgICAgICBvcHRfaGl0RXh0ZW50LCBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0RXh0ZW50KCkpKSB7XG4gICAgICAgICAgICBpID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSkgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkJFR0lOX1BBVEg6XG4gICAgICAgICAgaWYgKHBlbmRpbmdGaWxsID4gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgICAgcGVuZGluZ0ZpbGwgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSA+IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXBlbmRpbmdGaWxsICYmICFwZW5kaW5nU3Ryb2tlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgcHJldlggPSBwcmV2WSA9IE5hTjtcbiAgICAgICAgICB9XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNJUkNMRTpcbiAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgdmFyIHgxID0gcGl4ZWxDb29yZGluYXRlc1tkXTtcbiAgICAgICAgICB2YXIgeTEgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICB2YXIgeDIgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAyXTtcbiAgICAgICAgICB2YXIgeTIgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAzXTtcbiAgICAgICAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgICAgICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgICAgICAgdmFyIHIgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICAgIGNvbnRleHQubW92ZVRvKHgxICsgciwgeTEpO1xuICAgICAgICAgIGNvbnRleHQuYXJjKHgxLCB5MSwgciwgMCwgMiAqIE1hdGguUEksIHRydWUpO1xuICAgICAgICAgICsraTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5DTE9TRV9QQVRIOlxuICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkNVU1RPTTpcbiAgICAgICAgICBkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgZGQgPSBpbnN0cnVjdGlvblsyXTtcbiAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBpbnN0cnVjdGlvbls0XTtcbiAgICAgICAgICB2YXIgZm4gPSBpbnN0cnVjdGlvbi5sZW5ndGggPT0gNiA/IGluc3RydWN0aW9uWzVdIDogdW5kZWZpbmVkO1xuICAgICAgICAgIHN0YXRlLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgICAgICAgc3RhdGUuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgICAgaWYgKCEoaSBpbiBjb29yZGluYXRlQ2FjaGUpKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlQ2FjaGVbaV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNvb3JkcyA9IGNvb3JkaW5hdGVDYWNoZVtpXTtcbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIGZuKHBpeGVsQ29vcmRpbmF0ZXMsIGQsIGRkLCAyLCBjb29yZHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb29yZHNbMF0gPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgY29vcmRzWzFdID0gcGl4ZWxDb29yZGluYXRlc1tkICsgMV07XG4gICAgICAgICAgICBjb29yZHMubGVuZ3RoID0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVuZGVyZXIoY29vcmRzLCBzdGF0ZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0U6XG4gICAgICAgICAgZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMV0pO1xuICAgICAgICAgIGRkID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgaW1hZ2UgPSAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gKi9cbiAgICAgICAgICAgICAgKGluc3RydWN0aW9uWzNdKTtcbiAgICAgICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIGluIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzRdKTtcbiAgICAgICAgICBhbmNob3JZID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls1XSk7XG4gICAgICAgICAgZGVjbHV0dGVyR3JvdXAgPSBmZWF0dXJlQ2FsbGJhY2sgPyBudWxsIDogLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChpbnN0cnVjdGlvbls2XSk7XG4gICAgICAgICAgdmFyIGhlaWdodCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bN10pO1xuICAgICAgICAgIHZhciBvcGFjaXR5ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgdmFyIG9yaWdpblggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzldKTtcbiAgICAgICAgICB2YXIgb3JpZ2luWSA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTBdKTtcbiAgICAgICAgICB2YXIgcm90YXRlV2l0aFZpZXcgPSAvKiogQHR5cGUge2Jvb2xlYW59ICovIChpbnN0cnVjdGlvblsxMV0pO1xuICAgICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTJdKTtcbiAgICAgICAgICB2YXIgc2NhbGUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzEzXSk7XG4gICAgICAgICAgdmFyIHdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pO1xuXG4gICAgICAgICAgdmFyIHBhZGRpbmcgPSAodm9pZCAwKSwgYmFja2dyb3VuZEZpbGwgPSAodm9pZCAwKSwgYmFja2dyb3VuZFN0cm9rZSA9ICh2b2lkIDApO1xuICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5sZW5ndGggPiAxNikge1xuICAgICAgICAgICAgcGFkZGluZyA9IC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGluc3RydWN0aW9uWzE1XSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kRmlsbCA9IC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKGluc3RydWN0aW9uWzE2XSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoaW5zdHJ1Y3Rpb25bMTddKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFkZGluZyA9IGRlZmF1bHRQYWRkaW5nO1xuICAgICAgICAgICAgYmFja2dyb3VuZEZpbGwgPSBiYWNrZ3JvdW5kU3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJvdGF0ZVdpdGhWaWV3KSB7XG4gICAgICAgICAgICByb3RhdGlvbiArPSB2aWV3Um90YXRpb247XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoOyBkIDwgZGQ7IGQgKz0gMikge1xuICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZV8oY29udGV4dCxcbiAgICAgICAgICAgICAgcGl4ZWxDb29yZGluYXRlc1tkXSwgcGl4ZWxDb29yZGluYXRlc1tkICsgMV0sIGltYWdlLCBhbmNob3JYLCBhbmNob3JZLFxuICAgICAgICAgICAgICBkZWNsdXR0ZXJHcm91cCwgaGVpZ2h0LCBvcGFjaXR5LCBvcmlnaW5YLCBvcmlnaW5ZLCByb3RhdGlvbiwgc2NhbGUsXG4gICAgICAgICAgICAgIHNuYXBUb1BpeGVsLCB3aWR0aCwgcGFkZGluZyxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZEZpbGwgPyAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAobGFzdEZpbGxJbnN0cnVjdGlvbikgOiBudWxsLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kU3Ryb2tlID8gLyoqIEB0eXBlIHtBcnJheTwqPn0gKi8gKGxhc3RTdHJva2VJbnN0cnVjdGlvbikgOiBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yZW5kZXJEZWNsdXR0ZXJfKGRlY2x1dHRlckdyb3VwLCBmZWF0dXJlKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19DSEFSUzpcbiAgICAgICAgICB2YXIgYmVnaW4gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICB2YXIgZW5kID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsyXSk7XG4gICAgICAgICAgdmFyIGJhc2VsaW5lID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblszXSk7XG4gICAgICAgICAgZGVjbHV0dGVyR3JvdXAgPSBmZWF0dXJlQ2FsbGJhY2sgPyBudWxsIDogLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChpbnN0cnVjdGlvbls0XSk7XG4gICAgICAgICAgdmFyIG92ZXJmbG93ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvbls1XSk7XG4gICAgICAgICAgdmFyIGZpbGxLZXkgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGluc3RydWN0aW9uWzZdKTtcbiAgICAgICAgICB2YXIgbWF4QW5nbGUgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzddKTtcbiAgICAgICAgICB2YXIgbWVhc3VyZSA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24oc3RyaW5nKTpudW1iZXJ9ICovIChpbnN0cnVjdGlvbls4XSk7XG4gICAgICAgICAgdmFyIG9mZnNldFkgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzldKTtcbiAgICAgICAgICB2YXIgc3Ryb2tlS2V5ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChpbnN0cnVjdGlvblsxMF0pO1xuICAgICAgICAgIHZhciBzdHJva2VXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMTFdKTtcbiAgICAgICAgICB2YXIgdGV4dCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTJdKTtcbiAgICAgICAgICB2YXIgdGV4dEtleSA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoaW5zdHJ1Y3Rpb25bMTNdKTtcbiAgICAgICAgICB2YXIgdGV4dFNjYWxlID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChpbnN0cnVjdGlvblsxNF0pO1xuXG4gICAgICAgICAgdmFyIHBhdGhMZW5ndGggPSBsaW5lU3RyaW5nTGVuZ3RoKHBpeGVsQ29vcmRpbmF0ZXMsIGJlZ2luLCBlbmQsIDIpO1xuICAgICAgICAgIHZhciB0ZXh0TGVuZ3RoID0gbWVhc3VyZSh0ZXh0KTtcbiAgICAgICAgICBpZiAob3ZlcmZsb3cgfHwgdGV4dExlbmd0aCA8PSBwYXRoTGVuZ3RoKSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vVGV4dFJlcGxheS5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICAgICAgdmFyIHRleHRSZXBsYXkgPSAvKiogQHR5cGUgez99ICovICh0aGlzKTtcbiAgICAgICAgICAgIHZhciB0ZXh0QWxpZ24gPSB0ZXh0UmVwbGF5LnRleHRTdGF0ZXNbdGV4dEtleV0udGV4dEFsaWduO1xuICAgICAgICAgICAgdmFyIHN0YXJ0TSA9IChwYXRoTGVuZ3RoIC0gdGV4dExlbmd0aCkgKiBURVhUX0FMSUdOW3RleHRBbGlnbl07XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBkcmF3VGV4dE9uUGF0aChcbiAgICAgICAgICAgICAgcGl4ZWxDb29yZGluYXRlcywgYmVnaW4sIGVuZCwgMiwgdGV4dCwgbWVhc3VyZSwgc3RhcnRNLCBtYXhBbmdsZSk7XG4gICAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgICAgdmFyIGMgPSAodm9pZCAwKSwgY2MgPSAodm9pZCAwKSwgY2hhcnMgPSAodm9pZCAwKSwgbGFiZWwgPSAodm9pZCAwKSwgcGFydCA9ICh2b2lkIDApO1xuICAgICAgICAgICAgICBpZiAoc3Ryb2tlS2V5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjID0gMCwgY2MgPSBwYXJ0cy5sZW5ndGg7IGMgPCBjYzsgKytjKSB7XG4gICAgICAgICAgICAgICAgICBwYXJ0ID0gcGFydHNbY107IC8vIHgsIHksIGFuY2hvclgsIHJvdGF0aW9uLCBjaHVua1xuICAgICAgICAgICAgICAgICAgY2hhcnMgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHBhcnRbNF0pO1xuICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0ZXh0UmVwbGF5LmdldEltYWdlKGNoYXJzLCB0ZXh0S2V5LCAnJywgc3Ryb2tlS2V5KTtcbiAgICAgICAgICAgICAgICAgIGFuY2hvclggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbMl0pICsgc3Ryb2tlV2lkdGg7XG4gICAgICAgICAgICAgICAgICBhbmNob3JZID0gYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQgKyAoMC41IC0gYmFzZWxpbmUpICogMiAqIHN0cm9rZVdpZHRoIC0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGF5SW1hZ2VfKGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFswXSksIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFsxXSksIGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBhbmNob3JYLCBhbmNob3JZLCBkZWNsdXR0ZXJHcm91cCwgbGFiZWwuaGVpZ2h0LCAxLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKHBhcnRbM10pLCB0ZXh0U2NhbGUsIGZhbHNlLCBsYWJlbC53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBhZGRpbmcsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICAgICAgICAgIGZvciAoYyA9IDAsIGNjID0gcGFydHMubGVuZ3RoOyBjIDwgY2M7ICsrYykge1xuICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW2NdOyAvLyB4LCB5LCBhbmNob3JYLCByb3RhdGlvbiwgY2h1bmtcbiAgICAgICAgICAgICAgICAgIGNoYXJzID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwYXJ0WzRdKTtcbiAgICAgICAgICAgICAgICAgIGxhYmVsID0gdGV4dFJlcGxheS5nZXRJbWFnZShjaGFycywgdGV4dEtleSwgZmlsbEtleSwgJycpO1xuICAgICAgICAgICAgICAgICAgYW5jaG9yWCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFsyXSk7XG4gICAgICAgICAgICAgICAgICBhbmNob3JZID0gYmFzZWxpbmUgKiBsYWJlbC5oZWlnaHQgLSBvZmZzZXRZO1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZV8oY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzBdKSwgLyoqIEB0eXBlIHtudW1iZXJ9ICovIChwYXJ0WzFdKSwgbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclgsIGFuY2hvclksIGRlY2x1dHRlckdyb3VwLCBsYWJlbC5oZWlnaHQsIDEsIDAsIDAsXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAocGFydFszXSksIHRleHRTY2FsZSwgZmFsc2UsIGxhYmVsLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UGFkZGluZywgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVuZGVyRGVjbHV0dGVyXyhkZWNsdXR0ZXJHcm91cCwgZmVhdHVyZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhbnZhc0luc3RydWN0aW9uLkVORF9HRU9NRVRSWTpcbiAgICAgICAgICBpZiAoZmVhdHVyZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZlYXR1cmUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChpbnN0cnVjdGlvblsxXSk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmVhdHVyZUNhbGxiYWNrKGZlYXR1cmUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uRklMTDpcbiAgICAgICAgICBpZiAoYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBwZW5kaW5nRmlsbCsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZpbGxfKGNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uTU9WRV9UT19MSU5FX1RPOlxuICAgICAgICAgIGQgPSAvKiogQHR5cGUge251bWJlcn0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICBkZCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgIHkgPSBwaXhlbENvb3JkaW5hdGVzW2QgKyAxXTtcbiAgICAgICAgICByb3VuZFggPSAoeCArIDAuNSkgfCAwO1xuICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgaWYgKHJvdW5kWCAhPT0gcHJldlggfHwgcm91bmRZICE9PSBwcmV2WSkge1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgIHByZXZZID0gcm91bmRZO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGQgKz0gMjsgZCA8IGRkOyBkICs9IDIpIHtcbiAgICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVzW2RdO1xuICAgICAgICAgICAgeSA9IHBpeGVsQ29vcmRpbmF0ZXNbZCArIDFdO1xuICAgICAgICAgICAgcm91bmRYID0gKHggKyAwLjUpIHwgMDtcbiAgICAgICAgICAgIHJvdW5kWSA9ICh5ICsgMC41KSB8IDA7XG4gICAgICAgICAgICBpZiAoZCA9PSBkZCAtIDIgfHwgcm91bmRYICE9PSBwcmV2WCB8fCByb3VuZFkgIT09IHByZXZZKSB7XG4gICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHgsIHkpO1xuICAgICAgICAgICAgICBwcmV2WCA9IHJvdW5kWDtcbiAgICAgICAgICAgICAgcHJldlkgPSByb3VuZFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgICsraTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRTpcbiAgICAgICAgICBsYXN0RmlsbEluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgdGhpcy5hbGlnbkZpbGxfID0gaW5zdHJ1Y3Rpb25bMl07XG5cbiAgICAgICAgICBpZiAocGVuZGluZ0ZpbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsbF8oY29udGV4dCk7XG4gICAgICAgICAgICBwZW5kaW5nRmlsbCA9IDA7XG4gICAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgICBwZW5kaW5nU3Ryb2tlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gKi8gKGluc3RydWN0aW9uWzFdKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRTpcbiAgICAgICAgICBsYXN0U3Ryb2tlSW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICBpZiAocGVuZGluZ1N0cm9rZSkge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNldFN0cm9rZVN0eWxlXyhjb250ZXh0LCAvKiogQHR5cGUge0FycmF5PCo+fSAqLyAoaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICArK2k7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2FudmFzSW5zdHJ1Y3Rpb24uU1RST0tFOlxuICAgICAgICAgIGlmIChiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIHBlbmRpbmdTdHJva2UrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKytpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICsraTsgLy8gY29uc3VtZSB0aGUgaW5zdHJ1Y3Rpb24gYW55d2F5LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwZW5kaW5nRmlsbCkge1xuICAgICAgdGhpcy5maWxsXyhjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKHBlbmRpbmdTdHJva2UpIHtcbiAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHZpZXdSb3RhdGlvbiBWaWV3IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSBza2lwcGVkRmVhdHVyZXNIYXNoIElkcyBvZiBmZWF0dXJlc1xuICAgKiAgICAgdG8gc2tpcC5cbiAgICogQHBhcmFtIHtib29sZWFufSBzbmFwVG9QaXhlbCBTbmFwIHBvaW50IHN5bWJvbHMgYW5kIHRleHQgdG8gaW50ZWdlciBwaXhlbHMuXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uIHJlcGxheSAoY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIHNraXBwZWRGZWF0dXJlc0hhc2gsIHNuYXBUb1BpeGVsKSB7XG4gICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xuICAgIHRoaXMucmVwbGF5Xyhjb250ZXh0LCB0cmFuc2Zvcm0sXG4gICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCB0aGlzLmluc3RydWN0aW9ucywgc25hcFRvUGl4ZWwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzXG4gICAqICAgICB0byBza2lwLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKChpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KSk6IFQ9fSBvcHRfZmVhdHVyZUNhbGxiYWNrXG4gICAqICAgICBGZWF0dXJlIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfaGl0RXh0ZW50IE9ubHkgY2hlY2sgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgdGhpc1xuICAgKiAgICAgZXh0ZW50LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5yZXBsYXlIaXREZXRlY3Rpb24gPSBmdW5jdGlvbiByZXBsYXlIaXREZXRlY3Rpb24gKFxuICAgIGNvbnRleHQsXG4gICAgdHJhbnNmb3JtLFxuICAgIHZpZXdSb3RhdGlvbixcbiAgICBza2lwcGVkRmVhdHVyZXNIYXNoLFxuICAgIG9wdF9mZWF0dXJlQ2FsbGJhY2ssXG4gICAgb3B0X2hpdEV4dGVudFxuICApIHtcbiAgICB0aGlzLnZpZXdSb3RhdGlvbl8gPSB2aWV3Um90YXRpb247XG4gICAgcmV0dXJuIHRoaXMucmVwbGF5Xyhjb250ZXh0LCB0cmFuc2Zvcm0sIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucywgdHJ1ZSwgb3B0X2ZlYXR1cmVDYWxsYmFjaywgb3B0X2hpdEV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldmVyc2UgdGhlIGhpdCBkZXRlY3Rpb24gaW5zdHJ1Y3Rpb25zLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zID0gZnVuY3Rpb24gcmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucyAoKSB7XG4gICAgdmFyIGhpdERldGVjdGlvbkluc3RydWN0aW9ucyA9IHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zO1xuICAgIC8vIHN0ZXAgMSAtIHJldmVyc2UgYXJyYXlcbiAgICBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucmV2ZXJzZSgpO1xuICAgIC8vIHN0ZXAgMiAtIHJldmVyc2UgaW5zdHJ1Y3Rpb25zIHdpdGhpbiBnZW9tZXRyeSBibG9ja3NcbiAgICB2YXIgaTtcbiAgICB2YXIgbiA9IGhpdERldGVjdGlvbkluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgdmFyIGluc3RydWN0aW9uO1xuICAgIHZhciB0eXBlO1xuICAgIHZhciBiZWdpbiA9IC0xO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGluc3RydWN0aW9uID0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgdHlwZSA9IC8qKiBAdHlwZSB7Q2FudmFzSW5zdHJ1Y3Rpb259ICovIChpbnN0cnVjdGlvblswXSk7XG4gICAgICBpZiAodHlwZSA9PSBDYW52YXNJbnN0cnVjdGlvbi5FTkRfR0VPTUVUUlkpIHtcbiAgICAgICAgYmVnaW4gPSBpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09IENhbnZhc0luc3RydWN0aW9uLkJFR0lOX0dFT01FVFJZKSB7XG4gICAgICAgIGluc3RydWN0aW9uWzJdID0gaTtcbiAgICAgICAgcmV2ZXJzZVN1YkFycmF5KHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLCBiZWdpbiwgaSk7XG4gICAgICAgIGJlZ2luID0gLTE7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5zZXRGaWxsU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGUgKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIGlmIChmaWxsU3R5bGUpIHtcbiAgICAgIHZhciBmaWxsU3R5bGVDb2xvciA9IGZpbGxTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgc3RhdGUuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UoZmlsbFN0eWxlQ29sb3IgP1xuICAgICAgICBmaWxsU3R5bGVDb2xvciA6IGRlZmF1bHRGaWxsU3R5bGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5maWxsU3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChzdHJva2VTdHlsZSkge1xuICAgICAgdmFyIHN0cm9rZVN0eWxlQ29sb3IgPSBzdHJva2VTdHlsZS5nZXRDb2xvcigpO1xuICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUgPSBhc0NvbG9yTGlrZShzdHJva2VTdHlsZUNvbG9yID9cbiAgICAgICAgc3Ryb2tlU3R5bGVDb2xvciA6IGRlZmF1bHRTdHJva2VTdHlsZSk7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lQ2FwID0gc3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpO1xuICAgICAgc3RhdGUubGluZUNhcCA9IHN0cm9rZVN0eWxlTGluZUNhcCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVMaW5lQ2FwIDogZGVmYXVsdExpbmVDYXA7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoKCk7XG4gICAgICBzdGF0ZS5saW5lRGFzaCA9IHN0cm9rZVN0eWxlTGluZURhc2ggP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVEYXNoLnNsaWNlKCkgOiBkZWZhdWx0TGluZURhc2g7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVMaW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0eWxlLmdldExpbmVEYXNoT2Zmc2V0KCk7XG4gICAgICBzdGF0ZS5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0eWxlTGluZURhc2hPZmZzZXQgP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVEYXNoT2Zmc2V0IDogZGVmYXVsdExpbmVEYXNoT2Zmc2V0O1xuICAgICAgdmFyIHN0cm9rZVN0eWxlTGluZUpvaW4gPSBzdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpO1xuICAgICAgc3RhdGUubGluZUpvaW4gPSBzdHJva2VTdHlsZUxpbmVKb2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBzdHJva2VTdHlsZUxpbmVKb2luIDogZGVmYXVsdExpbmVKb2luO1xuICAgICAgdmFyIHN0cm9rZVN0eWxlV2lkdGggPSBzdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgc3RhdGUubGluZVdpZHRoID0gc3Ryb2tlU3R5bGVXaWR0aCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVXaWR0aCA6IGRlZmF1bHRMaW5lV2lkdGg7XG4gICAgICB2YXIgc3Ryb2tlU3R5bGVNaXRlckxpbWl0ID0gc3Ryb2tlU3R5bGUuZ2V0TWl0ZXJMaW1pdCgpO1xuICAgICAgc3RhdGUubWl0ZXJMaW1pdCA9IHN0cm9rZVN0eWxlTWl0ZXJMaW1pdCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgc3Ryb2tlU3R5bGVNaXRlckxpbWl0IDogZGVmYXVsdE1pdGVyTGltaXQ7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lV2lkdGggPiB0aGlzLm1heExpbmVXaWR0aCkge1xuICAgICAgICB0aGlzLm1heExpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aDtcbiAgICAgICAgLy8gaW52YWxpZGF0ZSB0aGUgYnVmZmVyZWQgbWF4IGV4dGVudCBjYWNoZVxuICAgICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgc3RhdGUubGluZUNhcCA9IHVuZGVmaW5lZDtcbiAgICAgIHN0YXRlLmxpbmVEYXNoID0gbnVsbDtcbiAgICAgIHN0YXRlLmxpbmVEYXNoT2Zmc2V0ID0gdW5kZWZpbmVkO1xuICAgICAgc3RhdGUubGluZUpvaW4gPSB1bmRlZmluZWQ7XG4gICAgICBzdGF0ZS5saW5lV2lkdGggPSB1bmRlZmluZWQ7XG4gICAgICBzdGF0ZS5taXRlckxpbWl0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHJldHVybiB7QXJyYXk8Kj59IEZpbGwgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLmNyZWF0ZUZpbGwgPSBmdW5jdGlvbiBjcmVhdGVGaWxsIChzdGF0ZSwgZ2VvbWV0cnkpIHtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8Kj59ICovXG4gICAgdmFyIGZpbGxJbnN0cnVjdGlvbiA9IFtDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSwgZmlsbFN0eWxlXTtcbiAgICBpZiAodHlwZW9mIGZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEZpbGwgaXMgYSBwYXR0ZXJuIG9yIGdyYWRpZW50IC0gYWxpZ24gaXQhXG4gICAgICBmaWxsSW5zdHJ1Y3Rpb24ucHVzaCh0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGxJbnN0cnVjdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuYXBwbHlTdHJva2UgPSBmdW5jdGlvbiBhcHBseVN0cm9rZSAoc3RhdGUpIHtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlU3Ryb2tlKHN0YXRlKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAqIEByZXR1cm4ge0FycmF5PCo+fSBTdHJva2UgaW5zdHJ1Y3Rpb24uXG4gICAqL1xuICBDYW52YXNSZXBsYXkucHJvdG90eXBlLmNyZWF0ZVN0cm9rZSA9IGZ1bmN0aW9uIGNyZWF0ZVN0cm9rZSAoc3RhdGUpIHtcbiAgICByZXR1cm4gW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGggKiB0aGlzLnBpeGVsUmF0aW8sIHN0YXRlLmxpbmVDYXAsXG4gICAgICBzdGF0ZS5saW5lSm9pbiwgc3RhdGUubWl0ZXJMaW1pdCxcbiAgICAgIHRoaXMuYXBwbHlQaXhlbFJhdGlvKHN0YXRlLmxpbmVEYXNoKSwgc3RhdGUubGluZURhc2hPZmZzZXQgKiB0aGlzLnBpeGVsUmF0aW9cbiAgICBdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3Ryb2tlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6Q2FudmFzUmVwbGF5LCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlLCAoaW1wb3J0KFwiLi4vLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCkpOkFycmF5PCo+fSBjcmVhdGVGaWxsIENyZWF0ZSBmaWxsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS51cGRhdGVGaWxsU3R5bGUgPSBmdW5jdGlvbiB1cGRhdGVGaWxsU3R5bGUgKHN0YXRlLCBjcmVhdGVGaWxsLCBnZW9tZXRyeSkge1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgaWYgKHR5cGVvZiBmaWxsU3R5bGUgIT09ICdzdHJpbmcnIHx8IHN0YXRlLmN1cnJlbnRGaWxsU3R5bGUgIT0gZmlsbFN0eWxlKSB7XG4gICAgICBpZiAoZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChjcmVhdGVGaWxsLmNhbGwodGhpcywgc3RhdGUsIGdlb21ldHJ5KSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5jdXJyZW50RmlsbFN0eWxlID0gZmlsbFN0eWxlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0cm9rZVN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOkNhbnZhc1JlcGxheSwgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdHJva2VTdGF0ZSl9IGFwcGx5U3Ryb2tlIEFwcGx5IHN0cm9rZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUudXBkYXRlU3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiB1cGRhdGVTdHJva2VTdHlsZSAoc3RhdGUsIGFwcGx5U3Ryb2tlKSB7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgdmFyIGxpbmVDYXAgPSBzdGF0ZS5saW5lQ2FwO1xuICAgIHZhciBsaW5lRGFzaCA9IHN0YXRlLmxpbmVEYXNoO1xuICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IHN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgIHZhciBsaW5lSm9pbiA9IHN0YXRlLmxpbmVKb2luO1xuICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgdmFyIG1pdGVyTGltaXQgPSBzdGF0ZS5taXRlckxpbWl0O1xuICAgIGlmIChzdGF0ZS5jdXJyZW50U3Ryb2tlU3R5bGUgIT0gc3Ryb2tlU3R5bGUgfHxcbiAgICAgICAgc3RhdGUuY3VycmVudExpbmVDYXAgIT0gbGluZUNhcCB8fFxuICAgICAgICAobGluZURhc2ggIT0gc3RhdGUuY3VycmVudExpbmVEYXNoICYmICFlcXVhbHMoc3RhdGUuY3VycmVudExpbmVEYXNoLCBsaW5lRGFzaCkpIHx8XG4gICAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaE9mZnNldCAhPSBsaW5lRGFzaE9mZnNldCB8fFxuICAgICAgICBzdGF0ZS5jdXJyZW50TGluZUpvaW4gIT0gbGluZUpvaW4gfHxcbiAgICAgICAgc3RhdGUuY3VycmVudExpbmVXaWR0aCAhPSBsaW5lV2lkdGggfHxcbiAgICAgICAgc3RhdGUuY3VycmVudE1pdGVyTGltaXQgIT0gbWl0ZXJMaW1pdCkge1xuICAgICAgaWYgKHN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXBwbHlTdHJva2UuY2FsbCh0aGlzLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5jdXJyZW50U3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lQ2FwID0gbGluZUNhcDtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lRGFzaCA9IGxpbmVEYXNoO1xuICAgICAgc3RhdGUuY3VycmVudExpbmVEYXNoT2Zmc2V0ID0gbGluZURhc2hPZmZzZXQ7XG4gICAgICBzdGF0ZS5jdXJyZW50TGluZUpvaW4gPSBsaW5lSm9pbjtcbiAgICAgIHN0YXRlLmN1cnJlbnRMaW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgICBzdGF0ZS5jdXJyZW50TWl0ZXJMaW1pdCA9IG1pdGVyTGltaXQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICovXG4gIENhbnZhc1JlcGxheS5wcm90b3R5cGUuZW5kR2VvbWV0cnkgPSBmdW5jdGlvbiBlbmRHZW9tZXRyeSAoZ2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnlJbnN0cnVjdGlvbjFfWzJdID0gdGhpcy5pbnN0cnVjdGlvbnMubGVuZ3RoO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMV8gPSBudWxsO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeUluc3RydWN0aW9uMl9bMl0gPSB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5sZW5ndGg7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5SW5zdHJ1Y3Rpb24yXyA9IG51bGw7XG4gICAgdmFyIGVuZEdlb21ldHJ5SW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uRU5EX0dFT01FVFJZLCBmZWF0dXJlXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGVuZEdlb21ldHJ5SW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZW5kR2VvbWV0cnlJbnN0cnVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC4gIFJlbmRlcmluZyB3aWxsIGJlIGNsaXBwZWQgdG8gdGhlIGV4dGVudFxuICAgKiBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuICBUbyBhY2NvdW50IGZvciBzeW1ib2xpemVycyB0aGF0IG1heSBpbnRlcnNlY3RcbiAgICogdGhpcyBleHRlbnQsIHdlIGNhbGN1bGF0ZSBhIGJ1ZmZlcmVkIGV4dGVudCAoZS5nLiBiYXNlZCBvbiBzdHJva2Ugd2lkdGgpLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgYnVmZmVyZWQgcmVuZGVyaW5nIGV4dGVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5nZXRCdWZmZXJlZE1heEV4dGVudCA9IGZ1bmN0aW9uIGdldEJ1ZmZlcmVkTWF4RXh0ZW50ICgpIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyZWRNYXhFeHRlbnRfKSB7XG4gICAgICB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XyA9IGNsb25lKHRoaXMubWF4RXh0ZW50KTtcbiAgICAgIGlmICh0aGlzLm1heExpbmVXaWR0aCA+IDApIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5yZXNvbHV0aW9uICogKHRoaXMubWF4TGluZVdpZHRoICsgMSkgLyAyO1xuICAgICAgICBidWZmZXIodGhpcy5idWZmZXJlZE1heEV4dGVudF8sIHdpZHRoLCB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50Xyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmJ1ZmZlcmVkTWF4RXh0ZW50XztcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzUmVwbGF5O1xufShWZWN0b3JDb250ZXh0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUmVwbGF5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXMvSW1hZ2VSZXBsYXlcbiAqL1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uIGZyb20gJy4vSW5zdHJ1Y3Rpb24uanMnO1xuaW1wb3J0IENhbnZhc1JlcGxheSBmcm9tICcuL1JlcGxheS5qcyc7XG5cbnZhciBDYW52YXNJbWFnZVJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNJbWFnZVJlcGxheSh0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgb3ZlcmxhcHMsIGRlY2x1dHRlclRyZWUpIHtcbiAgICBDYW52YXNSZXBsYXkuY2FsbCh0aGlzLCB0b2xlcmFuY2UsIG1heEV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgb3ZlcmxhcHMsIGRlY2x1dHRlclRyZWUpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfVxuICAgICAqL1xuICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvbkltYWdlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvclhfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvcllfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodF8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luWF8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luWV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLndpZHRoXyA9IHVuZGVmaW5lZDtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNSZXBsYXkgKSBDYW52YXNJbWFnZVJlcGxheS5fX3Byb3RvX18gPSBDYW52YXNSZXBsYXk7XG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc0ltYWdlUmVwbGF5O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE15IGVuZC5cbiAgICovXG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5kcmF3Q29vcmRpbmF0ZXNfID0gZnVuY3Rpb24gZHJhd0Nvb3JkaW5hdGVzXyAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc0ltYWdlUmVwbGF5LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiBkcmF3UG9pbnQgKHBvaW50R2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICBpZiAoIXRoaXMuaW1hZ2VfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYmVnaW5HZW9tZXRyeShwb2ludEdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9pbnRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gcG9pbnRHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgbXlCZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBteUVuZCA9IHRoaXMuZHJhd0Nvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSk7XG4gICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICBDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0lNQUdFLCBteUJlZ2luLCBteUVuZCwgdGhpcy5pbWFnZV8sXG4gICAgICAvLyBSZW1haW5pbmcgYXJndW1lbnRzIHRvIERSQVdfSU1BR0UgYXJlIGluIGFscGhhYmV0aWNhbCBvcmRlclxuICAgICAgdGhpcy5hbmNob3JYXywgdGhpcy5hbmNob3JZXywgdGhpcy5kZWNsdXR0ZXJHcm91cF8sIHRoaXMuaGVpZ2h0XywgdGhpcy5vcGFjaXR5XyxcbiAgICAgIHRoaXMub3JpZ2luWF8sIHRoaXMub3JpZ2luWV8sIHRoaXMucm90YXRlV2l0aFZpZXdfLCB0aGlzLnJvdGF0aW9uXyxcbiAgICAgIHRoaXMuc2NhbGVfICogdGhpcy5waXhlbFJhdGlvLCB0aGlzLndpZHRoX1xuICAgIF0pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgbXlCZWdpbiwgbXlFbmQsIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfLFxuICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgIHRoaXMuYW5jaG9yWF8sIHRoaXMuYW5jaG9yWV8sIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCB0aGlzLmhlaWdodF8sIHRoaXMub3BhY2l0eV8sXG4gICAgICB0aGlzLm9yaWdpblhfLCB0aGlzLm9yaWdpbllfLCB0aGlzLnJvdGF0ZVdpdGhWaWV3XywgdGhpcy5yb3RhdGlvbl8sXG4gICAgICB0aGlzLnNjYWxlXywgdGhpcy53aWR0aF9cbiAgICBdKTtcbiAgICB0aGlzLmVuZEdlb21ldHJ5KHBvaW50R2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLmRyYXdNdWx0aVBvaW50ID0gZnVuY3Rpb24gZHJhd011bHRpUG9pbnQgKG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgIGlmICghdGhpcy5pbWFnZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpUG9pbnRHZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9pbnRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gbXVsdGlQb2ludEdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIG15RW5kID0gdGhpcy5kcmF3Q29vcmRpbmF0ZXNfKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUpO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgbXlCZWdpbiwgbXlFbmQsIHRoaXMuaW1hZ2VfLFxuICAgICAgLy8gUmVtYWluaW5nIGFyZ3VtZW50cyB0byBEUkFXX0lNQUdFIGFyZSBpbiBhbHBoYWJldGljYWwgb3JkZXJcbiAgICAgIHRoaXMuYW5jaG9yWF8sIHRoaXMuYW5jaG9yWV8sIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCB0aGlzLmhlaWdodF8sIHRoaXMub3BhY2l0eV8sXG4gICAgICB0aGlzLm9yaWdpblhfLCB0aGlzLm9yaWdpbllfLCB0aGlzLnJvdGF0ZVdpdGhWaWV3XywgdGhpcy5yb3RhdGlvbl8sXG4gICAgICB0aGlzLnNjYWxlXyAqIHRoaXMucGl4ZWxSYXRpbywgdGhpcy53aWR0aF9cbiAgICBdKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgIENhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsIG15QmVnaW4sIG15RW5kLCB0aGlzLmhpdERldGVjdGlvbkltYWdlXyxcbiAgICAgIC8vIFJlbWFpbmluZyBhcmd1bWVudHMgdG8gRFJBV19JTUFHRSBhcmUgaW4gYWxwaGFiZXRpY2FsIG9yZGVyXG4gICAgICB0aGlzLmFuY2hvclhfLCB0aGlzLmFuY2hvcllfLCB0aGlzLmRlY2x1dHRlckdyb3VwXywgdGhpcy5oZWlnaHRfLCB0aGlzLm9wYWNpdHlfLFxuICAgICAgdGhpcy5vcmlnaW5YXywgdGhpcy5vcmlnaW5ZXywgdGhpcy5yb3RhdGVXaXRoVmlld18sIHRoaXMucm90YXRpb25fLFxuICAgICAgdGhpcy5zY2FsZV8sIHRoaXMud2lkdGhfXG4gICAgXSk7XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aVBvaW50R2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uIGZpbmlzaCAoKSB7XG4gICAgdGhpcy5yZXZlcnNlSGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zKCk7XG4gICAgLy8gRklYTUUgdGhpcyBkb2Vzbid0IHJlYWxseSBwcm90ZWN0IHVzIGFnYWluc3QgZnVydGhlciBjYWxscyB0byBkcmF3Kkdlb21ldHJ5XG4gICAgdGhpcy5hbmNob3JYXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmFuY2hvcllfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcbiAgICB0aGlzLmltYWdlXyA9IG51bGw7XG4gICAgdGhpcy5oZWlnaHRfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NhbGVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub3BhY2l0eV8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcmlnaW5YXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9yaWdpbllfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucm90YXRlV2l0aFZpZXdfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGhfID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzSW1hZ2VSZXBsYXkucHJvdG90eXBlLnNldEltYWdlU3R5bGUgPSBmdW5jdGlvbiBzZXRJbWFnZVN0eWxlIChpbWFnZVN0eWxlLCBkZWNsdXR0ZXJHcm91cCkge1xuICAgIHZhciBhbmNob3IgPSBpbWFnZVN0eWxlLmdldEFuY2hvcigpO1xuICAgIHZhciBzaXplID0gaW1hZ2VTdHlsZS5nZXRTaXplKCk7XG4gICAgdmFyIGhpdERldGVjdGlvbkltYWdlID0gaW1hZ2VTdHlsZS5nZXRIaXREZXRlY3Rpb25JbWFnZSgxKTtcbiAgICB2YXIgaW1hZ2UgPSBpbWFnZVN0eWxlLmdldEltYWdlKDEpO1xuICAgIHZhciBvcmlnaW4gPSBpbWFnZVN0eWxlLmdldE9yaWdpbigpO1xuICAgIHRoaXMuYW5jaG9yWF8gPSBhbmNob3JbMF07XG4gICAgdGhpcy5hbmNob3JZXyA9IGFuY2hvclsxXTtcbiAgICB0aGlzLmRlY2x1dHRlckdyb3VwXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSAqLyAoZGVjbHV0dGVyR3JvdXApO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gaGl0RGV0ZWN0aW9uSW1hZ2U7XG4gICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICB0aGlzLmhlaWdodF8gPSBzaXplWzFdO1xuICAgIHRoaXMub3BhY2l0eV8gPSBpbWFnZVN0eWxlLmdldE9wYWNpdHkoKTtcbiAgICB0aGlzLm9yaWdpblhfID0gb3JpZ2luWzBdO1xuICAgIHRoaXMub3JpZ2luWV8gPSBvcmlnaW5bMV07XG4gICAgdGhpcy5yb3RhdGVXaXRoVmlld18gPSBpbWFnZVN0eWxlLmdldFJvdGF0ZVdpdGhWaWV3KCk7XG4gICAgdGhpcy5yb3RhdGlvbl8gPSBpbWFnZVN0eWxlLmdldFJvdGF0aW9uKCk7XG4gICAgdGhpcy5zY2FsZV8gPSBpbWFnZVN0eWxlLmdldFNjYWxlKCk7XG4gICAgdGhpcy53aWR0aF8gPSBzaXplWzBdO1xuICB9O1xuXG4gIHJldHVybiBDYW52YXNJbWFnZVJlcGxheTtcbn0oQ2FudmFzUmVwbGF5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzSW1hZ2VSZXBsYXk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlUmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL0xpbmVTdHJpbmdSZXBsYXlcbiAqL1xuaW1wb3J0IENhbnZhc0luc3RydWN0aW9uLCB7c3Ryb2tlSW5zdHJ1Y3Rpb24sIGJlZ2luUGF0aEluc3RydWN0aW9ufSBmcm9tICcuL0luc3RydWN0aW9uLmpzJztcbmltcG9ydCBDYW52YXNSZXBsYXkgZnJvbSAnLi9SZXBsYXkuanMnO1xuXG52YXIgQ2FudmFzTGluZVN0cmluZ1JlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNMaW5lU3RyaW5nUmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc0xpbmVTdHJpbmdSZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc0xpbmVTdHJpbmdSZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBlbmQuXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5kcmF3RmxhdENvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIGRyYXdGbGF0Q29vcmRpbmF0ZXNfIChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB2YXIgbXlCZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciBteUVuZCA9IHRoaXMuYXBwZW5kRmxhdENvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgIHZhciBtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbiA9IFtDYW52YXNJbnN0cnVjdGlvbi5NT1ZFX1RPX0xJTkVfVE8sIG15QmVnaW4sIG15RW5kXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICByZXR1cm4gZW5kO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzTGluZVN0cmluZ1JlcGxheS5wcm90b3R5cGUuZHJhd0xpbmVTdHJpbmcgPSBmdW5jdGlvbiBkcmF3TGluZVN0cmluZyAobGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICB2YXIgbGluZVdpZHRoID0gc3RhdGUubGluZVdpZHRoO1xuICAgIGlmIChzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkIHx8IGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU3Ryb2tlU3R5bGUoc3RhdGUsIHRoaXMuYXBwbHlTdHJva2UpO1xuICAgIHRoaXMuYmVnaW5HZW9tZXRyeShsaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgc3RhdGUubWl0ZXJMaW1pdCwgc3RhdGUubGluZURhc2gsIHN0YXRlLmxpbmVEYXNoT2Zmc2V0XG4gICAgXSwgYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBsaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGxpbmVTdHJpbmdHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICB0aGlzLmRyYXdGbGF0Q29vcmRpbmF0ZXNfKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICB0aGlzLmVuZEdlb21ldHJ5KGxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5kcmF3TXVsdGlMaW5lU3RyaW5nID0gZnVuY3Rpb24gZHJhd011bHRpTGluZVN0cmluZyAobXVsdGlMaW5lU3RyaW5nR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0YXRlLnN0cm9rZVN0eWxlO1xuICAgIHZhciBsaW5lV2lkdGggPSBzdGF0ZS5saW5lV2lkdGg7XG4gICAgaWYgKHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQgfHwgbGluZVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZShzdGF0ZSwgdGhpcy5hcHBseVN0cm9rZSk7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICBzdGF0ZS5zdHJva2VTdHlsZSwgc3RhdGUubGluZVdpZHRoLCBzdGF0ZS5saW5lQ2FwLCBzdGF0ZS5saW5lSm9pbixcbiAgICAgIHN0YXRlLm1pdGVyTGltaXQsIHN0YXRlLmxpbmVEYXNoLCBzdGF0ZS5saW5lRGFzaE9mZnNldFxuICAgIF0sIGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgICB2YXIgZW5kcyA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldEVuZHMoKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IG11bHRpTGluZVN0cmluZ0dlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgb2Zmc2V0ID0gdGhpcy5kcmF3RmxhdENvb3JkaW5hdGVzXyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aUxpbmVTdHJpbmdHZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2ggKCkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKHN0YXRlLmxhc3RTdHJva2UgIT0gdW5kZWZpbmVkICYmIHN0YXRlLmxhc3RTdHJva2UgIT0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgIH1cbiAgICB0aGlzLnJldmVyc2VIaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMoKTtcbiAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2MuXG4gICAqL1xuICBDYW52YXNMaW5lU3RyaW5nUmVwbGF5LnByb3RvdHlwZS5hcHBseVN0cm9rZSA9IGZ1bmN0aW9uIGFwcGx5U3Ryb2tlIChzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5sYXN0U3Ryb2tlICE9IHVuZGVmaW5lZCAmJiBzdGF0ZS5sYXN0U3Ryb2tlICE9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKHN0cm9rZUluc3RydWN0aW9uKTtcbiAgICAgIHN0YXRlLmxhc3RTdHJva2UgPSB0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICB9XG4gICAgc3RhdGUubGFzdFN0cm9rZSA9IDA7XG4gICAgQ2FudmFzUmVwbGF5LnByb3RvdHlwZS5hcHBseVN0cm9rZS5jYWxsKHRoaXMsIHN0YXRlKTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uKTtcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcbn0oQ2FudmFzUmVwbGF5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTGluZVN0cmluZ1JlcGxheTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZVN0cmluZ1JlcGxheS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9Qb2x5Z29uUmVwbGF5XG4gKi9cbmltcG9ydCB7YXNTdHJpbmd9IGZyb20gJy4uLy4uL2NvbG9yLmpzJztcbmltcG9ydCB7c25hcH0gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7ZGVmYXVsdEZpbGxTdHlsZX0gZnJvbSAnLi4vY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNJbnN0cnVjdGlvbiwge1xuICBmaWxsSW5zdHJ1Y3Rpb24sIHN0cm9rZUluc3RydWN0aW9uLCBiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2xvc2VQYXRoSW5zdHJ1Y3Rpb25cbn0gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5IGZyb20gJy4vUmVwbGF5LmpzJztcblxuXG52YXIgQ2FudmFzUG9seWdvblJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNQb2x5Z29uUmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc1BvbHlnb25SZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc1BvbHlnb25SZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzUG9seWdvblJlcGxheTtcblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5kcmF3RmxhdENvb3JkaW5hdGVzc18gPSBmdW5jdGlvbiBkcmF3RmxhdENvb3JkaW5hdGVzc18gKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsID0gc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQ7XG4gICAgdmFyIHN0cm9rZSA9IHN0YXRlLnN0cm9rZVN0eWxlICE9IHVuZGVmaW5lZDtcbiAgICB2YXIgbnVtRW5kcyA9IGVuZHMubGVuZ3RoO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goYmVnaW5QYXRoSW5zdHJ1Y3Rpb24pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRW5kczsgKytpKSB7XG4gICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICB2YXIgbXlFbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRydWUsICFzdHJva2UpO1xuICAgICAgdmFyIG1vdmVUb0xpbmVUb0luc3RydWN0aW9uID0gW0NhbnZhc0luc3RydWN0aW9uLk1PVkVfVE9fTElORV9UTywgbXlCZWdpbiwgbXlFbmRdO1xuICAgICAgdGhpcy5pbnN0cnVjdGlvbnMucHVzaChtb3ZlVG9MaW5lVG9JbnN0cnVjdGlvbik7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKG1vdmVUb0xpbmVUb0luc3RydWN0aW9uKTtcbiAgICAgIGlmIChzdHJva2UpIHtcbiAgICAgICAgLy8gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uOiBvbmx5IGNhbGwgY2xvc2VQYXRoKCkgd2hlbiB3ZSBoYXZlIGEgc3Ryb2tlLlxuICAgICAgICAvLyBPdGhlcndpc2UgdGhlIHJpbmcgaXMgY2xvc2VkIGFscmVhZHkgKHNlZSBhcHBlbmRGbGF0Q29vcmRpbmF0ZXMgYWJvdmUpLlxuICAgICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGNsb3NlUGF0aEluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChjbG9zZVBhdGhJbnN0cnVjdGlvbik7XG4gICAgICB9XG4gICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGlmIChmaWxsKSB7XG4gICAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGZpbGxJbnN0cnVjdGlvbik7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKGZpbGxJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIGlmIChzdHJva2UpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5kcmF3Q2lyY2xlID0gZnVuY3Rpb24gZHJhd0NpcmNsZSAoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgdmFyIHN0cm9rZVN0eWxlID0gc3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgaWYgKGZpbGxTdHlsZSA9PT0gdW5kZWZpbmVkICYmIHN0cm9rZVN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRGaWxsU3Ryb2tlU3R5bGVzXyhjaXJjbGVHZW9tZXRyeSk7XG4gICAgdGhpcy5iZWdpbkdlb21ldHJ5KGNpcmNsZUdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgYXNTdHJpbmcoZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgICBzdGF0ZS5taXRlckxpbWl0LCBzdGF0ZS5saW5lRGFzaCwgc3RhdGUubGluZURhc2hPZmZzZXRcbiAgICAgIF0pO1xuICAgIH1cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gY2lyY2xlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IGNpcmNsZUdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBteUJlZ2luID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdGhpcy5hcHBlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgZmFsc2UsIGZhbHNlKTtcbiAgICB2YXIgY2lyY2xlSW5zdHJ1Y3Rpb24gPSBbQ2FudmFzSW5zdHJ1Y3Rpb24uQ0lSQ0xFLCBteUJlZ2luXTtcbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKGJlZ2luUGF0aEluc3RydWN0aW9uLCBjaXJjbGVJbnN0cnVjdGlvbik7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChiZWdpblBhdGhJbnN0cnVjdGlvbiwgY2lyY2xlSW5zdHJ1Y3Rpb24pO1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goZmlsbEluc3RydWN0aW9uKTtcbiAgICB9XG4gICAgaWYgKHN0YXRlLnN0cm9rZVN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goc3Ryb2tlSW5zdHJ1Y3Rpb24pO1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChzdHJva2VJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHRoaXMuZW5kR2VvbWV0cnkoY2lyY2xlR2VvbWV0cnksIGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUG9seWdvblJlcGxheS5wcm90b3R5cGUuZHJhd1BvbHlnb24gPSBmdW5jdGlvbiBkcmF3UG9seWdvbiAocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB2YXIgZmlsbFN0eWxlID0gc3RhdGUuZmlsbFN0eWxlO1xuICAgIHZhciBzdHJva2VTdHlsZSA9IHN0YXRlLnN0cm9rZVN0eWxlO1xuICAgIGlmIChmaWxsU3R5bGUgPT09IHVuZGVmaW5lZCAmJiBzdHJva2VTdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0RmlsbFN0cm9rZVN0eWxlc18ocG9seWdvbkdlb21ldHJ5KTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnkocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICBpZiAoc3RhdGUuZmlsbFN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2goW1xuICAgICAgICBDYW52YXNJbnN0cnVjdGlvbi5TRVRfRklMTF9TVFlMRSxcbiAgICAgICAgYXNTdHJpbmcoZGVmYXVsdEZpbGxTdHlsZSlcbiAgICAgIF0pO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuc3Ryb2tlU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9TVFJPS0VfU1RZTEUsXG4gICAgICAgIHN0YXRlLnN0cm9rZVN0eWxlLCBzdGF0ZS5saW5lV2lkdGgsIHN0YXRlLmxpbmVDYXAsIHN0YXRlLmxpbmVKb2luLFxuICAgICAgICBzdGF0ZS5taXRlckxpbWl0LCBzdGF0ZS5saW5lRGFzaCwgc3RhdGUubGluZURhc2hPZmZzZXRcbiAgICAgIF0pO1xuICAgIH1cbiAgICB2YXIgZW5kcyA9IHBvbHlnb25HZW9tZXRyeS5nZXRFbmRzKCk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb25HZW9tZXRyeS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzdHJpZGUgPSBwb2x5Z29uR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgdGhpcy5kcmF3RmxhdENvb3JkaW5hdGVzc18oZmxhdENvb3JkaW5hdGVzLCAwLCBlbmRzLCBzdHJpZGUpO1xuICAgIHRoaXMuZW5kR2VvbWV0cnkocG9seWdvbkdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1BvbHlnb25SZXBsYXkucHJvdG90eXBlLmRyYXdNdWx0aVBvbHlnb24gPSBmdW5jdGlvbiBkcmF3TXVsdGlQb2x5Z29uIChtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIGZpbGxTdHlsZSA9IHN0YXRlLmZpbGxTdHlsZTtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSBzdGF0ZS5zdHJva2VTdHlsZTtcbiAgICBpZiAoZmlsbFN0eWxlID09PSB1bmRlZmluZWQgJiYgc3Ryb2tlU3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZXNfKG11bHRpUG9seWdvbkdlb21ldHJ5KTtcbiAgICB0aGlzLmJlZ2luR2VvbWV0cnkobXVsdGlQb2x5Z29uR2VvbWV0cnksIGZlYXR1cmUpO1xuICAgIGlmIChzdGF0ZS5maWxsU3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbXG4gICAgICAgIENhbnZhc0luc3RydWN0aW9uLlNFVF9GSUxMX1NUWUxFLFxuICAgICAgICBhc1N0cmluZyhkZWZhdWx0RmlsbFN0eWxlKVxuICAgICAgXSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKFtcbiAgICAgICAgQ2FudmFzSW5zdHJ1Y3Rpb24uU0VUX1NUUk9LRV9TVFlMRSxcbiAgICAgICAgc3RhdGUuc3Ryb2tlU3R5bGUsIHN0YXRlLmxpbmVXaWR0aCwgc3RhdGUubGluZUNhcCwgc3RhdGUubGluZUpvaW4sXG4gICAgICAgIHN0YXRlLm1pdGVyTGltaXQsIHN0YXRlLmxpbmVEYXNoLCBzdGF0ZS5saW5lRGFzaE9mZnNldFxuICAgICAgXSk7XG4gICAgfVxuICAgIHZhciBlbmRzcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldEVuZHNzKCk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IG11bHRpUG9seWdvbkdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMuZHJhd0ZsYXRDb29yZGluYXRlc3NfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5lbmRHZW9tZXRyeShtdWx0aVBvbHlnb25HZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNQb2x5Z29uUmVwbGF5LnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiBmaW5pc2ggKCkge1xuICAgIHRoaXMucmV2ZXJzZUhpdERldGVjdGlvbkluc3RydWN0aW9ucygpO1xuICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgIC8vIFdlIHdhbnQgdG8gcHJlc2VydmUgdG9wb2xvZ3kgd2hlbiBkcmF3aW5nIHBvbHlnb25zLiAgUG9seWdvbnMgYXJlXG4gICAgLy8gc2ltcGxpZmllZCB1c2luZyBxdWFudGl6YXRpb24gYW5kIHBvaW50IGVsaW1pbmF0aW9uLiBIb3dldmVyLCB3ZSBtaWdodFxuICAgIC8vIGhhdmUgcmVjZWl2ZWQgYSBtaXggb2YgcXVhbnRpemVkIGFuZCBub24tcXVhbnRpemVkIGdlb21ldHJpZXMsIHNvIGVuc3VyZVxuICAgIC8vIHRoYXQgYWxsIGFyZSBxdWFudGl6ZWQgYnkgcXVhbnRpemluZyBhbGwgY29vcmRpbmF0ZXMgaW4gdGhlIGJhdGNoLlxuICAgIHZhciB0b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTtcbiAgICBpZiAodG9sZXJhbmNlICE9PSAwKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSB0aGlzLmNvb3JkaW5hdGVzO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZGluYXRlc1tpXSA9IHNuYXAoY29vcmRpbmF0ZXNbaV0sIHRvbGVyYW5jZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKi9cbiAgQ2FudmFzUG9seWdvblJlcGxheS5wcm90b3R5cGUuc2V0RmlsbFN0cm9rZVN0eWxlc18gPSBmdW5jdGlvbiBzZXRGaWxsU3Ryb2tlU3R5bGVzXyAoZ2VvbWV0cnkpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHZhciBmaWxsU3R5bGUgPSBzdGF0ZS5maWxsU3R5bGU7XG4gICAgaWYgKGZpbGxTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUZpbGxTdHlsZShzdGF0ZSwgdGhpcy5jcmVhdGVGaWxsLCBnZW9tZXRyeSk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5zdHJva2VTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1BvbHlnb25SZXBsYXk7XG59KENhbnZhc1JlcGxheSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhc1BvbHlnb25SZXBsYXk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb25SZXBsYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zdHJhaWdodGNodW5rXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhBbmdsZSBNYXhpbXVtIGFjY2VwdGFibGUgYW5nbGUgZGVsdGEgYmV0d2VlbiBzZWdtZW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTdGFydCBhbmQgZW5kIG9mIHRoZSBmaXJzdCBzdWl0YWJsZSBjaHVuayBvZiB0aGVcbiAqIGdpdmVuIGBmbGF0Q29vcmRpbmF0ZXNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hpbmdDaHVuayhtYXhBbmdsZSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciBjaHVua1N0YXJ0ID0gb2Zmc2V0O1xuICB2YXIgY2h1bmtFbmQgPSBvZmZzZXQ7XG4gIHZhciBjaHVua00gPSAwO1xuICB2YXIgbSA9IDA7XG4gIHZhciBzdGFydCA9IG9mZnNldDtcbiAgdmFyIGFjb3MsIGksIG0xMiwgbTIzLCB4MSwgeTEsIHgxMiwgeTEyLCB4MjMsIHkyMztcbiAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgIGlmICh4MSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB4MjMgPSB4MiAtIHgxO1xuICAgICAgeTIzID0geTIgLSB5MTtcbiAgICAgIG0yMyA9IE1hdGguc3FydCh4MjMgKiB4MjMgKyB5MjMgKiB5MjMpO1xuICAgICAgaWYgKHgxMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG0gKz0gbTEyO1xuICAgICAgICBhY29zID0gTWF0aC5hY29zKCh4MTIgKiB4MjMgKyB5MTIgKiB5MjMpIC8gKG0xMiAqIG0yMykpO1xuICAgICAgICBpZiAoYWNvcyA+IG1heEFuZ2xlKSB7XG4gICAgICAgICAgaWYgKG0gPiBjaHVua00pIHtcbiAgICAgICAgICAgIGNodW5rTSA9IG07XG4gICAgICAgICAgICBjaHVua1N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICBjaHVua0VuZCA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG0gPSAwO1xuICAgICAgICAgIHN0YXJ0ID0gaSAtIHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbTEyID0gbTIzO1xuICAgICAgeDEyID0geDIzO1xuICAgICAgeTEyID0geTIzO1xuICAgIH1cbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgbSArPSBtMjM7XG4gIHJldHVybiBtID4gY2h1bmtNID8gW3N0YXJ0LCBpXSA6IFtjaHVua1N0YXJ0LCBjaHVua0VuZF07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmFpZ2h0Y2h1bmsuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL1RleHRQbGFjZW1lbnRcbiAqL1xuXG4vKipcbiAqIFRleHQgcGxhY2VtZW50LiBPbmUgb2YgYCdwb2ludCdgLCBgJ2xpbmUnYC4gRGVmYXVsdCBpcyBgJ3BvaW50J2AuIE5vdGUgdGhhdFxuICogYCdsaW5lJ2AgcmVxdWlyZXMgdGhlIHVuZGVybHlpbmcgZ2VvbWV0cnkgdG8gYmUgYSB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTGluZVN0cmluZ35MaW5lU3RyaW5nfSxcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9Qb2x5Z29uflBvbHlnb259LCB7QGxpbmsgbW9kdWxlOm9sL2dlb20vTXVsdGlMaW5lU3RyaW5nfk11bHRpTGluZVN0cmluZ30gb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9NdWx0aVBvbHlnb25+TXVsdGlQb2x5Z29ufS5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlQ6ICdwb2ludCcsXG4gIExJTkU6ICdsaW5lJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGV4dFBsYWNlbWVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhcy9UZXh0UmVwbGF5XG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7YXNDb2xvckxpa2V9IGZyb20gJy4uLy4uL2NvbG9ybGlrZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c30gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7bWF0Y2hpbmdDaHVua30gZnJvbSAnLi4vLi4vZ2VvbS9mbGF0L3N0cmFpZ2h0Y2h1bmsuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi8uLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQge0NBTlZBU19MSU5FX0RBU0h9IGZyb20gJy4uLy4uL2hhcy5qcyc7XG5pbXBvcnQge2xhYmVsQ2FjaGUsIG1lYXN1cmVUZXh0V2lkdGgsIGRlZmF1bHRUZXh0QWxpZ24sIG1lYXN1cmVUZXh0SGVpZ2h0LCBkZWZhdWx0UGFkZGluZywgZGVmYXVsdExpbmVDYXAsIGRlZmF1bHRMaW5lRGFzaE9mZnNldCwgZGVmYXVsdExpbmVEYXNoLCBkZWZhdWx0TGluZUpvaW4sIGRlZmF1bHRGaWxsU3R5bGUsIGNoZWNrRm9udCwgZGVmYXVsdEZvbnQsIGRlZmF1bHRMaW5lV2lkdGgsIGRlZmF1bHRNaXRlckxpbWl0LCBkZWZhdWx0U3Ryb2tlU3R5bGUsIGRlZmF1bHRUZXh0QmFzZWxpbmV9IGZyb20gJy4uL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzSW5zdHJ1Y3Rpb24gZnJvbSAnLi9JbnN0cnVjdGlvbi5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5IGZyb20gJy4vUmVwbGF5LmpzJztcbmltcG9ydCB7VEVYVF9BTElHTn0gZnJvbSAnLi4vcmVwbGF5LmpzJztcbmltcG9ydCBUZXh0UGxhY2VtZW50IGZyb20gJy4uLy4uL3N0eWxlL1RleHRQbGFjZW1lbnQuanMnO1xuXG52YXIgQ2FudmFzVGV4dFJlcGxheSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1JlcGxheSkge1xuICBmdW5jdGlvbiBDYW52YXNUZXh0UmVwbGF5KHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSkge1xuICAgIENhbnZhc1JlcGxheS5jYWxsKHRoaXMsIHRvbGVyYW5jZSwgbWF4RXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBvdmVybGFwcywgZGVjbHV0dGVyVHJlZSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJHcm91cF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59XG4gICAgICovXG4gICAgdGhpcy5sYWJlbHNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnRleHRfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50ZXh0T2Zmc2V0WF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGV4dE9mZnNldFlfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRSb3RhdGlvbl8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy50ZXh0RmlsbFN0YXRlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5GaWxsU3RhdGU+fVxuICAgICAqL1xuICAgIHRoaXMuZmlsbFN0YXRlcyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuU3Ryb2tlU3RhdGU+fVxuICAgICAqL1xuICAgIHRoaXMuc3Ryb2tlU3RhdGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuVGV4dFN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMudGV4dFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZX0gKi8gKHt9KTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlRleHRTdGF0ZT59XG4gICAgICovXG4gICAgdGhpcy50ZXh0U3RhdGVzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50ZXh0S2V5XyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuZmlsbEtleV8gPSAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnN0cm9rZUtleV8gPSAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIG51bWJlcj4+fVxuICAgICAqL1xuICAgIHRoaXMud2lkdGhzXyA9IHt9O1xuXG4gICAgbGFiZWxDYWNoZS5wcnVuZSgpO1xuXG4gIH1cblxuICBpZiAoIENhbnZhc1JlcGxheSApIENhbnZhc1RleHRSZXBsYXkuX19wcm90b19fID0gQ2FudmFzUmVwbGF5O1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc1JlcGxheSAmJiBDYW52YXNSZXBsYXkucHJvdG90eXBlICk7XG4gIENhbnZhc1RleHRSZXBsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzVGV4dFJlcGxheTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1RleHRSZXBsYXkucHJvdG90eXBlLmRyYXdUZXh0ID0gZnVuY3Rpb24gZHJhd1RleHQgKGdlb21ldHJ5LCBmZWF0dXJlKSB7XG4gICAgdmFyIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgdmFyIHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3Ryb2tlU3RhdGVfO1xuICAgIHZhciB0ZXh0U3RhdGUgPSB0aGlzLnRleHRTdGF0ZV87XG4gICAgaWYgKHRoaXMudGV4dF8gPT09ICcnIHx8ICF0ZXh0U3RhdGUgfHwgKCFmaWxsU3RhdGUgJiYgIXN0cm9rZVN0YXRlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBiZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO1xuXG4gICAgdmFyIGdlb21ldHJ5VHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgICB2YXIgZW5kID0gMjtcbiAgICB2YXIgc3RyaWRlID0gMjtcbiAgICB2YXIgaSwgaWk7XG5cbiAgICBpZiAodGV4dFN0YXRlLnBsYWNlbWVudCA9PT0gVGV4dFBsYWNlbWVudC5MSU5FKSB7XG4gICAgICBpZiAoIWludGVyc2VjdHModGhpcy5nZXRCdWZmZXJlZE1heEV4dGVudCgpLCBnZW9tZXRyeS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGVuZHM7XG4gICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkcpIHtcbiAgICAgICAgZW5kcyA9IFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykge1xuICAgICAgICBlbmRzID0gZ2VvbWV0cnkuZ2V0RW5kcygpO1xuICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeVR5cGUgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04pIHtcbiAgICAgICAgZW5kcyA9IGdlb21ldHJ5LmdldEVuZHMoKS5zbGljZSgwLCAxKTtcbiAgICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgICAgIHZhciBlbmRzcyA9IGdlb21ldHJ5LmdldEVuZHNzKCk7XG4gICAgICAgIGVuZHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgZW5kcy5wdXNoKGVuZHNzW2ldWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgIHZhciB0ZXh0QWxpZ24gPSB0ZXh0U3RhdGUudGV4dEFsaWduO1xuICAgICAgdmFyIGZsYXRPZmZzZXQgPSAwO1xuICAgICAgdmFyIGZsYXRFbmQ7XG4gICAgICBmb3IgKHZhciBvID0gMCwgb28gPSBlbmRzLmxlbmd0aDsgbyA8IG9vOyArK28pIHtcbiAgICAgICAgaWYgKHRleHRBbGlnbiA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YXIgcmFuZ2UgPSBtYXRjaGluZ0NodW5rKHRleHRTdGF0ZS5tYXhBbmdsZSwgZmxhdENvb3JkaW5hdGVzLCBmbGF0T2Zmc2V0LCBlbmRzW29dLCBzdHJpZGUpO1xuICAgICAgICAgIGZsYXRPZmZzZXQgPSByYW5nZVswXTtcbiAgICAgICAgICBmbGF0RW5kID0gcmFuZ2VbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmxhdEVuZCA9IGVuZHNbb107XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gZmxhdE9mZnNldDsgaSA8IGZsYXRFbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1tpXSwgZmxhdENvb3JkaW5hdGVzW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZW5kID0gdGhpcy5jb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgIGZsYXRPZmZzZXQgPSBlbmRzW29dO1xuICAgICAgICB0aGlzLmRyYXdDaGFyc18oYmVnaW4sIGVuZCwgdGhpcy5kZWNsdXR0ZXJHcm91cF8pO1xuICAgICAgICBiZWdpbiA9IGVuZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW5kR2VvbWV0cnkoZ2VvbWV0cnksIGZlYXR1cmUpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsYWJlbCA9IHRoaXMuZ2V0SW1hZ2UodGhpcy50ZXh0XywgdGhpcy50ZXh0S2V5XywgdGhpcy5maWxsS2V5XywgdGhpcy5zdHJva2VLZXlfKTtcbiAgICAgIHZhciB3aWR0aCA9IGxhYmVsLndpZHRoIC8gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICAgIGVuZCA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnRzKCk7XG4gICAgICAgICAgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjpcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRJbnRlcmlvclBvaW50KCk7XG4gICAgICAgICAgaWYgKCF0ZXh0U3RhdGUub3ZlcmZsb3cgJiYgZmxhdENvb3JkaW5hdGVzWzJdIC8gdGhpcy5yZXNvbHV0aW9uIDwgd2lkdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RyaWRlID0gMztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjpcbiAgICAgICAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnRzKCk7XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBpbnRlcmlvclBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XG4gICAgICAgICAgICBpZiAodGV4dFN0YXRlLm92ZXJmbG93IHx8IGludGVyaW9yUG9pbnRzW2kgKyAyXSAvIHRoaXMucmVzb2x1dGlvbiA+PSB3aWR0aCkge1xuICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMucHVzaChpbnRlcmlvclBvaW50c1tpXSwgaW50ZXJpb3JQb2ludHNbaSArIDFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICBpZiAoZW5kID09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICB9XG4gICAgICBlbmQgPSB0aGlzLmFwcGVuZEZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIDAsIGVuZCwgc3RyaWRlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCB8fCB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSkge1xuICAgICAgICB0aGlzLnNldEZpbGxTdHJva2VTdHlsZSh0ZXh0U3RhdGUuYmFja2dyb3VuZEZpbGwsIHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKTtcbiAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kRmlsbCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHRoaXMuc3RhdGUsIHRoaXMuY3JlYXRlRmlsbCwgZ2VvbWV0cnkpO1xuICAgICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zLnB1c2godGhpcy5jcmVhdGVGaWxsKHRoaXMuc3RhdGUsIGdlb21ldHJ5KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZSh0aGlzLnN0YXRlLCB0aGlzLmFwcGx5U3Ryb2tlKTtcbiAgICAgICAgICB0aGlzLmhpdERldGVjdGlvbkluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlU3Ryb2tlKHRoaXMuc3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5iZWdpbkdlb21ldHJ5KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgICAgIHRoaXMuZHJhd1RleHRJbWFnZV8obGFiZWwsIGJlZ2luLCBlbmQpO1xuICAgICAgdGhpcy5lbmRHZW9tZXRyeShnZW9tZXRyeSwgZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dEtleSBUZXh0IHN0eWxlIGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGxLZXkgRmlsbCBzdHlsZSBrZXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJva2VLZXkgU3Ryb2tlIHN0eWxlIGtleS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlLlxuICAgKi9cbiAgQ2FudmFzVGV4dFJlcGxheS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAodGV4dCwgdGV4dEtleSwgZmlsbEtleSwgc3Ryb2tlS2V5KSB7XG4gICAgdmFyIGxhYmVsO1xuICAgIHZhciBrZXkgPSBzdHJva2VLZXkgKyB0ZXh0S2V5ICsgdGV4dCArIGZpbGxLZXkgKyB0aGlzLnBpeGVsUmF0aW87XG5cbiAgICBpZiAoIWxhYmVsQ2FjaGUuY29udGFpbnNLZXkoa2V5KSkge1xuICAgICAgdmFyIHN0cm9rZVN0YXRlID0gc3Ryb2tlS2V5ID8gdGhpcy5zdHJva2VTdGF0ZXNbc3Ryb2tlS2V5XSB8fCB0aGlzLnRleHRTdHJva2VTdGF0ZV8gOiBudWxsO1xuICAgICAgdmFyIGZpbGxTdGF0ZSA9IGZpbGxLZXkgPyB0aGlzLmZpbGxTdGF0ZXNbZmlsbEtleV0gfHwgdGhpcy50ZXh0RmlsbFN0YXRlXyA6IG51bGw7XG4gICAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVzW3RleHRLZXldIHx8IHRoaXMudGV4dFN0YXRlXztcbiAgICAgIHZhciBwaXhlbFJhdGlvID0gdGhpcy5waXhlbFJhdGlvO1xuICAgICAgdmFyIHNjYWxlID0gdGV4dFN0YXRlLnNjYWxlICogcGl4ZWxSYXRpbztcbiAgICAgIHZhciBhbGlnbiA9IFRFWFRfQUxJR05bdGV4dFN0YXRlLnRleHRBbGlnbiB8fCBkZWZhdWx0VGV4dEFsaWduXTtcbiAgICAgIHZhciBzdHJva2VXaWR0aCA9IHN0cm9rZUtleSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuXG4gICAgICB2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICAgIHZhciB3aWR0aHMgPSBbXTtcbiAgICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGhzKHRleHRTdGF0ZS5mb250LCBsaW5lcywgd2lkdGhzKTtcbiAgICAgIHZhciBsaW5lSGVpZ2h0ID0gbWVhc3VyZVRleHRIZWlnaHQodGV4dFN0YXRlLmZvbnQpO1xuICAgICAgdmFyIGhlaWdodCA9IGxpbmVIZWlnaHQgKiBudW1MaW5lcztcbiAgICAgIHZhciByZW5kZXJXaWR0aCA9ICh3aWR0aCArIHN0cm9rZVdpZHRoKTtcbiAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKFxuICAgICAgICBNYXRoLmNlaWwocmVuZGVyV2lkdGggKiBzY2FsZSksXG4gICAgICAgIE1hdGguY2VpbCgoaGVpZ2h0ICsgc3Ryb2tlV2lkdGgpICogc2NhbGUpKTtcbiAgICAgIGxhYmVsID0gY29udGV4dC5jYW52YXM7XG4gICAgICBsYWJlbENhY2hlLnNldChrZXksIGxhYmVsKTtcbiAgICAgIGlmIChzY2FsZSAhPSAxKSB7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGUsIHNjYWxlKTtcbiAgICAgIH1cbiAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdGF0ZS5mb250O1xuICAgICAgaWYgKHN0cm9rZUtleSkge1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGU7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlV2lkdGg7XG4gICAgICAgIGNvbnRleHQubGluZUNhcCA9IC8qKiBAdHlwZSB7Q2FudmFzTGluZUNhcH0gKi8gKHN0cm9rZVN0YXRlLmxpbmVDYXApO1xuICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gLyoqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn0gKi8gKHN0cm9rZVN0YXRlLmxpbmVKb2luKTtcbiAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdDtcbiAgICAgICAgaWYgKENBTlZBU19MSU5FX0RBU0ggJiYgc3Ryb2tlU3RhdGUubGluZURhc2gubGVuZ3RoKSB7XG4gICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChzdHJva2VTdGF0ZS5saW5lRGFzaCk7XG4gICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZmlsbEtleSkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5maWxsU3R5bGU7XG4gICAgICB9XG4gICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgIHZhciBsZWZ0UmlnaHQgPSAoMC41IC0gYWxpZ24pO1xuICAgICAgdmFyIHggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gc2NhbGUgKyBsZWZ0UmlnaHQgKiBzdHJva2VXaWR0aDtcbiAgICAgIHZhciBpO1xuICAgICAgaWYgKHN0cm9rZUtleSkge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xuICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmaWxsS2V5KSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgICAgY29udGV4dC5maWxsVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGluZUhlaWdodCkgKyBpICogbGluZUhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsQ2FjaGUuZ2V0KGtleSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGxhYmVsIExhYmVsLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICAgKi9cbiAgQ2FudmFzVGV4dFJlcGxheS5wcm90b3R5cGUuZHJhd1RleHRJbWFnZV8gPSBmdW5jdGlvbiBkcmF3VGV4dEltYWdlXyAobGFiZWwsIGJlZ2luLCBlbmQpIHtcbiAgICB2YXIgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgIHZhciBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXztcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICB2YXIgYWxpZ24gPSBURVhUX0FMSUdOW3RleHRTdGF0ZS50ZXh0QWxpZ24gfHwgZGVmYXVsdFRleHRBbGlnbl07XG4gICAgdmFyIGJhc2VsaW5lID0gVEVYVF9BTElHTlt0ZXh0U3RhdGUudGV4dEJhc2VsaW5lXTtcbiAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5saW5lV2lkdGggPyBzdHJva2VTdGF0ZS5saW5lV2lkdGggOiAwO1xuXG4gICAgdmFyIGFuY2hvclggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gcGl4ZWxSYXRpbyArIDIgKiAoMC41IC0gYWxpZ24pICogc3Ryb2tlV2lkdGg7XG4gICAgdmFyIGFuY2hvclkgPSBiYXNlbGluZSAqIGxhYmVsLmhlaWdodCAvIHBpeGVsUmF0aW8gKyAyICogKDAuNSAtIGJhc2VsaW5lKSAqIHN0cm9rZVdpZHRoO1xuICAgIHRoaXMuaW5zdHJ1Y3Rpb25zLnB1c2goW0NhbnZhc0luc3RydWN0aW9uLkRSQVdfSU1BR0UsIGJlZ2luLCBlbmQsXG4gICAgICBsYWJlbCwgKGFuY2hvclggLSB0aGlzLnRleHRPZmZzZXRYXykgKiBwaXhlbFJhdGlvLCAoYW5jaG9yWSAtIHRoaXMudGV4dE9mZnNldFlfKSAqIHBpeGVsUmF0aW8sXG4gICAgICB0aGlzLmRlY2x1dHRlckdyb3VwXywgbGFiZWwuaGVpZ2h0LCAxLCAwLCAwLCB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18sIHRoaXMudGV4dFJvdGF0aW9uXyxcbiAgICAgIDEsIGxhYmVsLndpZHRoLFxuICAgICAgdGV4dFN0YXRlLnBhZGRpbmcgPT0gZGVmYXVsdFBhZGRpbmcgP1xuICAgICAgICBkZWZhdWx0UGFkZGluZyA6IHRleHRTdGF0ZS5wYWRkaW5nLm1hcChmdW5jdGlvbihwKSB7XG4gICAgICAgICAgcmV0dXJuIHAgKiBwaXhlbFJhdGlvO1xuICAgICAgICB9KSxcbiAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLCAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlXG4gICAgXSk7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19JTUFHRSwgYmVnaW4sIGVuZCxcbiAgICAgIGxhYmVsLCAoYW5jaG9yWCAtIHRoaXMudGV4dE9mZnNldFhfKSAqIHBpeGVsUmF0aW8sIChhbmNob3JZIC0gdGhpcy50ZXh0T2Zmc2V0WV8pICogcGl4ZWxSYXRpbyxcbiAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfLCBsYWJlbC5oZWlnaHQsIDEsIDAsIDAsIHRoaXMudGV4dFJvdGF0ZVdpdGhWaWV3XywgdGhpcy50ZXh0Um90YXRpb25fLFxuICAgICAgMSAvIHBpeGVsUmF0aW8sIGxhYmVsLndpZHRoLCB0ZXh0U3RhdGUucGFkZGluZyxcbiAgICAgICEhdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsLCAhIXRleHRTdGF0ZS5iYWNrZ3JvdW5kU3Ryb2tlXG4gICAgXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwfSBkZWNsdXR0ZXJHcm91cCBEZWNsdXR0ZXIgZ3JvdXAuXG4gICAqL1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZS5kcmF3Q2hhcnNfID0gZnVuY3Rpb24gZHJhd0NoYXJzXyAoYmVnaW4sIGVuZCwgZGVjbHV0dGVyR3JvdXApIHtcbiAgICB2YXIgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgdmFyIHRleHRTdGF0ZSA9IHRoaXMudGV4dFN0YXRlXztcbiAgICB2YXIgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXztcblxuICAgIHZhciBzdHJva2VLZXkgPSB0aGlzLnN0cm9rZUtleV87XG4gICAgaWYgKHN0cm9rZVN0YXRlKSB7XG4gICAgICBpZiAoIShzdHJva2VLZXkgaW4gdGhpcy5zdHJva2VTdGF0ZXMpKSB7XG4gICAgICAgIHRoaXMuc3Ryb2tlU3RhdGVzW3N0cm9rZUtleV0gPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5TdHJva2VTdGF0ZX0gKi8gKHtcbiAgICAgICAgICBzdHJva2VTdHlsZTogc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUsXG4gICAgICAgICAgbGluZUNhcDogc3Ryb2tlU3RhdGUubGluZUNhcCxcbiAgICAgICAgICBsaW5lRGFzaE9mZnNldDogc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQsXG4gICAgICAgICAgbGluZVdpZHRoOiBzdHJva2VTdGF0ZS5saW5lV2lkdGgsXG4gICAgICAgICAgbGluZUpvaW46IHN0cm9rZVN0YXRlLmxpbmVKb2luLFxuICAgICAgICAgIG1pdGVyTGltaXQ6IHN0cm9rZVN0YXRlLm1pdGVyTGltaXQsXG4gICAgICAgICAgbGluZURhc2g6IHN0cm9rZVN0YXRlLmxpbmVEYXNoXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdGV4dEtleSA9IHRoaXMudGV4dEtleV87XG4gICAgaWYgKCEodGhpcy50ZXh0S2V5XyBpbiB0aGlzLnRleHRTdGF0ZXMpKSB7XG4gICAgICB0aGlzLnRleHRTdGF0ZXNbdGhpcy50ZXh0S2V5X10gPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2NhbnZhcy5qc1wiKS5UZXh0U3RhdGV9ICovICh7XG4gICAgICAgIGZvbnQ6IHRleHRTdGF0ZS5mb250LFxuICAgICAgICB0ZXh0QWxpZ246IHRleHRTdGF0ZS50ZXh0QWxpZ24gfHwgZGVmYXVsdFRleHRBbGlnbixcbiAgICAgICAgc2NhbGU6IHRleHRTdGF0ZS5zY2FsZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBmaWxsS2V5ID0gdGhpcy5maWxsS2V5XztcbiAgICBpZiAoZmlsbFN0YXRlKSB7XG4gICAgICBpZiAoIShmaWxsS2V5IGluIHRoaXMuZmlsbFN0YXRlcykpIHtcbiAgICAgICAgdGhpcy5maWxsU3RhdGVzW2ZpbGxLZXldID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRmlsbFN0YXRlfSAqLyAoe1xuICAgICAgICAgIGZpbGxTdHlsZTogZmlsbFN0YXRlLmZpbGxTdHlsZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHRoaXMucGl4ZWxSYXRpbztcbiAgICB2YXIgYmFzZWxpbmUgPSBURVhUX0FMSUdOW3RleHRTdGF0ZS50ZXh0QmFzZWxpbmVdO1xuXG4gICAgdmFyIG9mZnNldFkgPSB0aGlzLnRleHRPZmZzZXRZXyAqIHBpeGVsUmF0aW87XG4gICAgdmFyIHRleHQgPSB0aGlzLnRleHRfO1xuICAgIHZhciBmb250ID0gdGV4dFN0YXRlLmZvbnQ7XG4gICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdGF0ZS5zY2FsZTtcbiAgICB2YXIgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSA/IHN0cm9rZVN0YXRlLmxpbmVXaWR0aCAqIHRleHRTY2FsZSAvIDIgOiAwO1xuICAgIHZhciB3aWR0aHMgPSB0aGlzLndpZHRoc19bZm9udF07XG4gICAgaWYgKCF3aWR0aHMpIHtcbiAgICAgIHRoaXMud2lkdGhzX1tmb250XSA9IHdpZHRocyA9IHt9O1xuICAgIH1cbiAgICB0aGlzLmluc3RydWN0aW9ucy5wdXNoKFtDYW52YXNJbnN0cnVjdGlvbi5EUkFXX0NIQVJTLFxuICAgICAgYmVnaW4sIGVuZCwgYmFzZWxpbmUsIGRlY2x1dHRlckdyb3VwLFxuICAgICAgdGV4dFN0YXRlLm92ZXJmbG93LCBmaWxsS2V5LCB0ZXh0U3RhdGUubWF4QW5nbGUsXG4gICAgICBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHdpZHRoc1t0ZXh0XTtcbiAgICAgICAgaWYgKCF3aWR0aCkge1xuICAgICAgICAgIHdpZHRoID0gd2lkdGhzW3RleHRdID0gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2lkdGggKiB0ZXh0U2NhbGUgKiBwaXhlbFJhdGlvO1xuICAgICAgfSxcbiAgICAgIG9mZnNldFksIHN0cm9rZUtleSwgc3Ryb2tlV2lkdGggKiBwaXhlbFJhdGlvLCB0ZXh0LCB0ZXh0S2V5LCAxXG4gICAgXSk7XG4gICAgdGhpcy5oaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMucHVzaChbQ2FudmFzSW5zdHJ1Y3Rpb24uRFJBV19DSEFSUyxcbiAgICAgIGJlZ2luLCBlbmQsIGJhc2VsaW5lLCBkZWNsdXR0ZXJHcm91cCxcbiAgICAgIHRleHRTdGF0ZS5vdmVyZmxvdywgZmlsbEtleSwgdGV4dFN0YXRlLm1heEFuZ2xlLFxuICAgICAgZnVuY3Rpb24odGV4dCkge1xuICAgICAgICB2YXIgd2lkdGggPSB3aWR0aHNbdGV4dF07XG4gICAgICAgIGlmICghd2lkdGgpIHtcbiAgICAgICAgICB3aWR0aCA9IHdpZHRoc1t0ZXh0XSA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpZHRoICogdGV4dFNjYWxlO1xuICAgICAgfSxcbiAgICAgIG9mZnNldFksIHN0cm9rZUtleSwgc3Ryb2tlV2lkdGgsIHRleHQsIHRleHRLZXksIDEgLyBwaXhlbFJhdGlvXG4gICAgXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNUZXh0UmVwbGF5LnByb3RvdHlwZS5zZXRUZXh0U3R5bGUgPSBmdW5jdGlvbiBzZXRUZXh0U3R5bGUgKHRleHRTdHlsZSwgZGVjbHV0dGVyR3JvdXApIHtcbiAgICB2YXIgdGV4dFN0YXRlLCBmaWxsU3RhdGUsIHN0cm9rZVN0YXRlO1xuICAgIGlmICghdGV4dFN0eWxlKSB7XG4gICAgICB0aGlzLnRleHRfID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9ICovIChkZWNsdXR0ZXJHcm91cCk7XG5cbiAgICAgIHZhciB0ZXh0RmlsbFN0eWxlID0gdGV4dFN0eWxlLmdldEZpbGwoKTtcbiAgICAgIGlmICghdGV4dEZpbGxTdHlsZSkge1xuICAgICAgICBmaWxsU3RhdGUgPSB0aGlzLnRleHRGaWxsU3RhdGVfID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGxTdGF0ZSA9IHRoaXMudGV4dEZpbGxTdGF0ZV87XG4gICAgICAgIGlmICghZmlsbFN0YXRlKSB7XG4gICAgICAgICAgZmlsbFN0YXRlID0gdGhpcy50ZXh0RmlsbFN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkZpbGxTdGF0ZX0gKi8gKHt9KTtcbiAgICAgICAgfVxuICAgICAgICBmaWxsU3RhdGUuZmlsbFN0eWxlID0gYXNDb2xvckxpa2UoXG4gICAgICAgICAgdGV4dEZpbGxTdHlsZS5nZXRDb2xvcigpIHx8IGRlZmF1bHRGaWxsU3R5bGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGV4dFN0cm9rZVN0eWxlID0gdGV4dFN0eWxlLmdldFN0cm9rZSgpO1xuICAgICAgaWYgKCF0ZXh0U3Ryb2tlU3R5bGUpIHtcbiAgICAgICAgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV8gPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHJva2VTdGF0ZV87XG4gICAgICAgIGlmICghc3Ryb2tlU3RhdGUpIHtcbiAgICAgICAgICBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0cm9rZVN0YXRlXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLlN0cm9rZVN0YXRlfSAqLyAoe30pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW5lRGFzaCA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lRGFzaCgpO1xuICAgICAgICB2YXIgbGluZURhc2hPZmZzZXQgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZURhc2hPZmZzZXQoKTtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHRleHRTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgbWl0ZXJMaW1pdCA9IHRleHRTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG4gICAgICAgIHN0cm9rZVN0YXRlLmxpbmVDYXAgPSB0ZXh0U3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpIHx8IGRlZmF1bHRMaW5lQ2FwO1xuICAgICAgICBzdHJva2VTdGF0ZS5saW5lRGFzaCA9IGxpbmVEYXNoID8gbGluZURhc2guc2xpY2UoKSA6IGRlZmF1bHRMaW5lRGFzaDtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZURhc2hPZmZzZXQgPVxuICAgICAgICAgICAgbGluZURhc2hPZmZzZXQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRMaW5lRGFzaE9mZnNldCA6IGxpbmVEYXNoT2Zmc2V0O1xuICAgICAgICBzdHJva2VTdGF0ZS5saW5lSm9pbiA9IHRleHRTdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpIHx8IGRlZmF1bHRMaW5lSm9pbjtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZVdpZHRoID1cbiAgICAgICAgICAgIGxpbmVXaWR0aCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdExpbmVXaWR0aCA6IGxpbmVXaWR0aDtcbiAgICAgICAgc3Ryb2tlU3RhdGUubWl0ZXJMaW1pdCA9XG4gICAgICAgICAgICBtaXRlckxpbWl0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0TWl0ZXJMaW1pdCA6IG1pdGVyTGltaXQ7XG4gICAgICAgIHN0cm9rZVN0YXRlLnN0cm9rZVN0eWxlID0gYXNDb2xvckxpa2UoXG4gICAgICAgICAgdGV4dFN0cm9rZVN0eWxlLmdldENvbG9yKCkgfHwgZGVmYXVsdFN0cm9rZVN0eWxlKTtcbiAgICAgIH1cblxuICAgICAgdGV4dFN0YXRlID0gdGhpcy50ZXh0U3RhdGVfO1xuICAgICAgdmFyIGZvbnQgPSB0ZXh0U3R5bGUuZ2V0Rm9udCgpIHx8IGRlZmF1bHRGb250O1xuICAgICAgY2hlY2tGb250KGZvbnQpO1xuICAgICAgdmFyIHRleHRTY2FsZSA9IHRleHRTdHlsZS5nZXRTY2FsZSgpO1xuICAgICAgdGV4dFN0YXRlLm92ZXJmbG93ID0gdGV4dFN0eWxlLmdldE92ZXJmbG93KCk7XG4gICAgICB0ZXh0U3RhdGUuZm9udCA9IGZvbnQ7XG4gICAgICB0ZXh0U3RhdGUubWF4QW5nbGUgPSB0ZXh0U3R5bGUuZ2V0TWF4QW5nbGUoKTtcbiAgICAgIHRleHRTdGF0ZS5wbGFjZW1lbnQgPSB0ZXh0U3R5bGUuZ2V0UGxhY2VtZW50KCk7XG4gICAgICB0ZXh0U3RhdGUudGV4dEFsaWduID0gdGV4dFN0eWxlLmdldFRleHRBbGlnbigpO1xuICAgICAgdGV4dFN0YXRlLnRleHRCYXNlbGluZSA9IHRleHRTdHlsZS5nZXRUZXh0QmFzZWxpbmUoKSB8fCBkZWZhdWx0VGV4dEJhc2VsaW5lO1xuICAgICAgdGV4dFN0YXRlLmJhY2tncm91bmRGaWxsID0gdGV4dFN0eWxlLmdldEJhY2tncm91bmRGaWxsKCk7XG4gICAgICB0ZXh0U3RhdGUuYmFja2dyb3VuZFN0cm9rZSA9IHRleHRTdHlsZS5nZXRCYWNrZ3JvdW5kU3Ryb2tlKCk7XG4gICAgICB0ZXh0U3RhdGUucGFkZGluZyA9IHRleHRTdHlsZS5nZXRQYWRkaW5nKCkgfHwgZGVmYXVsdFBhZGRpbmc7XG4gICAgICB0ZXh0U3RhdGUuc2NhbGUgPSB0ZXh0U2NhbGUgPT09IHVuZGVmaW5lZCA/IDEgOiB0ZXh0U2NhbGU7XG5cbiAgICAgIHZhciB0ZXh0T2Zmc2V0WCA9IHRleHRTdHlsZS5nZXRPZmZzZXRYKCk7XG4gICAgICB2YXIgdGV4dE9mZnNldFkgPSB0ZXh0U3R5bGUuZ2V0T2Zmc2V0WSgpO1xuICAgICAgdmFyIHRleHRSb3RhdGVXaXRoVmlldyA9IHRleHRTdHlsZS5nZXRSb3RhdGVXaXRoVmlldygpO1xuICAgICAgdmFyIHRleHRSb3RhdGlvbiA9IHRleHRTdHlsZS5nZXRSb3RhdGlvbigpO1xuICAgICAgdGhpcy50ZXh0XyA9IHRleHRTdHlsZS5nZXRUZXh0KCkgfHwgJyc7XG4gICAgICB0aGlzLnRleHRPZmZzZXRYXyA9IHRleHRPZmZzZXRYID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFg7XG4gICAgICB0aGlzLnRleHRPZmZzZXRZXyA9IHRleHRPZmZzZXRZID09PSB1bmRlZmluZWQgPyAwIDogdGV4dE9mZnNldFk7XG4gICAgICB0aGlzLnRleHRSb3RhdGVXaXRoVmlld18gPSB0ZXh0Um90YXRlV2l0aFZpZXcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdGV4dFJvdGF0ZVdpdGhWaWV3O1xuICAgICAgdGhpcy50ZXh0Um90YXRpb25fID0gdGV4dFJvdGF0aW9uID09PSB1bmRlZmluZWQgPyAwIDogdGV4dFJvdGF0aW9uO1xuXG4gICAgICB0aGlzLnN0cm9rZUtleV8gPSBzdHJva2VTdGF0ZSA/XG4gICAgICAgICh0eXBlb2Ygc3Ryb2tlU3RhdGUuc3Ryb2tlU3R5bGUgPT0gJ3N0cmluZycgPyBzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSA6IGdldFVpZChzdHJva2VTdGF0ZS5zdHJva2VTdHlsZSkpICtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZUNhcCArIHN0cm9rZVN0YXRlLmxpbmVEYXNoT2Zmc2V0ICsgJ3wnICsgc3Ryb2tlU3RhdGUubGluZVdpZHRoICtcbiAgICAgICAgc3Ryb2tlU3RhdGUubGluZUpvaW4gKyBzdHJva2VTdGF0ZS5taXRlckxpbWl0ICsgJ1snICsgc3Ryb2tlU3RhdGUubGluZURhc2guam9pbigpICsgJ10nIDpcbiAgICAgICAgJyc7XG4gICAgICB0aGlzLnRleHRLZXlfID0gdGV4dFN0YXRlLmZvbnQgKyB0ZXh0U3RhdGUuc2NhbGUgKyAodGV4dFN0YXRlLnRleHRBbGlnbiB8fCAnPycpO1xuICAgICAgdGhpcy5maWxsS2V5XyA9IGZpbGxTdGF0ZSA/XG4gICAgICAgICh0eXBlb2YgZmlsbFN0YXRlLmZpbGxTdHlsZSA9PSAnc3RyaW5nJyA/IGZpbGxTdGF0ZS5maWxsU3R5bGUgOiAoJ3wnICsgZ2V0VWlkKGZpbGxTdGF0ZS5maWxsU3R5bGUpKSkgOlxuICAgICAgICAnJztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1RleHRSZXBsYXk7XG59KENhbnZhc1JlcGxheSkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbGluZXMgTGluZXMgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gd2lkdGhzIEFycmF5IHdpbGwgYmUgcG9wdWxhdGVkIHdpdGggdGhlIHdpZHRocyBvZlxuICogZWFjaCBsaW5lLlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aCBvZiB0aGUgd2hvbGUgdGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIGxpbmVzLCB3aWR0aHMpIHtcbiAgdmFyIG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xuICB2YXIgd2lkdGggPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcbiAgICB2YXIgY3VycmVudFdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCBsaW5lc1tpXSk7XG4gICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcbiAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xuICB9XG4gIHJldHVybiB3aWR0aDtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNUZXh0UmVwbGF5O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZXh0UmVwbGF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwXG4gKi9cblxuaW1wb3J0IHtudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9ufSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7YnVmZmVyLCBjcmVhdGVFbXB0eSwgZXh0ZW5kQ29vcmRpbmF0ZX0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7dHJhbnNmb3JtMkR9IGZyb20gJy4uLy4uL2dlb20vZmxhdC90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHtpc0VtcHR5fSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IFJlcGxheUdyb3VwIGZyb20gJy4uL1JlcGxheUdyb3VwLmpzJztcbmltcG9ydCBSZXBsYXlUeXBlIGZyb20gJy4uL1JlcGxheVR5cGUuanMnO1xuaW1wb3J0IENhbnZhc1JlcGxheSBmcm9tICcuL1JlcGxheS5qcyc7XG5pbXBvcnQgQ2FudmFzSW1hZ2VSZXBsYXkgZnJvbSAnLi9JbWFnZVJlcGxheS5qcyc7XG5pbXBvcnQgQ2FudmFzTGluZVN0cmluZ1JlcGxheSBmcm9tICcuL0xpbmVTdHJpbmdSZXBsYXkuanMnO1xuaW1wb3J0IENhbnZhc1BvbHlnb25SZXBsYXkgZnJvbSAnLi9Qb2x5Z29uUmVwbGF5LmpzJztcbmltcG9ydCBDYW52YXNUZXh0UmVwbGF5IGZyb20gJy4vVGV4dFJlcGxheS5qcyc7XG5pbXBvcnQge09SREVSfSBmcm9tICcuLi9yZXBsYXkuanMnO1xuaW1wb3J0IHtjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm19IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PFJlcGxheVR5cGUsIHR5cGVvZiBDYW52YXNSZXBsYXk+fVxuICovXG52YXIgQkFUQ0hfQ09OU1RSVUNUT1JTID0ge1xuICAnQ2lyY2xlJzogQ2FudmFzUG9seWdvblJlcGxheSxcbiAgJ0RlZmF1bHQnOiBDYW52YXNSZXBsYXksXG4gICdJbWFnZSc6IENhbnZhc0ltYWdlUmVwbGF5LFxuICAnTGluZVN0cmluZyc6IENhbnZhc0xpbmVTdHJpbmdSZXBsYXksXG4gICdQb2x5Z29uJzogQ2FudmFzUG9seWdvblJlcGxheSxcbiAgJ1RleHQnOiBDYW52YXNUZXh0UmVwbGF5XG59O1xuXG5cbnZhciBDYW52YXNSZXBsYXlHcm91cCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFJlcGxheUdyb3VwKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1JlcGxheUdyb3VwKFxuICAgIHRvbGVyYW5jZSxcbiAgICBtYXhFeHRlbnQsXG4gICAgcmVzb2x1dGlvbixcbiAgICBwaXhlbFJhdGlvLFxuICAgIG92ZXJsYXBzLFxuICAgIGRlY2x1dHRlclRyZWUsXG4gICAgb3B0X3JlbmRlckJ1ZmZlclxuICApIHtcbiAgICBSZXBsYXlHcm91cC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogRGVjbHV0dGVyIHRyZWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRlY2x1dHRlclRyZWVfID0gZGVjbHV0dGVyVHJlZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXB9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRlY2x1dHRlckdyb3VwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50b2xlcmFuY2VfID0gdG9sZXJhbmNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLm1heEV4dGVudF8gPSBtYXhFeHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxhcHNfID0gb3ZlcmxhcHM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyQnVmZmVyXyA9IG9wdF9yZW5kZXJCdWZmZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxSZXBsYXlUeXBlLCBDYW52YXNSZXBsYXk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcGxheXNCeVpJbmRleF8gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLmhpdERldGVjdGlvblRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgfVxuXG4gIGlmICggUmVwbGF5R3JvdXAgKSBDYW52YXNSZXBsYXlHcm91cC5fX3Byb3RvX18gPSBSZXBsYXlHcm91cDtcbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUmVwbGF5R3JvdXAgJiYgUmVwbGF5R3JvdXAucHJvdG90eXBlICk7XG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhbnZhc1JlcGxheUdyb3VwO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmFkZERlY2x1dHRlciA9IGZ1bmN0aW9uIGFkZERlY2x1dHRlciAoZ3JvdXApIHtcbiAgICB2YXIgZGVjbHV0dGVyID0gbnVsbDtcbiAgICBpZiAodGhpcy5kZWNsdXR0ZXJUcmVlXykge1xuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIGRlY2x1dHRlciA9IHRoaXMuZGVjbHV0dGVyR3JvdXBfO1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKGRlY2x1dHRlcls0XSkrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlY2x1dHRlciA9IHRoaXMuZGVjbHV0dGVyR3JvdXBfID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgZGVjbHV0dGVyLnB1c2goMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWNsdXR0ZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5jbGlwID0gZnVuY3Rpb24gY2xpcCAoY29udGV4dCwgdHJhbnNmb3JtKSB7XG4gICAgdmFyIGZsYXRDbGlwQ29vcmRzID0gdGhpcy5nZXRDbGlwQ29vcmRzKHRyYW5zZm9ybSk7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb250ZXh0Lm1vdmVUbyhmbGF0Q2xpcENvb3Jkc1swXSwgZmxhdENsaXBDb29yZHNbMV0pO1xuICAgIGNvbnRleHQubGluZVRvKGZsYXRDbGlwQ29vcmRzWzJdLCBmbGF0Q2xpcENvb3Jkc1szXSk7XG4gICAgY29udGV4dC5saW5lVG8oZmxhdENsaXBDb29yZHNbNF0sIGZsYXRDbGlwQ29vcmRzWzVdKTtcbiAgICBjb250ZXh0LmxpbmVUbyhmbGF0Q2xpcENvb3Jkc1s2XSwgZmxhdENsaXBDb29yZHNbN10pO1xuICAgIGNvbnRleHQuY2xpcCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PFJlcGxheVR5cGU+fSByZXBsYXlzIFJlcGxheXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyByZXBsYXlzIG9mIHRoZSBwcm92aWRlZCB0eXBlcy5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5oYXNSZXBsYXlzID0gZnVuY3Rpb24gaGFzUmVwbGF5cyAocmVwbGF5cykge1xuICAgIGZvciAodmFyIHpJbmRleCBpbiB0aGlzLnJlcGxheXNCeVpJbmRleF8pIHtcbiAgICAgIHZhciBjYW5kaWRhdGVzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleF07XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByZXBsYXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKHJlcGxheXNbaV0gaW4gY2FuZGlkYXRlcykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gZmluaXNoICgpIHtcbiAgICBmb3IgKHZhciB6S2V5IGluIHRoaXMucmVwbGF5c0J5WkluZGV4Xykge1xuICAgICAgdmFyIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bektleV07XG4gICAgICBmb3IgKHZhciByZXBsYXlLZXkgaW4gcmVwbGF5cykge1xuICAgICAgICByZXBsYXlzW3JlcGxheUtleV0uZmluaXNoKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpKTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jYW52YXMuanNcIikuRGVjbHV0dGVyR3JvdXA+fSBkZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgcmVzb2x1dGlvbixcbiAgICByb3RhdGlvbixcbiAgICBoaXRUb2xlcmFuY2UsXG4gICAgc2tpcHBlZEZlYXR1cmVzSGFzaCxcbiAgICBjYWxsYmFjayxcbiAgICBkZWNsdXR0ZXJSZXBsYXlzXG4gICkge1xuXG4gICAgaGl0VG9sZXJhbmNlID0gTWF0aC5yb3VuZChoaXRUb2xlcmFuY2UpO1xuICAgIHZhciBjb250ZXh0U2l6ZSA9IGhpdFRvbGVyYW5jZSAqIDIgKyAxO1xuICAgIHZhciB0cmFuc2Zvcm0gPSBjb21wb3NlVHJhbnNmb3JtKHRoaXMuaGl0RGV0ZWN0aW9uVHJhbnNmb3JtXyxcbiAgICAgIGhpdFRvbGVyYW5jZSArIDAuNSwgaGl0VG9sZXJhbmNlICsgMC41LFxuICAgICAgMSAvIHJlc29sdXRpb24sIC0xIC8gcmVzb2x1dGlvbixcbiAgICAgIC1yb3RhdGlvbixcbiAgICAgIC1jb29yZGluYXRlWzBdLCAtY29vcmRpbmF0ZVsxXSk7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfO1xuXG4gICAgaWYgKGNvbnRleHQuY2FudmFzLndpZHRoICE9PSBjb250ZXh0U2l6ZSB8fCBjb250ZXh0LmNhbnZhcy5oZWlnaHQgIT09IGNvbnRleHRTaXplKSB7XG4gICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGNvbnRleHRTaXplO1xuICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gY29udGV4dFNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdmFyIGhpdEV4dGVudDtcbiAgICBpZiAodGhpcy5yZW5kZXJCdWZmZXJfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGhpdEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKGhpdEV4dGVudCwgY29vcmRpbmF0ZSk7XG4gICAgICBidWZmZXIoaGl0RXh0ZW50LCByZXNvbHV0aW9uICogKHRoaXMucmVuZGVyQnVmZmVyXyArIGhpdFRvbGVyYW5jZSksIGhpdEV4dGVudCk7XG4gICAgfVxuXG4gICAgdmFyIG1hc2sgPSBnZXRDaXJjbGVBcnJheShoaXRUb2xlcmFuY2UpO1xuICAgIHZhciBkZWNsdXR0ZXJlZEZlYXR1cmVzO1xuICAgIGlmICh0aGlzLmRlY2x1dHRlclRyZWVfKSB7XG4gICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzID0gdGhpcy5kZWNsdXR0ZXJUcmVlXy5hbGwoKS5tYXAoZnVuY3Rpb24oZW50cnkpIHtcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHJlcGxheVR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmVhdHVyZUNhbGxiYWNrKGZlYXR1cmUpIHtcbiAgICAgIHZhciBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpLmRhdGE7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRleHRTaXplOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb250ZXh0U2l6ZTsgaisrKSB7XG4gICAgICAgICAgaWYgKG1hc2tbaV1bal0pIHtcbiAgICAgICAgICAgIGlmIChpbWFnZURhdGFbKGogKiBjb250ZXh0U2l6ZSArIGkpICogNCArIDNdID4gMCkge1xuICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKHZvaWQgMCk7XG4gICAgICAgICAgICAgIGlmICghKGRlY2x1dHRlcmVkRmVhdHVyZXMgJiYgKHJlcGxheVR5cGUgPT0gUmVwbGF5VHlwZS5JTUFHRSB8fCByZXBsYXlUeXBlID09IFJlcGxheVR5cGUuVEVYVCkpIHx8XG4gICAgICAgICAgICAgICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzLmluZGV4T2YoZmVhdHVyZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dFNpemUsIGNvbnRleHRTaXplKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGF5c0J5WkluZGV4XykubWFwKE51bWJlcik7XG4gICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcblxuICAgIHZhciBpLCBqLCByZXBsYXlzLCByZXBsYXksIHJlc3VsdDtcbiAgICBmb3IgKGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdmFyIHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XG4gICAgICByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XG4gICAgICBmb3IgKGogPSBPUkRFUi5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICByZXBsYXlUeXBlID0gT1JERVJbal07XG4gICAgICAgIHJlcGxheSA9IHJlcGxheXNbcmVwbGF5VHlwZV07XG4gICAgICAgIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzICYmXG4gICAgICAgICAgICAgIChyZXBsYXlUeXBlID09IFJlcGxheVR5cGUuSU1BR0UgfHwgcmVwbGF5VHlwZSA9PSBSZXBsYXlUeXBlLlRFWFQpKSB7XG4gICAgICAgICAgICB2YXIgZGVjbHV0dGVyID0gZGVjbHV0dGVyUmVwbGF5c1t6SW5kZXhLZXldO1xuICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXIpIHtcbiAgICAgICAgICAgICAgZGVjbHV0dGVyUmVwbGF5c1t6SW5kZXhLZXldID0gW3JlcGxheSwgdHJhbnNmb3JtLnNsaWNlKDApXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRlY2x1dHRlci5wdXNoKHJlcGxheSwgdHJhbnNmb3JtLnNsaWNlKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVwbGF5LnJlcGxheUhpdERldGVjdGlvbihjb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLFxuICAgICAgICAgICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCBmZWF0dXJlQ2FsbGJhY2ssIGhpdEV4dGVudCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gQ2xpcCBjb29yZGluYXRlcy5cbiAgICovXG4gIENhbnZhc1JlcGxheUdyb3VwLnByb3RvdHlwZS5nZXRDbGlwQ29vcmRzID0gZnVuY3Rpb24gZ2V0Q2xpcENvb3JkcyAodHJhbnNmb3JtKSB7XG4gICAgdmFyIG1heEV4dGVudCA9IHRoaXMubWF4RXh0ZW50XztcbiAgICB2YXIgbWluWCA9IG1heEV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IG1heEV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IG1heEV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IG1heEV4dGVudFszXTtcbiAgICB2YXIgZmxhdENsaXBDb29yZHMgPSBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWV07XG4gICAgdHJhbnNmb3JtMkQoXG4gICAgICBmbGF0Q2xpcENvb3JkcywgMCwgOCwgMiwgdHJhbnNmb3JtLCBmbGF0Q2xpcENvb3Jkcyk7XG4gICAgcmV0dXJuIGZsYXRDbGlwQ29vcmRzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLmdldFJlcGxheSA9IGZ1bmN0aW9uIGdldFJlcGxheSAoekluZGV4LCByZXBsYXlUeXBlKSB7XG4gICAgdmFyIHpJbmRleEtleSA9IHpJbmRleCAhPT0gdW5kZWZpbmVkID8gekluZGV4LnRvU3RyaW5nKCkgOiAnMCc7XG4gICAgdmFyIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XTtcbiAgICBpZiAocmVwbGF5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXBsYXlzID0ge307XG4gICAgICB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XSA9IHJlcGxheXM7XG4gICAgfVxuICAgIHZhciByZXBsYXkgPSByZXBsYXlzW3JlcGxheVR5cGVdO1xuICAgIGlmIChyZXBsYXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gQkFUQ0hfQ09OU1RSVUNUT1JTW3JlcGxheVR5cGVdO1xuICAgICAgcmVwbGF5ID0gbmV3IENvbnN0cnVjdG9yKHRoaXMudG9sZXJhbmNlXywgdGhpcy5tYXhFeHRlbnRfLFxuICAgICAgICB0aGlzLnJlc29sdXRpb25fLCB0aGlzLnBpeGVsUmF0aW9fLCB0aGlzLm92ZXJsYXBzXywgdGhpcy5kZWNsdXR0ZXJUcmVlXyk7XG4gICAgICByZXBsYXlzW3JlcGxheVR5cGVdID0gcmVwbGF5O1xuICAgIH1cbiAgICByZXR1cm4gcmVwbGF5O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtPYmplY3Q8c3RyaW5nLCBPYmplY3Q8UmVwbGF5VHlwZSwgQ2FudmFzUmVwbGF5Pj59IFJlcGxheXMuXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuZ2V0UmVwbGF5cyA9IGZ1bmN0aW9uIGdldFJlcGxheXMgKCkge1xuICAgIHJldHVybiB0aGlzLnJlcGxheXNCeVpJbmRleF87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNSZXBsYXlHcm91cC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkkMSAoKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodGhpcy5yZXBsYXlzQnlaSW5kZXhfKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlld1JvdGF0aW9uIFZpZXcgcm90YXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHNraXBwZWRGZWF0dXJlc0hhc2ggSWRzIG9mIGZlYXR1cmVzIHRvIHNraXAuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc25hcFRvUGl4ZWwgU25hcCBwb2ludCBzeW1ib2xzIGFuZCB0ZXN0IHRvIGludGVnZXIgcGl4ZWwuXG4gICAqIEBwYXJhbSB7QXJyYXk8UmVwbGF5VHlwZT49fSBvcHRfcmVwbGF5VHlwZXMgT3JkZXJlZCByZXBsYXkgdHlwZXMgdG8gcmVwbGF5LlxuICAgKiAgICAgRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9yZXBsYXl+T1JERVJ9XG4gICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY2FudmFzLmpzXCIpLkRlY2x1dHRlckdyb3VwPj19IG9wdF9kZWNsdXR0ZXJSZXBsYXlzIERlY2x1dHRlciByZXBsYXlzLlxuICAgKi9cbiAgQ2FudmFzUmVwbGF5R3JvdXAucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uIHJlcGxheSAoXG4gICAgY29udGV4dCxcbiAgICB0cmFuc2Zvcm0sXG4gICAgdmlld1JvdGF0aW9uLFxuICAgIHNraXBwZWRGZWF0dXJlc0hhc2gsXG4gICAgc25hcFRvUGl4ZWwsXG4gICAgb3B0X3JlcGxheVR5cGVzLFxuICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzXG4gICkge1xuXG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGF5c0J5WkluZGV4XykubWFwKE51bWJlcik7XG4gICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcblxuICAgIC8vIHNldHVwIGNsaXBwaW5nIHNvIHRoYXQgdGhlIHBhcnRzIG9mIG92ZXItc2ltcGxpZmllZCBnZW9tZXRyaWVzIGFyZSBub3RcbiAgICAvLyB2aXNpYmxlIG91dHNpZGUgdGhlIGN1cnJlbnQgZXh0ZW50IHdoZW4gcGFubmluZ1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIHRoaXMuY2xpcChjb250ZXh0LCB0cmFuc2Zvcm0pO1xuXG4gICAgdmFyIHJlcGxheVR5cGVzID0gb3B0X3JlcGxheVR5cGVzID8gb3B0X3JlcGxheVR5cGVzIDogT1JERVI7XG4gICAgdmFyIGksIGlpLCBqLCBqaiwgcmVwbGF5cywgcmVwbGF5O1xuICAgIGZvciAoaSA9IDAsIGlpID0genMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XG4gICAgICByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XG4gICAgICBmb3IgKGogPSAwLCBqaiA9IHJlcGxheVR5cGVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIHJlcGxheVR5cGUgPSByZXBsYXlUeXBlc1tqXTtcbiAgICAgICAgcmVwbGF5ID0gcmVwbGF5c1tyZXBsYXlUeXBlXTtcbiAgICAgICAgaWYgKHJlcGxheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKG9wdF9kZWNsdXR0ZXJSZXBsYXlzICYmXG4gICAgICAgICAgICAgIChyZXBsYXlUeXBlID09IFJlcGxheVR5cGUuSU1BR0UgfHwgcmVwbGF5VHlwZSA9PSBSZXBsYXlUeXBlLlRFWFQpKSB7XG4gICAgICAgICAgICB2YXIgZGVjbHV0dGVyID0gb3B0X2RlY2x1dHRlclJlcGxheXNbekluZGV4S2V5XTtcbiAgICAgICAgICAgIGlmICghZGVjbHV0dGVyKSB7XG4gICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV0gPSBbcmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCldO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGVjbHV0dGVyLnB1c2gocmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBsYXkucmVwbGF5KGNvbnRleHQsIHRyYW5zZm9ybSwgdmlld1JvdGF0aW9uLCBza2lwcGVkRmVhdHVyZXNIYXNoLCBzbmFwVG9QaXhlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1JlcGxheUdyb3VwO1xufShSZXBsYXlHcm91cCkpO1xuXG5cbi8qKlxuICogVGhpcyBjYWNoZSBpcyB1c2VkIGZvciBzdG9yaW5nIGNhbGN1bGF0ZWQgcGl4ZWwgY2lyY2xlcyBmb3IgaW5jcmVhc2luZyBwZXJmb3JtYW5jZS5cbiAqIEl0IGlzIGEgc3RhdGljIHByb3BlcnR5IHRvIGFsbG93IGVhY2ggUmVwbGF5Z3JvdXAgdG8gYWNjZXNzIGl0LlxuICogQHR5cGUge09iamVjdDxudW1iZXIsIEFycmF5PEFycmF5PChib29sZWFufHVuZGVmaW5lZCk+Pj59XG4gKi9cbnZhciBjaXJjbGVBcnJheUNhY2hlID0ge1xuICAwOiBbW3RydWVdXVxufTtcblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGZpbGxzIGEgcm93IGluIHRoZSBhcnJheSBmcm9tIHRoZSBnaXZlbiBjb29yZGluYXRlIHRvIHRoZVxuICogbWlkZGxlIHdpdGggYHRydWVgLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IGFycmF5IFRoZSBhcnJheSB0aGF0IHdpbGwgYmUgYWx0ZXJlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZS5cbiAqL1xuZnVuY3Rpb24gZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyYXksIHgsIHkpIHtcbiAgdmFyIGk7XG4gIHZhciByYWRpdXMgPSBNYXRoLmZsb29yKGFycmF5Lmxlbmd0aCAvIDIpO1xuICBpZiAoeCA+PSByYWRpdXMpIHtcbiAgICBmb3IgKGkgPSByYWRpdXM7IGkgPCB4OyBpKyspIHtcbiAgICAgIGFycmF5W2ldW3ldID0gdHJ1ZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoeCA8IHJhZGl1cykge1xuICAgIGZvciAoaSA9IHggKyAxOyBpIDwgcmFkaXVzOyBpKyspIHtcbiAgICAgIGFycmF5W2ldW3ldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFRoaXMgbWV0aG9kcyBjcmVhdGVzIGEgY2lyY2xlIGluc2lkZSBhIGZpdHRpbmcgYXJyYXkuIFBvaW50cyBpbnNpZGUgdGhlXG4gKiBjaXJjbGUgYXJlIG1hcmtlZCBieSB0cnVlLCBwb2ludHMgb24gdGhlIG91dHNpZGUgYXJlIHVuZGVmaW5lZC5cbiAqIEl0IHVzZXMgdGhlIG1pZHBvaW50IGNpcmNsZSBhbGdvcml0aG0uXG4gKiBBIGNhY2hlIGlzIHVzZWQgdG8gaW5jcmVhc2UgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cy5cbiAqIEByZXR1cm5zIHtBcnJheTxBcnJheTwoYm9vbGVhbnx1bmRlZmluZWQpPj59IEFuIGFycmF5IHdpdGggbWFya2VkIGNpcmNsZSBwb2ludHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaXJjbGVBcnJheShyYWRpdXMpIHtcbiAgaWYgKGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXTtcbiAgfVxuXG4gIHZhciBhcnJheVNpemUgPSByYWRpdXMgKiAyICsgMTtcbiAgdmFyIGFyciA9IG5ldyBBcnJheShhcnJheVNpemUpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5U2l6ZTsgaSsrKSB7XG4gICAgYXJyW2ldID0gbmV3IEFycmF5KGFycmF5U2l6ZSk7XG4gIH1cblxuICB2YXIgeCA9IHJhZGl1cztcbiAgdmFyIHkgPSAwO1xuICB2YXIgZXJyb3IgPSAwO1xuXG4gIHdoaWxlICh4ID49IHkpIHtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyArIHgsIHJhZGl1cyArIHkpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeSwgcmFkaXVzICsgeCk7XG4gICAgZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyLCByYWRpdXMgLSB5LCByYWRpdXMgKyB4KTtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyAtIHgsIHJhZGl1cyArIHkpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzIC0geCwgcmFkaXVzIC0geSk7XG4gICAgZmlsbENpcmNsZUFycmF5Um93VG9NaWRkbGUoYXJyLCByYWRpdXMgLSB5LCByYWRpdXMgLSB4KTtcbiAgICBmaWxsQ2lyY2xlQXJyYXlSb3dUb01pZGRsZShhcnIsIHJhZGl1cyArIHksIHJhZGl1cyAtIHgpO1xuICAgIGZpbGxDaXJjbGVBcnJheVJvd1RvTWlkZGxlKGFyciwgcmFkaXVzICsgeCwgcmFkaXVzIC0geSk7XG5cbiAgICB5Kys7XG4gICAgZXJyb3IgKz0gMSArIDIgKiB5O1xuICAgIGlmICgyICogKGVycm9yIC0geCkgKyAxID4gMCkge1xuICAgICAgeCAtPSAxO1xuICAgICAgZXJyb3IgKz0gMSAtIDIgKiB4O1xuICAgIH1cbiAgfVxuXG4gIGNpcmNsZUFycmF5Q2FjaGVbcmFkaXVzXSA9IGFycjtcbiAgcmV0dXJuIGFycjtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PCo+Pn0gZGVjbHV0dGVyUmVwbGF5cyBEZWNsdXR0ZXIgcmVwbGF5cy5cbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNuYXBUb1BpeGVsIFNuYXAgcG9pbnQgc3ltYm9scyBhbmQgdGV4dCB0byBpbnRlZ2VyIHBpeGVscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxheURlY2x1dHRlcihkZWNsdXR0ZXJSZXBsYXlzLCBjb250ZXh0LCByb3RhdGlvbiwgc25hcFRvUGl4ZWwpIHtcbiAgdmFyIHpzID0gT2JqZWN0LmtleXMoZGVjbHV0dGVyUmVwbGF5cykubWFwKE51bWJlcikuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgdmFyIHNraXBwZWRGZWF0dXJlVWlkcyA9IHt9O1xuICBmb3IgKHZhciB6ID0gMCwgenogPSB6cy5sZW5ndGg7IHogPCB6ejsgKyt6KSB7XG4gICAgdmFyIHJlcGxheURhdGEgPSBkZWNsdXR0ZXJSZXBsYXlzW3pzW3pdLnRvU3RyaW5nKCldO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcGxheURhdGEubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICB2YXIgcmVwbGF5ID0gcmVwbGF5RGF0YVtpKytdO1xuICAgICAgdmFyIHRyYW5zZm9ybSA9IHJlcGxheURhdGFbaSsrXTtcbiAgICAgIHJlcGxheS5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVVaWRzLCBzbmFwVG9QaXhlbCk7XG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUmVwbGF5R3JvdXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheUdyb3VwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci92ZWN0b3JcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBSZXBsYXlUeXBlIGZyb20gJy4uL3JlbmRlci9SZXBsYXlUeXBlLmpzJztcblxuXG4vKipcbiAqIFRvbGVyYW5jZSBmb3IgZ2VvbWV0cnkgc2ltcGxpZmljYXRpb24gaW4gZGV2aWNlIHBpeGVscy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBTSU1QTElGWV9UT0xFUkFOQ0UgPSAwLjU7XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtPYmplY3Q8aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdCxcbiAqICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0LCBPYmplY3QpPn1cbiAqL1xudmFyIEdFT01FVFJZX1JFTkRFUkVSUyA9IHtcbiAgJ1BvaW50JzogcmVuZGVyUG9pbnRHZW9tZXRyeSxcbiAgJ0xpbmVTdHJpbmcnOiByZW5kZXJMaW5lU3RyaW5nR2VvbWV0cnksXG4gICdQb2x5Z29uJzogcmVuZGVyUG9seWdvbkdlb21ldHJ5LFxuICAnTXVsdGlQb2ludCc6IHJlbmRlck11bHRpUG9pbnRHZW9tZXRyeSxcbiAgJ011bHRpTGluZVN0cmluZyc6IHJlbmRlck11bHRpTGluZVN0cmluZ0dlb21ldHJ5LFxuICAnTXVsdGlQb2x5Z29uJzogcmVuZGVyTXVsdGlQb2x5Z29uR2VvbWV0cnksXG4gICdHZW9tZXRyeUNvbGxlY3Rpb24nOiByZW5kZXJHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeSxcbiAgJ0NpcmNsZSc6IHJlbmRlckNpcmNsZUdlb21ldHJ5XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlMSBGZWF0dXJlIDEuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUyIEZlYXR1cmUgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gT3JkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0T3JkZXIoZmVhdHVyZTEsIGZlYXR1cmUyKSB7XG4gIHJldHVybiBwYXJzZUludChnZXRVaWQoZmVhdHVyZTEpLCAxMCkgLSBwYXJzZUludChnZXRVaWQoZmVhdHVyZTIpLCAxMCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgcGl4ZWwgdG9sZXJhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3F1YXJlZFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gIHZhciB0b2xlcmFuY2UgPSBnZXRUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XG4gIHJldHVybiB0b2xlcmFuY2UgKiB0b2xlcmFuY2U7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBpeGVsIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvbGVyYW5jZShyZXNvbHV0aW9uLCBwaXhlbFJhdGlvKSB7XG4gIHJldHVybiBTSU1QTElGWV9UT0xFUkFOQ0UgKiByZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbztcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyQ2lyY2xlR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKGZpbGxTdHlsZSB8fCBzdHJva2VTdHlsZSkge1xuICAgIHZhciBjaXJjbGVSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuQ0lSQ0xFKTtcbiAgICBjaXJjbGVSZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgIGNpcmNsZVJlcGxheS5kcmF3Q2lyY2xlKGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfVxuICB2YXIgdGV4dFN0eWxlID0gc3R5bGUuZ2V0VGV4dCgpO1xuICBpZiAodGV4dFN0eWxlKSB7XG4gICAgdmFyIHRleHRSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuVEVYVCk7XG4gICAgdGV4dFJlcGxheS5zZXRUZXh0U3R5bGUodGV4dFN0eWxlLCByZXBsYXlHcm91cC5hZGREZWNsdXR0ZXIoZmFsc2UpKTtcbiAgICB0ZXh0UmVwbGF5LmRyYXdUZXh0KGdlb21ldHJ5LCBmZWF0dXJlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvUmVwbGF5R3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFQsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KX0gbGlzdGVuZXIgTGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge1R9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGlzdGVuZXJgLlxuICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHN0eWxlIGlzIGxvYWRpbmcuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRmVhdHVyZShyZXBsYXlHcm91cCwgZmVhdHVyZSwgc3R5bGUsIHNxdWFyZWRUb2xlcmFuY2UsIGxpc3RlbmVyLCB0aGlzQXJnKSB7XG4gIHZhciBsb2FkaW5nID0gZmFsc2U7XG4gIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEIHx8IGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgaW1hZ2VTdHlsZS51bmxpc3RlbkltYWdlQ2hhbmdlKGxpc3RlbmVyLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFKSB7XG4gICAgICAgIGltYWdlU3R5bGUubG9hZCgpO1xuICAgICAgfVxuICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpO1xuICAgICAgaW1hZ2VTdHlsZS5saXN0ZW5JbWFnZUNoYW5nZShsaXN0ZW5lciwgdGhpc0FyZyk7XG4gICAgICBsb2FkaW5nID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSk7XG5cbiAgcmV0dXJuIGxvYWRpbmc7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyRmVhdHVyZUludGVybmFsKHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZSwgc3F1YXJlZFRvbGVyYW5jZSkge1xuICB2YXIgZ2VvbWV0cnkgPSBzdHlsZS5nZXRHZW9tZXRyeUZ1bmN0aW9uKCkoZmVhdHVyZSk7XG4gIGlmICghZ2VvbWV0cnkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IGdlb21ldHJ5LmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgdmFyIHJlbmRlcmVyID0gc3R5bGUuZ2V0UmVuZGVyZXIoKTtcbiAgaWYgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICB9IGVsc2Uge1xuICAgIHZhciBnZW9tZXRyeVJlbmRlcmVyID0gR0VPTUVUUllfUkVOREVSRVJTW3NpbXBsaWZpZWRHZW9tZXRyeS5nZXRUeXBlKCldO1xuICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIHNpbXBsaWZpZWRHZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICBpZiAoZ2VvbWV0cnkuZ2V0VHlwZSgpID09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgdmFyIGdlb21ldHJpZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgcmVuZGVyR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJpZXNbaV0sIHN0eWxlLCBmZWF0dXJlKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuREVGQVVMVCk7XG4gIHJlcGxheS5kcmF3Q3VzdG9tKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLCBmZWF0dXJlLCBzdHlsZS5nZXRSZW5kZXJlcigpKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IHN0eWxlIFN0eWxlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZ2VvbWV0cmllcyA9IGdlb21ldHJ5LmdldEdlb21ldHJpZXNBcnJheSgpO1xuICB2YXIgaSwgaWk7XG4gIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGdlb21ldHJ5UmVuZGVyZXIgPVxuICAgICAgICBHRU9NRVRSWV9SRU5ERVJFUlNbZ2VvbWV0cmllc1tpXS5nZXRUeXBlKCldO1xuICAgIGdlb21ldHJ5UmVuZGVyZXIocmVwbGF5R3JvdXAsIGdlb21ldHJpZXNbaV0sIHN0eWxlLCBmZWF0dXJlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvUmVwbGF5R3JvdXAuanNcIikuZGVmYXVsdH0gcmVwbGF5R3JvdXAgUmVwbGF5IGdyb3VwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0xpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTGluZVN0cmluZ0dlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gIGlmIChzdHJva2VTdHlsZSkge1xuICAgIHZhciBsaW5lU3RyaW5nUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HKTtcbiAgICBsaW5lU3RyaW5nUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShudWxsLCBzdHJva2VTdHlsZSk7XG4gICAgbGluZVN0cmluZ1JlcGxheS5kcmF3TGluZVN0cmluZyhnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKGZhbHNlKSk7XG4gICAgdGV4dFJlcGxheS5kcmF3VGV4dChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKHN0cm9rZVN0eWxlKSB7XG4gICAgdmFyIGxpbmVTdHJpbmdSZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoc3R5bGUuZ2V0WkluZGV4KCksIFJlcGxheVR5cGUuTElORV9TVFJJTkcpO1xuICAgIGxpbmVTdHJpbmdSZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKG51bGwsIHN0cm9rZVN0eWxlKTtcbiAgICBsaW5lU3RyaW5nUmVwbGF5LmRyYXdNdWx0aUxpbmVTdHJpbmcoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlck11bHRpUG9seWdvbkdlb21ldHJ5KHJlcGxheUdyb3VwLCBnZW9tZXRyeSwgc3R5bGUsIGZlYXR1cmUpIHtcbiAgdmFyIGZpbGxTdHlsZSA9IHN0eWxlLmdldEZpbGwoKTtcbiAgdmFyIHN0cm9rZVN0eWxlID0gc3R5bGUuZ2V0U3Ryb2tlKCk7XG4gIGlmIChzdHJva2VTdHlsZSB8fCBmaWxsU3R5bGUpIHtcbiAgICB2YXIgcG9seWdvblJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5QT0xZR09OKTtcbiAgICBwb2x5Z29uUmVwbGF5LnNldEZpbGxTdHJva2VTdHlsZShmaWxsU3R5bGUsIHN0cm9rZVN0eWxlKTtcbiAgICBwb2x5Z29uUmVwbGF5LmRyYXdNdWx0aVBvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vUG9pbnQuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gc3R5bGUgU3R5bGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyUG9pbnRHZW9tZXRyeShyZXBsYXlHcm91cCwgZ2VvbWV0cnksIHN0eWxlLCBmZWF0dXJlKSB7XG4gIHZhciBpbWFnZVN0eWxlID0gc3R5bGUuZ2V0SW1hZ2UoKTtcbiAgaWYgKGltYWdlU3R5bGUpIHtcbiAgICBpZiAoaW1hZ2VTdHlsZS5nZXRJbWFnZVN0YXRlKCkgIT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGltYWdlUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLklNQUdFKTtcbiAgICBpbWFnZVJlcGxheS5zZXRJbWFnZVN0eWxlKGltYWdlU3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIGltYWdlUmVwbGF5LmRyYXdQb2ludChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKCEhaW1hZ2VTdHlsZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJNdWx0aVBvaW50R2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgaW1hZ2VTdHlsZSA9IHN0eWxlLmdldEltYWdlKCk7XG4gIGlmIChpbWFnZVN0eWxlKSB7XG4gICAgaWYgKGltYWdlU3R5bGUuZ2V0SW1hZ2VTdGF0ZSgpICE9IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpbWFnZVJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5JTUFHRSk7XG4gICAgaW1hZ2VSZXBsYXkuc2V0SW1hZ2VTdHlsZShpbWFnZVN0eWxlLCByZXBsYXlHcm91cC5hZGREZWNsdXR0ZXIoZmFsc2UpKTtcbiAgICBpbWFnZVJlcGxheS5kcmF3TXVsdGlQb2ludChnZW9tZXRyeSwgZmVhdHVyZSk7XG4gIH1cbiAgdmFyIHRleHRTdHlsZSA9IHN0eWxlLmdldFRleHQoKTtcbiAgaWYgKHRleHRTdHlsZSkge1xuICAgIHZhciB0ZXh0UmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlRFWFQpO1xuICAgIHRleHRSZXBsYXkuc2V0VGV4dFN0eWxlKHRleHRTdHlsZSwgcmVwbGF5R3JvdXAuYWRkRGVjbHV0dGVyKCEhaW1hZ2VTdHlsZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9SZXBsYXlHcm91cC5qc1wiKS5kZWZhdWx0fSByZXBsYXlHcm91cCBSZXBsYXkgZ3JvdXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBzdHlsZSBTdHlsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICovXG5mdW5jdGlvbiByZW5kZXJQb2x5Z29uR2VvbWV0cnkocmVwbGF5R3JvdXAsIGdlb21ldHJ5LCBzdHlsZSwgZmVhdHVyZSkge1xuICB2YXIgZmlsbFN0eWxlID0gc3R5bGUuZ2V0RmlsbCgpO1xuICB2YXIgc3Ryb2tlU3R5bGUgPSBzdHlsZS5nZXRTdHJva2UoKTtcbiAgaWYgKGZpbGxTdHlsZSB8fCBzdHJva2VTdHlsZSkge1xuICAgIHZhciBwb2x5Z29uUmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHN0eWxlLmdldFpJbmRleCgpLCBSZXBsYXlUeXBlLlBPTFlHT04pO1xuICAgIHBvbHlnb25SZXBsYXkuc2V0RmlsbFN0cm9rZVN0eWxlKGZpbGxTdHlsZSwgc3Ryb2tlU3R5bGUpO1xuICAgIHBvbHlnb25SZXBsYXkuZHJhd1BvbHlnb24oZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG4gIHZhciB0ZXh0U3R5bGUgPSBzdHlsZS5nZXRUZXh0KCk7XG4gIGlmICh0ZXh0U3R5bGUpIHtcbiAgICB2YXIgdGV4dFJlcGxheSA9IHJlcGxheUdyb3VwLmdldFJlcGxheShzdHlsZS5nZXRaSW5kZXgoKSwgUmVwbGF5VHlwZS5URVhUKTtcbiAgICB0ZXh0UmVwbGF5LnNldFRleHRTdHlsZSh0ZXh0U3R5bGUsIHJlcGxheUdyb3VwLmFkZERlY2x1dHRlcihmYWxzZSkpO1xuICAgIHRleHRSZXBsYXkuZHJhd1RleHQoZ2VvbWV0cnksIGZlYXR1cmUpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlY3Rvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCBMYXllclR5cGUgZnJvbSAnLi4vLi4vTGF5ZXJUeXBlLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi8uLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3Rlbn0gZnJvbSAnLi4vLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgcmJ1c2ggZnJvbSAncmJ1c2gnO1xuaW1wb3J0IHtidWZmZXIsIGNyZWF0ZUVtcHR5LCBjb250YWluc0V4dGVudCwgZ2V0V2lkdGh9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uLy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtsYWJlbENhY2hlLCByb3RhdGVBdE9mZnNldH0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG5pbXBvcnQgQ2FudmFzUmVwbGF5R3JvdXAgZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy9SZXBsYXlHcm91cC5qcyc7XG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCB7ZGVmYXVsdE9yZGVyIGFzIGRlZmF1bHRSZW5kZXJPcmRlciwgZ2V0VG9sZXJhbmNlIGFzIGdldFJlbmRlclRvbGVyYW5jZSwgZ2V0U3F1YXJlZFRvbGVyYW5jZSBhcyBnZXRTcXVhcmVkUmVuZGVyVG9sZXJhbmNlLCByZW5kZXJGZWF0dXJlfSBmcm9tICcuLi92ZWN0b3IuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdmVjdG9yIGxheWVycy5cbiAqIEBhcGlcbiAqL1xudmFyIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDYW52YXNMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIodmVjdG9yTGF5ZXIpIHtcblxuICAgIENhbnZhc0xheWVyUmVuZGVyZXIuY2FsbCh0aGlzLCB2ZWN0b3JMYXllcik7XG5cbiAgICAvKipcbiAgICAgKiBEZWNsdXR0ZXIgdHJlZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZGVjbHV0dGVyVHJlZV8gPSB2ZWN0b3JMYXllci5nZXREZWNsdXR0ZXIoKSA/IHJidXNoKDksIHVuZGVmaW5lZCkgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmRpcnR5XyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbl8gPSBOYU47XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogbnVtYmVyfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJlbmRlck9yZGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5yZXBsYXlHcm91cF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBuZXcgcmVwbGF5IGdyb3VwIGhhZCB0byBiZSBjcmVhdGVkIGJ5IGBwcmVwYXJlRnJhbWUoKWBcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcGxheUdyb3VwQ2hhbmdlZCA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuXG4gICAgbGlzdGVuKGxhYmVsQ2FjaGUsIEV2ZW50VHlwZS5DTEVBUiwgdGhpcy5oYW5kbGVGb250c0NoYW5nZWRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNMYXllclJlbmRlcmVyICkgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5fX3Byb3RvX18gPSBDYW52YXNMYXllclJlbmRlcmVyO1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENhbnZhc0xheWVyUmVuZGVyZXIgJiYgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICB1bmxpc3RlbihsYWJlbENhY2hlLCBFdmVudFR5cGUuQ0xFQVIsIHRoaXMuaGFuZGxlRm9udHNDaGFuZ2VkXywgdGhpcyk7XG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jb21wb3NlID0gZnVuY3Rpb24gY29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICB2YXIgc2tpcHBlZEZlYXR1cmVVaWRzID0gbGF5ZXJTdGF0ZS5tYW5hZ2VkID9cbiAgICAgIGZyYW1lU3RhdGUuc2tpcHBlZEZlYXR1cmVVaWRzIDoge307XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgdmVjdG9yU291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCkpO1xuXG4gICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGZyYW1lU3RhdGUsIDApO1xuXG4gICAgLy8gY2xpcHBlZCByZW5kZXJpbmcgaWYgbGF5ZXIgZXh0ZW50IGlzIHNldFxuICAgIHZhciBjbGlwRXh0ZW50ID0gbGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgdmFyIGNsaXBwZWQgPSBjbGlwRXh0ZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgaWYgKGNsaXBwZWQpIHtcbiAgICAgIHRoaXMuY2xpcChjb250ZXh0LCBmcmFtZVN0YXRlLCAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9ICovIChjbGlwRXh0ZW50KSk7XG4gICAgfVxuICAgIHZhciByZXBsYXlHcm91cCA9IHRoaXMucmVwbGF5R3JvdXBfO1xuICAgIGlmIChyZXBsYXlHcm91cCAmJiAhcmVwbGF5R3JvdXAuaXNFbXB0eSgpKSB7XG4gICAgICBpZiAodGhpcy5kZWNsdXR0ZXJUcmVlXykge1xuICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWVfLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICAgIHZhciBkcmF3T2Zmc2V0WCA9IDA7XG4gICAgICB2YXIgZHJhd09mZnNldFkgPSAwO1xuICAgICAgdmFyIHJlcGxheUNvbnRleHQ7XG4gICAgICB2YXIgdHJhbnNwYXJlbnRMYXllciA9IGxheWVyU3RhdGUub3BhY2l0eSAhPT0gMTtcbiAgICAgIHZhciBoYXNSZW5kZXJMaXN0ZW5lcnMgPSBsYXllci5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSKTtcbiAgICAgIGlmICh0cmFuc3BhcmVudExheWVyIHx8IGhhc1JlbmRlckxpc3RlbmVycykge1xuICAgICAgICB2YXIgZHJhd1dpZHRoID0gY29udGV4dC5jYW52YXMud2lkdGg7XG4gICAgICAgIHZhciBkcmF3SGVpZ2h0ID0gY29udGV4dC5jYW52YXMuaGVpZ2h0O1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICB2YXIgZHJhd1NpemUgPSBNYXRoLnJvdW5kKE1hdGguc3FydChkcmF3V2lkdGggKiBkcmF3V2lkdGggKyBkcmF3SGVpZ2h0ICogZHJhd0hlaWdodCkpO1xuICAgICAgICAgIGRyYXdPZmZzZXRYID0gKGRyYXdTaXplIC0gZHJhd1dpZHRoKSAvIDI7XG4gICAgICAgICAgZHJhd09mZnNldFkgPSAoZHJhd1NpemUgLSBkcmF3SGVpZ2h0KSAvIDI7XG4gICAgICAgICAgZHJhd1dpZHRoID0gZHJhd0hlaWdodCA9IGRyYXdTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc2l6ZSBhbmQgY2xlYXJcbiAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCA9IGRyYXdXaWR0aDtcbiAgICAgICAgdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBkcmF3SGVpZ2h0O1xuICAgICAgICByZXBsYXlDb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVwbGF5Q29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbHBoYSA9IHJlcGxheUNvbnRleHQuZ2xvYmFsQWxwaGE7XG4gICAgICBpZiAoIXRyYW5zcGFyZW50TGF5ZXIpIHtcbiAgICAgICAgLy8gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGNvbnRleHQuc2F2ZSAvIGNvbnRleHQucmVzdG9yZSBpcyBub3QgdXNlZFxuICAgICAgICAvLyB0byBzYXZlIGFuZCByZXN0b3JlIHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggYW5kIHRoZSBvcGFjaXR5LlxuICAgICAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udGV4dC1zYXZlLXJlc3RvcmUtdmVyc3VzLXZhcmlhYmxlXG4gICAgICAgIHJlcGxheUNvbnRleHQuZ2xvYmFsQWxwaGEgPSBsYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXBsYXlDb250ZXh0ICE9IGNvbnRleHQpIHtcbiAgICAgICAgcmVwbGF5Q29udGV4dC50cmFuc2xhdGUoZHJhd09mZnNldFgsIGRyYXdPZmZzZXRZKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHZpZXdIaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgdmFyIHNuYXBUb1BpeGVsID0gISh2aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSB8fCB2aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKTtcbiAgICAgIHZhciB3aWR0aCA9IGZyYW1lU3RhdGUuc2l6ZVswXSAqIHBpeGVsUmF0aW87XG4gICAgICB2YXIgaGVpZ2h0ID0gZnJhbWVTdGF0ZS5zaXplWzFdICogcGl4ZWxSYXRpbztcbiAgICAgIHJvdGF0ZUF0T2Zmc2V0KHJlcGxheUNvbnRleHQsIC1yb3RhdGlvbixcbiAgICAgICAgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgIHJlcGxheUdyb3VwLnJlcGxheShyZXBsYXlDb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLCBza2lwcGVkRmVhdHVyZVVpZHMsIHNuYXBUb1BpeGVsKTtcbiAgICAgIGlmICh2ZWN0b3JTb3VyY2UuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAhY29udGFpbnNFeHRlbnQocHJvamVjdGlvbkV4dGVudCwgZXh0ZW50KSkge1xuICAgICAgICB2YXIgc3RhcnRYID0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB2YXIgd29ybGQgPSAwO1xuICAgICAgICB2YXIgb2Zmc2V0WDtcbiAgICAgICAgd2hpbGUgKHN0YXJ0WCA8IHByb2plY3Rpb25FeHRlbnRbMF0pIHtcbiAgICAgICAgICAtLXdvcmxkO1xuICAgICAgICAgIG9mZnNldFggPSB3b3JsZFdpZHRoICogd29ybGQ7XG4gICAgICAgICAgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oZnJhbWVTdGF0ZSwgb2Zmc2V0WCk7XG4gICAgICAgICAgcmVwbGF5R3JvdXAucmVwbGF5KHJlcGxheUNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIHNraXBwZWRGZWF0dXJlVWlkcywgc25hcFRvUGl4ZWwpO1xuICAgICAgICAgIHN0YXJ0WCArPSB3b3JsZFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHdvcmxkID0gMDtcbiAgICAgICAgc3RhcnRYID0gZXh0ZW50WzJdO1xuICAgICAgICB3aGlsZSAoc3RhcnRYID4gcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgICAgICsrd29ybGQ7XG4gICAgICAgICAgb2Zmc2V0WCA9IHdvcmxkV2lkdGggKiB3b3JsZDtcbiAgICAgICAgICB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCBvZmZzZXRYKTtcbiAgICAgICAgICByZXBsYXlHcm91cC5yZXBsYXkocmVwbGF5Q29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVVaWRzLCBzbmFwVG9QaXhlbCk7XG4gICAgICAgICAgc3RhcnRYIC09IHdvcmxkV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvdGF0ZUF0T2Zmc2V0KHJlcGxheUNvbnRleHQsIHJvdGF0aW9uLFxuICAgICAgICB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuXG4gICAgICBpZiAoaGFzUmVuZGVyTGlzdGVuZXJzKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChyZXBsYXlDb250ZXh0LCBmcmFtZVN0YXRlLCB0cmFuc2Zvcm0pO1xuICAgICAgfVxuICAgICAgaWYgKHJlcGxheUNvbnRleHQgIT0gY29udGV4dCkge1xuICAgICAgICBpZiAodHJhbnNwYXJlbnRMYXllcikge1xuICAgICAgICAgIHZhciBtYWluQ29udGV4dEFscGhhID0gY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHJlcGxheUNvbnRleHQuY2FudmFzLCAtZHJhd09mZnNldFgsIC1kcmF3T2Zmc2V0WSk7XG4gICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IG1haW5Db250ZXh0QWxwaGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UocmVwbGF5Q29udGV4dC5jYW52YXMsIC1kcmF3T2Zmc2V0WCwgLWRyYXdPZmZzZXRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYXlDb250ZXh0LnRyYW5zbGF0ZSgtZHJhd09mZnNldFgsIC1kcmF3T2Zmc2V0WSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdHJhbnNwYXJlbnRMYXllcikge1xuICAgICAgICByZXBsYXlDb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNsaXBwZWQpIHtcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLmNvbXBvc2VGcmFtZSA9IGZ1bmN0aW9uIGNvbXBvc2VGcmFtZSAoZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSwgY29udGV4dCkge1xuICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCAwKTtcbiAgICB0aGlzLnByZUNvbXBvc2UoY29udGV4dCwgZnJhbWVTdGF0ZSwgdHJhbnNmb3JtKTtcbiAgICB0aGlzLmNvbXBvc2UoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSk7XG4gICAgdGhpcy5wb3N0Q29tcG9zZShjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllclN0YXRlLCB0cmFuc2Zvcm0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGlmICghdGhpcy5yZXBsYXlHcm91cF8pIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gKi9cbiAgICAgIHZhciBmZWF0dXJlcyA9IHt9O1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMucmVwbGF5R3JvdXBfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBoaXRUb2xlcmFuY2UsIHt9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgICAgICAgIGlmICghKGtleSBpbiBmZWF0dXJlcykpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbGF5ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVGb250c0NoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlRm9udHNDaGFuZ2VkXyAoZXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiB0aGlzLnJlcGxheUdyb3VwXykge1xuICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGNoYW5nZXMgaW4gaW1hZ2Ugc3R5bGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEltYWdlIHN0eWxlIGNoYW5nZSBldmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gKGV2ZW50KSB7XG4gICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gcHJlcGFyZUZyYW1lIChmcmFtZVN0YXRlLCBsYXllclN0YXRlKSB7XG4gICAgdmFyIHZlY3RvckxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0TGF5ZXIoKSk7XG4gICAgdmFyIHZlY3RvclNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodmVjdG9yTGF5ZXIuZ2V0U291cmNlKCkpO1xuXG4gICAgdmFyIGFuaW1hdGluZyA9IGZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR107XG4gICAgdmFyIGludGVyYWN0aW5nID0gZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddO1xuICAgIHZhciB1cGRhdGVXaGlsZUFuaW1hdGluZyA9IHZlY3RvckxheWVyLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nKCk7XG4gICAgdmFyIHVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgPSB2ZWN0b3JMYXllci5nZXRVcGRhdGVXaGlsZUludGVyYWN0aW5nKCk7XG5cbiAgICBpZiAoIXRoaXMuZGlydHlfICYmICghdXBkYXRlV2hpbGVBbmltYXRpbmcgJiYgYW5pbWF0aW5nKSB8fFxuICAgICAgICAoIXVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgJiYgaW50ZXJhY3RpbmcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZnJhbWVTdGF0ZUV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgdmFyIHZlY3RvckxheWVyUmV2aXNpb24gPSB2ZWN0b3JMYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciB2ZWN0b3JMYXllclJlbmRlckJ1ZmZlciA9IHZlY3RvckxheWVyLmdldFJlbmRlckJ1ZmZlcigpO1xuICAgIHZhciB2ZWN0b3JMYXllclJlbmRlck9yZGVyID0gdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyT3JkZXIoKTtcblxuICAgIGlmICh2ZWN0b3JMYXllclJlbmRlck9yZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZlY3RvckxheWVyUmVuZGVyT3JkZXIgPSBkZWZhdWx0UmVuZGVyT3JkZXI7XG4gICAgfVxuXG4gICAgdmFyIGV4dGVudCA9IGJ1ZmZlcihmcmFtZVN0YXRlRXh0ZW50LFxuICAgICAgdmVjdG9yTGF5ZXJSZW5kZXJCdWZmZXIgKiByZXNvbHV0aW9uKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuXG4gICAgaWYgKHZlY3RvclNvdXJjZS5nZXRXcmFwWCgpICYmIHZpZXdTdGF0ZS5wcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgIWNvbnRhaW5zRXh0ZW50KHByb2plY3Rpb25FeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSkge1xuICAgICAgLy8gRm9yIHRoZSByZXBsYXkgZ3JvdXAsIHdlIG5lZWQgYW4gZXh0ZW50IHRoYXQgaW50ZXJzZWN0cyB0aGUgcmVhbCB3b3JsZFxuICAgICAgLy8gKC0xODDCsCB0byArMTgwwrApLiBUbyBzdXBwb3J0IGdlb21ldHJpZXMgaW4gYSBjb29yZGluYXRlIHJhbmdlIGZyb20gLTU0MMKwXG4gICAgICAvLyB0byArNTQwwrAsIHdlIGFkZCBhdCBsZWFzdCAxIHdvcmxkIHdpZHRoIG9uIGVhY2ggc2lkZSBvZiB0aGUgcHJvamVjdGlvblxuICAgICAgLy8gZXh0ZW50LiBJZiB0aGUgdmlld3BvcnQgaXMgd2lkZXIgdGhhbiB0aGUgd29ybGQsIHdlIG5lZWQgdG8gYWRkIGhhbGYgb2ZcbiAgICAgIC8vIHRoZSB2aWV3cG9ydCB3aWR0aCB0byBtYWtlIHN1cmUgd2UgY292ZXIgdGhlIHdob2xlIHZpZXdwb3J0LlxuICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgIHZhciBndXR0ZXIgPSBNYXRoLm1heChnZXRXaWR0aChleHRlbnQpIC8gMiwgd29ybGRXaWR0aCk7XG4gICAgICBleHRlbnRbMF0gPSBwcm9qZWN0aW9uRXh0ZW50WzBdIC0gZ3V0dGVyO1xuICAgICAgZXh0ZW50WzJdID0gcHJvamVjdGlvbkV4dGVudFsyXSArIGd1dHRlcjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGlydHlfICYmXG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXyA9PSByZXNvbHV0aW9uICYmXG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbl8gPT0gdmVjdG9yTGF5ZXJSZXZpc2lvbiAmJlxuICAgICAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID09IHZlY3RvckxheWVyUmVuZGVyT3JkZXIgJiZcbiAgICAgICAgY29udGFpbnNFeHRlbnQodGhpcy5yZW5kZXJlZEV4dGVudF8sIGV4dGVudCkpIHtcbiAgICAgIHRoaXMucmVwbGF5R3JvdXBDaGFuZ2VkID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnJlcGxheUdyb3VwXyA9IG51bGw7XG5cbiAgICB0aGlzLmRpcnR5XyA9IGZhbHNlO1xuXG4gICAgdmFyIHJlcGxheUdyb3VwID0gbmV3IENhbnZhc1JlcGxheUdyb3VwKFxuICAgICAgZ2V0UmVuZGVyVG9sZXJhbmNlKHJlc29sdXRpb24sIHBpeGVsUmF0aW8pLCBleHRlbnQsIHJlc29sdXRpb24sXG4gICAgICBwaXhlbFJhdGlvLCB2ZWN0b3JTb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXywgdmVjdG9yTGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkpO1xuICAgIHZlY3RvclNvdXJjZS5sb2FkRmVhdHVyZXMoZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAqIEB0aGlzIHtDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyfVxuICAgICAqL1xuICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICB2YXIgc3R5bGVzO1xuICAgICAgdmFyIHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKSB8fCB2ZWN0b3JMYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XG4gICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xuICAgICAgICBzdHlsZXMgPSBzdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICB2YXIgZGlydHkgPSB0aGlzLnJlbmRlckZlYXR1cmUoXG4gICAgICAgICAgZmVhdHVyZSwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3R5bGVzLCByZXBsYXlHcm91cCk7XG4gICAgICAgIHRoaXMuZGlydHlfID0gdGhpcy5kaXJ0eV8gfHwgZGlydHk7XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpO1xuICAgIGlmICh2ZWN0b3JMYXllclJlbmRlck9yZGVyKSB7XG4gICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59ICovXG4gICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgIHZlY3RvclNvdXJjZS5mb3JFYWNoRmVhdHVyZUluRXh0ZW50KGV4dGVudCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgICBmZWF0dXJlcy5zb3J0KHZlY3RvckxheWVyUmVuZGVyT3JkZXIpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmVhdHVyZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICByZW5kZXIoZmVhdHVyZXNbaV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2ZWN0b3JTb3VyY2UuZm9yRWFjaEZlYXR1cmVJbkV4dGVudChleHRlbnQsIHJlbmRlcik7XG4gICAgfVxuICAgIHJlcGxheUdyb3VwLmZpbmlzaCgpO1xuXG4gICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb25fID0gdmVjdG9yTGF5ZXJSZXZpc2lvbjtcbiAgICB0aGlzLnJlbmRlcmVkUmVuZGVyT3JkZXJfID0gdmVjdG9yTGF5ZXJSZW5kZXJPcmRlcjtcbiAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGV4dGVudDtcbiAgICB0aGlzLnJlcGxheUdyb3VwXyA9IHJlcGxheUdyb3VwO1xuXG4gICAgdGhpcy5yZXBsYXlHcm91cENoYW5nZWQgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5PGltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fSBzdHlsZXMgVGhlIHN0eWxlIG9yIGFycmF5IG9mIHN0eWxlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIGFuIGltYWdlIGlzIGxvYWRpbmcuXG4gICAqL1xuICBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gcmVuZGVyRmVhdHVyZSQxIChmZWF0dXJlLCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzdHlsZXMsIHJlcGxheUdyb3VwKSB7XG4gICAgaWYgKCFzdHlsZXMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGxvYWRpbmcgPSBmYWxzZTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZXMpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzdHlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBsb2FkaW5nID0gcmVuZGVyRmVhdHVyZShcbiAgICAgICAgICByZXBsYXlHcm91cCwgZmVhdHVyZSwgc3R5bGVzW2ldLFxuICAgICAgICAgIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyksXG4gICAgICAgICAgdGhpcy5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgdGhpcykgfHwgbG9hZGluZztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoXG4gICAgICAgIHJlcGxheUdyb3VwLCBmZWF0dXJlLCBzdHlsZXMsXG4gICAgICAgIGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyksXG4gICAgICAgIHRoaXMuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gbG9hZGluZztcbiAgfTtcblxuICByZXR1cm4gQ2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoaXMgcmVuZGVyZXIgaGFuZGxlcyB0aGUgcHJvdmlkZWQgbGF5ZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBjYW5kaWRhdGUgbGF5ZXIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcmVuZGVyZXIgY2FuIHJlbmRlciB0aGUgbGF5ZXIuXG4gKi9cbkNhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXJbJ2hhbmRsZXMnXSA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gIHJldHVybiBsYXllci5nZXRUeXBlKCkgPT09IExheWVyVHlwZS5WRUNUT1I7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIGEgbGF5ZXIgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXBSZW5kZXJlciBUaGUgbWFwIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBUaGUgbGF5ZXIgdG8gYmUgcmVuZGVyZXJkLlxuICogQHJldHVybiB7Q2FudmFzVmVjdG9yTGF5ZXJSZW5kZXJlcn0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICovXG5DYW52YXNWZWN0b3JMYXllclJlbmRlcmVyWydjcmVhdGUnXSA9IGZ1bmN0aW9uKG1hcFJlbmRlcmVyLCBsYXllcikge1xuICByZXR1cm4gbmV3IENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKSk7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9WZWN0b3JUaWxlUmVuZGVyVHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFJlbmRlciBtb2RlIGZvciB2ZWN0b3IgdGlsZXM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciB0aWxlcyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ2h5YnJpZCdgOiBQb2x5Z29uIGFuZCBsaW5lIGVsZW1lbnRzIGFyZSByZW5kZXJlZCBhcyBpbWFnZXMsIHNvIHBpeGVsc1xuICogICAgYXJlIHNjYWxlZCBkdXJpbmcgem9vbSBhbmltYXRpb25zLiBQb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWNjdXJhdGVseVxuICogICAgcmVuZGVyZWQgYXMgdmVjdG9ycyBhbmQgY2FuIHN0YXkgdXByaWdodCBvbiByb3RhdGVkIHZpZXdzLlxuICogICogYCd2ZWN0b3InYDogVmVjdG9yIHRpbGVzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZ1xuICogICAgZXZlbiBkdXJpbmcgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZSB0aGFuIHRoZSBvdGhlciBvcHRpb25zLlxuICogQGFwaVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElNQUdFOiAnaW1hZ2UnLFxuICBIWUJSSUQ6ICdoeWJyaWQnLFxuICBWRUNUT1I6ICd2ZWN0b3InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3JUaWxlUmVuZGVyVHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1ZlY3RvclRpbGVMYXllclxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQgTGF5ZXJUeXBlIGZyb20gJy4uLy4uL0xheWVyVHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4uLy4uL2RvbS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW59IGZyb20gJy4uLy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uLy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHJidXNoIGZyb20gJ3JidXNoJztcbmltcG9ydCB7YnVmZmVyLCBjb250YWluc0Nvb3JkaW5hdGUsIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCBpbnRlcnNlY3RzfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IFZlY3RvclRpbGVSZW5kZXJUeXBlIGZyb20gJy4uLy4uL2xheWVyL1ZlY3RvclRpbGVSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7ZXF1aXZhbGVudCBhcyBlcXVpdmFsZW50UHJvamVjdGlvbn0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vLi4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgUmVwbGF5VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvUmVwbGF5VHlwZS5qcyc7XG5pbXBvcnQge2xhYmVsQ2FjaGUsIHJvdGF0ZUF0T2Zmc2V0fSBmcm9tICcuLi8uLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCBDYW52YXNSZXBsYXlHcm91cCwge3JlcGxheURlY2x1dHRlcn0gZnJvbSAnLi4vLi4vcmVuZGVyL2NhbnZhcy9SZXBsYXlHcm91cC5qcyc7XG5pbXBvcnQge09SREVSfSBmcm9tICcuLi8uLi9yZW5kZXIvcmVwbGF5LmpzJztcbmltcG9ydCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuL1RpbGVMYXllci5qcyc7XG5pbXBvcnQge2dldFNxdWFyZWRUb2xlcmFuY2UgYXMgZ2V0U3F1YXJlZFJlbmRlclRvbGVyYW5jZSwgcmVuZGVyRmVhdHVyZX0gZnJvbSAnLi4vdmVjdG9yLmpzJztcbmltcG9ydCB7XG4gIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sXG4gIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSxcbiAgcmVzZXQgYXMgcmVzZXRUcmFuc2Zvcm0sXG4gIHNjYWxlIGFzIHNjYWxlVHJhbnNmb3JtLFxuICB0cmFuc2xhdGUgYXMgdHJhbnNsYXRlVHJhbnNmb3JtXG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uLy4uL3JlbmRlci9SZXBsYXlUeXBlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAqL1xudmFyIElNQUdFX1JFUExBWVMgPSB7XG4gICdpbWFnZSc6IFtSZXBsYXlUeXBlLlBPTFlHT04sIFJlcGxheVR5cGUuQ0lSQ0xFLFxuICAgIFJlcGxheVR5cGUuTElORV9TVFJJTkcsIFJlcGxheVR5cGUuSU1BR0UsIFJlcGxheVR5cGUuVEVYVF0sXG4gICdoeWJyaWQnOiBbUmVwbGF5VHlwZS5QT0xZR09OLCBSZXBsYXlUeXBlLkxJTkVfU1RSSU5HXVxufTtcblxuXG4vKipcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vLi4vcmVuZGVyL1JlcGxheVR5cGUuanNcIikuZGVmYXVsdD4+fVxuICovXG52YXIgVkVDVE9SX1JFUExBWVMgPSB7XG4gICdpbWFnZSc6IFtSZXBsYXlUeXBlLkRFRkFVTFRdLFxuICAnaHlicmlkJzogW1JlcGxheVR5cGUuSU1BR0UsIFJlcGxheVR5cGUuVEVYVCwgUmVwbGF5VHlwZS5ERUZBVUxUXSxcbiAgJ3ZlY3Rvcic6IE9SREVSXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciB2ZWN0b3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENhbnZhc1RpbGVMYXllclJlbmRlcmVyKSB7XG4gIGZ1bmN0aW9uIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyKGxheWVyKSB7XG5cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5jYWxsKHRoaXMsIGxheWVyLCB0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIERlY2x1dHRlciB0cmVlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJUcmVlXyA9IGxheWVyLmdldERlY2x1dHRlcigpID8gcmJ1c2goOSwgdW5kZWZpbmVkKSA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZGlydHlfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIHZhciByZW5kZXJNb2RlID0gbGF5ZXIuZ2V0UmVuZGVyTW9kZSgpO1xuXG4gICAgLy8gVXNlIGxvd2VyIHJlc29sdXRpb24gZm9yIHB1cmUgdmVjdG9yIHJlbmRlcmluZy4gQ2xvc2VzdCByZXNvbHV0aW9uIG90aGVyd2lzZS5cbiAgICB0aGlzLnpEaXJlY3Rpb24gPSByZW5kZXJNb2RlID09PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5WRUNUT1IgPyAxIDogMDtcblxuICAgIGlmIChyZW5kZXJNb2RlICE9PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5WRUNUT1IpIHtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuICAgIH1cblxuXG4gICAgbGlzdGVuKGxhYmVsQ2FjaGUsIEV2ZW50VHlwZS5DTEVBUiwgdGhpcy5oYW5kbGVGb250c0NoYW5nZWRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciApIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLl9fcHJvdG9fXyA9IENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciAmJiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUgKTtcbiAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXI7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHtcbiAgICB1bmxpc3RlbihsYWJlbENhY2hlLCBFdmVudFR5cGUuQ0xFQVIsIHRoaXMuaGFuZGxlRm9udHNDaGFuZ2VkXywgdGhpcyk7XG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiBnZXRUaWxlICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRpbGUgPSBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZS5jYWxsKHRoaXMsIHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUmVwbGF5R3JvdXBfKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlKSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICBpZiAodGhpcy5jb250ZXh0KSB7XG4gICAgICAgIHRoaXMucmVuZGVyVGlsZUltYWdlXygvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGlsZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlSW1hZ2UgPSBmdW5jdGlvbiBnZXRUaWxlSW1hZ2UgKHRpbGUpIHtcbiAgICB2YXIgdGlsZUxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSkuZ2V0SW1hZ2UodGlsZUxheWVyKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiBwcmVwYXJlRnJhbWUgKGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgbGF5ZXJSZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XG4gICAgaWYgKHRoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXyAhPSBsYXllclJldmlzaW9uKSB7XG4gICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fID0gbGF5ZXJSZXZpc2lvbjtcbiAgICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZS5jYWxsKHRoaXMsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlUmVwbGF5R3JvdXBfID0gZnVuY3Rpb24gY3JlYXRlUmVwbGF5R3JvdXBfICh0aWxlLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciByZW5kZXJPcmRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259ICovIChsYXllci5nZXRSZW5kZXJPcmRlcigpKSB8fCBudWxsO1xuXG4gICAgdmFyIHJlcGxheVN0YXRlID0gdGlsZS5nZXRSZXBsYXlTdGF0ZShsYXllcik7XG4gICAgaWYgKCFyZXBsYXlTdGF0ZS5kaXJ0eSAmJiByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID09IHJldmlzaW9uICYmXG4gICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIgPT0gcmVuZGVyT3JkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciBzb3VyY2VUaWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZCgpO1xuICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHRpbGUudGlsZUNvb3JkWzBdKTtcbiAgICB2YXIgdGlsZUV4dGVudCA9IHRpbGUuZXh0ZW50O1xuXG4gICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIHQsIHR0ICkge1xuICAgICAgdmFyIHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XG4gICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpICE9IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlVGlsZUNvb3JkID0gc291cmNlVGlsZS50aWxlQ29vcmQ7XG4gICAgICB2YXIgc291cmNlVGlsZUV4dGVudCA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChzb3VyY2VUaWxlQ29vcmQpO1xuICAgICAgdmFyIHNoYXJlZEV4dGVudCA9IGdldEludGVyc2VjdGlvbih0aWxlRXh0ZW50LCBzb3VyY2VUaWxlRXh0ZW50KTtcbiAgICAgIHZhciBidWZmZXJlZEV4dGVudCA9IGVxdWFscyhzb3VyY2VUaWxlRXh0ZW50LCBzaGFyZWRFeHRlbnQpID8gbnVsbCA6XG4gICAgICAgIGJ1ZmZlcihzaGFyZWRFeHRlbnQsIGxheWVyLmdldFJlbmRlckJ1ZmZlcigpICogcmVzb2x1dGlvbiwgdGhpcyQxLnRtcEV4dGVudCk7XG4gICAgICB2YXIgdGlsZVByb2plY3Rpb24gPSBzb3VyY2VUaWxlLmdldFByb2plY3Rpb24oKTtcbiAgICAgIHZhciByZXByb2plY3QgPSBmYWxzZTtcbiAgICAgIGlmICghZXF1aXZhbGVudFByb2plY3Rpb24ocHJvamVjdGlvbiwgdGlsZVByb2plY3Rpb24pKSB7XG4gICAgICAgIHJlcHJvamVjdCA9IHRydWU7XG4gICAgICAgIHNvdXJjZVRpbGUuc2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJlcGxheVN0YXRlLmRpcnR5ID0gZmFsc2U7XG4gICAgICB2YXIgcmVwbGF5R3JvdXAgPSBuZXcgQ2FudmFzUmVwbGF5R3JvdXAoMCwgc2hhcmVkRXh0ZW50LCByZXNvbHV0aW9uLFxuICAgICAgICBwaXhlbFJhdGlvLCBzb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcyQxLmRlY2x1dHRlclRyZWVfLCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSk7XG4gICAgICB2YXIgc3F1YXJlZFRvbGVyYW5jZSA9IGdldFNxdWFyZWRSZW5kZXJUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgKiBAdGhpcyB7Q2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJ9XG4gICAgICAgKi9cbiAgICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgIHZhciBzdHlsZXM7XG4gICAgICAgIHZhciBzdHlsZUZ1bmN0aW9uID0gZmVhdHVyZS5nZXRTdHlsZUZ1bmN0aW9uKCkgfHwgbGF5ZXIuZ2V0U3R5bGVGdW5jdGlvbigpO1xuICAgICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xuICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgIHZhciBkaXJ0eSA9IHRoaXMucmVuZGVyRmVhdHVyZShmZWF0dXJlLCBzcXVhcmVkVG9sZXJhbmNlLCBzdHlsZXMsIHJlcGxheUdyb3VwKTtcbiAgICAgICAgICB0aGlzLmRpcnR5XyA9IHRoaXMuZGlydHlfIHx8IGRpcnR5O1xuICAgICAgICAgIHJlcGxheVN0YXRlLmRpcnR5ID0gcmVwbGF5U3RhdGUuZGlydHkgfHwgZGlydHk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBmZWF0dXJlcyA9IHNvdXJjZVRpbGUuZ2V0RmVhdHVyZXMoKTtcbiAgICAgIGlmIChyZW5kZXJPcmRlciAmJiByZW5kZXJPcmRlciAhPT0gcmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlcikge1xuICAgICAgICBmZWF0dXJlcy5zb3J0KHJlbmRlck9yZGVyKTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgaWYgKHJlcHJvamVjdCkge1xuICAgICAgICAgIGlmICh0aWxlUHJvamVjdGlvbi5nZXRVbml0cygpID09IFVuaXRzLlRJTEVfUElYRUxTKSB7XG4gICAgICAgICAgICAvLyBwcm9qZWN0ZWQgdGlsZSBleHRlbnRcbiAgICAgICAgICAgIHRpbGVQcm9qZWN0aW9uLnNldFdvcmxkRXh0ZW50KHNvdXJjZVRpbGVFeHRlbnQpO1xuICAgICAgICAgICAgLy8gdGlsZSBleHRlbnQgaW4gdGlsZSBwaXhlbCBzcGFjZVxuICAgICAgICAgICAgdGlsZVByb2plY3Rpb24uc2V0RXh0ZW50KHNvdXJjZVRpbGUuZ2V0RXh0ZW50KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmZWF0dXJlLmdldEdlb21ldHJ5KCkudHJhbnNmb3JtKHRpbGVQcm9qZWN0aW9uLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWJ1ZmZlcmVkRXh0ZW50IHx8IGludGVyc2VjdHMoYnVmZmVyZWRFeHRlbnQsIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKSkpIHtcbiAgICAgICAgICByZW5kZXIuY2FsbCh0aGlzJDEsIGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXBsYXlHcm91cC5maW5pc2goKTtcbiAgICAgIHNvdXJjZVRpbGUuc2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCksIHJlcGxheUdyb3VwKTtcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSBsb29wKCB0LCB0dCApO1xuICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmV2aXNpb24gPSByZXZpc2lvbjtcbiAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJlbmRlck9yZGVyID0gcmVuZGVyT3JkZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICBoaXRUb2xlcmFuY2UgPSBoaXRUb2xlcmFuY2UgPT0gdW5kZWZpbmVkID8gMCA6IGhpdFRvbGVyYW5jZTtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59ICovXG4gICAgdmFyIGZlYXR1cmVzID0ge307XG5cbiAgICB2YXIgcmVuZGVyZWRUaWxlcyA9IC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5yZW5kZXJlZFRpbGVzKTtcblxuICAgIHZhciBidWZmZXJlZEV4dGVudCwgZm91bmQ7XG4gICAgdmFyIGksIGlpO1xuICAgIGZvciAoaSA9IDAsIGlpID0gcmVuZGVyZWRUaWxlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgdGlsZSA9IHJlbmRlcmVkVGlsZXNbaV07XG4gICAgICBidWZmZXJlZEV4dGVudCA9IGJ1ZmZlcih0aWxlLmV4dGVudCwgaGl0VG9sZXJhbmNlICogcmVzb2x1dGlvbiwgYnVmZmVyZWRFeHRlbnQpO1xuICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUoYnVmZmVyZWRFeHRlbnQsIGNvb3JkaW5hdGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSB7XG4gICAgICAgIHZhciBzb3VyY2VUaWxlID0gdGlsZS5nZXRUaWxlKHRpbGUudGlsZUtleXNbdF0pO1xuICAgICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpICE9IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSAvKiogQHR5cGUge0NhbnZhc1JlcGxheUdyb3VwfSAqLyAoc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllcixcbiAgICAgICAgICB0aWxlLnRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgIGZvdW5kID0gZm91bmQgfHwgcmVwbGF5R3JvdXAuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgcm90YXRpb24sIGhpdFRvbGVyYW5jZSwge30sXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAgICogQHJldHVybiB7P30gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBnZXRVaWQoZmVhdHVyZSk7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gZmVhdHVyZXMpKSB7XG4gICAgICAgICAgICAgIGZlYXR1cmVzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRSZXBsYXlUcmFuc2Zvcm1fID0gZnVuY3Rpb24gZ2V0UmVwbGF5VHJhbnNmb3JtXyAodGlsZSwgZnJhbWVTdGF0ZSkge1xuICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xuICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZCgpO1xuICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgIHZhciByZW5kZXJSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb24gLyBwaXhlbFJhdGlvO1xuICAgIHZhciB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnQpO1xuICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciBvcmlnaW4gPSBnZXRUb3BMZWZ0KHRpbGVFeHRlbnQpO1xuICAgIHZhciBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xuICAgIHZhciBvZmZzZXRYID0gTWF0aC5yb3VuZChwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIpO1xuICAgIHZhciBvZmZzZXRZID0gTWF0aC5yb3VuZChwaXhlbFJhdGlvICogc2l6ZVsxXSAvIDIpO1xuICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKHRoaXMudG1wVHJhbnNmb3JtXyxcbiAgICAgIG9mZnNldFgsIG9mZnNldFksXG4gICAgICB0aWxlUmVzb2x1dGlvbiAvIHJlbmRlclJlc29sdXRpb24sIHRpbGVSZXNvbHV0aW9uIC8gcmVuZGVyUmVzb2x1dGlvbixcbiAgICAgIHZpZXdTdGF0ZS5yb3RhdGlvbixcbiAgICAgIChvcmlnaW5bMF0gLSBjZW50ZXJbMF0pIC8gdGlsZVJlc29sdXRpb24sXG4gICAgICAoY2VudGVyWzFdIC0gb3JpZ2luWzFdKSAvIHRpbGVSZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUZvbnRzQ2hhbmdlZF8gKGV2ZW50KSB7XG4gICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgdGhpcy5yZW5kZXJlZExheWVyUmV2aXNpb25fICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjaGFuZ2VzIGluIGltYWdlIHN0eWxlIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBzdHlsZSBjaGFuZ2UgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlU3R5bGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVTdHlsZUltYWdlQ2hhbmdlXyAoZXZlbnQpIHtcbiAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdENvbXBvc2UgPSBmdW5jdGlvbiBwb3N0Q29tcG9zZSAoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xuICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLmdldExheWVyKCkpO1xuICAgIHZhciByZW5kZXJNb2RlID0gbGF5ZXIuZ2V0UmVuZGVyTW9kZSgpO1xuICAgIGlmIChyZW5kZXJNb2RlICE9IFZlY3RvclRpbGVSZW5kZXJUeXBlLklNQUdFKSB7XG4gICAgICB2YXIgZGVjbHV0dGVyUmVwbGF5cyA9IGxheWVyLmdldERlY2x1dHRlcigpID8ge30gOiBudWxsO1xuICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyLmdldFNvdXJjZSgpKTtcbiAgICAgIHZhciByZXBsYXlUeXBlcyA9IFZFQ1RPUl9SRVBMQVlTW3JlbmRlck1vZGVdO1xuICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgIHZhciBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xuICAgICAgdmFyIG9mZnNldFgsIG9mZnNldFk7XG4gICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgb2Zmc2V0WCA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMF0gLyAyKTtcbiAgICAgICAgb2Zmc2V0WSA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyKTtcbiAgICAgICAgcm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzKSB7XG4gICAgICAgIHRoaXMuZGVjbHV0dGVyVHJlZV8uY2xlYXIoKTtcbiAgICAgIH1cbiAgICAgIHZhciB2aWV3SGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgIHZhciBzbmFwVG9QaXhlbCA9ICEodmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgdmlld0hpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSk7XG4gICAgICB2YXIgdGlsZXMgPSB0aGlzLnJlbmRlcmVkVGlsZXM7XG4gICAgICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pO1xuICAgICAgdmFyIGNsaXBzID0gW107XG4gICAgICB2YXIgenMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSB0aWxlcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vVmVjdG9ySW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlc1tpXSk7XG4gICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkFCT1JUKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZCA9IHRpbGUudGlsZUNvb3JkO1xuICAgICAgICB2YXIgd29ybGRPZmZzZXQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudClbMF0gLSB0aWxlLmV4dGVudFswXTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSB7XG4gICAgICAgICAgdmFyIHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XG4gICAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSAhPSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJlcGxheUdyb3VwID0gLyoqIEB0eXBlIHtDYW52YXNSZXBsYXlHcm91cH0gKi8gKHNvdXJjZVRpbGUuZ2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgICAgaWYgKCFyZXBsYXlHcm91cCB8fCAhcmVwbGF5R3JvdXAuaGFzUmVwbGF5cyhyZXBsYXlUeXBlcykpIHtcbiAgICAgICAgICAgIC8vIHNvdXJjZVRpbGUgd2FzIG5vdCB5ZXQgbG9hZGVkIHdoZW4gdGhpcy5jcmVhdGVSZXBsYXlHcm91cF8oKSB3YXNcbiAgICAgICAgICAgIC8vIGNhbGxlZCwgb3IgaXQgaGFzIG5vIHJlcGxheXMgb2YgdGhlIHR5cGVzIHdlIHdhbnQgdG8gcmVuZGVyXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGZyYW1lU3RhdGUsIHdvcmxkT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGN1cnJlbnRaID0gc291cmNlVGlsZS50aWxlQ29vcmRbMF07XG4gICAgICAgICAgdmFyIGN1cnJlbnRDbGlwID0gcmVwbGF5R3JvdXAuZ2V0Q2xpcENvb3Jkcyh0cmFuc2Zvcm0pO1xuICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBsYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgY2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgbG93IHJlc29sdXRpb24gdGlsZSB0aGF0IGFyZVxuICAgICAgICAgIC8vIGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHJlc29sdXRpb24gdGlsZVxuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNsaXBzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjbGlwID0gY2xpcHNbal07XG4gICAgICAgICAgICBpZiAoY3VycmVudFogPCB6c1tqXSkge1xuICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgcmVzb2x1dGlvbiB0aWxlXG4gICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmVwbGF5R3JvdXAucmVwbGF5KGNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIHt9LCBzbmFwVG9QaXhlbCwgcmVwbGF5VHlwZXMsIGRlY2x1dHRlclJlcGxheXMpO1xuICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgIGNsaXBzLnB1c2goY3VycmVudENsaXApO1xuICAgICAgICAgIHpzLnB1c2goY3VycmVudFopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVjbHV0dGVyUmVwbGF5cykge1xuICAgICAgICByZXBsYXlEZWNsdXR0ZXIoZGVjbHV0dGVyUmVwbGF5cywgY29udGV4dCwgcm90YXRpb24sIHNuYXBUb1BpeGVsKTtcbiAgICAgIH1cbiAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbixcbiAgICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi8gKG9mZnNldFgpLCAvKiogQHR5cGUge251bWJlcn0gKi8gKG9mZnNldFkpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnBvc3RDb21wb3NlLmNhbGwodGhpcywgY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fEFycmF5PGltcG9ydChcIi4uLy4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fSBzdHlsZXMgVGhlIHN0eWxlIG9yIGFycmF5IG9mIHN0eWxlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvY2FudmFzL1JlcGxheUdyb3VwLmpzXCIpLmRlZmF1bHR9IHJlcGxheUdyb3VwIFJlcGxheSBncm91cC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIGFuIGltYWdlIGlzIGxvYWRpbmcuXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRmVhdHVyZSA9IGZ1bmN0aW9uIHJlbmRlckZlYXR1cmUkMSAoZmVhdHVyZSwgc3F1YXJlZFRvbGVyYW5jZSwgc3R5bGVzLCByZXBsYXlHcm91cCkge1xuICAgIGlmICghc3R5bGVzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBsb2FkaW5nID0gZmFsc2U7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3R5bGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgbG9hZGluZyA9IHJlbmRlckZlYXR1cmUoXG4gICAgICAgICAgcmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlc1tpXSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgICAgICB0aGlzLmhhbmRsZVN0eWxlSW1hZ2VDaGFuZ2VfLCB0aGlzKSB8fCBsb2FkaW5nO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkaW5nID0gcmVuZGVyRmVhdHVyZShcbiAgICAgICAgcmVwbGF5R3JvdXAsIGZlYXR1cmUsIHN0eWxlcywgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgICAgdGhpcy5oYW5kbGVTdHlsZUltYWdlQ2hhbmdlXywgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBsb2FkaW5nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1ZlY3RvckltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGlsZUltYWdlXyA9IGZ1bmN0aW9uIHJlbmRlclRpbGVJbWFnZV8gKHRpbGUsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5nZXRMYXllcigpKTtcbiAgICB2YXIgcmVwbGF5U3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcbiAgICB2YXIgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xuICAgIHZhciByZXBsYXlzID0gSU1BR0VfUkVQTEFZU1tsYXllci5nZXRSZW5kZXJNb2RlKCldO1xuICAgIGlmIChyZXBsYXlzICYmIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJldmlzaW9uICE9PSByZXZpc2lvbikge1xuICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRUaWxlUmV2aXNpb24gPSByZXZpc2lvbjtcbiAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLndyYXBwZWRUaWxlQ29vcmQ7XG4gICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllci5nZXRTb3VyY2UoKSk7XG4gICAgICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgdmFyIHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aWxlLmdldENvbnRleHQobGF5ZXIpO1xuICAgICAgdmFyIHNpemUgPSBzb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gc2l6ZVswXTtcbiAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IHNpemVbMV07XG4gICAgICB2YXIgdGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50KTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRpbGUudGlsZUtleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgc291cmNlVGlsZSA9IHRpbGUuZ2V0VGlsZSh0aWxlLnRpbGVLZXlzW2ldKTtcbiAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSAhPSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBpeGVsU2NhbGUgPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHJlc2V0VHJhbnNmb3JtKHRoaXMudG1wVHJhbnNmb3JtXyk7XG4gICAgICAgIHNjYWxlVHJhbnNmb3JtKHRyYW5zZm9ybSwgcGl4ZWxTY2FsZSwgLXBpeGVsU2NhbGUpO1xuICAgICAgICB0cmFuc2xhdGVUcmFuc2Zvcm0odHJhbnNmb3JtLCAtdGlsZUV4dGVudFswXSwgLXRpbGVFeHRlbnRbM10pO1xuICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSAvKiogQHR5cGUge0NhbnZhc1JlcGxheUdyb3VwfSAqLyAoc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllcixcbiAgICAgICAgICB0aWxlLnRpbGVDb29yZC50b1N0cmluZygpKSk7XG4gICAgICAgIHJlcGxheUdyb3VwLnJlcGxheShjb250ZXh0LCB0cmFuc2Zvcm0sIDAsIHt9LCB0cnVlLCByZXBsYXlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyO1xufShDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcikpO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoaXMgcmVuZGVyZXIgaGFuZGxlcyB0aGUgcHJvdmlkZWQgbGF5ZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIFRoZSBjYW5kaWRhdGUgbGF5ZXIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcmVuZGVyZXIgY2FuIHJlbmRlciB0aGUgbGF5ZXIuXG4gKi9cbkNhbnZhc1ZlY3RvclRpbGVMYXllclJlbmRlcmVyWydoYW5kbGVzJ10gPSBmdW5jdGlvbihsYXllcikge1xuICByZXR1cm4gbGF5ZXIuZ2V0VHlwZSgpID09PSBMYXllclR5cGUuVkVDVE9SX1RJTEU7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIGEgbGF5ZXIgcmVuZGVyZXIuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXBSZW5kZXJlciBUaGUgbWFwIHJlbmRlcmVyLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBUaGUgbGF5ZXIgdG8gYmUgcmVuZGVyZXJkLlxuICogQHJldHVybiB7Q2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJ9IFRoZSBsYXllciByZW5kZXJlci5cbiAqL1xuQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXJbJ2NyZWF0ZSddID0gZnVuY3Rpb24obWFwUmVuZGVyZXIsIGxheWVyKSB7XG4gIHJldHVybiBuZXcgQ2FudmFzVmVjdG9yVGlsZUxheWVyUmVuZGVyZXIoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yVGlsZUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBcbiAqL1xuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tICcuL1BsdWdnYWJsZU1hcC5qcyc7XG5pbXBvcnQge2RlZmF1bHRzIGFzIGRlZmF1bHRDb250cm9sc30gZnJvbSAnLi9jb250cm9sL3V0aWwuanMnO1xuaW1wb3J0IHtkZWZhdWx0cyBhcyBkZWZhdWx0SW50ZXJhY3Rpb25zfSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgQ2FudmFzSW1hZ2VMYXllclJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL0ltYWdlTGF5ZXIuanMnO1xuaW1wb3J0IENhbnZhc01hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL01hcC5qcyc7XG5pbXBvcnQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JMYXllclJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL1ZlY3RvckxheWVyLmpzJztcbmltcG9ydCBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyL2NhbnZhcy9WZWN0b3JUaWxlTGF5ZXIuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFRoZSBtYXAgaXMgdGhlIGNvcmUgY29tcG9uZW50IG9mIE9wZW5MYXllcnMuIEZvciBhIG1hcCB0byByZW5kZXIsIGEgdmlldyxcbiAqIG9uZSBvciBtb3JlIGxheWVycywgYW5kIGEgdGFyZ2V0IGNvbnRhaW5lciBhcmUgbmVlZGVkOlxuICpcbiAqICAgICBpbXBvcnQgTWFwIGZyb20gJ29sL01hcCc7XG4gKiAgICAgaW1wb3J0IFZpZXcgZnJvbSAnb2wvVmlldyc7XG4gKiAgICAgaW1wb3J0IFRpbGVMYXllciBmcm9tICdvbC9sYXllci9UaWxlJztcbiAqICAgICBpbXBvcnQgT1NNIGZyb20gJ29sL3NvdXJjZS9PU00nO1xuICpcbiAqICAgICB2YXIgbWFwID0gbmV3IE1hcCh7XG4gKiAgICAgICB2aWV3OiBuZXcgVmlldyh7XG4gKiAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICogICAgICAgICB6b29tOiAxXG4gKiAgICAgICB9KSxcbiAqICAgICAgIGxheWVyczogW1xuICogICAgICAgICBuZXcgVGlsZUxheWVyKHtcbiAqICAgICAgICAgICBzb3VyY2U6IG5ldyBPU00oKVxuICogICAgICAgICB9KVxuICogICAgICAgXSxcbiAqICAgICAgIHRhcmdldDogJ21hcCdcbiAqICAgICB9KTtcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCBjcmVhdGVzIGEgbWFwIHVzaW5nIGEge0BsaW5rIG1vZHVsZTpvbC9sYXllci9UaWxlfSB0b1xuICogZGlzcGxheSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9PU01+T1NNfSBPU00gZGF0YSBhbmQgcmVuZGVyIGl0IHRvIGEgRE9NXG4gKiBlbGVtZW50IHdpdGggdGhlIGlkIGBtYXBgLlxuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciBwbGFjZXMgYSB2aWV3cG9ydCBjb250YWluZXIgKHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC12aWV3cG9ydGApIGluIHRoZSB0YXJnZXQgZWxlbWVudCAoc2VlIGBnZXRWaWV3cG9ydCgpYCksIGFuZCB0aGVuIHR3b1xuICogZnVydGhlciBlbGVtZW50cyB3aXRoaW4gdGhlIHZpZXdwb3J0OiBvbmUgd2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCBmb3IgY29udHJvbHMgYW5kIHNvbWUgb3ZlcmxheXMsIGFuZCBvbmUgd2l0aFxuICogQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXJgIGZvciBvdGhlciBvdmVybGF5cyAoc2VlIHRoZSBgc3RvcEV2ZW50YFxuICogb3B0aW9uIG9mIHtAbGluayBtb2R1bGU6b2wvT3ZlcmxheX5PdmVybGF5fSBmb3IgdGhlIGRpZmZlcmVuY2UpLiBUaGUgbWFwXG4gKiBpdHNlbGYgaXMgcGxhY2VkIGluIGEgZnVydGhlciBlbGVtZW50IHdpdGhpbiB0aGUgdmlld3BvcnQuXG4gKlxuICogTGF5ZXJzIGFyZSBzdG9yZWQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5cbiAqIGxheWVyR3JvdXBzLiBBIHRvcC1sZXZlbCBncm91cCBpcyBwcm92aWRlZCBieSB0aGUgbGlicmFyeS4gVGhpcyBpcyB3aGF0IGlzXG4gKiBhY2Nlc3NlZCBieSBgZ2V0TGF5ZXJHcm91cGAgYW5kIGBzZXRMYXllckdyb3VwYC4gTGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIGFyZSBhZGRlZCB0byB0aGlzIGdyb3VwLCBhbmQgYGFkZExheWVyYCBhbmQgYHJlbW92ZUxheWVyYCBjaGFuZ2UgdGhlXG4gKiBsYXllciBjb2xsZWN0aW9uIGluIHRoZSBncm91cC4gYGdldExheWVyc2AgaXMgYSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3JcbiAqIGBnZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKClgLiBOb3RlIHRoYXQge0BsaW5rIG1vZHVsZTpvbC9sYXllci9Hcm91cH5Hcm91cH1cbiAqIGlzIGEgc3ViY2xhc3Mgb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSwgc28gbGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIG9yIGFkZGVkIHdpdGggYGFkZExheWVyYCBjYW4gYmUgZ3JvdXBzLCB3aGljaCBjYW4gY29udGFpbiBmdXJ0aGVyXG4gKiBncm91cHMsIGFuZCBzbyBvbi5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAqIEBhcGlcbiAqL1xudmFyIE1hcCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBsdWdnYWJsZU1hcCkge1xuICBmdW5jdGlvbiBNYXAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5jb250cm9scykge1xuICAgICAgb3B0aW9ucy5jb250cm9scyA9IGRlZmF1bHRDb250cm9scygpO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuaW50ZXJhY3Rpb25zKSB7XG4gICAgICBvcHRpb25zLmludGVyYWN0aW9ucyA9IGRlZmF1bHRJbnRlcmFjdGlvbnMoKTtcbiAgICB9XG5cbiAgICBQbHVnZ2FibGVNYXAuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuXG4gIGlmICggUGx1Z2dhYmxlTWFwICkgTWFwLl9fcHJvdG9fXyA9IFBsdWdnYWJsZU1hcDtcbiAgTWFwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBsdWdnYWJsZU1hcCAmJiBQbHVnZ2FibGVNYXAucHJvdG90eXBlICk7XG4gIE1hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXA7XG5cbiAgTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyICgpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSBuZXcgQ2FudmFzTWFwUmVuZGVyZXIodGhpcyk7XG4gICAgcmVuZGVyZXIucmVnaXN0ZXJMYXllclJlbmRlcmVycyhbXG4gICAgICBDYW52YXNJbWFnZUxheWVyUmVuZGVyZXIsXG4gICAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcixcbiAgICAgIENhbnZhc1ZlY3RvckxheWVyUmVuZGVyZXIsXG4gICAgICBDYW52YXNWZWN0b3JUaWxlTGF5ZXJSZW5kZXJlclxuICAgIF0pO1xuICAgIHJldHVybiByZW5kZXJlcjtcbiAgfTtcblxuICByZXR1cm4gTWFwO1xufShQbHVnZ2FibGVNYXApKTtcblxuXG5leHBvcnQgZGVmYXVsdCBNYXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBLaW5ldGljIGZyb20gJy4vS2luZXRpYy5qcyc7XG5pbXBvcnQgRG91YmxlQ2xpY2tab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmltcG9ydCBEcmFnUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5pbXBvcnQgRHJhZ1JvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuaW1wb3J0IERyYWdab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuaW1wb3J0IEtleWJvYXJkUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuaW1wb3J0IEtleWJvYXJkWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5pbXBvcnQgTW91c2VXaGVlbFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5pbXBvcnQgUGluY2hSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5pbXBvcnQgUGluY2hab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmltcG9ydCB7Zm9jdXN9IGZyb20gJy4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5cbmV4cG9ydCB7ZGVmYXVsdCBhcyBEb3VibGVDbGlja1pvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnQW5kRHJvcH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ0JveH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQm94LmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnUGFufSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdSb3RhdGV9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ1JvdGF0ZUFuZFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb20uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmF3fSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEV4dGVudH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9FeHRlbnQuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEludGVyYWN0aW9ufSBmcm9tICcuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBLZXlib2FyZFBhbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgS2V5Ym9hcmRab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgTW9kaWZ5fSBmcm9tICcuL2ludGVyYWN0aW9uL01vZGlmeS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgTW91c2VXaGVlbFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFBpbmNoUm90YXRlfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQaW5jaFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQb2ludGVyfSBmcm9tICcuL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFNlbGVjdH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TZWxlY3QuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFNuYXB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU25hcC5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgVHJhbnNsYXRlfSBmcm9tICcuL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsdFNoaWZ0RHJhZ1JvdGF0ZT10cnVlXSBXaGV0aGVyIEFsdC1TaGlmdC1kcmFnIHJvdGF0ZSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBJbnRlcmFjdCBvbmx5IHdoZW4gdGhlIG1hcCBoYXMgdGhlXG4gKiBmb2N1cy4gVGhpcyBhZmZlY3RzIHRoZSBgTW91c2VXaGVlbFpvb21gIGFuZCBgRHJhZ1BhbmAgaW50ZXJhY3Rpb25zIGFuZCBpc1xuICogdXNlZnVsIHdoZW4gcGFnZSBzY3JvbGwgaXMgZGVzaXJlZCBmb3IgbWFwcyB0aGF0IGRvIG5vdCBoYXZlIHRoZSBicm93c2VyJ3NcbiAqIGZvY3VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gWm9vbSB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyXG4gKiB6b29tIGxldmVsIGFmdGVyIHRoZSB3aGVlbC90cmFja3BhZCBvciBwaW5jaCBnZXN0dXJlIGVuZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkb3VibGVDbGlja1pvb209dHJ1ZV0gV2hldGhlciBkb3VibGUgY2xpY2sgem9vbSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tleWJvYXJkPXRydWVdIFdoZXRoZXIga2V5Ym9hcmQgaW50ZXJhY3Rpb24gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21vdXNlV2hlZWxab29tPXRydWVdIFdoZXRoZXIgbW91c2V3aGVlbCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaGlmdERyYWdab29tPXRydWVdIFdoZXRoZXIgU2hpZnQtZHJhZyB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkcmFnUGFuPXRydWVdIFdoZXRoZXIgZHJhZyBwYW4gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoUm90YXRlPXRydWVdIFdoZXRoZXIgcGluY2ggcm90YXRlIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFpvb209dHJ1ZV0gV2hldGhlciBwaW5jaCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EZWx0YV0gWm9vbSBsZXZlbCBkZWx0YSB3aGVuIHVzaW5nIGtleWJvYXJkIG9yXG4gKiBtb3VzZXdoZWVsIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EdXJhdGlvbl0gRHVyYXRpb24gb2YgdGhlIHpvb20gYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBUaGUgZGVmYXVsdCBzZXQgb2ZcbiAqIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnM9fSBvcHRfb3B0aW9ucyBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqIEEgY29sbGVjdGlvbiBvZiBpbnRlcmFjdGlvbnMgdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9XG4gKiBjb25zdHJ1Y3RvcidzIGBpbnRlcmFjdGlvbnNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG5cbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgdmFyIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgdmFyIGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG5cbiAgdmFyIGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlIDogdHJ1ZTtcbiAgaWYgKGFsdFNoaWZ0RHJhZ1JvdGF0ZSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnUm90YXRlKCkpO1xuICB9XG5cbiAgdmFyIGRvdWJsZUNsaWNrWm9vbSA9IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuZG91YmxlQ2xpY2tab29tIDogdHJ1ZTtcbiAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEb3VibGVDbGlja1pvb20oe1xuICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gIGlmIChkcmFnUGFuKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdQYW4oe1xuICAgICAgY29uZGl0aW9uOiBvcHRpb25zLm9uRm9jdXNPbmx5ID8gZm9jdXMgOiB1bmRlZmluZWQsXG4gICAgICBraW5ldGljOiBraW5ldGljXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIHBpbmNoUm90YXRlID0gb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6XG4gICAgdHJ1ZTtcbiAgaWYgKHBpbmNoUm90YXRlKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoUm90YXRlKCkpO1xuICB9XG5cbiAgdmFyIHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gIGlmIChwaW5jaFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hab29tKHtcbiAgICAgIGNvbnN0cmFpblJlc29sdXRpb246IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbixcbiAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvblxuICAgIH0pKTtcbiAgfVxuXG4gIHZhciBrZXlib2FyZCA9IG9wdGlvbnMua2V5Ym9hcmQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5Ym9hcmQgOiB0cnVlO1xuICBpZiAoa2V5Ym9hcmQpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRQYW4oKSk7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICB2YXIgbW91c2VXaGVlbFpvb20gPSBvcHRpb25zLm1vdXNlV2hlZWxab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMubW91c2VXaGVlbFpvb20gOiB0cnVlO1xuICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgTW91c2VXaGVlbFpvb20oe1xuICAgICAgY29uZGl0aW9uOiBvcHRpb25zLm9uRm9jdXNPbmx5ID8gZm9jdXMgOiB1bmRlZmluZWQsXG4gICAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24sXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICB2YXIgc2hpZnREcmFnWm9vbSA9IG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gOiB0cnVlO1xuICBpZiAoc2hpZnREcmFnWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnWm9vbSh7XG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJhY3Rpb25zO1xuXG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlUHJvcGVydHlcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUFJFTE9BRDogJ3ByZWxvYWQnLFxuICBVU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUjogJ3VzZUludGVyaW1UaWxlc09uRXJyb3InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVcbiAqL1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVQcm9wZXJ0eSBmcm9tICcuL1RpbGVQcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2Fzc2lnbn0gZnJvbSAnLi4vb2JqLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwcmVsb2FkPTBdIFByZWxvYWQuIExvYWQgbG93LXJlc29sdXRpb24gdGlsZXMgdXAgdG8gYHByZWxvYWRgIGxldmVscy4gYDBgXG4gKiBtZWFucyBubyBwcmVsb2FkaW5nLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VJbnRlcmltVGlsZXNPbkVycm9yPXRydWVdIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRm9yIGxheWVyIHNvdXJjZXMgdGhhdCBwcm92aWRlIHByZS1yZW5kZXJlZCwgdGlsZWQgaW1hZ2VzIGluIGdyaWRzIHRoYXQgYXJlXG4gKiBvcmdhbml6ZWQgYnkgem9vbSBsZXZlbHMgZm9yIHNwZWNpZmljIHJlc29sdXRpb25zLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVMYXllciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKExheWVyKSB7XG4gIGZ1bmN0aW9uIFRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcblxuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5wcmVsb2FkO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yO1xuICAgIExheWVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpO1xuXG4gICAgdGhpcy5zZXRQcmVsb2FkKG9wdGlvbnMucHJlbG9hZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVsb2FkIDogMCk7XG4gICAgdGhpcy5zZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciA6IHRydWUpO1xuXG4gICAgLyoqXG4gICAgKiBUaGUgbGF5ZXIgdHlwZS5cbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9MYXllclR5cGUuanNcIikuZGVmYXVsdH1cbiAgICAqL1xuICAgIHRoaXMudHlwZSA9IExheWVyVHlwZS5USUxFO1xuXG4gIH1cblxuICBpZiAoIExheWVyICkgVGlsZUxheWVyLl9fcHJvdG9fXyA9IExheWVyO1xuICBUaWxlTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTGF5ZXIgJiYgTGF5ZXIucHJvdG90eXBlICk7XG4gIFRpbGVMYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUaWxlTGF5ZXI7XG5cbiAgLyoqXG4gICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICogQG9ic2VydmFibGVcbiAgKiBAYXBpXG4gICovXG4gIFRpbGVMYXllci5wcm90b3R5cGUuZ2V0UHJlbG9hZCA9IGZ1bmN0aW9uIGdldFByZWxvYWQgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FEKSk7XG4gIH07XG5cbiAgLyoqXG4gICogU2V0IHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAqIEBwYXJhbSB7bnVtYmVyfSBwcmVsb2FkIFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBUaWxlTGF5ZXIucHJvdG90eXBlLnNldFByZWxvYWQgPSBmdW5jdGlvbiBzZXRQcmVsb2FkIChwcmVsb2FkKSB7XG4gICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQsIHByZWxvYWQpO1xuICB9O1xuXG4gIC8qKlxuICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQG9ic2VydmFibGVcbiAgKiBAYXBpXG4gICovXG4gIFRpbGVMYXllci5wcm90b3R5cGUuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uIGdldFVzZUludGVyaW1UaWxlc09uRXJyb3IgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IpKTtcbiAgfTtcblxuICAvKipcbiAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQG9ic2VydmFibGVcbiAgKiBAYXBpXG4gICovXG4gIFRpbGVMYXllci5wcm90b3R5cGUuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uIHNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgKHVzZUludGVyaW1UaWxlc09uRXJyb3IpIHtcbiAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IsIHVzZUludGVyaW1UaWxlc09uRXJyb3IpO1xuICB9O1xuXG4gIHJldHVybiBUaWxlTGF5ZXI7XG59KExheWVyKSk7XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGFzc29jaWF0ZWQge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZSB0aWxlc291cmNlfSBvZiB0aGUgbGF5ZXIuXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZS5cbiAqIEBhcGlcbiAqL1xuVGlsZUxheWVyLnByb3RvdHlwZS5nZXRTb3VyY2U7XG5cblxuZXhwb3J0IGRlZmF1bHQgVGlsZUxheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlXG4gKi9cbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHtlYXNlSW59IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvVGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICB2YXIgZGF0YSA9IHRoaXMucmVzcG9uc2U7XG4gKiAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICogICAgICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICB9KTtcbiAqICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7XG4gKiAgIHhoci5zZW5kKCk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihUaWxlLCBzdHJpbmcpfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGV+VGlsZX0gc291cmNlcyB1c2UgYSBmdW5jdGlvbiBvZiB0aGlzIHR5cGUgdG8gZ2V0XG4gKiB0aGUgdXJsIHRoYXQgcHJvdmlkZXMgYSB0aWxlIGZvciBhIGdpdmVuIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvdGlsZWNvb3JkflRpbGVDb29yZH0gZm9yIHRoZSB0aWxlXG4gKiBjb29yZGluYXRlLCBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSBwaXhlbCByYXRpbyBhbmQgYVxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IGZvciB0aGUgcHJvamVjdGlvbiAgYXMgYXJndW1lbnRzXG4gKiBhbmQgcmV0dXJucyBhIGB7c3RyaW5nfWAgcmVwcmVzZW50aW5nIHRoZSB0aWxlIFVSTCwgb3IgdW5kZWZpbmVkIGlmIG5vIHRpbGVcbiAqIHNob3VsZCBiZSByZXF1ZXN0ZWQgZm9yIHRoZSBwYXNzZWQgdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQsIG51bWJlcixcbiAqICAgICAgICAgICBpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0KTogKHN0cmluZ3x1bmRlZmluZWQpfSBVcmxGdW5jdGlvblxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBBIGR1cmF0aW9uIGZvciB0aWxlIG9wYWNpdHlcbiAqIHRyYW5zaXRpb25zIGluIG1pbGxpc2Vjb25kcy4gQSBkdXJhdGlvbiBvZiAwIGRpc2FibGVzIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHRpbGVzLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgVGlsZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50VGFyZ2V0KSB7XG4gIGZ1bmN0aW9uIFRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHtcbiAgICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNvb3JkID0gdGlsZUNvb3JkO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtUaWxlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXG4gICAgLyoqXG4gICAgICogQW4gXCJpbnRlcmltXCIgdGlsZSBmb3IgdGhpcyB0aWxlLiBUaGUgaW50ZXJpbSB0aWxlIG1heSBiZSB1c2VkIHdoaWxlIHRoaXNcbiAgICAgKiBvbmUgaXMgbG9hZGluZywgZm9yIFwic21vb3RoXCIgdHJhbnNpdGlvbnMgd2hlbiBjaGFuZ2luZyBwYXJhbXMvZGltZW5zaW9uc1xuICAgICAqIG9uIHRoZSBzb3VyY2UuXG4gICAgICogQHR5cGUge1RpbGV9XG4gICAgICovXG4gICAgdGhpcy5pbnRlcmltVGlsZSA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBBIGtleSBhc3NpZ25lZCB0byB0aGUgdGlsZS4gVGhpcyBpcyB1c2VkIGJ5IHRoZSB0aWxlIHNvdXJjZSB0byBkZXRlcm1pbmVcbiAgICAgKiBpZiB0aGlzIHRpbGUgY2FuIGVmZmVjdGl2ZWx5IGJlIHVzZWQsIG9yIGlmIGEgbmV3IHRpbGUgc2hvdWxkIGJlIGNyZWF0ZWRcbiAgICAgKiBhbmQgdGhpcyBvbmUgYmUgdXNlZCBhcyBhbiBpbnRlcmltIHRpbGUgZm9yIHRoaXMgbmV3IHRpbGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmtleSA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGR1cmF0aW9uIGZvciB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFuc2l0aW9uXyA9IG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gMjUwIDogb3B0aW9ucy50cmFuc2l0aW9uO1xuXG4gICAgLyoqXG4gICAgICogTG9va3VwIG9mIHN0YXJ0IHRpbWVzIGZvciByZW5kZXJpbmcgdHJhbnNpdGlvbnMuICBJZiB0aGUgc3RhcnQgdGltZSBpc1xuICAgICAqIGVxdWFsIHRvIC0xLCB0aGUgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfID0ge307XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBUaWxlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBUaWxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50VGFyZ2V0ICYmIEV2ZW50VGFyZ2V0LnByb3RvdHlwZSApO1xuICBUaWxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGU7XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiBjaGFuZ2VkICgpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gZ2V0S2V5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5rZXkgKyAnLycgKyB0aGlzLnRpbGVDb29yZDtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBpbnRlcmltIHRpbGUgbW9zdCBzdWl0YWJsZSBmb3IgcmVuZGVyaW5nIHVzaW5nIHRoZSBjaGFpbiBvZiBpbnRlcmltXG4gICAqIHRpbGVzLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSAgbW9zdCByZWNlbnQgdGlsZSB0aGF0IGhhcyBiZWVuIGxvYWRlZCwgaWYgbm9cbiAgICogc3VjaCB0aWxlIGV4aXN0cywgdGhlIG9yaWdpbmFsIHRpbGUgaXMgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4geyFUaWxlfSBCZXN0IHRpbGUgZm9yIHJlbmRlcmluZy5cbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmdldEludGVyaW1UaWxlID0gZnVuY3Rpb24gZ2V0SW50ZXJpbVRpbGUgKCkge1xuICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgLy9lbXB0eSBjaGFpblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGxvYWRlZCB0aWxlIGFuZCByZXR1cm4gaXQuIFNpbmNlIHRoZSBjaGFpbiBpcyBzb3J0ZWQgaW5cbiAgICAvLyBkZWNyZWFzaW5nIG9yZGVyIG9mIGNyZWF0aW9uIHRpbWUsIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2VhcmNoIHRoZSByZW1haW5kZXJcbiAgICAvLyBvZiB0aGUgbGlzdCAoYWxsIHRob3NlIHRpbGVzIGNvcnJlc3BvbmQgdG8gb2xkZXIgcmVxdWVzdHMgYW5kIHdpbGwgYmVcbiAgICAvLyBjbGVhbmVkIHVwIGJ5IHJlZnJlc2hJbnRlcmltQ2hhaW4pXG4gICAgZG8ge1xuICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgfVxuICAgICAgdGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgfSB3aGlsZSAodGlsZSk7XG5cbiAgICAvLyB3ZSBjYW4gbm90IGZpbmQgYSBiZXR0ZXIgdGlsZVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHb2VzIHRocm91Z2ggdGhlIGNoYWluIG9mIGludGVyaW0gdGlsZXMgYW5kIGRpc2NhcmRzIHNlY3Rpb25zIG9mIHRoZSBjaGFpblxuICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVsZXZhbnQuXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5yZWZyZXNoSW50ZXJpbUNoYWluID0gZnVuY3Rpb24gcmVmcmVzaEludGVyaW1DaGFpbiAoKSB7XG4gICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuICAgIHZhciBwcmV2ID0gLyoqIEB0eXBlIHtUaWxlfSAqLyAodGhpcyk7XG5cbiAgICBkbyB7XG4gICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgLy93ZSBoYXZlIGEgbG9hZGVkIHRpbGUsIHdlIGNhbiBkaXNjYXJkIHRoZSByZXN0IG9mIHRoZSBsaXN0XG4gICAgICAgIC8vd2Ugd291bGQgY291bGQgYWJvcnQgYW55IExPQURJTkcgdGlsZSByZXF1ZXN0XG4gICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUgKGkuZS4gYW55IExPQURJTkcgdGlsZSBmb2xsb3dpbmcgdGhpcyBlbnRyeSBpbiB0aGUgY2hhaW4pXG4gICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgIC8va2VlcCB0aGlzIExPQURJTkcgdGlsZSBhbnkgbG9hZGVkIHRpbGVzIGxhdGVyIGluIHRoZSBjaGFpbiBhcmVcbiAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSwgc28gd2UncmUgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGUgcmVxdWVzdFxuICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgIH0gZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgIC8vdGhlIGhlYWQgb2YgdGhlIGxpc3QgaXMgdGhlIG1vc3QgY3VycmVudCB0aWxlLCB3ZSBkb24ndCBuZWVkXG4gICAgICAgIC8vdG8gc3RhcnQgYW55IG90aGVyIHJlcXVlc3RzIGZvciB0aGlzIGNoYWluXG4gICAgICAgIHByZXYuaW50ZXJpbVRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICB9XG4gICAgICB0aWxlID0gcHJldi5pbnRlcmltVGlsZTtcbiAgICB9IHdoaWxlICh0aWxlKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdGlsZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZGluYXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmQgPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmQgKCkge1xuICAgIHJldHVybiB0aGlzLnRpbGVDb29yZDtcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7VGlsZVN0YXRlfSBTdGF0ZS5cbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIHRpbGUuIElmIHlvdSB3cml0ZSB5b3VyIG93biB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+TG9hZEZ1bmN0aW9uIHRpbGVMb2FkRnVuY3Rpb259ICxcbiAgICogaXQgaXMgaW1wb3J0YW50IHRvIHNldCB0aGUgc3RhdGUgY29ycmVjdGx5IHRvIHtAbGluayBtb2R1bGU6b2wvVGlsZVN0YXRlfkVSUk9SfVxuICAgKiB3aGVuIHRoZSB0aWxlIGNhbm5vdCBiZSBsb2FkZWQuIE90aGVyd2lzZSB0aGUgdGlsZSBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tXG4gICAqIHRoZSB0aWxlIHF1ZXVlIGFuZCB3aWxsIGJsb2NrIG90aGVyIHJlcXVlc3RzLlxuICAgKiBAcGFyYW0ge1RpbGVTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIFRpbGUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUgKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICogQGFic3RyYWN0XG4gICAqIEBhcGlcbiAgICovXG4gIFRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkICgpIHt9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFscGhhIHZhbHVlIGZvciByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaGUgcmVuZGVyIGZyYW1lIHRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUuZ2V0QWxwaGEgPSBmdW5jdGlvbiBnZXRBbHBoYSAoaWQsIHRpbWUpIHtcbiAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHZhciBzdGFydCA9IHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdO1xuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHN0YXJ0ID0gdGltZTtcbiAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gc3RhcnQ7XG4gICAgfSBlbHNlIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHZhciBkZWx0YSA9IHRpbWUgLSBzdGFydCArICgxMDAwIC8gNjApOyAvLyBhdm9pZCByZW5kZXJpbmcgYXQgMFxuICAgIGlmIChkZWx0YSA+PSB0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIGVhc2VJbihkZWx0YSAvIHRoaXMudHJhbnNpdGlvbl8pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgYSB0aWxlIGlzIGluIGFuIGFscGhhIHRyYW5zaXRpb24uICBBIHRpbGUgaXMgY29uc2lkZXJlZCBpblxuICAgKiB0cmFuc2l0aW9uIGlmIHRpbGUuZ2V0QWxwaGEoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCBvciBoYXMgYmVlbiBjYWxsZWRcbiAgICogYW5kIHJldHVybmVkIDEuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSBpcyBpbiB0cmFuc2l0aW9uLlxuICAgKi9cbiAgVGlsZS5wcm90b3R5cGUuaW5UcmFuc2l0aW9uID0gZnVuY3Rpb24gaW5UcmFuc2l0aW9uIChpZCkge1xuICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gIT09IC0xO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYXJrIGEgdHJhbnNpdGlvbiBhcyBjb21wbGV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAqL1xuICBUaWxlLnByb3RvdHlwZS5lbmRUcmFuc2l0aW9uID0gZnVuY3Rpb24gZW5kVHJhbnNpdGlvbiAoaWQpIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSAtMTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRpbGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgVGlsZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VUaWxlXG4gKi9cbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge2xpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXl9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcblxuXG52YXIgSW1hZ2VUaWxlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVGlsZSkge1xuICBmdW5jdGlvbiBJbWFnZVRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBjcm9zc09yaWdpbiwgdGlsZUxvYWRGdW5jdGlvbiwgb3B0X29wdGlvbnMpIHtcblxuICAgIFRpbGUuY2FsbCh0aGlzLCB0aWxlQ29vcmQsIHN0YXRlLCBvcHRfb3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuY3Jvc3NPcmlnaW5fID0gY3Jvc3NPcmlnaW47XG5cbiAgICAvKipcbiAgICAgKiBJbWFnZSBVUklcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnNyY18gPSBzcmM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5pbWFnZUxpc3RlbmVyS2V5c18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fID0gdGlsZUxvYWRGdW5jdGlvbjtcblxuICB9XG5cbiAgaWYgKCBUaWxlICkgSW1hZ2VUaWxlLl9fcHJvdG9fXyA9IFRpbGU7XG4gIEltYWdlVGlsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUaWxlICYmIFRpbGUucHJvdG90eXBlICk7XG4gIEltYWdlVGlsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJbWFnZVRpbGU7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBJbWFnZVRpbGUucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgdGhpcy5pbnRlcmltVGlsZS5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuQUJPUlQ7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgVGlsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgSFRNTCBpbWFnZSBlbGVtZW50IGZvciB0aGlzIHRpbGUgKG1heSBiZSBhIENhbnZhcywgSW1hZ2UsIG9yIFZpZGVvKS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICogQGFwaVxuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBJbWFnZVRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIGdldEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3JjXztcbiAgfTtcblxuICAvKipcbiAgICogVHJhY2tzIGxvYWRpbmcgb3IgcmVhZCBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gaGFuZGxlSW1hZ2VFcnJvcl8gKCkge1xuICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUxvYWRfID0gZnVuY3Rpb24gaGFuZGxlSW1hZ2VMb2FkXyAoKSB7XG4gICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAodGhpcy5pbWFnZV8pO1xuICAgIGlmIChpbWFnZS5uYXR1cmFsV2lkdGggJiYgaW1hZ2UubmF0dXJhbEhlaWdodCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgfVxuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgSW1hZ2VUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gbG9hZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLklETEU7XG4gICAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW5fICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbl87XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKHRoaXMuaW1hZ2VfLCBFdmVudFR5cGUuRVJST1IsXG4gICAgICAgICAgdGhpcy5oYW5kbGVJbWFnZUVycm9yXywgdGhpcyksXG4gICAgICAgIGxpc3Rlbk9uY2UodGhpcy5pbWFnZV8sIEV2ZW50VHlwZS5MT0FELFxuICAgICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXywgdGhpcylcbiAgICAgIF07XG4gICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBJbWFnZVRpbGUucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gdW5saXN0ZW5JbWFnZV8gKCkge1xuICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5pbWFnZUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBJbWFnZVRpbGU7XG59KFRpbGUpKTtcblxuXG4vKipcbiAqIEdldCBhIDEtcGl4ZWwgYmxhbmsgaW1hZ2UuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQmxhbmsgaW1hZ2UuXG4gKi9cbmZ1bmN0aW9uIGdldEJsYW5rSW1hZ2UoKSB7XG4gIHZhciBjdHggPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7XG4gIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgcmV0dXJuIGN0eC5jYW52YXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEltYWdlVGlsZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlY29vcmRcbiAqL1xuXG5cbi8qKlxuICogQW4gYXJyYXkgb2YgdGhyZWUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIG9mIGEgdGlsZSBpbiBhIHRpbGVcbiAqIGdyaWQuIFRoZSBvcmRlciBpcyBgemAsIGB4YCwgYW5kIGB5YC4gYHpgIGlzIHRoZSB6b29tIGxldmVsLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IFRpbGVDb29yZFxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge1RpbGVDb29yZD19IG9wdF90aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZSh6LCB4LCB5LCBvcHRfdGlsZUNvb3JkKSB7XG4gIGlmIChvcHRfdGlsZUNvb3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICBvcHRfdGlsZUNvb3JkWzBdID0gejtcbiAgICBvcHRfdGlsZUNvb3JkWzFdID0geDtcbiAgICBvcHRfdGlsZUNvb3JkWzJdID0geTtcbiAgICByZXR1cm4gb3B0X3RpbGVDb29yZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW3osIHgsIHldO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleVpYWSh6LCB4LCB5KSB7XG4gIHJldHVybiB6ICsgJy8nICsgeCArICcvJyArIHk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICByZXR1cm4gZ2V0S2V5WlhZKHRpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xufVxuXG5cbi8qKlxuICogR2V0IGEgdGlsZSBjb29yZCBnaXZlbiBhIGtleS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHRpbGUgY29vcmQga2V5LlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21LZXkoa2V5KSB7XG4gIHJldHVybiBrZXkuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2godGlsZUNvb3JkKSB7XG4gIHJldHVybiAodGlsZUNvb3JkWzFdIDw8IHRpbGVDb29yZFswXSkgKyB0aWxlQ29vcmRbMl07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFF1YWQga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhZEtleSh0aWxlQ29vcmQpIHtcbiAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gIHZhciBkaWdpdHMgPSBuZXcgQXJyYXkoeik7XG4gIHZhciBtYXNrID0gMSA8PCAoeiAtIDEpO1xuICB2YXIgaSwgY2hhckNvZGU7XG4gIGZvciAoaSA9IDA7IGkgPCB6OyArK2kpIHtcbiAgICAvLyA0OCBpcyBjaGFyQ29kZSBmb3IgMCAtICcwJy5jaGFyQ29kZUF0KDApXG4gICAgY2hhckNvZGUgPSA0ODtcbiAgICBpZiAodGlsZUNvb3JkWzFdICYgbWFzaykge1xuICAgICAgY2hhckNvZGUgKz0gMTtcbiAgICB9XG4gICAgaWYgKHRpbGVDb29yZFsyXSAmIG1hc2spIHtcbiAgICAgIGNoYXJDb2RlICs9IDI7XG4gICAgfVxuICAgIGRpZ2l0c1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgIG1hc2sgPj49IDE7XG4gIH1cbiAgcmV0dXJuIGRpZ2l0cy5qb2luKCcnKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHshaW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGNvb3JkaW5hdGUgaXMgd2l0aGluIGV4dGVudCBhbmQgem9vbSBsZXZlbCByYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbkV4dGVudEFuZFoodGlsZUNvb3JkLCB0aWxlR3JpZCkge1xuICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgdmFyIHggPSB0aWxlQ29vcmRbMV07XG4gIHZhciB5ID0gdGlsZUNvb3JkWzJdO1xuXG4gIGlmICh0aWxlR3JpZC5nZXRNaW5ab29tKCkgPiB6IHx8IHogPiB0aWxlR3JpZC5nZXRNYXhab29tKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGV4dGVudCA9IHRpbGVHcmlkLmdldEV4dGVudCgpO1xuICB2YXIgdGlsZVJhbmdlO1xuICBpZiAoIWV4dGVudCkge1xuICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gIH0gZWxzZSB7XG4gICAgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICB9XG4gIGlmICghdGlsZVJhbmdlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRpbGVSYW5nZS5jb250YWluc1hZKHgsIHkpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGVjb29yZC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZUNhY2hlXG4gKi9cbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL3N0cnVjdHMvTFJVQ2FjaGUuanMnO1xuaW1wb3J0IHtmcm9tS2V5LCBnZXRLZXl9IGZyb20gJy4vdGlsZWNvb3JkLmpzJztcblxudmFyIFRpbGVDYWNoZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKExSVUNhY2hlKSB7XG4gIGZ1bmN0aW9uIFRpbGVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuXG4gICAgTFJVQ2FjaGUuY2FsbCh0aGlzLCBvcHRfaGlnaFdhdGVyTWFyayk7XG5cbiAgfVxuXG4gIGlmICggTFJVQ2FjaGUgKSBUaWxlQ2FjaGUuX19wcm90b19fID0gTFJVQ2FjaGU7XG4gIFRpbGVDYWNoZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBMUlVDYWNoZSAmJiBMUlVDYWNoZS5wcm90b3R5cGUgKTtcbiAgVGlsZUNhY2hlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGVDYWNoZTtcblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgKi9cbiAgVGlsZUNhY2hlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uIGV4cGlyZUNhY2hlICh1c2VkVGlsZXMpIHtcbiAgICB3aGlsZSAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICB2YXIgdGlsZSA9IHRoaXMucGVla0xhc3QoKTtcbiAgICAgIHZhciB6S2V5ID0gdGlsZS50aWxlQ29vcmRbMF0udG9TdHJpbmcoKTtcbiAgICAgIGlmICh6S2V5IGluIHVzZWRUaWxlcyAmJiB1c2VkVGlsZXNbektleV0uY29udGFpbnModGlsZS50aWxlQ29vcmQpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wb3AoKS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcnVuZSBhbGwgdGlsZXMgZnJvbSB0aGUgY2FjaGUgdGhhdCBkb24ndCBoYXZlIHRoZSBzYW1lIHogYXMgdGhlIG5ld2VzdCB0aWxlLlxuICAgKi9cbiAgVGlsZUNhY2hlLnByb3RvdHlwZS5wcnVuZUV4Y2VwdE5ld2VzdFogPSBmdW5jdGlvbiBwcnVuZUV4Y2VwdE5ld2VzdFogKCkge1xuICAgIGlmICh0aGlzLmdldENvdW50KCkgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgdmFyIHRpbGVDb29yZCA9IGZyb21LZXkoa2V5KTtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odGlsZSkge1xuICAgICAgaWYgKHRpbGUudGlsZUNvb3JkWzBdICE9PSB6KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKGdldEtleSh0aWxlLnRpbGVDb29yZCkpO1xuICAgICAgICB0aWxlLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gVGlsZUNhY2hlO1xufShMUlVDYWNoZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2pcbiAqL1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7Y29udGFpbnNDb29yZGluYXRlLCBjcmVhdGVFbXB0eSwgZXh0ZW5kLCBnZXRIZWlnaHQsIGdldFRvcExlZnQsIGdldFdpZHRofSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge3NvbHZlTGluZWFyU3lzdGVtfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHtnZXRQb2ludFJlc29sdXRpb24sIHRyYW5zZm9ybX0gZnJvbSAnLi9wcm9qLmpzJztcblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osXG4gIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbikge1xuXG4gIHZhciBzb3VyY2VDZW50ZXIgPSB0cmFuc2Zvcm0odGFyZ2V0Q2VudGVyLCB0YXJnZXRQcm9qLCBzb3VyY2VQcm9qKTtcblxuICAvLyBjYWxjdWxhdGUgdGhlIGlkZWFsIHJlc29sdXRpb24gb2YgdGhlIHNvdXJjZSBkYXRhXG4gIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHRhcmdldFByb2osIHRhcmdldFJlc29sdXRpb24sIHRhcmdldENlbnRlcik7XG5cbiAgdmFyIHRhcmdldE1ldGVyc1BlclVuaXQgPSB0YXJnZXRQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgaWYgKHRhcmdldE1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgIHNvdXJjZVJlc29sdXRpb24gKj0gdGFyZ2V0TWV0ZXJzUGVyVW5pdDtcbiAgfVxuICB2YXIgc291cmNlTWV0ZXJzUGVyVW5pdCA9IHNvdXJjZVByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICBpZiAoc291cmNlTWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc291cmNlUmVzb2x1dGlvbiAvPSBzb3VyY2VNZXRlcnNQZXJVbml0O1xuICB9XG5cbiAgLy8gQmFzZWQgb24gdGhlIHByb2plY3Rpb24gcHJvcGVydGllcywgdGhlIHBvaW50IHJlc29sdXRpb24gYXQgdGhlIHNwZWNpZmllZFxuICAvLyBjb29yZGluYXRlcyBtYXkgYmUgc2xpZ2h0bHkgZGlmZmVyZW50LiBXZSBuZWVkIHRvIHJldmVyc2UtY29tcGVuc2F0ZSB0aGlzXG4gIC8vIGluIG9yZGVyIHRvIGFjaGlldmUgb3B0aW1hbCByZXN1bHRzLlxuXG4gIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICBpZiAoIXNvdXJjZUV4dGVudCB8fCBjb250YWluc0Nvb3JkaW5hdGUoc291cmNlRXh0ZW50LCBzb3VyY2VDZW50ZXIpKSB7XG4gICAgdmFyIGNvbXBlbnNhdGlvbkZhY3RvciA9IGdldFBvaW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VDZW50ZXIpIC9cbiAgICAgICAgc291cmNlUmVzb2x1dGlvbjtcbiAgICBpZiAoaXNGaW5pdGUoY29tcGVuc2F0aW9uRmFjdG9yKSAmJiBjb21wZW5zYXRpb25GYWN0b3IgPiAwKSB7XG4gICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IGNvbXBlbnNhdGlvbkZhY3RvcjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cblxuXG4vKipcbiAqIEVubGFyZ2UgdGhlIGNsaXBwaW5nIHRyaWFuZ2xlIHBvaW50IGJ5IDEgcGl4ZWwgdG8gZW5zdXJlIHRoZSBlZGdlcyBvdmVybGFwXG4gKiBpbiBvcmRlciB0byBtYXNrIGdhcHMgY2F1c2VkIGJ5IGFudGlhbGlhc2luZy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY2VudHJvaWRYIENlbnRyb2lkIG9mIHRoZSB0cmlhbmdsZSAoeCBjb29yZGluYXRlIGluIHBpeGVscykuXG4gKiBAcGFyYW0ge251bWJlcn0gY2VudHJvaWRZIENlbnRyb2lkIG9mIHRoZSB0cmlhbmdsZSAoeSBjb29yZGluYXRlIGluIHBpeGVscykuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IChpbiBwaXhlbHMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCAoaW4gcGl4ZWxzKS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBOZXcgcG9pbnQgMSBweCBmYXJ0aGVyIGZyb20gdGhlIGNlbnRyb2lkLlxuICovXG5mdW5jdGlvbiBlbmxhcmdlQ2xpcFBvaW50KGNlbnRyb2lkWCwgY2VudHJvaWRZLCB4LCB5KSB7XG4gIHZhciBkWCA9IHggLSBjZW50cm9pZFg7XG4gIHZhciBkWSA9IHkgLSBjZW50cm9pZFk7XG4gIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkWCAqIGRYICsgZFkgKiBkWSk7XG4gIHJldHVybiBbTWF0aC5yb3VuZCh4ICsgZFggLyBkaXN0YW5jZSksIE1hdGgucm91bmQoeSArIGRZIC8gZGlzdGFuY2UpXTtcbn1cblxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNvdXJjZSBkYXRhIGludG8gbmV3IGNhbnZhcyBiYXNlZCBvbiB0aGUgdHJpYW5ndWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzb3VyY2VSZXNvbHV0aW9uIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHNvdXJjZUV4dGVudCBFeHRlbnQgb2YgdGhlIGRhdGEgc291cmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcmVwcm9qL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH0gdHJpYW5ndWxhdGlvblxuICogQ2FsY3VsYXRlZCB0cmlhbmd1bGF0aW9uLlxuICogQHBhcmFtIHtBcnJheTx7ZXh0ZW50OiBpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsXG4gKiAgICAgICAgICAgICAgICAgaW1hZ2U6IChIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnQpfT59IHNvdXJjZXNcbiAqIEFycmF5IG9mIHNvdXJjZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yZW5kZXJFZGdlcyBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcyB3aXRoIHJlcHJvamVjdGVkIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIod2lkdGgsIGhlaWdodCwgcGl4ZWxSYXRpbyxcbiAgc291cmNlUmVzb2x1dGlvbiwgc291cmNlRXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsXG4gIHRyaWFuZ3VsYXRpb24sIHNvdXJjZXMsIGd1dHRlciwgb3B0X3JlbmRlckVkZ2VzKSB7XG5cbiAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoTWF0aC5yb3VuZChwaXhlbFJhdGlvICogd2lkdGgpLFxuICAgIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGhlaWdodCkpO1xuXG4gIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcbiAgfVxuXG4gIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG5cbiAgdmFyIHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oc3JjLCBpLCBhcnIpIHtcbiAgICBleHRlbmQoc291cmNlRGF0YUV4dGVudCwgc3JjLmV4dGVudCk7XG4gIH0pO1xuXG4gIHZhciBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgdmFyIGNhbnZhc0hlaWdodEluVW5pdHMgPSBnZXRIZWlnaHQoc291cmNlRGF0YUV4dGVudCk7XG4gIHZhciBzdGl0Y2hDb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKFxuICAgIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGNhbnZhc1dpZHRoSW5Vbml0cyAvIHNvdXJjZVJlc29sdXRpb24pLFxuICAgIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGNhbnZhc0hlaWdodEluVW5pdHMgLyBzb3VyY2VSZXNvbHV0aW9uKSk7XG5cbiAgdmFyIHN0aXRjaFNjYWxlID0gcGl4ZWxSYXRpbyAvIHNvdXJjZVJlc29sdXRpb247XG5cbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHNyYywgaSwgYXJyKSB7XG4gICAgdmFyIHhQb3MgPSBzcmMuZXh0ZW50WzBdIC0gc291cmNlRGF0YUV4dGVudFswXTtcbiAgICB2YXIgeVBvcyA9IC0oc3JjLmV4dGVudFszXSAtIHNvdXJjZURhdGFFeHRlbnRbM10pO1xuICAgIHZhciBzcmNXaWR0aCA9IGdldFdpZHRoKHNyYy5leHRlbnQpO1xuICAgIHZhciBzcmNIZWlnaHQgPSBnZXRIZWlnaHQoc3JjLmV4dGVudCk7XG5cbiAgICBzdGl0Y2hDb250ZXh0LmRyYXdJbWFnZShcbiAgICAgIHNyYy5pbWFnZSxcbiAgICAgIGd1dHRlciwgZ3V0dGVyLFxuICAgICAgc3JjLmltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgc3JjLmltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsXG4gICAgICB4UG9zICogc3RpdGNoU2NhbGUsIHlQb3MgKiBzdGl0Y2hTY2FsZSxcbiAgICAgIHNyY1dpZHRoICogc3RpdGNoU2NhbGUsIHNyY0hlaWdodCAqIHN0aXRjaFNjYWxlKTtcbiAgfSk7XG5cbiAgdmFyIHRhcmdldFRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG5cbiAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAvKiBDYWxjdWxhdGUgYWZmaW5lIHRyYW5zZm9ybSAoc3JjIC0+IGRzdClcbiAgICAgKiBSZXN1bHRpbmcgbWF0cml4IGNhbiBiZSB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZGluYXRlXG4gICAgICogZnJvbSBgc291cmNlUHJvamVjdGlvbmAgdG8gZGVzdGluYXRpb24gcGl4ZWxzLlxuICAgICAqXG4gICAgICogVG8gb3B0aW1pemUgbnVtYmVyIG9mIGNvbnRleHQgY2FsbHMgYW5kIGluY3JlYXNlIG51bWVyaWNhbCBzdGFiaWxpdHksXG4gICAgICogd2UgYWxzbyBkbyB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgICogdHJhbnMoLXRvcExlZnRFeHRlbnRDb3JuZXIpLCBzY2FsZSgxIC8gdGFyZ2V0UmVzb2x1dGlvbiksIHNjYWxlKDEsIC0xKVxuICAgICAqIGhlcmUgYmVmb3JlIHNvbHZpbmcgdGhlIGxpbmVhciBzeXN0ZW0gc28gW3VpLCB2aV0gYXJlIHBpeGVsIGNvb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogU3JjIHBvaW50czogeGksIHlpXG4gICAgICogRHN0IHBvaW50czogdWksIHZpXG4gICAgICogQWZmaW5lIGNvZWZmaWNpZW50czogYWlqXG4gICAgICpcbiAgICAgKiB8IHgwIHkwIDEgIDAgIDAgMCB8ICAgfGEwMHwgICB8dTB8XG4gICAgICogfCB4MSB5MSAxICAwICAwIDAgfCAgIHxhMDF8ICAgfHUxfFxuICAgICAqIHwgeDIgeTIgMSAgMCAgMCAwIHwgeCB8YTAyfCA9IHx1MnxcbiAgICAgKiB8ICAwICAwIDAgeDAgeTAgMSB8ICAgfGExMHwgICB8djB8XG4gICAgICogfCAgMCAgMCAwIHgxIHkxIDEgfCAgIHxhMTF8ICAgfHYxfFxuICAgICAqIHwgIDAgIDAgMCB4MiB5MiAxIHwgICB8YTEyfCAgIHx2MnxcbiAgICAgKi9cbiAgICB2YXIgc291cmNlID0gdHJpYW5nbGUuc291cmNlO1xuICAgIHZhciB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgdmFyIHgwID0gc291cmNlWzBdWzBdLCB5MCA9IHNvdXJjZVswXVsxXTtcbiAgICB2YXIgeDEgPSBzb3VyY2VbMV1bMF0sIHkxID0gc291cmNlWzFdWzFdO1xuICAgIHZhciB4MiA9IHNvdXJjZVsyXVswXSwgeTIgPSBzb3VyY2VbMl1bMV07XG4gICAgdmFyIHUwID0gKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICB2YXIgdTEgPSAodGFyZ2V0WzFdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgIHZhciB2MSA9IC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgdmFyIHYyID0gLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG5cbiAgICAvLyBTaGlmdCBhbGwgdGhlIHNvdXJjZSBwb2ludHMgdG8gaW1wcm92ZSBudW1lcmljYWwgc3RhYmlsaXR5XG4gICAgLy8gb2YgYWxsIHRoZSBzdWJzZXF1ZW50IGNhbGN1bGF0aW9ucy4gVGhlIFt4MCwgeTBdIGlzIHVzZWQgaGVyZS5cbiAgICAvLyBUaGlzIGlzIGFsc28gdXNlZCB0byBzaW1wbGlmeSB0aGUgbGluZWFyIHN5c3RlbS5cbiAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRYID0geDA7XG4gICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WSA9IHkwO1xuICAgIHgwID0gMDtcbiAgICB5MCA9IDA7XG4gICAgeDEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgIHkxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICB4MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgeTIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuXG4gICAgdmFyIGF1Z21lbnRlZE1hdHJpeCA9IFtcbiAgICAgIFt4MSwgeTEsIDAsIDAsIHUxIC0gdTBdLFxuICAgICAgW3gyLCB5MiwgMCwgMCwgdTIgLSB1MF0sXG4gICAgICBbMCwgMCwgeDEsIHkxLCB2MSAtIHYwXSxcbiAgICAgIFswLCAwLCB4MiwgeTIsIHYyIC0gdjBdXG4gICAgXTtcbiAgICB2YXIgYWZmaW5lQ29lZnMgPSBzb2x2ZUxpbmVhclN5c3RlbShhdWdtZW50ZWRNYXRyaXgpO1xuICAgIGlmICghYWZmaW5lQ29lZnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIHZhciBjZW50cm9pZFggPSAodTAgKyB1MSArIHUyKSAvIDM7XG4gICAgdmFyIGNlbnRyb2lkWSA9ICh2MCArIHYxICsgdjIpIC8gMztcbiAgICB2YXIgcDAgPSBlbmxhcmdlQ2xpcFBvaW50KGNlbnRyb2lkWCwgY2VudHJvaWRZLCB1MCwgdjApO1xuICAgIHZhciBwMSA9IGVubGFyZ2VDbGlwUG9pbnQoY2VudHJvaWRYLCBjZW50cm9pZFksIHUxLCB2MSk7XG4gICAgdmFyIHAyID0gZW5sYXJnZUNsaXBQb2ludChjZW50cm9pZFgsIGNlbnRyb2lkWSwgdTIsIHYyKTtcblxuICAgIGNvbnRleHQubW92ZVRvKHAxWzBdLCBwMVsxXSk7XG4gICAgY29udGV4dC5saW5lVG8ocDBbMF0sIHAwWzFdKTtcbiAgICBjb250ZXh0LmxpbmVUbyhwMlswXSwgcDJbMV0pO1xuICAgIGNvbnRleHQuY2xpcCgpO1xuXG4gICAgY29udGV4dC50cmFuc2Zvcm0oXG4gICAgICBhZmZpbmVDb2Vmc1swXSwgYWZmaW5lQ29lZnNbMl0sIGFmZmluZUNvZWZzWzFdLCBhZmZpbmVDb2Vmc1szXSwgdTAsIHYwKTtcblxuICAgIGNvbnRleHQudHJhbnNsYXRlKHNvdXJjZURhdGFFeHRlbnRbMF0gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFgsXG4gICAgICBzb3VyY2VEYXRhRXh0ZW50WzNdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRZKTtcblxuICAgIGNvbnRleHQuc2NhbGUoc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8sXG4gICAgICAtc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8pO1xuXG4gICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICB9KTtcblxuICBpZiAob3B0X3JlbmRlckVkZ2VzKSB7XG4gICAgY29udGV4dC5zYXZlKCk7XG5cbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG5cbiAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24odHJpYW5nbGUsIGksIGFycikge1xuICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgIHZhciB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICB2YXIgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcblxuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH0pO1xuXG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2ouanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9Ucmlhbmd1bGF0aW9uXG4gKi9cbmltcG9ydCB7Ym91bmRpbmdFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRDb29yZGluYXRlLCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCxcbiAgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIGdldFdpZHRoLCBpbnRlcnNlY3RzfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHtnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuXG5cbi8qKlxuICogU2luZ2xlIHRyaWFuZ2xlOyBjb25zaXN0cyBvZiAzIHNvdXJjZSBwb2ludHMgYW5kIDMgdGFyZ2V0IHBvaW50cy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRyaWFuZ2xlXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IHNvdXJjZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSB0YXJnZXRcbiAqL1xuXG5cbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2Ygc3ViZGl2aXNpb24gc3RlcHMgZHVyaW5nIHJhc3RlciByZXByb2plY3Rpb24gdHJpYW5ndWxhdGlvbi5cbiAqIFByZXZlbnRzIGhpZ2ggbWVtb3J5IHVzYWdlIGFuZCBsYXJnZSBudW1iZXIgb2YgcHJvajQgY2FsbHMgKGZvciBjZXJ0YWluXG4gKiB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFyZWFzKS4gQXQgbW9zdCBgMiooMl50aGlzKWAgdHJpYW5nbGVzIGFyZSBjcmVhdGVkIGZvclxuICogZWFjaCB0cmlhbmd1bGF0ZWQgZXh0ZW50ICh0aWxlL2ltYWdlKS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfU1VCRElWSVNJT04gPSAxMDtcblxuXG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCBzaXplIG9mIHRyaWFuZ2xlIHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoLiBXaGVuIHRyYW5zZm9ybWluZ1xuICogY29ybmVycyBvZiB3b3JsZCBleHRlbnQgYmV0d2VlbiBjZXJ0YWluIHByb2plY3Rpb25zLCB0aGUgcmVzdWx0aW5nXG4gKiB0cmlhbmd1bGF0aW9uIHNlZW1zIHRvIGhhdmUgemVybyBlcnJvciBhbmQgbm8gc3ViZGl2aXNpb24gaXMgcGVyZm9ybWVkLiBJZlxuICogdGhlIHRyaWFuZ2xlIHdpZHRoIGlzIG1vcmUgdGhhbiB0aGlzIChyZWxhdGl2ZSB0byB3b3JsZCB3aWR0aDsgMC0xKSxcbiAqIHN1YmRpdmlzb24gaXMgZm9yY2VkICh1cCB0byBgTUFYX1NVQkRJVklTSU9OYCkuIERlZmF1bHQgaXMgYDAuMjVgLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9UUklBTkdMRV9XSURUSCA9IDAuMjU7XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbnZhciBUcmlhbmd1bGF0aW9uID0gZnVuY3Rpb24gVHJpYW5ndWxhdGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgZXJyb3JUaHJlc2hvbGQpIHtcblxuICAvKipcbiAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5zb3VyY2VQcm9qXyA9IHNvdXJjZVByb2o7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMudGFyZ2V0UHJval8gPSB0YXJnZXRQcm9qO1xuXG4gIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovXG4gIHZhciB0cmFuc2Zvcm1JbnZDYWNoZSA9IHt9O1xuICB2YXIgdHJhbnNmb3JtSW52ID0gZ2V0VHJhbnNmb3JtKHRoaXMudGFyZ2V0UHJval8sIHRoaXMuc291cmNlUHJval8pO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMudHJhbnNmb3JtSW52XyA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIga2V5ID0gY1swXSArICcvJyArIGNbMV07XG4gICAgaWYgKCF0cmFuc2Zvcm1JbnZDYWNoZVtrZXldKSB7XG4gICAgICB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldID0gdHJhbnNmb3JtSW52KGMpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtSW52Q2FjaGVba2V5XTtcbiAgfTtcblxuICAvKipcbiAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF8gPSBlcnJvclRocmVzaG9sZCAqIGVycm9yVGhyZXNob2xkO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7QXJyYXk8VHJpYW5nbGU+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy50cmlhbmdsZXNfID0gW107XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlhbmd1bGF0aW9uIGNyb3NzZXMgZWRnZSBvZiB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSBmYWxzZTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAhIW1heFNvdXJjZUV4dGVudCAmJlxuICAgICAgISF0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpICYmXG4gICAgICAoZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKSk7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkgP1xuICAgIGdldFdpZHRoKHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkpIDogbnVsbDtcblxuICAvKipcbiAgICogQHR5cGUgez9udW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnRhcmdldFdvcmxkV2lkdGhfID0gdGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSA/XG4gICAgZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSkgOiBudWxsO1xuXG4gIHZhciBkZXN0aW5hdGlvblRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG4gIHZhciBkZXN0aW5hdGlvblRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgdmFyIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodCh0YXJnZXRFeHRlbnQpO1xuICB2YXIgZGVzdGluYXRpb25Cb3R0b21MZWZ0ID0gZ2V0Qm90dG9tTGVmdCh0YXJnZXRFeHRlbnQpO1xuICB2YXIgc291cmNlVG9wTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcExlZnQpO1xuICB2YXIgc291cmNlVG9wUmlnaHQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Ub3BSaWdodCk7XG4gIHZhciBzb3VyY2VCb3R0b21SaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0KTtcbiAgdmFyIHNvdXJjZUJvdHRvbUxlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21MZWZ0KTtcblxuICB0aGlzLmFkZFF1YWRfKFxuICAgIGRlc3RpbmF0aW9uVG9wTGVmdCwgZGVzdGluYXRpb25Ub3BSaWdodCxcbiAgICBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0LCBkZXN0aW5hdGlvbkJvdHRvbUxlZnQsXG4gICAgc291cmNlVG9wTGVmdCwgc291cmNlVG9wUmlnaHQsIHNvdXJjZUJvdHRvbVJpZ2h0LCBzb3VyY2VCb3R0b21MZWZ0LFxuICAgIE1BWF9TVUJESVZJU0lPTik7XG5cbiAgaWYgKHRoaXMud3JhcHNYSW5Tb3VyY2VfKSB7XG4gICAgdmFyIGxlZnRCb3VuZCA9IEluZmluaXR5O1xuICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgIGxlZnRCb3VuZCA9IE1hdGgubWluKGxlZnRCb3VuZCxcbiAgICAgICAgdHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVswXSk7XG4gICAgfSk7XG5cbiAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAvLyAoaWYgdGhlIGRpc3RhbmNlIGlzIG1vcmUgdGhhbiBgd29ybGRXaWR0aCAvIDJgIGl0IGNhbiBiZSBjbG9zZXIuXG4gICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24odHJpYW5nbGUpIHtcbiAgICAgIGlmIChNYXRoLm1heCh0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSxcbiAgICAgICAgdHJpYW5nbGUuc291cmNlWzJdWzBdKSAtIGxlZnRCb3VuZCA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgIHZhciBuZXdUcmlhbmdsZSA9IFtbdHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMF1bMV1dLFxuICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVsxXV0sXG4gICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsyXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzFdXV07XG4gICAgICAgIGlmICgobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmQpID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICB9XG4gICAgICAgIGlmICgobmV3VHJpYW5nbGVbMV1bMF0gLSBsZWZ0Qm91bmQpID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICBuZXdUcmlhbmdsZVsxXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICB9XG4gICAgICAgIGlmICgobmV3VHJpYW5nbGVbMl1bMF0gLSBsZWZ0Qm91bmQpID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICBuZXdUcmlhbmdsZVsyXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmFyZWx5IChpZiB0aGUgZXh0ZW50IGNvbnRhaW5zIGJvdGggdGhlIGRhdGVsaW5lIGFuZCBwcmltZSBtZXJpZGlhbilcbiAgICAgICAgLy8gdGhlIHNoaWZ0IGNhbiBpbiB0dXJuIGJyZWFrIHNvbWUgdHJpYW5nbGVzLlxuICAgICAgICAvLyBEZXRlY3QgdGhpcyBoZXJlIGFuZCBkb24ndCBzaGlmdCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICB2YXIgbWluWCA9IE1hdGgubWluKFxuICAgICAgICAgIG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICB2YXIgbWF4WCA9IE1hdGgubWF4KFxuICAgICAgICAgIG5ld1RyaWFuZ2xlWzBdWzBdLCBuZXdUcmlhbmdsZVsxXVswXSwgbmV3VHJpYW5nbGVbMl1bMF0pO1xuICAgICAgICBpZiAoKG1heFggLSBtaW5YKSA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgdHJpYW5nbGUuc291cmNlID0gbmV3VHJpYW5nbGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcykpO1xuICB9XG5cbiAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbn07XG5cbi8qKlxuICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhIFRoZSB0YXJnZXQgYSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhU3JjIFRoZSBzb3VyY2UgYSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAqIEBwcml2YXRlXG4gKi9cblRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFRyaWFuZ2xlXyA9IGZ1bmN0aW9uIGFkZFRyaWFuZ2xlXyAoYSwgYiwgYywgYVNyYywgYlNyYywgY1NyYykge1xuICB0aGlzLnRyaWFuZ2xlc18ucHVzaCh7XG4gICAgc291cmNlOiBbYVNyYywgYlNyYywgY1NyY10sXG4gICAgdGFyZ2V0OiBbYSwgYiwgY11cbiAgfSk7XG59O1xuXG4vKipcbiAqIEFkZHMgcXVhZCAocG9pbnRzIGluIGNsb2NrLXdpc2Ugb3JkZXIpIHRvIHRoZSB0cmlhbmd1bGF0aW9uXG4gKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAqIFBlcmZvcm1zIHF1YWQgc3ViZGl2aXNpb24gaWYgbmVlZGVkIHRvIGluY3JlYXNlIHByZWNpc2lvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiIFRoZSB0YXJnZXQgYiBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhU3JjIFRoZSBzb3VyY2UgYSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkU3JjIFRoZSBzb3VyY2UgZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFN1YmRpdmlzaW9uIE1heGltYWwgYWxsb3dlZCBzdWJkaXZpc2lvbiBvZiB0aGUgcXVhZC5cbiAqIEBwcml2YXRlXG4gKi9cblRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFF1YWRfID0gZnVuY3Rpb24gYWRkUXVhZF8gKGEsIGIsIGMsIGQsIGFTcmMsIGJTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uKSB7XG5cbiAgdmFyIHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICB2YXIgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA/XG4gICAgZ2V0V2lkdGgoc291cmNlUXVhZEV4dGVudCkgLyB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIDogbnVsbDtcbiAgdmFyIHNvdXJjZVdvcmxkV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuc291cmNlV29ybGRXaWR0aF8pO1xuXG4gIC8vIHdoZW4gdGhlIHF1YWQgaXMgd3JhcHBlZCBpbiB0aGUgc291cmNlIHByb2plY3Rpb25cbiAgLy8gaXQgY292ZXJzIG1vc3Qgb2YgdGhlIHByb2plY3Rpb24gZXh0ZW50LCBidXQgbm90IGZ1bGx5XG4gIHZhciB3cmFwc1ggPSB0aGlzLnNvdXJjZVByb2pfLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA+IDAuNSAmJiBzb3VyY2VDb3ZlcmFnZVggPCAxO1xuXG4gIHZhciBuZWVkc1N1YmRpdmlzaW9uID0gZmFsc2U7XG5cbiAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgdmFyIHRhcmdldFF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYSwgYiwgYywgZF0pO1xuICAgICAgdmFyIHRhcmdldENvdmVyYWdlWCA9IGdldFdpZHRoKHRhcmdldFF1YWRFeHRlbnQpIC8gdGhpcy50YXJnZXRXb3JsZFdpZHRoXztcbiAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0YXJnZXRDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHxcbiAgICAgICAgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICB9XG4gICAgaWYgKCF3cmFwc1ggJiYgdGhpcy5zb3VyY2VQcm9qXy5pc0dsb2JhbCgpICYmIHNvdXJjZUNvdmVyYWdlWCkge1xuICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9IHNvdXJjZUNvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fFxuICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb247XG4gICAgfVxuICB9XG5cbiAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uICYmIHRoaXMubWF4U291cmNlRXh0ZW50Xykge1xuICAgIGlmICghaW50ZXJzZWN0cyhzb3VyY2VRdWFkRXh0ZW50LCB0aGlzLm1heFNvdXJjZUV4dGVudF8pKSB7XG4gICAgICAvLyB3aG9sZSBxdWFkIG91dHNpZGUgc291cmNlIHByb2plY3Rpb24gZXh0ZW50IC0+IGlnbm9yZVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbmVlZHNTdWJkaXZpc2lvbikge1xuICAgIGlmICghaXNGaW5pdGUoYVNyY1swXSkgfHwgIWlzRmluaXRlKGFTcmNbMV0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShiU3JjWzBdKSB8fCAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGNTcmNbMF0pIHx8ICFpc0Zpbml0ZShjU3JjWzFdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHwgIWlzRmluaXRlKGRTcmNbMV0pKSB7XG4gICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgIHZhciBjZW50ZXIgPSBbKGFbMF0gKyBjWzBdKSAvIDIsIChhWzFdICsgY1sxXSkgLyAyXTtcbiAgICAgIHZhciBjZW50ZXJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2VudGVyKTtcblxuICAgICAgdmFyIGR4O1xuICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICB2YXIgY2VudGVyU3JjRXN0aW1YID1cbiAgICAgICAgICAgIChtb2R1bG8oYVNyY1swXSwgc291cmNlV29ybGRXaWR0aCkgK1xuICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgLyAyO1xuICAgICAgICBkeCA9IGNlbnRlclNyY0VzdGltWCAtXG4gICAgICAgICAgICBtb2R1bG8oY2VudGVyU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICB9XG4gICAgICB2YXIgZHkgPSAoYVNyY1sxXSArIGNTcmNbMV0pIC8gMiAtIGNlbnRlclNyY1sxXTtcbiAgICAgIHZhciBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPiB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF87XG4gICAgfVxuICAgIGlmIChuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAvLyBzcGxpdCBob3Jpem9udGFsbHkgKHRvcCAmIGJvdHRvbSlcbiAgICAgICAgdmFyIGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgIHZhciBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgIHZhciBkYSA9IFsoZFswXSArIGFbMF0pIC8gMiwgKGRbMV0gKyBhWzFdKSAvIDJdO1xuICAgICAgICB2YXIgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuXG4gICAgICAgIHRoaXMuYWRkUXVhZF8oXG4gICAgICAgICAgYSwgYiwgYmMsIGRhLCBhU3JjLCBiU3JjLCBiY1NyYywgZGFTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgIHRoaXMuYWRkUXVhZF8oXG4gICAgICAgICAgZGEsIGJjLCBjLCBkLCBkYVNyYywgYmNTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzcGxpdCB2ZXJ0aWNhbGx5IChsZWZ0ICYgcmlnaHQpXG4gICAgICAgIHZhciBhYiA9IFsoYVswXSArIGJbMF0pIC8gMiwgKGFbMV0gKyBiWzFdKSAvIDJdO1xuICAgICAgICB2YXIgYWJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYWIpO1xuICAgICAgICB2YXIgY2QgPSBbKGNbMF0gKyBkWzBdKSAvIDIsIChjWzFdICsgZFsxXSkgLyAyXTtcbiAgICAgICAgdmFyIGNkU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGNkKTtcblxuICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgIGEsIGFiLCBjZCwgZCwgYVNyYywgYWJTcmMsIGNkU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgIGFiLCBiLCBjLCBjZCwgYWJTcmMsIGJTcmMsIGNTcmMsIGNkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICh3cmFwc1gpIHtcbiAgICBpZiAoIXRoaXMuY2FuV3JhcFhJblNvdXJjZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy53cmFwc1hJblNvdXJjZV8gPSB0cnVlO1xuICB9XG5cbiAgdGhpcy5hZGRUcmlhbmdsZV8oYSwgYywgZCwgYVNyYywgY1NyYywgZFNyYyk7XG4gIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGIsIGMsIGFTcmMsIGJTcmMsIGNTcmMpO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIGV4dGVudCBvZiB0aGUgJ3NvdXJjZScgY29vcmRpbmF0ZXMgZnJvbSBhbGwgdGhlIHRyaWFuZ2xlcy5cbiAqXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBDYWxjdWxhdGVkIGV4dGVudC5cbiAqL1xuVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlU291cmNlRXh0ZW50ID0gZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlRXh0ZW50ICgpIHtcbiAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG5cbiAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24odHJpYW5nbGUsIGksIGFycikge1xuICAgIHZhciBzcmMgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1swXSk7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1sxXSk7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1syXSk7XG4gIH0pO1xuXG4gIHJldHVybiBleHRlbnQ7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge0FycmF5PFRyaWFuZ2xlPn0gQXJyYXkgb2YgdGhlIGNhbGN1bGF0ZWQgdHJpYW5nbGVzLlxuICovXG5Ucmlhbmd1bGF0aW9uLnByb3RvdHlwZS5nZXRUcmlhbmdsZXMgPSBmdW5jdGlvbiBnZXRUcmlhbmdsZXMgKCkge1xuICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVHJpYW5ndWxhdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJpYW5ndWxhdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RpbGVcbiAqL1xuaW1wb3J0IHtFUlJPUl9USFJFU0hPTER9IGZyb20gJy4vY29tbW9uLmpzJztcblxuaW1wb3J0IFRpbGUgZnJvbSAnLi4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2dldEFyZWEsIGdldENlbnRlciwgZ2V0SW50ZXJzZWN0aW9ufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQge2NhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24sIHJlbmRlciBhcyByZW5kZXJSZXByb2plY3RlZH0gZnJvbSAnLi4vcmVwcm9qLmpzJztcbmltcG9ydCBUcmlhbmd1bGF0aW9uIGZyb20gJy4vVHJpYW5ndWxhdGlvbi5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyKSA6IGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gRnVuY3Rpb25UeXBlXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENsYXNzIGVuY2Fwc3VsYXRpbmcgc2luZ2xlIHJlcHJvamVjdGVkIHRpbGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZUltYWdlflRpbGVJbWFnZX0uXG4gKlxuICovXG52YXIgUmVwcm9qVGlsZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFRpbGUpIHtcbiAgZnVuY3Rpb24gUmVwcm9qVGlsZShcbiAgICBzb3VyY2VQcm9qLFxuICAgIHNvdXJjZVRpbGVHcmlkLFxuICAgIHRhcmdldFByb2osXG4gICAgdGFyZ2V0VGlsZUdyaWQsXG4gICAgdGlsZUNvb3JkLFxuICAgIHdyYXBwZWRUaWxlQ29vcmQsXG4gICAgcGl4ZWxSYXRpbyxcbiAgICBndXR0ZXIsXG4gICAgZ2V0VGlsZUZ1bmN0aW9uLFxuICAgIG9wdF9lcnJvclRocmVzaG9sZCxcbiAgICBvcHRfcmVuZGVyRWRnZXNcbiAgKSB7XG4gICAgVGlsZS5jYWxsKHRoaXMsIHRpbGVDb29yZCwgVGlsZVN0YXRlLklETEUpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlckVkZ2VzXyA9IG9wdF9yZW5kZXJFZGdlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3JlbmRlckVkZ2VzIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jYW52YXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VUaWxlR3JpZF8gPSBzb3VyY2VUaWxlR3JpZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gICAgICovXG4gICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkXyA9IHdyYXBwZWRUaWxlQ29vcmQgPyB3cmFwcGVkVGlsZUNvb3JkIDogdGlsZUNvb3JkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VUaWxlc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlWl8gPSAwO1xuXG4gICAgdmFyIHRhcmdldEV4dGVudCA9IHRhcmdldFRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aGlzLndyYXBwZWRUaWxlQ29vcmRfKTtcbiAgICB2YXIgbWF4VGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIG1heFNvdXJjZUV4dGVudCA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuXG4gICAgdmFyIGxpbWl0ZWRUYXJnZXRFeHRlbnQgPSBtYXhUYXJnZXRFeHRlbnQgP1xuICAgICAgZ2V0SW50ZXJzZWN0aW9uKHRhcmdldEV4dGVudCwgbWF4VGFyZ2V0RXh0ZW50KSA6IHRhcmdldEV4dGVudDtcblxuICAgIGlmIChnZXRBcmVhKGxpbWl0ZWRUYXJnZXRFeHRlbnQpID09PSAwKSB7XG4gICAgICAvLyBUaWxlIGlzIGNvbXBsZXRlbHkgb3V0c2lkZSByYW5nZSAtPiBFTVBUWVxuICAgICAgLy8gVE9ETzogaXMgaXQgYWN0dWFsbHkgY29ycmVjdCB0aGF0IHRoZSBzb3VyY2UgZXZlbiBjcmVhdGVzIHRoZSB0aWxlID9cbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZVByb2pFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgIGlmIChzb3VyY2VQcm9qRXh0ZW50KSB7XG4gICAgICBpZiAoIW1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qRXh0ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKG1heFNvdXJjZUV4dGVudCwgc291cmNlUHJvakV4dGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKFxuICAgICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXSk7XG5cbiAgICB2YXIgdGFyZ2V0Q2VudGVyID0gZ2V0Q2VudGVyKGxpbWl0ZWRUYXJnZXRFeHRlbnQpO1xuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihcbiAgICAgIHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbik7XG5cbiAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgLy8gaW52YWxpZCBzb3VyY2VSZXNvbHV0aW9uIC0+IEVNUFRZXG4gICAgICAvLyBwcm9iYWJseSBlZGdlcyBvZiB0aGUgcHJvamVjdGlvbnMgd2hlbiBubyBleHRlbnQgaXMgZGVmaW5lZFxuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXJyb3JUaHJlc2hvbGRJblBpeGVscyA9IG9wdF9lcnJvclRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdF9lcnJvclRocmVzaG9sZCA6IEVSUk9SX1RIUkVTSE9MRDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFpbXBvcnQoXCIuL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnRyaWFuZ3VsYXRpb25fID0gbmV3IFRyaWFuZ3VsYXRpb24oXG4gICAgICBzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBsaW1pdGVkVGFyZ2V0RXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQsXG4gICAgICBzb3VyY2VSZXNvbHV0aW9uICogZXJyb3JUaHJlc2hvbGRJblBpeGVscyk7XG5cbiAgICBpZiAodGhpcy50cmlhbmd1bGF0aW9uXy5nZXRUcmlhbmdsZXMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIG5vIHZhbGlkIHRyaWFuZ2xlcyAtPiBFTVBUWVxuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgdmFyIHNvdXJjZUV4dGVudCA9IHRoaXMudHJpYW5ndWxhdGlvbl8uY2FsY3VsYXRlU291cmNlRXh0ZW50KCk7XG5cbiAgICBpZiAobWF4U291cmNlRXh0ZW50KSB7XG4gICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKFxuICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICBzb3VyY2VFeHRlbnRbM10gPSBjbGFtcChcbiAgICAgICAgICBzb3VyY2VFeHRlbnRbM10sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihzb3VyY2VFeHRlbnQsIG1heFNvdXJjZUV4dGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFnZXRBcmVhKHNvdXJjZUV4dGVudCkpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzb3VyY2VSYW5nZSA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooXG4gICAgICAgIHNvdXJjZUV4dGVudCwgdGhpcy5zb3VyY2VaXyk7XG5cbiAgICAgIGZvciAodmFyIHNyY1ggPSBzb3VyY2VSYW5nZS5taW5YOyBzcmNYIDw9IHNvdXJjZVJhbmdlLm1heFg7IHNyY1grKykge1xuICAgICAgICBmb3IgKHZhciBzcmNZID0gc291cmNlUmFuZ2UubWluWTsgc3JjWSA8PSBzb3VyY2VSYW5nZS5tYXhZOyBzcmNZKyspIHtcbiAgICAgICAgICB2YXIgdGlsZSA9IGdldFRpbGVGdW5jdGlvbih0aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18ucHVzaCh0aWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICggVGlsZSApIFJlcHJvalRpbGUuX19wcm90b19fID0gVGlsZTtcbiAgUmVwcm9qVGlsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBUaWxlICYmIFRpbGUucHJvdG90eXBlICk7XG4gIFJlcHJvalRpbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVwcm9qVGlsZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFJlcHJvalRpbGUucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgIHRoaXMudW5saXN0ZW5Tb3VyY2VzXygpO1xuICAgIH1cbiAgICBUaWxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBIVE1MIENhbnZhcyBlbGVtZW50IGZvciB0aGlzIHRpbGUuXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAqL1xuICBSZXByb2pUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5jYW52YXNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgUmVwcm9qVGlsZS5wcm90b3R5cGUucmVwcm9qZWN0XyA9IGZ1bmN0aW9uIHJlcHJvamVjdF8gKCkge1xuICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbih0aWxlLCBpLCBhcnIpIHtcbiAgICAgIGlmICh0aWxlICYmIHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIHNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgZXh0ZW50OiB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgeiA9IHRoaXMud3JhcHBlZFRpbGVDb29yZF9bMF07XG4gICAgICB2YXIgc2l6ZSA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVTaXplKHopO1xuICAgICAgdmFyIHdpZHRoID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMF07XG4gICAgICB2YXIgaGVpZ2h0ID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMV07XG4gICAgICB2YXIgdGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFJlc29sdXRpb24oeik7XG4gICAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFJlc29sdXRpb24odGhpcy5zb3VyY2VaXyk7XG5cbiAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQoXG4gICAgICAgIHRoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgdGhpcy5jYW52YXNfID0gcmVuZGVyUmVwcm9qZWN0ZWQod2lkdGgsIGhlaWdodCwgdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiwgdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCksXG4gICAgICAgIHRhcmdldFJlc29sdXRpb24sIHRhcmdldEV4dGVudCwgdGhpcy50cmlhbmd1bGF0aW9uXywgc291cmNlcyxcbiAgICAgICAgdGhpcy5ndXR0ZXJfLCB0aGlzLnJlbmRlckVkZ2VzXyk7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFJlcHJvalRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG5cbiAgICAgIHZhciBsZWZ0VG9Mb2FkID0gMDtcblxuICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbih0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLklETEUgfHwgc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICBsZWZ0VG9Mb2FkKys7XG5cbiAgICAgICAgICB2YXIgc291cmNlTGlzdGVuS2V5ID0gbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5KTtcbiAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkLS07XG4gICAgICAgICAgICAgICAgaWYgKGxlZnRUb0xvYWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudW5saXN0ZW5Tb3VyY2VzXygpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXByb2plY3RfKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLnB1c2goc291cmNlTGlzdGVuS2V5KTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbih0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChsZWZ0VG9Mb2FkID09PSAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5yZXByb2plY3RfLmJpbmQodGhpcyksIDApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFJlcHJvalRpbGUucHJvdG90eXBlLnVubGlzdGVuU291cmNlc18gPSBmdW5jdGlvbiB1bmxpc3RlblNvdXJjZXNfICgpIHtcbiAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIFJlcHJvalRpbGU7XG59KFRpbGUpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBSZXByb2pUaWxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxldXJsZnVuY3Rpb25cbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7aGFzaCBhcyB0aWxlQ29vcmRIYXNofSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGVtcGxhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgdGlsZUdyaWQpIHtcbiAgdmFyIHpSZWdFeCA9IC9cXHt6XFx9L2c7XG4gIHZhciB4UmVnRXggPSAvXFx7eFxcfS9nO1xuICB2YXIgeVJlZ0V4ID0gL1xce3lcXH0vZztcbiAgdmFyIGRhc2hZUmVnRXggPSAvXFx7LXlcXH0vZztcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSh6UmVnRXgsIHRpbGVDb29yZFswXS50b1N0cmluZygpKVxuICAgICAgICAgIC5yZXBsYWNlKHhSZWdFeCwgdGlsZUNvb3JkWzFdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgLnJlcGxhY2UoeVJlZ0V4LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB5ID0gLXRpbGVDb29yZFsyXSAtIDE7XG4gICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnJlcGxhY2UoZGFzaFlSZWdFeCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgICAgICAgICBhc3NlcnQocmFuZ2UsIDU1KTsgLy8gVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnRcbiAgICAgICAgICAgIHZhciB5ID0gcmFuZ2UuZ2V0SGVpZ2h0KCkgKyB0aWxlQ29vcmRbMl07XG4gICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdGVtcGxhdGVzIFRlbXBsYXRlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlcyh0ZW1wbGF0ZXMsIHRpbGVHcmlkKSB7XG4gIHZhciBsZW4gPSB0ZW1wbGF0ZXMubGVuZ3RoO1xuICB2YXIgdGlsZVVybEZ1bmN0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdGlsZVVybEZ1bmN0aW9uc1tpXSA9IGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZXNbaV0sIHRpbGVHcmlkKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucyk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbj59IHRpbGVVcmxGdW5jdGlvbnMgVGlsZSBVUkwgRnVuY3Rpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpIHtcbiAgaWYgKHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbMF07XG4gIH1cbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaCA9IHRpbGVDb29yZEhhc2godGlsZUNvb3JkKTtcbiAgICAgICAgdmFyIGluZGV4ID0gbW9kdWxvKGgsIHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbaW5kZXhdKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudWxsVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBcnJheSBvZiB1cmxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVXJsKHVybCkge1xuICB2YXIgdXJscyA9IFtdO1xuICB2YXIgbWF0Y2ggPSAvXFx7KFthLXpdKS0oW2Etel0pXFx9Ly5leGVjKHVybCk7XG4gIGlmIChtYXRjaCkge1xuICAgIC8vIGNoYXIgcmFuZ2VcbiAgICB2YXIgc3RhcnRDaGFyQ29kZSA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIGNoYXJDb2RlO1xuICAgIGZvciAoY2hhckNvZGUgPSBzdGFydENoYXJDb2RlOyBjaGFyQ29kZSA8PSBzdG9wQ2hhckNvZGU7ICsrY2hhckNvZGUpIHtcbiAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybHM7XG4gIH1cbiAgbWF0Y2ggPSBtYXRjaCA9IC9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKHVybCk7XG4gIGlmIChtYXRjaCkge1xuICAgIC8vIG51bWJlciByYW5nZVxuICAgIHZhciBzdG9wID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICBmb3IgKHZhciBpID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTsgaSA8PSBzdG9wOyBpKyspIHtcbiAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgaS50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIHJldHVybiB1cmxzO1xuICB9XG4gIHVybHMucHVzaCh1cmwpO1xuICByZXR1cm4gdXJscztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZXVybGZ1bmN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU291cmNlXG4gKi9cbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7Z2V0IGFzIGdldFByb2plY3Rpb259IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4vU3RhdGUuanMnO1xuXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlXG4gKiBhdHRyaWJ1dGlvbnMuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlKTogKHN0cmluZ3xBcnJheTxzdHJpbmc+KX0gQXR0cmlidXRpb25cbiAqL1xuXG5cbi8qKlxuICogQSB0eXBlIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhdHRyaWJ1dGlvbiBpbmZvcm1hdGlvbiBmb3IgZGF0YSBzb3VyY2VzLlxuICpcbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyXG4gKiAqIGEgc2ltcGxlIHN0cmluZyAoZS5nLiBgJ8KpIEFjbWUgSW5jLidgKVxuICogKiBhbiBhcnJheSBvZiBzaW1wbGUgc3RyaW5ncyAoZS5nLiBgWyfCqSBBY21lIEluYy4nLCAnwqkgQmFjbWUgSW5jLiddYClcbiAqICogYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyAoYHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn1gKVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8QXJyYXk8c3RyaW5nPnxBdHRyaWJ1dGlvbn0gQXR0cmlidXRpb25MaWtlXG4gKi9cblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvblxuICogQHByb3BlcnR5IHtTb3VyY2VTdGF0ZX0gW3N0YXRlPSdyZWFkeSddXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV1cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllcn0gc291cmNlcy5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBTb3VyY2Uob3B0aW9ucykge1xuXG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5wcm9qZWN0aW9uXyA9IGdldFByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9BdHRyaWJ1dGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhvcHRpb25zLmF0dHJpYnV0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfID0gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBzb3VyY2UgaXMgY3VycmVudGx5IGxvYWRpbmcgZGF0YS4gU291cmNlcyB0aGF0IGRlZmVyIGxvYWRpbmcgdG8gdGhlXG4gICAgICogbWFwJ3MgdGlsZSBxdWV1ZSBuZXZlciBzZXQgdGhpcyB0byBgdHJ1ZWAuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtTb3VyY2VTdGF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXRlXyA9IG9wdGlvbnMuc3RhdGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnN0YXRlIDogU291cmNlU3RhdGUuUkVBRFk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBTb3VyY2UuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNvdXJjZTtcblxuICAvKipcbiAgICogR2V0IHRoZSBhdHRyaWJ1dGlvbiBmdW5jdGlvbiBmb3IgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbiBmdW5jdGlvbi5cbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBBYXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUgPSBmdW5jdGlvbiBnZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHByb2plY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFByb2plY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFJlc29sdXRpb25zLlxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25zICgpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlLCBzZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU3RhdGV+U3RhdGV9IGZvciBwb3NzaWJsZSBzdGF0ZXMuXG4gICAqIEByZXR1cm4ge1NvdXJjZVN0YXRlfSBTdGF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldFdyYXBYID0gZnVuY3Rpb24gZ2V0V3JhcFggKCkge1xuICAgIHJldHVybiB0aGlzLndyYXBYXztcbiAgfTtcblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBzb3VyY2UgYW5kIGZpbmFsbHkgZGlzcGF0Y2hlcyBhICdjaGFuZ2UnIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoICgpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBhdHRyaWJ1dGlvbnMgb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbnMgQXR0cmlidXRpb25zLlxuICAgKiAgICAgQ2FuIGJlIHBhc3NlZCBhcyBgc3RyaW5nYCwgYEFycmF5PHN0cmluZz5gLCBge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufWAsXG4gICAqICAgICBvciBgdW5kZWZpbmVkYC5cbiAgICogQGFwaVxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGlvbnMgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGlvbnMgKGF0dHJpYnV0aW9ucykge1xuICAgIHRoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9ucyk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtTb3VyY2VTdGF0ZX0gc3RhdGUgU3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZSAoc3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIHJldHVybiBTb3VyY2U7XG59KEJhc2VPYmplY3QpKTtcblxuXG4vKipcbiAqIFR1cm5zIHRoZSBhdHRyaWJ1dGlvbnMgb3B0aW9uIGludG8gYW4gYXR0cmlidXRpb25zIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbkxpa2UgVGhlIGF0dHJpYnV0aW9uIG9wdGlvbi5cbiAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQW4gYXR0cmlidXRpb24gZnVuY3Rpb24gKG9yIG51bGwpLlxuICovXG5mdW5jdGlvbiBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgaWYgKCFhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgfTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRpb25MaWtlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihmcmFtZVN0YXRlKSB7XG4gICAgcmV0dXJuIFthdHRyaWJ1dGlvbkxpa2VdO1xuICB9O1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQge0RFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgVGlsZVJhbmdlLCB7Y3JlYXRlT3JVcGRhdGUgYXMgY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2V9IGZyb20gJy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQge2lzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4uL3NpemUuanMnO1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAqL1xudmFyIHRtcFRpbGVDb29yZCA9IFswLCAwLCAwXTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlfSBzb3VyY2VzLiBXaGVuIG5vIGBvcmlnaW5gIG9yXG4gKiBgb3JpZ2luc2AgYXJlIGNvbmZpZ3VyZWQsIHRoZSBgb3JpZ2luYCB3aWxsIGJlIHNldCB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcmlnaW5dIFRoZSB0aWxlIGdyaWQgb3JpZ2luLCBpLmUuIHdoZXJlIHRoZSBgeGBcbiAqIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCkuIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgdXB3YXJkcy4gSWYgbm90XG4gKiBzcGVjaWZpZWQsIGBleHRlbnRgIG9yIGBvcmlnaW5zYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3JpZ2luc10gVGlsZSBncmlkIG9yaWdpbnMsIGkuZS4gd2hlcmVcbiAqIHRoZSBgeGAgYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKSwgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogb3JpZ2luLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIHVwd2FyZHMuIElmIG5vdCBzcGVjaWZpZWQsIGBleHRlbnRgIG9yXG4gKiBgb3JpZ2luYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuIFRoZSBhcnJheSBpbmRleCBvZiBlYWNoIHJlc29sdXRpb24gbmVlZHNcbiAqIHRvIG1hdGNoIHRoZSB6b29tIGxldmVsLiBUaGlzIG1lYW5zIHRoYXQgZXZlbiBpZiBhIGBtaW5ab29tYCBpcyBjb25maWd1cmVkLCB0aGUgcmVzb2x1dGlvbnNcbiAqIGFycmF5IHdpbGwgaGF2ZSBhIGxlbmd0aCBvZiBgbWF4Wm9vbSArIDFgLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbc2l6ZXNdIFNpemVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZS5cbiAqIERlZmF1bHQgaXMgYFsyNTYsIDI1Nl1gLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNldHRpbmcgdGhlIGdyaWQgcGF0dGVybiBmb3Igc291cmNlcyBhY2Nlc3NpbmcgdGlsZWQtaW1hZ2VcbiAqIHNlcnZlcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlR3JpZCA9IGZ1bmN0aW9uIFRpbGVHcmlkKG9wdGlvbnMpIHtcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAqL1xuICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gIGFzc2VydChpc1NvcnRlZCh0aGlzLnJlc29sdXRpb25zXywgZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBiIC0gYTtcbiAgfSwgdHJ1ZSksIDE3KTsgLy8gYHJlc29sdXRpb25zYCBtdXN0IGJlIHNvcnRlZCBpbiBkZXNjZW5kaW5nIG9yZGVyXG5cblxuICAvLyBjaGVjayBpZiB3ZSd2ZSBnb3QgYSBjb25zaXN0ZW50IHpvb20gZmFjdG9yIGFuZCBvcmlnaW5cbiAgdmFyIHpvb21GYWN0b3I7XG4gIGlmICghb3B0aW9ucy5vcmlnaW5zKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICB6b29tRmFjdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAqL1xuICB0aGlzLnpvb21GYWN0b3JfID0gem9vbUZhY3RvcjtcblxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1heFpvb20gPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgKi9cbiAgdGhpcy5vcmlnaW5fID0gb3B0aW9ucy5vcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3JpZ2luIDogbnVsbDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59XG4gICAqL1xuICB0aGlzLm9yaWdpbnNfID0gbnVsbDtcbiAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICBhc3NlcnQodGhpcy5vcmlnaW5zXy5sZW5ndGggPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoLFxuICAgICAgMjApOyAvLyBOdW1iZXIgb2YgYG9yaWdpbnNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgfVxuXG4gIHZhciBleHRlbnQgPSBvcHRpb25zLmV4dGVudDtcblxuICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICF0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pIHtcbiAgICB0aGlzLm9yaWdpbl8gPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gIH1cblxuICBhc3NlcnQoXG4gICAgKCF0aGlzLm9yaWdpbl8gJiYgdGhpcy5vcmlnaW5zXykgfHwgKHRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXyksXG4gICAgMTgpOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAqL1xuICB0aGlzLnRpbGVTaXplc18gPSBudWxsO1xuICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGlsZVNpemVzXyA9IG9wdGlvbnMudGlsZVNpemVzO1xuICAgIGFzc2VydCh0aGlzLnRpbGVTaXplc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCxcbiAgICAgIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICovXG4gIHRoaXMudGlsZVNpemVfID0gb3B0aW9ucy50aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnRpbGVTaXplIDpcbiAgICAhdGhpcy50aWxlU2l6ZXNfID8gREVGQVVMVF9USUxFX1NJWkUgOiBudWxsO1xuICBhc3NlcnQoXG4gICAgKCF0aGlzLnRpbGVTaXplXyAmJiB0aGlzLnRpbGVTaXplc18pIHx8XG4gICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksXG4gICAgMjIpOyAvLyBFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAqL1xuICB0aGlzLmV4dGVudF8gPSBleHRlbnQgIT09IHVuZGVmaW5lZCA/IGV4dGVudCA6IG51bGw7XG5cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICovXG4gIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gbnVsbDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICovXG4gIHRoaXMudG1wU2l6ZV8gPSBbMCwgMF07XG5cbiAgaWYgKG9wdGlvbnMuc2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24oc2l6ZSwgeikge1xuICAgICAgdmFyIHRpbGVSYW5nZSA9IG5ldyBUaWxlUmFuZ2UoXG4gICAgICAgIE1hdGgubWluKDAsIHNpemVbMF0pLCBNYXRoLm1heChzaXplWzBdIC0gMSwgLTEpLFxuICAgICAgICBNYXRoLm1pbigwLCBzaXplWzFdKSwgTWF0aC5tYXgoc2l6ZVsxXSAtIDEsIC0xKSk7XG4gICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgIH0sIHRoaXMpO1xuICB9IGVsc2UgaWYgKGV4dGVudCkge1xuICAgIHRoaXMuY2FsY3VsYXRlVGlsZVJhbmdlc18oZXh0ZW50KTtcbiAgfVxuXG59O1xuXG4vKipcbiAqIENhbGwgYSBmdW5jdGlvbiB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIGV4dGVudCBhbmQgem9vbSBsZXZlbC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gem9vbSBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQpfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmZvckVhY2hUaWxlQ29vcmQgPSBmdW5jdGlvbiBmb3JFYWNoVGlsZUNvb3JkIChleHRlbnQsIHpvb20sIGNhbGxiYWNrKSB7XG4gIHZhciB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6b29tKTtcbiAgZm9yICh2YXIgaSA9IHRpbGVSYW5nZS5taW5YLCBpaSA9IHRpbGVSYW5nZS5tYXhYOyBpIDw9IGlpOyArK2kpIHtcbiAgICBmb3IgKHZhciBqID0gdGlsZVJhbmdlLm1pblksIGpqID0gdGlsZVJhbmdlLm1heFk7IGogPD0gamo7ICsraikge1xuICAgICAgY2FsbGJhY2soW3pvb20sIGksIGpdKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBULCBudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0ge1Q9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIHVzZSBhcyBgdGhpc2AgaW4gYGNhbGxiYWNrYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ9fSBvcHRfdGlsZVJhbmdlIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlID0gZnVuY3Rpb24gZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSAodGlsZUNvb3JkLCBjYWxsYmFjaywgb3B0X3RoaXMsIG9wdF90aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgdmFyIHRpbGVSYW5nZSwgeCwgeTtcbiAgdmFyIHRpbGVDb29yZEV4dGVudCA9IG51bGw7XG4gIHZhciB6ID0gdGlsZUNvb3JkWzBdIC0gMTtcbiAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgIHkgPSB0aWxlQ29vcmRbMl07XG4gIH0gZWxzZSB7XG4gICAgdGlsZUNvb3JkRXh0ZW50ID0gdGhpcy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCBvcHRfZXh0ZW50KTtcbiAgfVxuICB3aGlsZSAoeiA+PSB0aGlzLm1pblpvb20pIHtcbiAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgeCA9IE1hdGguZmxvb3IoeCAvIDIpO1xuICAgICAgeSA9IE1hdGguZmxvb3IoeSAvIDIpO1xuICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIG9wdF90aWxlUmFuZ2UpO1xuICAgIH1cbiAgICBpZiAoY2FsbGJhY2suY2FsbChvcHRfdGhpcywgeiwgdGlsZVJhbmdlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC0tejtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZCwgaWYgaXQgd2FzIGNvbmZpZ3VyZWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiBnZXRFeHRlbnQgKCkge1xuICByZXR1cm4gdGhpcy5leHRlbnRfO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCB6b29tLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uIGdldE1heFpvb20gKCkge1xuICByZXR1cm4gdGhpcy5tYXhab29tO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbiB6b29tLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uIGdldE1pblpvb20gKCkge1xuICByZXR1cm4gdGhpcy5taW5ab29tO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IE9yaWdpbi5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldE9yaWdpbiA9IGZ1bmN0aW9uIGdldE9yaWdpbiAoeikge1xuICBpZiAodGhpcy5vcmlnaW5fKSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5vcmlnaW5zX1t6XTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb24gKHopIHtcbiAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgcmVzb2x1dGlvbnMgZm9yIHRoZSB0aWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucy5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbnMgKCkge1xuICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQ9fSBvcHRfdGlsZVJhbmdlIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UgPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSAodGlsZUNvb3JkLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gIGlmICh0aWxlQ29vcmRbMF0gPCB0aGlzLm1heFpvb20pIHtcbiAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgdmFyIG1pblggPSB0aWxlQ29vcmRbMV0gKiAyO1xuICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblggKyAxLCBtaW5ZLCBtaW5ZICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgfVxuICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIG9wdF9leHRlbnQpO1xuICAgIHJldHVybiB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooXG4gICAgICB0aWxlQ29vcmRFeHRlbnQsIHRpbGVDb29yZFswXSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGV4dGVudCBmb3IgYSB0aWxlIHJhbmdlLlxuICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUV4dGVudCA9IGZ1bmN0aW9uIGdldFRpbGVSYW5nZUV4dGVudCAoeiwgdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgdmFyIG1pblggPSBvcmlnaW5bMF0gKyB0aWxlUmFuZ2UubWluWCAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgdmFyIG1heFggPSBvcmlnaW5bMF0gKyAodGlsZVJhbmdlLm1heFggKyAxKSAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgdmFyIG1pblkgPSBvcmlnaW5bMV0gKyB0aWxlUmFuZ2UubWluWSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgdmFyIG1heFkgPSBvcmlnaW5bMV0gKyAodGlsZVJhbmdlLm1heFkgKyAxKSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpO1xufTtcblxuLyoqXG4gKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0PX0gb3B0X3RpbGVSYW5nZSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gVGlsZSByYW5nZS5cbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiBnZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaIChleHRlbnQsIHosIG9wdF90aWxlUmFuZ2UpIHtcbiAgdmFyIHRpbGVDb29yZCA9IHRtcFRpbGVDb29yZDtcbiAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFswXSwgZXh0ZW50WzFdLCB6LCBmYWxzZSwgdGlsZUNvb3JkKTtcbiAgdmFyIG1pblggPSB0aWxlQ29vcmRbMV07XG4gIHZhciBtaW5ZID0gdGlsZUNvb3JkWzJdO1xuICB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oZXh0ZW50WzJdLCBleHRlbnRbM10sIHosIHRydWUsIHRpbGVDb29yZCk7XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCB0aWxlQ29vcmRbMV0sIG1pblksIHRpbGVDb29yZFsyXSwgb3B0X3RpbGVSYW5nZSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDZW50ZXIgPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRDZW50ZXIgKHRpbGVDb29yZCkge1xuICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplXyk7XG4gIHJldHVybiBbXG4gICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgb3JpZ2luWzFdICsgKHRpbGVDb29yZFsyXSArIDAuNSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb25cbiAgXTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBleHRlbnQgb2YgYSB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50PX0gb3B0X2V4dGVudCBUZW1wb3JhcnkgZXh0ZW50IG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEV4dGVudCA9IGZ1bmN0aW9uIGdldFRpbGVDb29yZEV4dGVudCAodGlsZUNvb3JkLCBvcHRfZXh0ZW50KSB7XG4gIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgdmFyIG1pblggPSBvcmlnaW5bMF0gKyB0aWxlQ29vcmRbMV0gKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gIHZhciBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZUNvb3JkWzJdICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICB2YXIgbWF4WCA9IG1pblggKyB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gIHZhciBtYXhZID0gbWluWSArIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhlIGdpdmVuIG1hcCBjb29yZGluYXRlIGFuZCByZXNvbHV0aW9uLlRoaXNcbiAqIG1ldGhvZCBjb25zaWRlcnMgdGhhdCBjb29yZGluYXRlcyB0aGF0IGludGVyc2VjdCB0aWxlIGJvdW5kYXJpZXMgc2hvdWxkIGJlXG4gKiBhc3NpZ25lZCB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZD19IG9wdF90aWxlQ29vcmQgRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFJlc29sdXRpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIG9wdF90aWxlQ29vcmQpIHtcbiAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyhcbiAgICBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCByZXNvbHV0aW9uLCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG59O1xuXG4vKipcbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgdGhhdCBjb3JyZXNwb25kXG4gKiB0byBhbiBpbnRlZ2VyIHpvb20gbGV2ZWwuSW5zdGVhZCBjYWxsIHRoZSBgZ2V0VGlsZUNvb3JkRm9yWFlBbmRaX2AgbWV0aG9kLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uIChmb3IgYSBub24taW50ZWdlciB6b29tIGxldmVsKS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICogICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gKiAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwcml2YXRlXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuXG4gIHZhciBhZGp1c3RYID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAuNSA6IDA7XG4gIHZhciBhZGp1c3RZID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAgOiAwLjU7XG4gIHZhciB4RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKHggLSBvcmlnaW5bMF0pIC8gcmVzb2x1dGlvbiArIGFkanVzdFgpO1xuICB2YXIgeUZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh5IC0gb3JpZ2luWzFdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RZKTtcbiAgdmFyIHRpbGVDb29yZFggPSBzY2FsZSAqIHhGcm9tT3JpZ2luIC8gdGlsZVNpemVbMF07XG4gIHZhciB0aWxlQ29vcmRZID0gc2NhbGUgKiB5RnJvbU9yaWdpbiAvIHRpbGVTaXplWzFdO1xuXG4gIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgdGlsZUNvb3JkWCA9IE1hdGguY2VpbCh0aWxlQ29vcmRYKSAtIDE7XG4gICAgdGlsZUNvb3JkWSA9IE1hdGguY2VpbCh0aWxlQ29vcmRZKSAtIDE7XG4gIH0gZWxzZSB7XG4gICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgdGlsZUNvb3JkWSA9IE1hdGguZmxvb3IodGlsZUNvb3JkWSk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG59O1xuXG4vKipcbiAqIEFsdGhvdWdoIHRoZXJlIGlzIHJlcGV0aXRpb24gYmV0d2VlbiB0aGlzIG1ldGhvZCBhbmQgYGdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl9gLFxuICogdGhleSBzaG91bGQgaGF2ZSBzZXBhcmF0ZSBpbXBsZW1lbnRhdGlvbnMuVGhpcyBtZXRob2QgaXMgZm9yIGludGVnZXIgem9vbVxuICogbGV2ZWxzLlRoZSBvdGhlciBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyBjb3JyZXNwb25kaW5nXG4gKiB0byBub24taW50ZWdlciB6b29tIGxldmVscy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IE1hcCB4IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBNYXAgeSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gKiAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAqICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZD19IG9wdF90aWxlQ29vcmQgVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICogQHByaXZhdGVcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kWl8gPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfICh4LCB5LCB6LCByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5LCBvcHRfdGlsZUNvb3JkKSB7XG4gIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcblxuICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwIDogMC41O1xuICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigoeSAtIG9yaWdpblsxXSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gIHZhciB0aWxlQ29vcmRYID0geEZyb21PcmlnaW4gLyB0aWxlU2l6ZVswXTtcbiAgdmFyIHRpbGVDb29yZFkgPSB5RnJvbU9yaWdpbiAvIHRpbGVTaXplWzFdO1xuXG4gIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgdGlsZUNvb3JkWCA9IE1hdGguY2VpbCh0aWxlQ29vcmRYKSAtIDE7XG4gICAgdGlsZUNvb3JkWSA9IE1hdGguY2VpbCh0aWxlQ29vcmRZKSAtIDE7XG4gIH0gZWxzZSB7XG4gICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgdGlsZUNvb3JkWSA9IE1hdGguZmxvb3IodGlsZUNvb3JkWSk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG59O1xuXG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmRpbmF0ZSBnaXZlbiBhIG1hcCBjb29yZGluYXRlIGFuZCB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQ9fSBvcHRfdGlsZUNvb3JkIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaIChjb29yZGluYXRlLCB6LCBvcHRfdGlsZUNvb3JkKSB7XG4gIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oXG4gICAgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgeiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcmVzb2x1dGlvbi5cbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZFJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRUaWxlQ29vcmRSZXNvbHV0aW9uICh0aWxlQ29vcmQpIHtcbiAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3RpbGVDb29yZFswXV07XG59O1xuXG4vKipcbiAqIEdldCB0aGUgdGlsZSBzaXplIGZvciBhIHpvb20gbGV2ZWwuIFRoZSB0eXBlIG9mIHRoZSByZXR1cm4gdmFsdWUgbWF0Y2hlcyB0aGVcbiAqIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgdGhhdCB0aGUgdGlsZSBncmlkIHdhcyBjb25maWd1cmVkIHdpdGguIFRvIGFsd2F5c1xuICogZ2V0IGFuIGBpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemVgLCBydW4gdGhlIHJlc3VsdCB0aHJvdWdoIGBpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemUudG9TaXplKClgLlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEByZXR1cm4ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAqIEBhcGlcbiAqL1xuVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVTaXplID0gZnVuY3Rpb24gZ2V0VGlsZVNpemUgKHopIHtcbiAgaWYgKHRoaXMudGlsZVNpemVfKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZVNpemVfO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLnRpbGVTaXplc19bel07XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBFeHRlbnQgdGlsZSByYW5nZSBmb3IgdGhlIHNwZWNpZmllZCB6b29tIGxldmVsLlxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFRpbGVSYW5nZSA9IGZ1bmN0aW9uIGdldEZ1bGxUaWxlUmFuZ2UgKHopIHtcbiAgaWYgKCF0aGlzLmZ1bGxUaWxlUmFuZ2VzXykge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUaWxlUmFuZ2VzX1t6XTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICogICBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0XG4gKiAgIGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gRGVmYXVsdCBpcyAwLlxuICogQHJldHVybiB7bnVtYmVyfSBaLlxuICogQGFwaVxuICovXG5UaWxlR3JpZC5wcm90b3R5cGUuZ2V0WkZvclJlc29sdXRpb24gPSBmdW5jdGlvbiBnZXRaRm9yUmVzb2x1dGlvbiAocmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbikge1xuICB2YXIgeiA9IGxpbmVhckZpbmROZWFyZXN0KHRoaXMucmVzb2x1dGlvbnNfLCByZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uIHx8IDApO1xuICByZXR1cm4gY2xhbXAoeiwgdGhpcy5taW5ab29tLCB0aGlzLm1heFpvb20pO1xufTtcblxuLyoqXG4gKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAqIEBwcml2YXRlXG4gKi9cblRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIGNhbGN1bGF0ZVRpbGVSYW5nZXNfIChleHRlbnQpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgIGZ1bGxUaWxlUmFuZ2VzW3pdID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gIH1cbiAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBmdWxsVGlsZVJhbmdlcztcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgVGlsZUdyaWQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVHcmlkLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZFxuICovXG5pbXBvcnQge0RFRkFVTFRfTUFYX1pPT00sIERFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge3RvU2l6ZX0gZnJvbSAnLi9zaXplLmpzJztcbmltcG9ydCB7Y29udGFpbnNDb29yZGluYXRlLCBjcmVhdGVPclVwZGF0ZSwgZ2V0Q29ybmVyLCBnZXRIZWlnaHQsIGdldFdpZHRofSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgQ29ybmVyIGZyb20gJy4vZXh0ZW50L0Nvcm5lci5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9uLCBNRVRFUlNfUEVSX1VOSVR9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBEZWZhdWx0IHRpbGUgZ3JpZCBmb3IgdGhlXG4gKiBwYXNzZWQgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICB2YXIgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICBpZiAoIXRpbGVHcmlkKSB7XG4gICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHByb2plY3Rpb24uc2V0RGVmYXVsdFRpbGVHcmlkKHRpbGVHcmlkKTtcbiAgfVxuICByZXR1cm4gdGlsZUdyaWQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVHcmlkfSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKSB7XG4gIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICB2YXIgY2VudGVyID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGVDb29yZCk7XG4gIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgIHZhciB3b3JsZHNBd2F5ID0gTWF0aC5jZWlsKChwcm9qZWN0aW9uRXh0ZW50WzBdIC0gY2VudGVyWzBdKSAvIHdvcmxkV2lkdGgpO1xuICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICByZXR1cm4gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNlbnRlciwgeik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhab29tIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfdGlsZVNpemUgVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge0Nvcm5lcj19IG9wdF9jb3JuZXIgRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgdmFyIGNvcm5lciA9IG9wdF9jb3JuZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9jb3JuZXIgOiBDb3JuZXIuVE9QX0xFRlQ7XG5cbiAgdmFyIHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSk7XG5cbiAgcmV0dXJuIG5ldyBUaWxlR3JpZCh7XG4gICAgZXh0ZW50OiBleHRlbnQsXG4gICAgb3JpZ2luOiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpLFxuICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9ucyxcbiAgICB0aWxlU2l6ZTogb3B0X3RpbGVTaXplXG4gIH0pO1xufVxuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gWFlaT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gVGhlIG9yaWdpbiBmb3IgYW4gWFlaIHRpbGUgZ3JpZCBpcyB0aGVcbiAqIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LiBUaGUgemVybyBsZXZlbCBvZiB0aGUgZ3JpZCBpcyBkZWZpbmVkIGJ5IHRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIG9uZSB0aWxlIGZpdHMgaW4gdGhlXG4gKiBwcm92aWRlZCBleHRlbnQuIElmIG5vdCBwcm92aWRlZCwgdGhlIGV4dGVudCBvZiB0aGUgRVBTRzozODU3IHByb2plY3Rpb24gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIHRpbGUgZ3JpZCB3aXRoIGEgc3RhbmRhcmQgWFlaIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge1hZWk9wdGlvbnM9fSBvcHRfb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdF9vcHRpb25zKSB7XG4gIC8qKiBAdHlwZSB7WFlaT3B0aW9uc30gKi9cbiAgdmFyIHh5ek9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG5cbiAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLk9wdGlvbnN9ICovXG4gIHZhciBncmlkT3B0aW9ucyA9IHtcbiAgICBleHRlbnQ6IGV4dGVudCxcbiAgICBtaW5ab29tOiB4eXpPcHRpb25zLm1pblpvb20sXG4gICAgdGlsZVNpemU6IHh5ek9wdGlvbnMudGlsZVNpemUsXG4gICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zRnJvbUV4dGVudChcbiAgICAgIGV4dGVudCxcbiAgICAgIHh5ek9wdGlvbnMubWF4Wm9vbSxcbiAgICAgIHh5ek9wdGlvbnMudGlsZVNpemVcbiAgICApXG4gIH07XG4gIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcmVzb2x1dGlvbnMgYXJyYXkgZnJvbSBhbiBleHRlbnQuICBBIHpvb20gZmFjdG9yIG9mIDIgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4Wm9vbSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplPX0gb3B0X3RpbGVTaXplIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHJldHVybiB7IUFycmF5PG51bWJlcj59IFJlc29sdXRpb25zIGFycmF5LlxuICovXG5mdW5jdGlvbiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplKSB7XG4gIHZhciBtYXhab29tID0gb3B0X21heFpvb20gIT09IHVuZGVmaW5lZCA/XG4gICAgb3B0X21heFpvb20gOiBERUZBVUxUX01BWF9aT09NO1xuXG4gIHZhciBoZWlnaHQgPSBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgdmFyIHdpZHRoID0gZ2V0V2lkdGgoZXh0ZW50KTtcblxuICB2YXIgdGlsZVNpemUgPSB0b1NpemUob3B0X3RpbGVTaXplICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdF90aWxlU2l6ZSA6IERFRkFVTFRfVElMRV9TSVpFKTtcbiAgdmFyIG1heFJlc29sdXRpb24gPSBNYXRoLm1heChcbiAgICB3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG5cbiAgdmFyIGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICB2YXIgcmVzb2x1dGlvbnMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgZm9yICh2YXIgeiA9IDA7IHogPCBsZW5ndGg7ICsreikge1xuICAgIHJlc29sdXRpb25zW3pdID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KDIsIHopO1xuICB9XG4gIHJldHVybiByZXNvbHV0aW9ucztcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhab29tIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemU9fSBvcHRfdGlsZVNpemUgVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge0Nvcm5lcj19IG9wdF9jb3JuZXIgRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbiwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcikge1xuICB2YXIgZXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIHJldHVybiBjcmVhdGVGb3JFeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfY29ybmVyKTtcbn1cblxuXG4vKipcbiAqIEdlbmVyYXRlIGEgdGlsZSBncmlkIGV4dGVudCBmcm9tIGEgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGhhcyBhblxuICogZXh0ZW50LCBpdCBpcyB1c2VkLiAgSWYgbm90LCBhIGdsb2JhbCBleHRlbnQgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIHZhciBleHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICBpZiAoIWV4dGVudCkge1xuICAgIHZhciBoYWxmID0gMTgwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGUoLWhhbGYsIC1oYWxmLCBoYWxmLCBoYWxmKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxlZ3JpZC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVcbiAqL1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCB7ZXF1aXZhbGVudH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQge3RvU2l6ZSwgc2NhbGUgYXMgc2NhbGVTaXplfSBmcm9tICcuLi9zaXplLmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IHtnZXRLZXlaWFksIHdpdGhpbkV4dGVudEFuZFp9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQge3dyYXBYLCBnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbn0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVTb3VyY2UgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTb3VyY2UpIHtcbiAgZnVuY3Rpb24gVGlsZVNvdXJjZShvcHRpb25zKSB7XG5cbiAgICBTb3VyY2UuY2FsbCh0aGlzLCB7XG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3BhcXVlXyA9IG9wdGlvbnMub3BhcXVlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYXF1ZSA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGlsZVBpeGVsUmF0aW9fID0gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMudGlsZVBpeGVsUmF0aW8gOiAxO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50aWxlQ2FjaGUgPSBuZXcgVGlsZUNhY2hlKG9wdGlvbnMuY2FjaGVTaXplKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudG1wU2l6ZSA9IFswLCAwXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5PcHRpb25zfVxuICAgICAqL1xuICAgIHRoaXMudGlsZU9wdGlvbnMgPSB7dHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9ufTtcblxuICB9XG5cbiAgaWYgKCBTb3VyY2UgKSBUaWxlU291cmNlLl9fcHJvdG9fXyA9IFNvdXJjZTtcbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBTb3VyY2UgJiYgU291cmNlLnByb3RvdHlwZSApO1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRpbGVTb3VyY2U7XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uIGNhbkV4cGlyZUNhY2hlICgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiBleHBpcmVDYWNoZSAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAodGlsZUNhY2hlKSB7XG4gICAgICB0aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodXNlZFRpbGVzKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0KTooYm9vbGVhbnx2b2lkKX0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaFxuICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgKiAgICAgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGNvdmVyZWQgd2l0aCBsb2FkZWQgdGlsZXMuXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5mb3JFYWNoTG9hZGVkVGlsZSA9IGZ1bmN0aW9uIGZvckVhY2hMb2FkZWRUaWxlIChwcm9qZWN0aW9uLCB6LCB0aWxlUmFuZ2UsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAoIXRpbGVDYWNoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBjb3ZlcmVkID0gdHJ1ZTtcbiAgICB2YXIgdGlsZSwgdGlsZUNvb3JkS2V5LCBsb2FkZWQ7XG4gICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgbG9hZGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSkpO1xuICAgICAgICAgIGxvYWRlZCA9IHRpbGUuZ2V0U3RhdGUoKSA9PT0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICBsb2FkZWQgPSAoY2FsbGJhY2sodGlsZSkgIT09IGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvdmVyZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiAocHJvamVjdGlvbikge1xuICAgIHJldHVybiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uIGdldEtleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMua2V5XztcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgZm9yIHRpbGVzLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5zZXRLZXkgPSBmdW5jdGlvbiBzZXRLZXkgKGtleSkge1xuICAgIGlmICh0aGlzLmtleV8gIT09IGtleSkge1xuICAgICAgdGhpcy5rZXlfID0ga2V5O1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIGdldE9wYXF1ZSAocHJvamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLm9wYXF1ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uIGdldFJlc29sdXRpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlR3JpZC5nZXRSZXNvbHV0aW9ucygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiBnZXRUaWxlICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGlsZSBncmlkIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgKiBAYXBpXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZCA9IGZ1bmN0aW9uIGdldFRpbGVHcmlkICgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uJDEgKHByb2plY3Rpb24pIHtcbiAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBpZiAodGhpc1Byb2ogJiYgIWVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIHBpeGVsIHJhdGlvIGZvciB0aGlzIHNvdXJjZS4gU3ViY2xhc3NlcyBtYXkgb3ZlcnJpZGUgdGhpc1xuICAgKiBtZXRob2QsIHdoaWNoIGlzIG1lYW50IHRvIHJldHVybiBhIHN1cHBvcnRlZCBwaXhlbCByYXRpbyB0aGF0IG1hdGNoZXMgdGhlXG4gICAqIHByb3ZpZGVkIGBwaXhlbFJhdGlvYCBhcyBjbG9zZSBhcyBwb3NzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwaXhlbCByYXRpby5cbiAgICovXG4gIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFJhdGlvID0gZnVuY3Rpb24gZ2V0VGlsZVBpeGVsUmF0aW8gKHBpeGVsUmF0aW8pIHtcbiAgICByZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpb187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gVGlsZSBzaXplLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZVBpeGVsU2l6ZSA9IGZ1bmN0aW9uIGdldFRpbGVQaXhlbFNpemUgKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplKTtcbiAgICBpZiAodGlsZVBpeGVsUmF0aW8gPT0gMSkge1xuICAgICAgcmV0dXJuIHRpbGVTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2NhbGVTaXplKHRpbGVTaXplLCB0aWxlUGl4ZWxSYXRpbywgdGhpcy50bXBTaXplKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0aWxlIGNvb3JkaW5hdGUgd3JhcHBlZCBhcm91bmQgdGhlIHgtYXhpcy4gV2hlbiB0aGUgdGlsZSBjb29yZGluYXRlXG4gICAqIGlzIG91dHNpZGUgdGhlIHJlc29sdXRpb24gYW5kIGV4dGVudCByYW5nZSBvZiB0aGUgdGlsZSBncmlkLCBgbnVsbGAgd2lsbCBiZVxuICAgKiByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0PX0gb3B0X3Byb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlIHRvIGJlIHBhc3NlZCB0byB0aGUgdGlsZVVybEZ1bmN0aW9uIG9yXG4gICAqICAgICBudWxsIGlmIG5vIHRpbGUgVVJMIHNob3VsZCBiZSBjcmVhdGVkIGZvciB0aGUgcGFzc2VkIGB0aWxlQ29vcmRgLlxuICAgKi9cbiAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdF9wcm9qZWN0aW9uIDogdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgIHRpbGVDb29yZCA9IHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSA/IHRpbGVDb29yZCA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCAoKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqL1xuICBUaWxlU291cmNlLnByb3RvdHlwZS51c2VUaWxlID0gZnVuY3Rpb24gdXNlVGlsZSAoeiwgeCwgeSwgcHJvamVjdGlvbikge307XG5cbiAgcmV0dXJuIFRpbGVTb3VyY2U7XG59KFNvdXJjZSkpO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlU291cmNlfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG5leHBvcnQgdmFyIFRpbGVTb3VyY2VFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSB7XG5cbiAgICBFdmVudC5jYWxsKHRoaXMsIHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRpbGUgcmVsYXRlZCB0byB0aGUgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50aWxlID0gdGlsZTtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIFRpbGVTb3VyY2VFdmVudC5fX3Byb3RvX18gPSBFdmVudDtcbiAgVGlsZVNvdXJjZUV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBUaWxlU291cmNlRXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGlsZVNvdXJjZUV2ZW50O1xuXG4gIHJldHVybiBUaWxlU291cmNlRXZlbnQ7XG59KEV2ZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBzdGFydHMgbG9hZGluZy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBUSUxFTE9BRFNUQVJUOiAndGlsZWxvYWRzdGFydCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBmaW5pc2hlcyBsb2FkaW5nLCBlaXRoZXIgd2hlbiBpdHMgZGF0YSBpcyBsb2FkZWQsXG4gICAqIG9yIHdoZW4gbG9hZGluZyB3YXMgYWJvcnRlZCBiZWNhdXNlIHRoZSB0aWxlIGlzIG5vIGxvbmdlciBuZWVkZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2FkZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIFRJTEVMT0FERU5EOiAndGlsZWxvYWRlbmQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgaWYgdGlsZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2FkZXJyb3JcbiAgICogQGFwaVxuICAgKi9cbiAgVElMRUxPQURFUlJPUjogJ3RpbGVsb2FkZXJyb3InXG5cbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlSW1hZ2VcbiAqL1xuaW1wb3J0IHtFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTn0gZnJvbSAnLi4vcmVwcm9qL2NvbW1vbi5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgSW1hZ2VUaWxlIGZyb20gJy4uL0ltYWdlVGlsZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2VxdWl2YWxlbnQsIGdldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBVcmxUaWxlIGZyb20gJy4vVXJsVGlsZS5qcyc7XG5pbXBvcnQge2dldEtleSwgZ2V0S2V5WlhZfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHtnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbn0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemU9MjA0OF0gQ2FjaGUgc2l6ZS5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3UgYXJlIHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlciBvciBpZiB5b3Ugd2FudCB0b1xuICogYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLiAgU2VlXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9dHJ1ZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFNvdXJjZSBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7dHlwZW9mIGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSBbdGlsZUNsYXNzXSBDbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGltYWdlIHRpbGVzLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlVGlsZX5JbWFnZVRpbGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZVxuICogc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldCB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsIG1heSBiZVxuICogdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFhdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LiBUaGUgZGVmYXVsdCwgaXMgdG9cbiAqIHJlcXVlc3Qgb3V0LW9mLWJvdW5kcyB0aWxlcyBmcm9tIHRoZSBzZXJ2ZXIuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIG9ubHkgb25lXG4gKiB3b3JsZCB3aWxsIGJlIHJlbmRlcmVkLiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmVcbiAqIHdvcmxkIG9ubHksIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCB0aWxlIGtleSBmb3IgcHJvcGVyIGNhY2hlIGZldGNoaW5nXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVJbWFnZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFVybFRpbGUpIHtcbiAgZnVuY3Rpb24gVGlsZUltYWdlKG9wdGlvbnMpIHtcblxuICAgIFVybFRpbGUuY2FsbCh0aGlzLCB7XG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uID9cbiAgICAgICAgb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uIDogZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGVcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmNyb3NzT3JpZ2luID1cbiAgICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge3R5cGVvZiBJbWFnZVRpbGV9XG4gICAgICovXG4gICAgdGhpcy50aWxlQ2xhc3MgPSBvcHRpb25zLnRpbGVDbGFzcyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMudGlsZUNsYXNzIDogSW1hZ2VUaWxlO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgVGlsZUNhY2hlPn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfID0gb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSBmYWxzZTtcbiAgfVxuXG4gIGlmICggVXJsVGlsZSApIFRpbGVJbWFnZS5fX3Byb3RvX18gPSBVcmxUaWxlO1xuICBUaWxlSW1hZ2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVXJsVGlsZSAmJiBVcmxUaWxlLnByb3RvdHlwZSApO1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGlsZUltYWdlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uIGNhbkV4cGlyZUNhY2hlICgpIHtcbiAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICByZXR1cm4gVXJsVGlsZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25ba2V5XS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uIGV4cGlyZUNhY2hlIChwcm9qZWN0aW9uLCB1c2VkVGlsZXMpIHtcbiAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICBVcmxUaWxlLnByb3RvdHlwZS5leHBpcmVDYWNoZS5jYWxsKHRoaXMsIHByb2plY3Rpb24sIHVzZWRUaWxlcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuXG4gICAgdGhpcy50aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodGhpcy50aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIGdldEd1dHRlckZvclByb2plY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiYgcHJvamVjdGlvbiAmJiAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXIgPSBmdW5jdGlvbiBnZXRHdXR0ZXIgKCkge1xuICAgIHJldHVybiAwO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiBnZXRPcGFxdWUgKHByb2plY3Rpb24pIHtcbiAgICBpZiAoRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gJiZcbiAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiYgcHJvamVjdGlvbiAmJiAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFVybFRpbGUucHJvdG90eXBlLmdldE9wYXF1ZS5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uJDEgKHByb2plY3Rpb24pIHtcbiAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICByZXR1cm4gVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgfVxuICAgIHZhciB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9ICovICh0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSlcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiAocHJvamVjdGlvbikge1xuICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgIHJldHVybiBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgfVxuICAgIHZhciB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpOyBpZiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pKSB7XG4gICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IG5ldyBUaWxlQ2FjaGUodGhpcy50aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW3Byb2pLZXldO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IHNldCBvbiB0aGUgdGlsZS5cbiAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuY3JlYXRlVGlsZV8gPSBmdW5jdGlvbiBjcmVhdGVUaWxlXyAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KSB7XG4gICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICB2YXIgdXJsVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24oXG4gICAgICB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgIHZhciB0aWxlVXJsID0gdXJsVGlsZUNvb3JkID9cbiAgICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uKHVybFRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3MoXG4gICAgICB0aWxlQ29vcmQsXG4gICAgICB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSxcbiAgICAgIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IHRpbGVVcmwgOiAnJyxcbiAgICAgIHRoaXMuY3Jvc3NPcmlnaW4sXG4gICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICB0aGlzLnRpbGVPcHRpb25zKTtcbiAgICB0aWxlLmtleSA9IGtleTtcbiAgICBsaXN0ZW4odGlsZSwgRXZlbnRUeXBlLkNIQU5HRSxcbiAgICAgIHRoaXMuaGFuZGxlVGlsZUNoYW5nZSwgdGhpcyk7XG4gICAgcmV0dXJuIHRpbGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiBnZXRUaWxlICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICFzb3VyY2VQcm9qZWN0aW9uIHx8ICFwcm9qZWN0aW9uIHx8IGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICB2YXIgdGlsZUNvb3JkID0gW3osIHgsIHldO1xuICAgICAgdmFyIHRpbGU7XG4gICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5KHRpbGVDb29yZCk7XG4gICAgICBpZiAoY2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoY2FjaGUuZ2V0KHRpbGVDb29yZEtleSkpO1xuICAgICAgfVxuICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICBpZiAodGlsZSAmJiB0aWxlLmtleSA9PSBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgc291cmNlVGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRhcmdldFRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB3cmFwcGVkVGlsZUNvb3JkID1cbiAgICAgICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcHJvamVjdGlvbik7XG4gICAgICAgIHZhciBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoXG4gICAgICAgICAgc291cmNlUHJvamVjdGlvbiwgc291cmNlVGlsZUdyaWQsXG4gICAgICAgICAgcHJvamVjdGlvbiwgdGFyZ2V0VGlsZUdyaWQsXG4gICAgICAgICAgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pLFxuICAgICAgICAgIHRoaXMuZ2V0R3V0dGVyKCksXG4gICAgICAgICAgZnVuY3Rpb24oeiwgeCwgeSwgcGl4ZWxSYXRpbykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUludGVybmFsKHosIHgsIHksIHBpeGVsUmF0aW8sIHNvdXJjZVByb2plY3Rpb24pO1xuICAgICAgICAgIH0uYmluZCh0aGlzKSwgdGhpcy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZF8sXG4gICAgICAgICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18pO1xuICAgICAgICBuZXdUaWxlLmtleSA9IGtleTtcblxuICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgIG5ld1RpbGUuaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgIG5ld1RpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgICAgIGNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWNoZS5zZXQodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3VGlsZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGVJbnRlcm5hbCA9IGZ1bmN0aW9uIGdldFRpbGVJbnRlcm5hbCAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHZhciB0aWxlID0gbnVsbDtcbiAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgIHZhciBrZXkgPSB0aGlzLmdldEtleSgpO1xuICAgIGlmICghdGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgIHRoaXMudGlsZUNhY2hlLnNldCh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgIC8vIFRoZSBzb3VyY2UncyBwYXJhbXMgY2hhbmdlZC4gSWYgdGhlIHRpbGUgaGFzIGFuIGludGVyaW0gdGlsZSBhbmQgaWYgd2VcbiAgICAgICAgLy8gY2FuIHVzZSBpdCB0aGVuIHdlIHVzZSBpdC4gT3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyB0aWxlLiAgSW4gYm90aFxuICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICB2YXIgaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuXG4gICAgICAgIC8vbWFrZSB0aGUgbmV3IHRpbGUgdGhlIGhlYWQgb2YgdGhlIGxpc3QsXG4gICAgICAgIGlmIChpbnRlcmltVGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgLy90aGUgb2xkIHRpbGUgaGFzbid0IGJlZ3VuIGxvYWRpbmcgeWV0LCBhbmQgaXMgbm93IG91dGRhdGVkLCBzbyB3ZSBjYW4gc2ltcGx5IGRpc2NhcmQgaXRcbiAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IGludGVyaW1UaWxlO1xuICAgICAgICB9XG4gICAgICAgIHRpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5yZXBsYWNlKHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aWxlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgdG8gcmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcyBvciBub3QgKHVzdWFsbHkgZm9yIGRlYnVnZ2luZykuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgPSBmdW5jdGlvbiBzZXRSZW5kZXJSZXByb2plY3Rpb25FZGdlcyAocmVuZGVyKSB7XG4gICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9PSByZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSByZW5kZXI7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0aWxlIGdyaWQgdG8gdXNlIHdoZW4gcmVwcm9qZWN0aW5nIHRoZSB0aWxlcyB0byB0aGUgZ2l2ZW5cbiAgICogcHJvamVjdGlvbiBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IHRpbGUgZ3JpZCBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHRoZSBkZWZhdWx0IHRpbGUgZ3JpZCBjYW5ub3QgYmUgY3JlYXRlZFxuICAgKiAoZS5nLiBwcm9qZWN0aW9uIGhhcyBubyBleHRlbnQgZGVmaW5lZCkgb3JcbiAgICogZm9yIG9wdGltaXphdGlvbiByZWFzb25zIChjdXN0b20gdGlsZSBzaXplLCByZXNvbHV0aW9ucywgLi4uKS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZWdyaWQgVGlsZSBncmlkIHRvIHVzZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIChwcm9qZWN0aW9uLCB0aWxlZ3JpZCkge1xuICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgaWYgKHByb2opIHtcbiAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvaik7XG4gICAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPSB0aWxlZ3JpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVGlsZUltYWdlO1xufShVcmxUaWxlKSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChpbWFnZVRpbGUuZ2V0SW1hZ2UoKSkuc3JjID0gc3JjO1xufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlSW1hZ2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVJbWFnZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1hZWlxuICovXG5cbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHtjcmVhdGVYWVosIGV4dGVudEZyb21Qcm9qZWN0aW9ufSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZT0yMDQ4XSBDYWNoZSBzaXplLlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSBhcmUgdXNpbmcgdGhlIFdlYkdMIHJlbmRlcmVyIG9yIGlmIHlvdSB3YW50IHRvXG4gKiBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuICBTZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT10cnVlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MThdIE9wdGlvbmFsIG1heCB6b29tIGxldmVsLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE9wdGlvbmFsIG1pbiB6b29tIGxldmVsLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGUgc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaGUgdGlsZSBzaXplIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiB1cmwgb3IgdXJscyBhcmUgbm90IHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsXG4gKiBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLFxuICogbWF5IGJlIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBEdXJhdGlvbiBvZiB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uIGZvciByZW5kZXJpbmcuXG4gKiBUbyBkaXNhYmxlIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24sIHBhc3MgYHRyYW5zaXRpb246IDBgLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBzb3VyY2UgZm9yIHRpbGUgZGF0YSB3aXRoIFVSTHMgaW4gYSBzZXQgWFlaIGZvcm1hdCB0aGF0IGFyZVxuICogZGVmaW5lZCBpbiBhIFVSTCB0ZW1wbGF0ZS4gQnkgZGVmYXVsdCwgdGhpcyBmb2xsb3dzIHRoZSB3aWRlbHktdXNlZFxuICogR29vZ2xlIGdyaWQgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgdG9wIGxlZnQuIEdyaWRzIGxpa2VcbiAqIFRNUyB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSBib3R0b20gbGVmdCBjYW4gYmUgdXNlZCBieVxuICogdXNpbmcgdGhlIGB7LXl9YCBwbGFjZWhvbGRlciBpbiB0aGUgVVJMIHRlbXBsYXRlLCBzbyBsb25nIGFzIHRoZVxuICogc291cmNlIGRvZXMgbm90IGhhdmUgYSBjdXN0b20gdGlsZSBncmlkLiBJbiB0aGlzIGNhc2UsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlSW1hZ2V9IGNhbiBiZSB1c2VkIHdpdGggYSBgdGlsZVVybEZ1bmN0aW9uYFxuICogc3VjaCBhczpcbiAqXG4gKiAgdGlsZVVybEZ1bmN0aW9uOiBmdW5jdGlvbihjb29yZGluYXRlKSB7XG4gKiAgICByZXR1cm4gJ2h0dHA6Ly9tYXBzZXJ2ZXIuY29tLycgKyBjb29yZGluYXRlWzBdICsgJy8nICtcbiAqICAgICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgY29vcmRpbmF0ZVsyXSArICcucG5nJztcbiAqICAgIH1cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBYWVogPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChUaWxlSW1hZ2UpIHtcbiAgZnVuY3Rpb24gWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMucHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnO1xuXG4gICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlR3JpZCA6XG4gICAgICBjcmVhdGVYWVooe1xuICAgICAgICBleHRlbnQ6IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pLFxuICAgICAgICBtYXhab29tOiBvcHRpb25zLm1heFpvb20sXG4gICAgICAgIG1pblpvb206IG9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemVcbiAgICAgIH0pO1xuXG4gICAgVGlsZUltYWdlLmNhbGwodGhpcywge1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICBjcm9zc09yaWdpbjogb3B0aW9ucy5jcm9zc09yaWdpbixcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICB0aWxlR3JpZDogdGlsZUdyaWQsXG4gICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiB0cnVlLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGVcbiAgICB9KTtcblxuICB9XG5cbiAgaWYgKCBUaWxlSW1hZ2UgKSBYWVouX19wcm90b19fID0gVGlsZUltYWdlO1xuICBYWVoucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggVGlsZUltYWdlICYmIFRpbGVJbWFnZS5wcm90b3R5cGUgKTtcbiAgWFlaLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFhZWjtcblxuICByZXR1cm4gWFlaO1xufShUaWxlSW1hZ2UpKTtcblxuZXhwb3J0IGRlZmF1bHQgWFlaO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1YWVouanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9VcmxUaWxlXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7ZXhwYW5kVXJsLCBjcmVhdGVGcm9tVGVtcGxhdGVzLCBudWxsVGlsZVVybEZ1bmN0aW9ufSBmcm9tICcuLi90aWxldXJsZnVuY3Rpb24uanMnO1xuaW1wb3J0IFRpbGVTb3VyY2UsIHtUaWxlU291cmNlRXZlbnR9IGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZUV2ZW50VHlwZSBmcm9tICcuL1RpbGVFdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRLZXlaWFl9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWVdXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV1cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb11cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXVxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV1cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG52YXIgVXJsVGlsZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFRpbGVTb3VyY2UpIHtcbiAgZnVuY3Rpb24gVXJsVGlsZShvcHRpb25zKSB7XG5cbiAgICBUaWxlU291cmNlLmNhbGwodGhpcywge1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGVcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8gPSAhb3B0aW9ucy50aWxlVXJsRnVuY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVVcmxGdW5jdGlvbiA9IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uID8gb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24uYmluZCh0aGlzKSA6IG51bGxUaWxlVXJsRnVuY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFBcnJheTxzdHJpbmc+fG51bGx9XG4gICAgICovXG4gICAgdGhpcy51cmxzID0gbnVsbDtcblxuICAgIGlmIChvcHRpb25zLnVybHMpIHtcbiAgICAgIHRoaXMuc2V0VXJscyhvcHRpb25zLnVybHMpO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgIHRoaXMuc2V0VXJsKG9wdGlvbnMudXJsKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50aWxlVXJsRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLCB0aGlzLmtleV8pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVMb2FkaW5nS2V5c18gPSB7fTtcblxuICB9XG5cbiAgaWYgKCBUaWxlU291cmNlICkgVXJsVGlsZS5fX3Byb3RvX18gPSBUaWxlU291cmNlO1xuICBVcmxUaWxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFRpbGVTb3VyY2UgJiYgVGlsZVNvdXJjZS5wcm90b3R5cGUgKTtcbiAgVXJsVGlsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBVcmxUaWxlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gVGlsZUxvYWRGdW5jdGlvblxuICAgKiBAYXBpXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZUxvYWRGdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUxvYWRGdW5jdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlVXJsRnVuY3Rpb25cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0VGlsZVVybEZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlVXJsRnVuY3Rpb247XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgVVJMcyB1c2VkIGZvciB0aGlzIHNvdXJjZS5cbiAgICogV2hlbiBhIHRpbGVVcmxGdW5jdGlvbiBpcyB1c2VkIGluc3RlYWQgb2YgdXJsIG9yIHVybHMsXG4gICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAgICogQHJldHVybiB7IUFycmF5PHN0cmluZz58bnVsbH0gVVJMcy5cbiAgICogQGFwaVxuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VXJscyA9IGZ1bmN0aW9uIGdldFVybHMgKCkge1xuICAgIHJldHVybiB0aGlzLnVybHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aWxlIGNoYW5nZSBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlVGlsZUNoYW5nZSAoZXZlbnQpIHtcbiAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICB2YXIgdWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgIHZhciB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgdmFyIHR5cGU7XG4gICAgaWYgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF0gPSB0cnVlO1xuICAgICAgdHlwZSA9IFRpbGVFdmVudFR5cGUuVElMRUxPQURTVEFSVDtcbiAgICB9IGVsc2UgaWYgKHVpZCBpbiB0aGlzLnRpbGVMb2FkaW5nS2V5c18pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnRpbGVMb2FkaW5nS2V5c19bdWlkXTtcbiAgICAgIHR5cGUgPSB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SID8gVGlsZUV2ZW50VHlwZS5USUxFTE9BREVSUk9SIDpcbiAgICAgICAgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuQUJPUlQpID9cbiAgICAgICAgICBUaWxlRXZlbnRUeXBlLlRJTEVMT0FERU5EIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVGlsZVNvdXJjZUV2ZW50KHR5cGUsIHRpbGUpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gc2V0VGlsZUxvYWRGdW5jdGlvbiAodGlsZUxvYWRGdW5jdGlvbikge1xuICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IHRpbGVVcmxGdW5jdGlvbiBUaWxlIFVSTCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBrZXkgT3B0aW9uYWwgbmV3IHRpbGUga2V5IGZvciB0aGUgc291cmNlLlxuICAgKiBAYXBpXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiBzZXRUaWxlVXJsRnVuY3Rpb24gKHRpbGVVcmxGdW5jdGlvbiwga2V5KSB7XG4gICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgdGhpcy50aWxlQ2FjaGUucHJ1bmVFeGNlcHROZXdlc3RaKCk7XG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgVVJMIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICAgKiBAYXBpXG4gICAqL1xuICBVcmxUaWxlLnByb3RvdHlwZS5zZXRVcmwgPSBmdW5jdGlvbiBzZXRVcmwgKHVybCkge1xuICAgIHZhciB1cmxzID0gdGhpcy51cmxzID0gZXhwYW5kVXJsKHVybCk7XG4gICAgdGhpcy5zZXRVcmxzKHVybHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIFVSTHMgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB1cmxzIFVSTHMuXG4gICAqIEBhcGlcbiAgICovXG4gIFVybFRpbGUucHJvdG90eXBlLnNldFVybHMgPSBmdW5jdGlvbiBzZXRVcmxzICh1cmxzKSB7XG4gICAgdGhpcy51cmxzID0gdXJscztcbiAgICB2YXIga2V5ID0gdXJscy5qb2luKCdcXG4nKTtcbiAgICBpZiAodGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8pIHtcbiAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKGNyZWF0ZUZyb21UZW1wbGF0ZXModXJscywgdGhpcy50aWxlR3JpZCksIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVXJsVGlsZS5wcm90b3R5cGUudXNlVGlsZSA9IGZ1bmN0aW9uIHVzZVRpbGUgKHosIHgsIHkpIHtcbiAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICB0aGlzLnRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFVybFRpbGU7XG59KFRpbGVTb3VyY2UpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1VcmxUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL01vdXNlUG9zaXRpb25cbiAqL1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRDaGFuZ2VFdmVudFR5cGV9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IHtnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGlkZW50aXR5VHJhbnNmb3JtLCBnZXQgYXMgZ2V0UHJvamVjdGlvbn0gZnJvbSAnLi4vcHJvai5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgUFJPSkVDVElPTiA9ICdwcm9qZWN0aW9uJztcblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgQ09PUkRJTkFURV9GT1JNQVQgPSAnY29vcmRpbmF0ZUZvcm1hdCc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbW91c2UtcG9zaXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fSBbY29vcmRpbmF0ZUZvcm1hdF0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGVcbiAqIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZVxuICogY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdW5kZWZpbmVkSFRNTD0nJiMxNjA7J10gTWFya3VwIHRvIHNob3cgd2hlbiBjb29yZGluYXRlcyBhcmUgbm90XG4gKiBhdmFpbGFibGUgKGUuZy4gd2hlbiB0aGUgcG9pbnRlciBsZWF2ZXMgdGhlIG1hcCB2aWV3cG9ydCkuICBCeSBkZWZhdWx0LCB0aGUgbGFzdCBwb3NpdGlvblxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIGAnJiMxNjA7J2AgKGAmbmJzcDtgKSB3aGVuIHRoZSBwb2ludGVyIGxlYXZlcyB0aGUgdmlld3BvcnQuICBUb1xuICogcmV0YWluIHRoZSBsYXN0IHJlbmRlcmVkIHBvc2l0aW9uLCBzZXQgdGhpcyBvcHRpb24gdG8gc29tZXRoaW5nIGZhbHNleSAobGlrZSBhbiBlbXB0eVxuICogc3RyaW5nIGAnJ2ApLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgdG8gc2hvdyB0aGUgMkQgY29vcmRpbmF0ZXMgb2YgdGhlIG1vdXNlIGN1cnNvci4gQnkgZGVmYXVsdCwgdGhlc2VcbiAqIGFyZSBpbiB0aGUgdmlldyBwcm9qZWN0aW9uLCBidXQgY2FuIGJlIGluIGFueSBzdXBwb3J0ZWQgcHJvamVjdGlvbi5cbiAqIEJ5IGRlZmF1bHQgdGhlIGNvbnRyb2wgaXMgc2hvd24gaW4gdGhlIHRvcCByaWdodCBjb3JuZXIgb2YgdGhlIG1hcCwgYnV0IHRoaXNcbiAqIGNhbiBiZSBjaGFuZ2VkIGJ5IHVzaW5nIHRoZSBjc3Mgc2VsZWN0b3IgYC5vbC1tb3VzZS1wb3NpdGlvbmAuXG4gKlxuICogT24gdG91Y2ggZGV2aWNlcywgd2hpY2ggdXN1YWxseSBkbyBub3QgaGF2ZSBhIG1vdXNlIGN1cnNvciwgdGhlIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgY3VycmVudGx5IHRvdWNoZWQgcG9zaXRpb24gYXJlIHNob3duLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIE1vdXNlUG9zaXRpb24gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChDb250cm9sKSB7XG4gIGZ1bmN0aW9uIE1vdXNlUG9zaXRpb24ob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1tb3VzZS1wb3NpdGlvbic7XG5cbiAgICBDb250cm9sLmNhbGwodGhpcywge1xuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIgfHwgcmVuZGVyLFxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldFxuICAgIH0pO1xuXG4gICAgbGlzdGVuKHRoaXMsXG4gICAgICBnZXRDaGFuZ2VFdmVudFR5cGUoUFJPSkVDVElPTiksXG4gICAgICB0aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXywgdGhpcyk7XG5cbiAgICBpZiAob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICB0aGlzLnNldENvb3JkaW5hdGVGb3JtYXQob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMudW5kZWZpbmVkSFRNTF8gPSBvcHRpb25zLnVuZGVmaW5lZEhUTUwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudW5kZWZpbmVkSFRNTCA6ICcmIzE2MDsnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlck9uTW91c2VPdXRfID0gISF0aGlzLnVuZGVmaW5lZEhUTUxfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tYXBQcm9qZWN0aW9uXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zZm9ybV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICovXG4gICAgdGhpcy5sYXN0TW91c2VNb3ZlUGl4ZWxfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBDb250cm9sICkgTW91c2VQb3NpdGlvbi5fX3Byb3RvX18gPSBDb250cm9sO1xuICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbnRyb2wgJiYgQ29udHJvbC5wcm90b3R5cGUgKTtcbiAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3VzZVBvc2l0aW9uO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfICgpIHtcbiAgICB0aGlzLnRyYW5zZm9ybV8gPSBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24gb3JcbiAgICogdW5kZWZpbmVkLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVGb3JtYXQgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlRm9ybWF0ICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoQ09PUkRJTkFURV9GT1JNQVQpKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICogICAgIHBvc2l0aW9uIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gZ2V0UHJvamVjdGlvbiAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUFJPSkVDVElPTikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQnJvd3NlciBldmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlIChldmVudCkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHRoaXMubGFzdE1vdXNlTW92ZVBpeGVsXyA9IG1hcC5nZXRFdmVudFBpeGVsKGV2ZW50KTtcbiAgICB0aGlzLnVwZGF0ZUhUTUxfKHRoaXMubGFzdE1vdXNlTW92ZVBpeGVsXyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlT3V0ID0gZnVuY3Rpb24gaGFuZGxlTW91c2VPdXQgKGV2ZW50KSB7XG4gICAgdGhpcy51cGRhdGVIVE1MXyhudWxsKTtcbiAgICB0aGlzLmxhc3RNb3VzZU1vdmVQaXhlbF8gPSBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAgKG1hcCkge1xuICAgIENvbnRyb2wucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG4gICAgaWYgKG1hcCkge1xuICAgICAgdmFyIHZpZXdwb3J0ID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKFxuICAgICAgICBsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5NT1VTRU1PVkUsIHRoaXMuaGFuZGxlTW91c2VNb3ZlLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKHZpZXdwb3J0LCBFdmVudFR5cGUuVE9VQ0hTVEFSVCwgdGhpcy5oYW5kbGVNb3VzZU1vdmUsIHRoaXMpXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMucmVuZGVyT25Nb3VzZU91dF8pIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChcbiAgICAgICAgICBsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5NT1VTRU9VVCwgdGhpcy5oYW5kbGVNb3VzZU91dCwgdGhpcyksXG4gICAgICAgICAgbGlzdGVuKHZpZXdwb3J0LCBFdmVudFR5cGUuVE9VQ0hFTkQsIHRoaXMuaGFuZGxlTW91c2VPdXQsIHRoaXMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fSBmb3JtYXQgVGhlIGZvcm1hdCB0byByZW5kZXIgdGhlIGN1cnJlbnRcbiAgICogICAgIHBvc2l0aW9uIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gc2V0Q29vcmRpbmF0ZUZvcm1hdCAoZm9ybWF0KSB7XG4gICAgdGhpcy5zZXQoQ09PUkRJTkFURV9GT1JNQVQsIGZvcm1hdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIHJlcG9ydCBtb3VzZVxuICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldFByb2plY3Rpb24gPSBmdW5jdGlvbiBzZXRQcm9qZWN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgdGhpcy5zZXQoUFJPSkVDVElPTiwgZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnVwZGF0ZUhUTUxfID0gZnVuY3Rpb24gdXBkYXRlSFRNTF8gKHBpeGVsKSB7XG4gICAgdmFyIGh0bWwgPSB0aGlzLnVuZGVmaW5lZEhUTUxfO1xuICAgIGlmIChwaXhlbCAmJiB0aGlzLm1hcFByb2plY3Rpb25fKSB7XG4gICAgICBpZiAoIXRoaXMudHJhbnNmb3JtXykge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAocHJvamVjdGlvbikge1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhcbiAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8sIHByb2plY3Rpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGlkZW50aXR5VHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgIHZhciBjb29yZGluYXRlID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuICAgICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1fKGNvb3JkaW5hdGUsIGNvb3JkaW5hdGUpO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZUZvcm1hdCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZvcm1hdCgpO1xuICAgICAgICBpZiAoY29vcmRpbmF0ZUZvcm1hdCkge1xuICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlRm9ybWF0KGNvb3JkaW5hdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkSFRNTF8gfHwgaHRtbCAhPT0gdGhpcy5yZW5kZXJlZEhUTUxfKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGh0bWw7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBNb3VzZVBvc2l0aW9uO1xufShDb250cm9sKSk7XG5cblxuLyoqXG4gKiBVcGRhdGUgdGhlIHByb2plY3Rpb24uIFJlbmRlcmluZyBvZiB0aGUgY29vcmRpbmF0ZXMgaXMgZG9uZSBpblxuICogYGhhbmRsZU1vdXNlTW92ZWAgYW5kIGBoYW5kbGVNb3VzZVVwYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICogQHRoaXMge01vdXNlUG9zaXRpb259XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIobWFwRXZlbnQpIHtcbiAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy5tYXBQcm9qZWN0aW9uXyAhPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSB7XG4gICAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgTW91c2VQb3NpdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VQb3NpdGlvbi5qcy5tYXAiLCJpbXBvcnQgTWFwIGZyb20gJ29sL01hcCc7XHJcbmltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnO1xyXG5pbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUnO1xyXG5pbXBvcnQgWFlaIGZyb20gJ29sL3NvdXJjZS9YWVonO1xyXG5pbXBvcnQge2Zyb21Mb25MYXR9IGZyb20gJ29sL3Byb2onO1xyXG5pbXBvcnQge2RlZmF1bHRzIGFzIGRlZmF1bHRDb250cm9sc30gZnJvbSAnb2wvY29udHJvbCc7XHJcbmltcG9ydCBNb3VzZVBvc2l0aW9uIGZyb20gJ29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbic7XHJcbmltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xyXG5pbXBvcnQgTWFwVG9vbCBmcm9tICcuL3V0aWxzL21hcHRvb2wnO1xyXG5cclxuY29uc3QgbW91c2VQb3NpdGlvbkNvbnRyb2wgPSBuZXcgTW91c2VQb3NpdGlvbih7XHJcbiAgICBjb29yZGluYXRlRm9ybWF0OiBjcmVhdGVTdHJpbmdYWSg0KSxcclxuICAgIHByb2plY3Rpb246ICdFUFNHOjQzMjYnLFxyXG4gICAgLy8gY29tbWVudCB0aGUgZm9sbG93aW5nIHR3byBsaW5lcyB0byBoYXZlIHRoZSBtb3VzZSBwb3NpdGlvblxyXG4gICAgLy8gYmUgcGxhY2VkIHdpdGhpbiB0aGUgbWFwLlxyXG4gICAgY2xhc3NOYW1lOiAnY3VzdG9tLW1vdXNlLXBvc2l0aW9uJyxcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vdXNlLXBvc2l0aW9uJyksXHJcbiAgICB1bmRlZmluZWRIVE1MOiAnJm5ic3A7JyxcclxufSk7XHJcblxyXG5jb25zdCBwcm9qZWN0aW9uU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3Rpb24nKTtcclxucHJvamVjdGlvblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgbW91c2VQb3NpdGlvbkNvbnRyb2wuc2V0UHJvamVjdGlvbihldmVudC50YXJnZXQpO1xyXG59KTtcclxuXHJcbmNvbnN0IHByZWNpc2lvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWNpc2lvbicpO1xyXG5wcmVjaXNpb25JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgY29uc3QgZm9ybWF0ID0gY3JlYXRlU3RyaW5nWFkoZXZlbnQudGFyZ2V0KTtcclxuICAgIG1vdXNlUG9zaXRpb25Db250cm9sLnNldENvb3JkaW5hdGVGb3JtYXQoZm9ybWF0KTtcclxufSk7XHJcblxyXG5cclxuY29uc3QgbWFwZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcGRpdicpO1xyXG5jb25zdCBtYXAgPSBuZXcgTWFwKHtcclxuICAgIGNvbnRyb2xzOiBkZWZhdWx0Q29udHJvbHMoKS5leHRlbmQoW21vdXNlUG9zaXRpb25Db250cm9sXSksXHJcbiAgICB0YXJnZXQ6ICdtYXBkaXYnLFxyXG4gICAgbGF5ZXJzOiBbXHJcbiAgICAgICAgbmV3IFRpbGVMYXllcih7XHJcbiAgICAgICAgICAgIHNvdXJjZTogbmV3IFhZWih7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbWFwZGF0YS97en0ve3h9L3t5fS5wbmcnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9KSxcclxuICAgIF0sXHJcbiAgICB2aWV3OiBuZXcgVmlldyh7XHJcbiAgICAgICAgY2VudGVyOiBmcm9tTG9uTGF0KFsxMjAsIDMwXSksXHJcbiAgICAgICAgem9vbTogMTAsXHJcbiAgICAgICAgbWluWm9tOiA3LFxyXG4gICAgfSksXHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9